{"version":3,"sources":["containers/VideoEditor/VideoEditor.module.css","containers/Toolbar/TextToolbar/TextToolbar.module.css","containers/Canvas/PlayerCanvas/PlayerCanvas.module.css","containers/Toolbar/VideoToolbar/VideoDropdowns/VideoDropdowns.module.css","containers/Canvas/CropCanvas/CropCanvas.module.css","containers/Homepage/Homepage.module.css","containers/CustomPlayer/CustomPlayer.module.css","containers/CustomPlayer/Controls/Time/Time.module.css","containers/Navigation/DesignControls/DesignControls.module.css","containers/Toolbar/StrokeWidthDropdown/StrokeWidthDropdown.module.css","containers/Editor/Editor.module.css","containers/Uploader/Uploader.module.css","containers/Toolbar/Toolbar.module.css","containers/Homepage/Templates/Templates.module.css","components/Backdrop/Backdrop.module.css","containers/Video/Video.module.css","containers/Canvas/SpeakersCanvas/SpeakersCanvas.module.css","containers/Download/Download.module.css","containers/Auth/Button/Button.module.css","containers/Auth/Token/Token.module.css","containers/CustomPlayer/Controls/Time/TimelineSlider/TimelineSlider.module.css","containers/CustomPlayer/Controls/Volume/VolumeSlider/VolumeSlider.module.css","containers/Toolbar/VideoToolbar/VideoToolbar.module.css","containers/Toolbar/TextDropdowns/TextAlignDropdown/TextAlignDropdown.module.css","containers/Toolbar/ShapeToolbar/ShapeToolbar.module.css","containers/CanvasToolbar/CanvasToolbar.module.css","containers/SelectSpeakers/SelectSpeakers.module.css","containers/CanvasToolbar/TemplatesDropdown/TemplatesDropdown.module.css","containers/Homepage/Templates/Webinar/Webinar.module.css","components/Navbar/Navbar.module.css","containers/Preview/Preview.module.css","containers/Uploader/DragDrop/DragDrop.module.css","assets/editor/templates.svg","assets/editor/upload.svg","containers/Uploader/DragDrop/DragDrop.js","components/Progress/Progress.js","axios-instance.js","hooks/useUploadVideo.js","assets/editor/backArrow.svg","assets/preview/twiso.svg","components/Navbar/Navbar.js","containers/Uploader/Uploader.js","assets/editor/cut.svg","assets/editor/search.svg","containers/Transcription/utils/updateTextAndCuts.js","assets/editor/restoreText.svg","contexts/EditorContext.js","containers/Transcription/Words/Words.js","utils/findIndex.js","containers/Transcription/TranscriptionProgress/TranscriptionProgress.js","containers/Transcription/Transcription.js","containers/Canvas/utils/addObject.js","containers/Canvas/hooks/useAddObject.js","contexts/EventContext.js","containers/Canvas/utils/onCanvasEvents.js","containers/Canvas/hooks/useSelectionObserver.js","containers/Canvas/utils/aligningGuidelines.js","containers/Canvas/utils/centeringGuidelines.js","containers/Canvas/hooks/useGuideLines.js","containers/Canvas/utils/updateObject.js","containers/Canvas/hooks/useUpdateObject.js","containers/Canvas/utils/updateCanvas.js","containers/Canvas/hooks/useUpdateCanvas.js","containers/Canvas/hooks/useAddCanvas.js","containers/Canvas/hooks/useAddSpeakers.js","containers/Canvas/utils/pasteObject.js","containers/Canvas/hooks/useKeyEvents.js","containers/Canvas/hooks/useClickListener.js","assets/editor/downArrow.svg","assets/editor/bold.svg","assets/editor/subBackground.svg","assets/editor/italic.svg","assets/editor/textLeft.svg","assets/editor/textRight.svg","assets/editor/textCenter.svg","assets/editor/textJustify.svg","containers/Toolbar/TextDropdowns/FontsDropdown/fontsData.js","containers/Toolbar/TextDropdowns/FontsDropdown/FontsDropdown.js","containers/Toolbar/TextDropdowns/FontSizeDropdown/FontSizeDropdown.js","containers/Toolbar/TextDropdowns/TextAlignDropdown/TextAlignDropdown.js","containers/Toolbar/TextDropdowns/TextDropdowns.js","containers/Toolbar/TextToolbar/utils/handlers.js","containers/Toolbar/TextToolbar/TextToolbar.js","assets/editor/cornerRadius.svg","containers/Toolbar/StrokeWidthDropdown/StrokeWidthDropdown.js","containers/Toolbar/ShapeDropdowns/ShapeDropdowns.js","containers/Toolbar/ShapeToolbar/utils/handlers.js","containers/Toolbar/ShapeToolbar/ShapeToolbar.js","assets/editor/replaceImage.svg","assets/editor/cropImage.svg","containers/Toolbar/ImageToolbar/ImageToolbar.js","containers/Toolbar/VideoToolbar/utils/handlers.js","containers/Toolbar/VideoToolbar/VideoDropdowns/VideoDropdowns.js","containers/Toolbar/VideoToolbar/VideoToolbar.js","containers/Toolbar/Toolbar.js","containers/Toolbar/utils/toolbarPosition.js","containers/Canvas/ContextMenu/ContextMenu.js","containers/Canvas/hooks/useAnimate.js","containers/Canvas/utils/box.js","containers/Canvas/utils/mediaCrop.js","containers/Canvas/utils/restrict.js","containers/Canvas/hooks/useCropMedia.js","containers/Canvas/CropCanvas/hooks/useAddCanvas.js","containers/Canvas/CropCanvas/hooks/useUpdateCanvas.js","containers/Canvas/CropCanvas/CropCanvas.js","utils/cacheAssets.js","utils/canvasUtils.js","containers/Canvas/utils/template.js","containers/Canvas/hooks/useLoadTemplate.js","containers/Canvas/PlayerCanvas/PlayerCanvas.js","hooks/useEventsState.js","containers/CanvasToolbar/ResizeDropdown/ResizeDropdown.js","hooks/useDeleteTemplate.js","components/Spinner2/Spinner.js","containers/CanvasToolbar/TemplatesDropdown/TemplatesDropdown.js","components/Backdrop/Backdrop.js","assets/editor/resize.svg","webpack:///./src/assets/editor/cropImage.svg?0773","assets/editor/subtitlesOn.svg","hooks/useGetTemplates.js","hooks/useCreateTemplate.js","containers/CanvasToolbar/hooks/useSaveTemplate.js","containers/CanvasToolbar/CanvasToolbar.js","assets/editor/play.svg","assets/editor/pause.svg","containers/Player/hooks/useContainerSize.js","containers/Player/utils/getSize.js","containers/Player/hooks/usePlayerTime.js","containers/Player/utils/linkedList.js","containers/Player/hooks/useSubtitles.js","containers/Player/utils/subtitle.js","containers/Player/utils/generateSubtitles.js","containers/Player/Player.js","containers/Video/Video.js","containers/Video/utils/videoEvents.js","containers/Navigation/utils/prepareCanvas.js","utils/generateRandomUUID.js","containers/Navigation/utils/rgbaToHex.js","containers/Navigation/utils/prepareBreaksAndSubs.js","hooks/useUploadAsset.js","containers/Navigation/ImageDropdown/ImageDropdown.js","assets/editor/square.svg","assets/editor/circle.svg","assets/editor/triangle.svg","assets/editor/line.svg","containers/Navigation/ShapeDropdown/ShapeDropdown.js","assets/editor/subtitlesOff.svg","fabricConfig/rectCropBox.js","containers/Navigation/SubtitlesDropdown/SubtitlesDropdown.js","assets/editor/addText.svg","assets/editor/addImage.svg","assets/editor/addShape.svg","assets/editor/subtitles.svg","containers/Navigation/DesignControls/DesignControls.js","hooks/useGetAssets.js","containers/Navigation/Navigation.js","hooks/useEditorState.js","hooks/useGetVideo.js","hooks/useUpdateProject.js","hooks/useDownloadVideo.js","containers/VideoEditor/hooks/useCanvasUpdate.js","containers/VideoEditor/hooks/useWordsUpdate.js","containers/VideoEditor/hooks/useCheckTranscription.js","containers/VideoEditor/VideoEditor.js","components/CustomRoute/CustomRoute.js","assets/editor/addSpeaker.svg","assets/editor/removeSpeaker.svg","containers/Canvas/SpeakersCanvas/hooks/useAddCanvas.js","containers/Canvas/SpeakersCanvas/hooks/useAddVideo.js","containers/Canvas/SpeakersCanvas/hooks/useUpdateCanvas.js","containers/Canvas/SpeakersCanvas/utils/updateCanvas.js","contexts/SpeakersContext.js","containers/Canvas/hooks/useCropSpeakers.js","containers/Canvas/utils/speakerCrop.js","containers/Canvas/SpeakersCanvas/SpeakersCanvas.js","hooks/useSpeakersState.js","containers/SelectSpeakers/hooks/useContainerSize.js","containers/SelectSpeakers/utils/getSize.js","containers/SelectSpeakers/SelectSpeakers.js","hooks/useGetDownloadProgress.js","containers/Download/hooks/useCheckDownloadPorgress.js","containers/Download/Download.js","containers/Editor/Editor.js","assets/auth/saly.png","assets/twiso.svg","assets/auth/google.svg","containers/Auth/Button/Button.js","containers/Auth/Or/Or.js","containers/Auth/Input/Input.js","assets/auth/mail.svg","containers/Auth/CheckMail/CheckMail.js","containers/Auth/utils/validation.js","hooks/useMagicLink.js","containers/Auth/SignIn/SignIn.js","assets/auth/downArrow.svg","assets/auth/checkMark.svg","containers/Auth/Select/Dropdown/Dropdown.js","containers/Auth/Select/Select.js","containers/Auth/SignUp/SignUp.js","containers/Auth/Token/Token.js","utils/setAuthToken.js","hooks/useRefreshToken.js","contexts/UserContext.js","containers/Auth/Auth.js","assets/homepage/dot.svg","containers/Homepage/SideDrawer/User/User.js","assets/homepage/templates.svg","assets/homepage/projects.svg","assets/homepage/settings.svg","containers/Homepage/SideDrawer/SideDrawer.js","containers/Homepage/Navbar/Navbar.js","assets/preview/trash.svg","hooks/useDeleteVideo.js","containers/Homepage/Projects/Project/Project.js","containers/Homepage/Projects/Projects.js","assets/homepage/pic1.png","assets/homepage/pic2.png","assets/homepage/pic3.png","assets/homepage/pic4.png","assets/homepage/pic5.png","assets/homepage/pic6.png","containers/Homepage/Templates/Webinar/Webinar.js","containers/Homepage/Templates/Templates.js","hooks/useGetVideos.js","containers/Homepage/Homepage.js","hooks/useUserState.js","hooks/useTrackTime.js","assets/preview/exportArrow.svg","assets/preview/copyLink.svg","assets/preview/play.svg","assets/preview/pause.svg","assets/preview/fullScreen.svg","containers/CustomPlayer/Controls/utils/fullScreen.js","containers/CustomPlayer/Controls/utils/slider.js","containers/CustomPlayer/Controls/Time/TimelineSlider/TimelineSlider.js","containers/CustomPlayer/Controls/Time/Time.js","assets/preview/volume.svg","containers/CustomPlayer/Controls/Volume/VolumeSlider/VolumeSlider.js","containers/CustomPlayer/Controls/Volume/Volume.js","containers/CustomPlayer/Controls/hooks/useSingleAndDoubleClick.js","containers/CustomPlayer/Controls/hooks/useShowHidePanel.js","containers/CustomPlayer/Controls/hooks/useKeyEvents.js","containers/CustomPlayer/Controls/Controls.js","containers/CustomPlayer/CustomPlayer.js","hooks/useGetPublicVideo.js","hooks/useCheckAuth.js","containers/Preview/Preview.js","containers/Preview/utils/previewUtils.js","fabricConfig/video.js","fabricConfig/speakerCropBox.js","fabricConfig/circleCropBox.js","assets/editor/ctrlScale.svg","assets/editor/ctrlStretch.svg","assets/editor/ctrlRotate.svg","fabricConfig/controls.js","fabricConfig/customTextbox.js","fabricConfig/subtitles.js","fabricConfig/customImage.js","App.js","reportWebVitals.js","index.js","containers/Transcription/Words/Words.module.css","containers/Navigation/ImageDropdown/ImageDropdown.module.css","containers/Homepage/SideDrawer/SideDrawer.module.css","containers/Navigation/ShapeDropdown/ShapeDropdown.module.css","containers/Toolbar/TextDropdowns/FontSizeDropdown/FontSizeDropdown.module.css","containers/Navigation/SubtitlesDropdown/SubtitlesDropdown.module.css","containers/Auth/Auth.module.css","containers/Toolbar/TextDropdowns/FontsDropdown/FontsDropdown.module.css","containers/Toolbar/ImageToolbar/ImageToolbar.module.css","containers/Canvas/ContextMenu/ContextMenu.module.css","containers/Auth/SignIn/SignIn.module.css","containers/Auth/SignUp/SignUp.module.css","containers/Homepage/Projects/Projects.module.css","containers/Homepage/Projects/Project/Project.module.css","containers/Transcription/Transcription.module.css","containers/CustomPlayer/Controls/Controls.module.css","components/Progress/Progress.module.css","containers/CanvasToolbar/ResizeDropdown/ResizeDropdown.module.css","containers/Auth/Select/Select.module.css","containers/Homepage/SideDrawer/User/User.module.css","containers/Transcription/TranscriptionProgress/TranscriptionProgress.module.css","containers/Toolbar/TextDropdowns/TextDropdowns.module.css","containers/Player/Player.module.css","containers/Auth/Or/Or.module.css","containers/Auth/Input/Input.module.css","containers/Auth/CheckMail/CheckMail.module.css","containers/Auth/Select/Dropdown/Dropdown.module.css","containers/CustomPlayer/Controls/Volume/Volume.module.css","containers/Toolbar/ShapeDropdowns/ShapeDropdowns.module.css","containers/Navigation/Navigation.module.css","containers/Homepage/Navbar/Navbar.module.css"],"names":["module","exports","_path","_path2","_path3","_path4","DragDrop","setVideoForUpload","uploadRef","useRef","dropAreaRef","handleDragOver","useCallback","e","preventDefault","dataTransfer","dropEffect","current","classList","add","styles","Active","handleDragEnter","stopPropagation","handleDragLeave","remove","validateFile","file","type","video","document","createElement","preload","onloadedmetadata","duration","src","URL","createObjectURL","handleDrop","files","useEffect","area","addEventListener","removeEventListener","className","UploadText","ref","DropArea","onClick","click","DropAreaContent","upload","alt","DropAreaText","DropAreaHeading","DropAreaSubheading","DropAreaBrowse","accept","style","display","onChange","Progress","progress","heading","Percentage","Heading","ProgressBar","ProgressBarInner","maxWidth","Subheading","instance","axios","create","baseURL","process","useUploadVideo","useState","isUploading","setIsUploading","info","setInfo","uploadProgress","setUploadProgress","words","isMounted","onUploadProgress","currentProgress","Math","round","loaded","total","axiosUploadVideo","formData","Promise","resolve","reject","post","params","framerate","headers","Accept","then","res","catch","err","uploadVideo","a","console","log","data","subtitles","captions","id","_id","url","original_video_url","title","Navbar","children","videoData","isPreview","getVideoError","isAuth","history","useHistory","BackFileInfoContainer","BackButton","goBack","BackArrow","backArrow","Twiso","twiso","FileInfoContainer","FileName","Creater","to","EditVideo","UserInfoContainer","LogInLink","SignUpLink","User","UserInitials","Uploader","viedoForUpload","setVideoData","FormData","append","handleVideoCuts","wordsArr","setCuts","setPlayerTime","wordIndex","restoreStart","arr","isLastDeleted","cutStart","cutStartIndex","cutEndIndex","cutEnd","i","length","word","active","next","push","start","end","handleDeleted","prevState","newState","cut","handleRestore","findAndSetCurrentWord","deletedIndex","setWordIndex","currentIndex","EditorContext","createContext","Words","currentWordIndex","searchInput","wordClickHandler","inputIndex","setInputIndex","currentSelection","fabricSub","currentSub","setShouldRerenderSub","editorDispatch","useContext","input","setInput","inputRef","handleSubTextChange","text","isSilence","val","isWhitespace","indexOf","silence","handleNotSilenceAndText","isFirst","isNoWhitespace","handleSilenceAndText","silenceCount","handleNoText","blurHandler","target","parentNode","inputVal","trim","shouldShow","isSelectionMode","isSelectionEnd","focus","map","isCurrent","isHighlight","toLowerCase","includes","isInput","innerContent","WordInput","value","onBlur","Pause","Word","content","Deleted","DeletedImgContainer","DeletedImg","restoreText","DeletedText","containerStyle","width","marginRight","WordContainer","CurrentWord","Highlight","InSelection","join","findSubWithWordIndex","subList","subNode","head","sub","j","subWord","findWordIndexWithId","TranscriptionProgress","status","setIsFinished","setProgress","intervalRef","isFirstLoad","setIsFirstLoad","isFinished","interval","clearInterval","progressInterval","intervalTime","setInterval","progressHandler","timeLeft","Date","startDate","now","secondsElapsed","floor","finishedPercentage","timeout","setTimeout","clearTimeout","Box","Array","x","Line","Transcription","setCurrentWordIndex","isPlaying","videoRef","setCurrentSelection","setCurrentTime","setNextCutIndex","videoCuts","setSearchInput","endTime","currentTime","cutIndex","handleSelection","selection","anchorNode","focusNode","isAnchorNode","isFocusNode","position","removeAllRanges","lastChild","firstChild","indexStart","indexEnd","mouseUpHandler","getSelection","detail","tagName","compareDocumentPosition","isCollapsed","pause","TextControls","CutContainer","deleteWord","deletedStartIndex","deleteEndIndex","deleteSelection","SearchContainer","SearchInput","placeholder","SearchSvg","search","Text","isDeleted","currentTarget","restoreDeleted","addNewImage","state","canvas","dispatch","updateId","userAssets","setUserAssets","imageSrc","imageToAdd","imgAsset","filter","asset","shouldReplaceImage","getActiveObject","scale","scaleX","img","fabric","CustomImage","originalWidth","originalHeight","height","scaleY","top","left","cornerRadius","angle","isSvg","crossOrigin","setActiveObject","requestRenderAll","imgEl","Image","excludeFromExport","onload","newScale","addNewShape","obj","shapeToAdd","Rect","noScaleCache","strokeUniform","fill","stroke","strokeWidth","rx","ry","Circle","radius","Triangle","useAddObject","shouldAddText","CustomTextbox","paddingX","paddingY","splitByGrapheme","cursorWidth","textState","addNewText","EventContext","textPropertyArr","shapePropertyArr","imagePropertyArr","videoPropertyArr","handleObject","propertyArr","forEach","property","handleSelected","object","lineCoords","removeListeners","c","off","useSelectionObserver","eventState","eventDispatch","isRotating","setIsRotating","isScaling","setIsScaling","isSkewing","setIsSkewing","isEditingText","setIsEditingText","currentId","checkOffScreen","isOnScreen","getWidth","getZoom","getHeight","setCoords","addListeners","showCanvasToolbar","on","hiddenTextarea","onTextEnter","onTextExit","discardActiveObject","onCreated","onUpdated","onModified","bringToFront","onAdded","onRemoved","onCleared","isCropMode","isMoving","currentCoords","currentObject","drawLine","x1","y1","x2","y2","ctx","aligningLineWidth","aligningLineColor","viewportTransform","zoom","save","lineWidth","strokeStyle","beginPath","moveTo","lineTo","restore","isInRange","value1","value2","aligningLineMargin","len","drawVerticalLine","coords","drawHorizontalLine","y","showCenterLine","centerLineColor","centerLineWidth","useGuideLines","isSaving","setCtx","setViewportTransform","verticalLines","setVerticalLines","horizontalLines","setHorizontalLines","setZoom","canvasWidth","setCanvasWidth","canvasHeight","setCanvasHeight","canvasWidthCenterMap","setCanvasWidthCenterMap","canvasHeightCenterMap","setCanvasHeightCenterMap","isInVerticalCenter","setIsInVerticalCenter","isInHorizontalCenter","setIsInHorizontalCenter","handleMouseDown","handleBeforeRender","clearContext","contextTop","handleMoving","aligningLineOffset","activeObject","canvasObjects","getObjects","activeObjectCenter","getCenterPoint","activeObjectLeft","activeObjectTop","activeObjectBoundingRect","getBoundingRect","activeObjectHeight","activeObjectWidth","horizontalInTheRange","verticalInTheRange","_currentTransform","objectCenter","objectLeft","objectTop","objectBoundingRect","objectHeight","objectWidth","setPositionByOrigin","Point","objectMovingObserver","isInVertical","isInHorizontal","objectMovingCenterObserver","handleAfterRender","canvasWidthCenter","showVerticalCenterLine","canvasHeightCenter","showHorizontalCenterLine","handleMouseUp","initGuideLines","getSelectionContext","widthMap","heightMap","removelistneres","removeRenderlistneres","shouldUpdateCanvasSize","button","roundedCorners","media","finalRad","cropRect","w","h","loadAndUse","font","WebFont","load","google","families","fontactive","familyName","fvd","set","fontFamily","shapeArr","useUpdateObject","shouldUpdateSubtitles","subtitlesState","_clearCache","Object","entries","key","showToolbar","updateSubtitlesStyle","shouldUpdateText","updateTextStyle","shouldUpdateShape","shape","shapeState","updateShapeStyle","shouldUpdateImage","image","imageState","updateImageStyle","shouldUpdateVideo","videoState","clipPath","updateVideoStyle","setSize","ratio","min","videoWidth","videoHeight","setDimensions","renderAll","resize","objHeight","objWidth","isSub","isTextObject","isVertical","shouldResize","fontSize","useUpdateCanvas","shouldUpdateCanvas","backgroundColor","updateCanvasStyle","isResize","objects","updateCanvasSize","addCanvas","shouldLoad","setCanvas","setSpeakerVideos","setObjectIdCount","setFabricSub","Canvas","preserveObjectStacking","fireRightClick","stopContextMenu","canvasInfo","clear","videos","lastId","loadFromJSON","fontStyle","fontWeight","loadCanvas","useAddCanvas","editorState","setIsCanvasData","speakers","isCanvas","useAddSpeakers","objectIdCount","isCanvasData","isFirtLoad","setIsFirtLoad","newVideo","speaker","Video","speakerVideo","handlePaste","clipboard","objId","setClipboard","clone","cloned","borderColor","keyDownHandler","setIsPasting","setIsCopying","setIsBringToFront","setIsSendToBack","ctrl","ctrlKey","metaKey","code","activeElement","isEditing","deleteHandler","useKeyEvents","isPasting","isCopying","isBringToFront","isSendToBack","shouldRun","setShouldRun","sendToBack","onKeyDown","onKeyUp","keyUpHandler","useClickListener","clickHandler","shouldCropMedia","path","fonts","FontsDropdown","setIsDropDown","options","FontOption","FontOptionsContainer","textContent","UploadFontContainer","UploadFontButton","FontSizeDropdown","FontSizeOption","TextAlignDropdown","childNodes","TextAlignOption","Current","TextAlignImage","textLeft","TextAlignText","textCenter","textRight","textJustify","TextDropdowns","isFontFamilyDropdown","isFontSizeDropdown","isColorDropdown","isTextAlignDropDown","setIsFontFamilyDropdown","setIsFontSizeDropdown","colorChangeCompleteHandler","setIsTextAlignDropDown","setColor","color","colorPickerRef","isBgColorDropdown","setBgColor","bgColor","bgColorPickerRef","dropDownStyle","setDropdownStyle","coordY","canvasState","bottom","right","SketchPickerContainer","rgb","onChangeComplete","textAlign","isBg","colorString","r","g","b","background","TextToolbar","fontSizeInput","setFontSizeInput","setIsColorDropdown","setIsBgColorDropdown","boldStlyes","FontWeightBoldContainer","italicStyles","FontStyleItalicContainer","isBold","isItalic","textAlignSrc","dropdownHandlers","fontSizeArrow","colorPicker","styleHandlers","bold","weight","italic","handler","handleClick","split","FontsContainer","DownArrow","downArrow","BorderDiv","FontSizeContainer","FontSizeInputContainer","FontSizeInput","fontSizeChangeHandler","FontSizeArrowContainer","ColorPickerContainer","ColorPickerBorder","ColorPicker","Bold","Italic","BgColorContainer","BgColor","subBackground","TextAlignContainer","TextAlign","StrokeWidthDropdown","isSmallRange","includesZero","optionsClickHandler","LineDropdown","StrokeOption","ShapeDropdown","ShapeDropdowns","shapeToolbar","isStrokeWidthDropdown","isFillDropdown","isStrokeDropdown","setFill","fillChangeCompleteHandler","fillRef","setStroke","strokeChangeCompleteHandler","strokeRef","setIsStrokeWidthDropdown","isLine","isRect","strokeWidthDropDownStyle","setStrokeWidthDropDownStyle","handleDropdownPosition","toolbarWidth","offsetWidth","coordX","keys","FillDropdownContainer","StrokeDropdownContainer","StrokeWidthDropdownContainer","ShapeToolbar","setIsFillDropdown","setIsStrokeDropdown","strokeWidthInput","setStrokeWidthInput","radiusInput","setRadiusInput","shapeToolbarRef","strokeContainerRef","clicked","borderTopLeftRadius","borderBottomLeftRadius","initialLoadHandler","FillContainer","StrokeContainer","StrokeWidthContainer","StrokeWidthInputContainer","StrokeWidthInput","strokeWidthChangeHandler","borderTopRightRadius","borderBottomRightRadius","StrokeWidthArrowContainer","RadiusContainer","RadiusInput","ImageToolbar","dbClickEvent","ReaplaceContainer","BorderStyle","replaceImage","CropContainer","cropImage","VideoDropdowns","videoToolbar","VideoToolbar","videoToolbarRef","CircleCropContainer","CircleCropCircle","Toolbar","toolbarRef","setTransform","transform","opacity","toolbar","toolbarOffset","toolbarPadding","toolbarHeight","offsetHeight","isBottomCloser","tl","bl","offset","tr","br","tempCoordY","max","calcPosition","isCroppingImage","ContextMenu","setIsMounted","activeObj","setActiveObj","canOnlyPaste","setCanOnlyPaste","menuRef","isMountedRef","pointer","overlayClickHandler","optionClickHandler","rightClickEvent","isVideo","Overlay","onContextMenu","Menu","Option","Border","useAnimate","speakerVideos","frameRef","cancelAnimation","util","cancelAnimFrame","animate","requestAnimFrame","render","dirty","getSpeakerBox","boxSize","boxId","SpeakerCropBox","lockScalingFlip","getMediaCircleCropBox","minSize","size","getCircleCropBoxSize","CircleCropBox","originX","originY","strokeDashArray","selectable","globalCompositeOperation","reverseMedia","prepareMediaForCrop","cropCanvas","setActiveCopy","setCropbox","setHoleBox","cropType","assets","visible","box","holeBox","getCropBoxSize","RectCropBox","getMediaRectCropBox","getCircleHoleBox","ObjectClass","mediaAsset","_element","getOverlayBox","setControlsVisibility","mtr","setHoleBoxPosition","getBoxBounds","boundHeight","boundWidth","topBound","bottomBound","leftBound","rightBound","restrictBox","useCropMedia","activeInfo","setActiveInfo","activeEl","setAcitveEl","activeCopy","cropbox","croppedMedia","setCroppedMedia","clearState","setCropped","ratioX","ratioY","newTop","newLeft","cropMedia","cropFinishHandler","setCropCanvas","fabricCanvas","canvasRef","CropCanvas","cropCanvasRef","Backdrop","cacheAsset","onerror","cacheAssets","setAssets","promises","allSettled","assetArr","getCanvasObject","jsonCanvas","toJSON","getResizeValues","initialWidth","initialHeight","option","positionObject","templateEl","currentEl","heightRatio","widthRatio","template","isSubtitles","finishHandler","useLoadTemplate","templateToLoad","setTemplateToLoad","PlayerCanvas","updatetObjectId","shouldSaveTemplate","CanvasComponent","initialState","reducer","action","useEventState","useReducer","name","boxStyle","ResizeDropdown","Dropdown","SizeOptions","SizeOption","SizeOptionText","SizeOptionBox","useDeleteTemplate","isDeletingTemplate","setIsDeletingTemplate","deleteTemplateRes","setDeleteTemplateRes","axiosDeleteTemplate","delete","deleteTemplate","spinner","TemplatesDropdown","isCreatingTemplate","templates","setShouldGetTemplates","currentOption","setCurrentOption","isGettingTemplates","templateTypeOption","templatesRef","handleScroll","scrollLeft","deltaY","container","templateOptionClickHanlder","TemplateOptions","TemplateOption","Templates","Template","SaveTemplate","SaveImg","uploadSvg","SaveText","DeleteContainer","window","confirm","XLine1","XLine2","image_url","TemplateImg","props","actionType","isImageDropdown","isShapeDropdown","isSubtitlesDropdown","isResizeDropdown","isCanvasBgColorDropdown","isTemplatesDropdown","isZoomDropdown","shouldAddCanvasBgImage","isDownloadDropdown","_excluded","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgTemplates","_ref","svgRef","titleId","viewBox","xmlns","d","strokeLinecap","strokeLinejoin","ForwardRef","SvgResize","SvgCropImage","fillRule","clipRule","_path5","_path6","_path7","useGetTemplates","setIsGettingTemplates","setTemplates","axiosGetTemplates","get","getTemplates","useCreateTemplate","setIsCreatingTemplate","createdTemplate","setCreatedTemplate","axiosCreateTemplate","createTemplate","useSaveTemplate","canvasImage","setCanvasImage","canvasObject","templateData","setImage","newCanvas","JSON","stringify","toDataURL","format","quality","getCanvasImage","CanvasToolbar","setSpeakers","shouldGetTemplates","backgroundColorRef","resizeDropdownRef","currentTemplateOption","setCurrentTemplateOption","isLoadingTemplate","commonTemplate","userTemplate","TemplatesContainer","OptionText","ResizeContainer","ColorContainer","TemplatesDropdownContainer","ColorDropdownContainer","useContainerSize","containerRef","getSizeInfo","maxHeight","containerWidth","getCanvasSize","paddingTop","handleResize","containerPadding","innerWidth","offsetLeft","containerHeight","getContainerSize","shouldСalculateCanvasSize","usePlayerTime","nextCutIndex","setCurrentSub","time","moreThanStart","lessThanEnd","isShortTime","handleCurrentWord","index","nextWord","handleCurrentSub","nextSub","Node","LinkedList","tail","newNode","newTail","temp","idx","unshift","shift","pop","pre","nextNode","reverse","useSubtitles","setSubList","shouldRerenderSub","displaySub","setSubs","list","firstDeletedIndex","checkForPrevDeleted","which","isLast","wordTimeLength","strLength","containsMark","match","isRoomForWord","generateSubtitles","subtitle","Subtitle","breakWords","editable","newSubtitle","Player","transcriptonStatus","zIndex","margin","Provider","PlayerContent","PlayerControls","PlayButton","play","pauseSvg","playSvg","setIsPlaying","intervalId","setIntervalId","controls","onPause","handlePause","onPlay","handlePlay","onEnded","handleEnd","onLoadedMetadata","getVideoInfo","z","crop","generateLayer","exportCanvas","handleLayers","setElements","setVideoInfo","videosArr","elementsArr","isAdded","el","coordinates","prepareCanvas","randomUUID","random","toString","substring","rgbaTohex","replace","alpha","hex","slice","prepareSubs","subState","config","xCoordinate","yCoordinate","fontColor","rgbaToHex","padding","getSubConfig","deleteStart","deleteEnd","generateUUID","useUploadAsset","isUploadingAsset","setIsUploadingAsset","uploadResponse","setUploadResponse","axiosUploadAsset","uploadAsset","ImageDropdown","fileInput","imageType","splitSrc","oddArr","_","evenArr","assetsContent","Images","Column","ImageContainer","UplaodButtonContainer","UploadButton","FileInput","contains","ShapeContainer","Shape","square","circle","triangle","line","SvgSubtitlesOn","_defs","SvgSubtitlesOff","SubtitlesDropdown","Buttons","Button","ButtonText","DesignControls","ControlsContainer","AddTextContainer","addText","HoverContent","HoverTriangle","HoverText","DesignControl","AddImageContainer","addImage","AddShapeContainer","addShape","useGetAssets","isGettingAssets","setIsGettingAssets","axiosGetAssets","getAssets","Navigation","setPreviewUrl","isUpdatingProject","isDownloading","downloadVideo","isDownloadDataUploaded","setIsDownloadDataUploaded","shouldFetchAssets","setShouldFetchAssets","downloadData","setDownloadData","elements","videoInfo","breaks","setBreaks","subs","resizeInfo","setResizeInfo","downloadRef","prepareData","breaksData","subsData","jsonData","DownloadButton","cuts","videoBreaks","prev","prepareBreaks","DownloadLink","href","shouldTriggerCanvasUpdate","shouldTriggerWordsUpdate","useEditorState","useGetVideo","isGettingVideo","setIsGettingVideo","setTranscriptionStatus","setGetVideoError","axiosGetVideo","getVideo","transcription","transcriptionTime","transcription_start","frame_rate_video_url","finalUrl","final_video_url","finalText","final_full_text","useUpdateProject","setIsUpdatingProject","updateResponse","setUpdateResponse","axiosUpdateProject","put","updateProject","useDownloadVideo","setIsDownloading","axiosDownloadVideo","useCanvasUpdate","timerRef","canUpdateRef","triggerCanvasUpdate","useWordsUpdate","shouldUpdate","wordsUpdateTimerRef","triggerWordsUpdate","useCheckTranscription","checkTranscription","VideoEditor","setVideoCuts","useParams","Main","CustomRoute","Component","component","allowed","where","redirect","rest","useAddVideo","setVideo","fabricVideo","evented","SpeakersContext","useCropSpeakers","boxArr","setBoxArr","updateBoxId","speakersState","speakersDispatch","boxes","handleFirstLoadSpeakers","shouldAddSpeaker","last","addSpeaker","shouldRemoveSpeaker","SpeakersCanvas","canvasDispatch","setBoxId","useSpeakersState","videoSize","containerSize","setContainerSize","handleSize","SelectSpeakers","setVideoSize","CanvasContainer","getVideoSize","Controls","SelectedText","SelectedNumber","SpeakerButtons","AddSpeakerButton","AddSpeakers","AddSpeakersText","RemoveSpeakerButton","RemoveSpeakers","removeSpeaker","RemoveSpeakersText","NextSteps","Confirm","Skip","useGetDownloadProgress","isGettingProgress","setIsGettingProgress","downloadProgress","setDownloadProgress","axiosGetProgress","getDownloadProgress","useCheckDownloadProgress","checkProgress","Download","Editor","useRouteMatch","wordsRef","Or","Input","invalid","setValue","errorMessage","InputContainer","Invalid","isEmpty","onFocus","ErrorMessage","CheckMail","mail","Mail","checkEmailValidity","test","useMagicLink","magickRes","setMagickRes","magickError","setMagickError","axiosMagicLink","magicLink","SignIn","authUrl","isLoading","setIsLoading","checkTokenValidity","isSent","setIsSent","validation","email","setEmail","token","localStorage","getItem","signInContent","FormContent","GoogleLink","GoogleLogo","Form","setIsDropdown","CheckMark","checkMark","Select","isDropdown","SelectContainer","Selected","Valid","SignUp","setName","workType","setWorkType","signUpContent","SignInLink","isEmailValid","isNameValid","isWorkTypeValid","firstName","Token","setToken","location","useLocation","getToken","URLSearchParams","tokenParam","setItem","setAuthToken","defaults","common","useRefreshToken","newToken","setNewToken","refreshError","setRefreshError","axiosRefreshToken","refreshToken","accessToken","UserContext","Auth","userDispatch","removeItem","Testimonial","Background","TestimonialContent","saly","Mascot","Account","exact","UserName","Initials","Letter","Name","Dots","dot","SideDrawer","Links","Link","activeClassName","LinkText","projects","settings","NewButton","Plus","useDeleteVideo","isDeletingVideo","setIsDeletingVideo","deleteVideoResponse","setDeleteVideoResponse","axiosDeleteVideo","deleteVideo","Project","setShouldFetch","backgroundImage","screenshot_url","InfoContainer","Info","DateAndTrash","date","day","getDate","month","getMonth","year","getFullYear","transformDate","created_at","marginLeft","Trash","trash","Projects","ProjectsList","AddProject","AddProjectInner","AddProjectText","ProjectContainer","Webinar","TemplatesList","TemplateInner","pic1","pic2","pic3","pic4","pic5","pic6","NavLinks","useGetVideos","isGettingVideos","setIsGettingVideos","setVideos","axiosGetVideos","getVideos","Homepage","shouldFetchVideos","setShouldFetchVideos","isAuthenticated","useUserState","useTrackTime","fullScreenHanlder","fullscreenElement","exitFullscreen","webkitExitFullscreen","msExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","handleInputChange","backgroundSize","TimelineSlider","step","shouldPlay","setShouldPlay","Slider","onMouseDown","onMouseUp","Time","setTime","isMoreThanHour","setIsMoreThanHour","timeStrRef","timeString","setTimeString","generateTimeString","t","timeStr","m","s","Timeline","VolumeSlider","Volume","volume","setVolume","volumeRef","VolumeButton","volumeSvg","VolumeOff","VolumeBar","useSingleAndDoubleClick","onSingleClick","onDoubleClick","clickCount","setClickCount","prevSatate","useShowHidePanel","controlsRef","panelRef","hover","shouldShowPanel","setShouldShowPanel","isCursorOnPanel","setIsCursorOnPanel","hovertimerRef","visibletimerRef","startTimeout","mouseMoveHanlder","mouseEnterHandler","mouseLeaveHandler","panel","playPause","keydownHandler","isSpace","shiftKey","fullScreen","FullScreenSize","Visible","Hover","ControlsPanel","PlayPause","FullScreen","fullScreenSvg","CustomPlayer","setDuration","VideoContainer","onTimeUpdate","useGetPublicVideo","isGettingPublicVideo","setIsGettingPublicVideo","publicInfo","setPublicInfo","getPublicVideoError","setGetPublicVideoError","axiosGetPublicVideo","getPublicVideo","useCheckAuth","setIsAuth","isChecking","setIsChecking","Preview","article","setArticle","videoDownloadRef","isId","MainContent","VideoFooter","Title","DownloadAndLink","CopyLink","navigator","writeText","copyLink","HeadlineAndExport","Headline","ExportButton","setAttribute","encodeURIComponent","body","appendChild","removeChild","exportText","exportArrow","createClass","initialize","callSuper","lockRotation","objectCaching","cacheProperties","toObject","extend","_draw","drawImage","_render","getElement","_stroke","_renderPaintInOrder","fromObject","callback","_fromObject","_renderControls","_activeObject","mt","mb","ml","mr","transparentCorners","cornerColor","cornerStrokeColor","cornerStyle","ctrlStretchImage","ctrlStretch","ctrlScaleImage","ctrlScale","ctrlRotateImage","ctrlRotate","controlsUtils","scaleSkewStyleHandler","scaleSkewCursorStyleHandler","scaleStyleHandler","scaleCursorStyleHandler","scalingEqually","scalingYOrSkewingX","scalingXOrSkewingY","scaleOrSkewActionName","objectControls","renderScaleIcon","icon","styleOverride","fabricObject","cornerSize","translate","rotate","degreesToRadians","renderStretchIconX","renderStretchIconY","Control","cursorStyleHandler","actionHandler","getActionName","offsetY","offsetX","rotationWithSnapping","rotationStyleHandler","withConnection","actionName","Textbox","textBoxControls","changeWidth","activeSelection","ActiveSelection","_getNonTransformedDimensions","_calculateCurrentDimensions","transformPoint","_getTransformedDimensions","getViewportTransform","_wrapLine","_line","lineIndex","desiredWidth","reservedSpace","graphemeLines","string","graphemeSplit","_wordJoiners","infix","wordWidth","infixWidth","largestWordWidth","lineJustStarted","additionalSpace","_getWidthOfCharSpacing","_measureWord","letter","letterWidth","getMeasuringContext","measureText","CACHE_FONT_SIZE","concat","dynamicMinWidth","customImage","fromURL","imgOptions","loadImage","isError","_object","_initFilters","filters","resizeFilter","resizeFilters","enlivenObjects","enlivedProps","CustomImageCrop","App","userState","basename","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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,iBAAiB,QAASkmB,GAE5B,WACL9mB,SAASa,oBAAoB,UAAWgmB,GACxC7mB,SAASa,oBAAoB,QAASimB,MAEvC,CAACD,EAAWC,KCjJFE,GAxBU,SAACzU,EAAQD,GAChC,IAAM2U,EAAenoB,uBACnB,SAACC,GACC,GACEwT,IACCD,EAAMyG,aACNzG,EAAM4U,kBACN5U,EAAMW,mBACP,CACA,IAAK,IAAIhL,EAAI,EAAGA,EAAIlJ,EAAEooB,KAAKjf,OAAQD,IACjC,GAAqB,oBAAjBlJ,EAAEooB,KAAKlf,GAAG/C,GAA0B,OAE1CqN,EAAOgG,sBAAsBpE,sBAGjC,CAAC5B,EAAQD,EAAMyG,WAAYzG,EAAM4U,gBAAiB5U,EAAMW,qBAG1DvS,qBAAU,WAER,OADAV,SAASY,iBAAiB,QAASqmB,GAC5B,kBAAMjnB,SAASa,oBAAoB,QAASomB,MAClD,CAAC1U,EAAQ0U,K,yCCvBC,OAA0B,sCCA1B,OAA0B,iCCA1B,OAA0B,0CCA1B,OAA0B,mCCA1B,OAA0B,qCCA1B,OAA0B,sCCA1B,OAA0B,uCCA1B,OAA0B,wC,oBC2hC1BG,GA3hCA,CACb,UACA,OACA,eACA,gBACA,WACA,OACA,QACA,UACA,aACA,kBACA,iBACA,mBACA,UACA,SACA,QACA,SACA,UACA,OACA,WACA,cACA,gBACA,mBACA,OACA,aACA,gBACA,QACA,QACA,gBACA,QACA,UACA,kBACA,SACA,UACA,WACA,mBACA,cACA,WACA,WACA,YACA,YACA,QACA,QACA,QACA,UACA,SACA,SACA,mBACA,SACA,2BACA,gBACA,QACA,eACA,aACA,QACA,SACA,UACA,eACA,sBACA,UACA,gBACA,iBACA,aACA,gBACA,QACA,WACA,SACA,UACA,WACA,OACA,OACA,OACA,iBACA,OACA,QACA,YACA,UACA,OACA,SACA,OACA,aACA,SACA,YACA,aACA,UACA,eACA,sBACA,eACA,oBACA,qBACA,OACA,YACA,aACA,UACA,YACA,eACA,SACA,UACA,eACA,iBACA,kBACA,aACA,gBACA,gBACA,kBACA,iBACA,gBACA,YACA,UACA,SACA,mBACA,wBACA,aACA,SACA,QACA,eACA,aACA,UACA,QACA,aACA,aACA,WACA,YACA,UACA,UACA,eACA,YACA,QACA,UACA,kBACA,aACA,QACA,wBACA,+BACA,4BACA,gCACA,6BACA,qBACA,gBACA,cACA,QACA,mBACA,WACA,oBACA,UACA,SACA,0BACA,iBACA,gBACA,UACA,cACA,QACA,SACA,WACA,aACA,gBACA,UACA,aACA,eACA,iBACA,cACA,OACA,UACA,SACA,kBACA,gBACA,iBACA,eACA,aACA,iBACA,QACA,kBACA,eACA,kBACA,aACA,QACA,UACA,YACA,iBACA,SACA,QACA,SACA,YACA,cACA,cACA,WACA,QACA,QACA,iBACA,oBACA,aACA,UACA,YACA,SACA,SACA,eACA,qBACA,cACA,eACA,SACA,aACA,SACA,QACA,aACA,WACA,qBACA,YACA,iBACA,SACA,oBACA,eACA,QACA,SACA,WACA,QACA,WACA,SACA,oBACA,iBACA,OACA,eACA,WACA,QACA,QACA,YACA,aACA,cACA,eACA,cACA,YACA,UACA,eACA,cACA,SACA,QACA,SACA,YACA,qBACA,mBACA,eACA,oBACA,oBACA,YACA,gBACA,UACA,WACA,wBACA,eACA,YACA,cACA,cACA,eACA,gBACA,UACA,SACA,YACA,SACA,cACA,UACA,UACA,mBACA,gBACA,SACA,iBACA,UACA,mBACA,cACA,uBACA,WACA,QACA,kBACA,SACA,oBACA,iBACA,gBACA,WACA,aACA,WACA,gBACA,YACA,eACA,WACA,QACA,SACA,cACA,aACA,QACA,QACA,cACA,cACA,YACA,YACA,cACA,aACA,iBACA,QACA,YACA,QACA,aACA,cACA,QACA,mBACA,cACA,eACA,cACA,wBACA,uBACA,6BACA,4BACA,aACA,YACA,YACA,WACA,YACA,UACA,kBACA,QACA,MACA,QACA,gBACA,WACA,eACA,QACA,SACA,YACA,mBACA,aACA,WACA,YACA,WACA,WACA,SACA,SACA,QACA,eACA,YACA,YACA,YACA,sBACA,4BACA,aACA,YACA,WACA,UACA,aACA,mBACA,QACA,eACA,mBACA,WACA,eACA,uBACA,cACA,WACA,SACA,UACA,UACA,YACA,YACA,kBACA,WACA,QACA,SACA,SACA,WACA,UACA,eACA,WACA,UACA,gBACA,qBACA,MACA,UACA,eACA,eACA,SACA,gBACA,WACA,iBACA,gBACA,SACA,oBACA,aACA,aACA,UACA,WACA,YACA,OACA,wBACA,WACA,cACA,eACA,eACA,cACA,SACA,iBACA,SACA,SACA,QACA,OACA,SACA,WACA,SACA,iBACA,SACA,kBACA,UACA,eACA,UACA,UACA,eACA,YACA,eACA,QACA,cACA,aACA,uBACA,YACA,OACA,cACA,eACA,gBACA,gBACA,kBACA,iBACA,WACA,gBACA,gBACA,0BACA,iBACA,kBACA,qBACA,sBACA,yBACA,kBACA,qBACA,uBACA,0BACA,uBACA,0BACA,mBACA,UACA,UACA,QACA,UACA,cACA,QACA,eACA,QACA,iBACA,aACA,cACA,QACA,eACA,YACA,WACA,YACA,OACA,mBACA,0BACA,QACA,iBACA,iBACA,aACA,eACA,WACA,YACA,eACA,eACA,OACA,WACA,MACA,SACA,QACA,kBACA,QACA,OACA,oBACA,0BACA,MACA,QACA,QACA,UACA,QACA,YACA,QACA,QACA,UACA,iBACA,YACA,SACA,aACA,aACA,aACA,QACA,QACA,QACA,QACA,iBACA,WACA,YACA,UACA,OACA,YACA,SACA,cACA,YACA,SACA,SACA,QACA,SACA,YACA,OACA,QACA,aACA,YACA,oBACA,aACA,SACA,kBACA,UACA,QACA,cACA,UACA,WACA,SACA,SACA,OACA,gBACA,eACA,SACA,SACA,QACA,WACA,SACA,cACA,aACA,cACA,cACA,cACA,cACA,eACA,oBACA,yBACA,mBACA,4BACA,iCACA,wBACA,2BACA,oBACA,uBACA,oBACA,iBACA,cACA,aACA,kBACA,YACA,cACA,WACA,mBACA,SACA,UACA,cACA,mBACA,kBACA,kBACA,iBACA,YACA,OACA,wBACA,oBACA,iBACA,eACA,WACA,UACA,YACA,oBACA,gBACA,UACA,qBACA,OACA,QACA,gBACA,UACA,qBACA,OACA,OACA,WACA,UACA,UACA,UACA,WACA,UACA,YACA,eACA,eACA,YACA,eACA,YACA,WACA,SACA,cACA,SACA,OACA,UACA,YACA,UACA,SACA,gBACA,aACA,eACA,SACA,cACA,WACA,eACA,eACA,oBACA,QACA,cACA,eACA,cACA,WACA,UACA,YACA,mBACA,OACA,UACA,eACA,QACA,iBACA,OACA,QACA,iBACA,QACA,UACA,QACA,QACA,WACA,UACA,uBACA,UACA,SACA,aACA,wBACA,uBACA,OACA,WACA,yBACA,gBACA,aACA,WACA,iBACA,sBACA,gBACA,QACA,cACA,cACA,cACA,SACA,eACA,gBACA,MACA,qBACA,eACA,sBACA,iBACA,mBACA,YACA,SACA,SACA,aACA,cACA,aACA,aACA,UACA,UACA,YACA,SACA,SACA,UACA,UACA,UACA,uBACA,eACA,YACA,eACA,eACA,eACA,eACA,eACA,aACA,gBACA,gBACA,gBACA,gBACA,WACA,YACA,YACA,YACA,aACA,cACA,YACA,cACA,SACA,SACA,cACA,cACA,iBACA,UACA,KACA,kBACA,YACA,cACA,yBACA,YACA,sBACA,cACA,WACA,UACA,UACA,kBACA,SACA,mBACA,WACA,cACA,WACA,gBACA,MACA,UACA,SACA,cACA,UACA,UACA,kBACA,iBACA,WACA,mBACA,WACA,SACA,YACA,iBACA,WACA,UACA,aACA,cACA,cACA,qBACA,eACA,kBACA,UACA,YACA,UACA,cACA,UACA,UACA,mBACA,sBACA,UACA,cACA,YACA,SACA,gBACA,aACA,UACA,OACA,WACA,mBACA,sBACA,UACA,aACA,aACA,OACA,WACA,eACA,aACA,UACA,mBACA,mBACA,YACA,iBACA,QACA,cACA,iBACA,QACA,iBACA,WACA,SACA,aACA,cACA,cACA,UACA,eACA,SACA,WACA,eACA,oBACA,YACA,YACA,iBACA,UACA,kBACA,SACA,WACA,SACA,UACA,eACA,aACA,WACA,SACA,eACA,WACA,SACA,QACA,OACA,YACA,eACA,YACA,kBACA,eACA,WACA,YACA,YACA,gBACA,aACA,UACA,gBACA,SACA,gBACA,YACA,SACA,SACA,mBACA,cACA,cACA,YACA,YACA,gBACA,UACA,YACA,YACA,UACA,WACA,eACA,UACA,YACA,QACA,iBACA,OACA,SACA,cACA,SACA,aACA,iBACA,YACA,SACA,MACA,aACA,UACA,OACA,QACA,kBACA,wBACA,uBACA,oBACA,QACA,UACA,WACA,UACA,kBACA,UACA,SACA,SACA,WACA,UACA,kBACA,kBACA,QACA,eACA,aACA,YACA,iBACA,cACA,eACA,uBACA,MACA,YACA,cACA,qBACA,yBACA,SACA,QACA,aACA,kBACA,kBACA,qBACA,YACA,cACA,YACA,WACA,aACA,UACA,mBACA,YACA,aACA,UACA,gBACA,WACA,UACA,aACA,aACA,UACA,SACA,SACA,UACA,UACA,gBACA,aACA,QACA,SACA,aACA,aACA,OACA,mBACA,kBACA,kBACA,mBACA,gBACA,aACA,UACA,gBACA,WACA,cACA,aACA,YACA,SACA,aACA,uBACA,WACA,WACA,cACA,YACA,gBACA,kBACA,QACA,wBACA,uBACA,QACA,SACA,UACA,sBACA,WACA,gBACA,SACA,YACA,YACA,mBACA,OACA,UACA,YACA,cACA,qBACA,YACA,OACA,YACA,eACA,UACA,YACA,SACA,QACA,UACA,OACA,QACA,qBACA,aACA,cACA,YACA,YACA,qBACA,SACA,UACA,UACA,QACA,YACA,gBACA,WACA,cACA,YACA,UACA,WACA,UACA,UACA,aACA,UACA,aACA,cACA,SACA,mBACA,cACA,QACA,iBACA,WACA,YACA,iBACA,qBACA,UACA,SACA,OACA,QACA,cACA,SACA,eACA,QACA,cACA,eACA,eACA,QACA,QACA,WACA,OACA,QACA,UACA,WACA,cA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","file":"static/js/main.6406d783.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"DownloadCanvas\":\"VideoEditor_DownloadCanvas__3rCEz\",\"Main\":\"VideoEditor_Main__RsHdg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TextToolbar\":\"TextToolbar_TextToolbar__30rxF\",\"BorderDiv\":\"TextToolbar_BorderDiv__XlYMr\",\"DownArrow\":\"TextToolbar_DownArrow__3bu3E\",\"TextAlign\":\"TextToolbar_TextAlign__2KX5Y\",\"Bold\":\"TextToolbar_Bold__38wPs\",\"Italic\":\"TextToolbar_Italic__I_P46\",\"FontsContainer\":\"TextToolbar_FontsContainer__2NtOu\",\"FontSizeContainer\":\"TextToolbar_FontSizeContainer__1QFbt\",\"ColorPickerContainer\":\"TextToolbar_ColorPickerContainer__1EnTr\",\"FontWeightBoldContainer\":\"TextToolbar_FontWeightBoldContainer__2-Bfx\",\"FontStyleItalicContainer\":\"TextToolbar_FontStyleItalicContainer__6Diha\",\"TextAlignContainer\":\"TextToolbar_TextAlignContainer__HLDJn\",\"BgColorContainer\":\"TextToolbar_BgColorContainer__3QNkE\",\"FontSizeInputContainer\":\"TextToolbar_FontSizeInputContainer__p2Uno\",\"FontSizeInput\":\"TextToolbar_FontSizeInput__3nD-x\",\"FontSizeArrowContainer\":\"TextToolbar_FontSizeArrowContainer__1N8MA\",\"ColorPickerBorder\":\"TextToolbar_ColorPickerBorder__EGOSu\",\"ColorPicker\":\"TextToolbar_ColorPicker__2Mme4\",\"Active\":\"TextToolbar_Active__2gO17\",\"BgColor\":\"TextToolbar_BgColor__19qDO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CanvasComponent\":\"PlayerCanvas_CanvasComponent__2ZNRl\",\"Canvas\":\"PlayerCanvas_Canvas__3KakF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"StrokeDropdownContainer\":\"VideoDropdowns_StrokeDropdownContainer__1cB9e\",\"StrokeWidthDropdownContainer\":\"VideoDropdowns_StrokeWidthDropdownContainer__1VFYT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CropCanvas\":\"CropCanvas_CropCanvas__2QUHd\",\"Backdrop\":\"CropCanvas_Backdrop__15lRv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Homepage\":\"Homepage_Homepage__3OyFd\",\"Main\":\"Homepage_Main__1n7s2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"VideoContainer\":\"CustomPlayer_VideoContainer__3sLMV\",\"Video\":\"CustomPlayer_Video__3yEBQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Time\":\"Time_Time__2bwh7\",\"Timeline\":\"Time_Timeline__2XAL4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ControlsContainer\":\"DesignControls_ControlsContainer__2Nypq\",\"DesignControl\":\"DesignControls_DesignControl__1FKA0\",\"AddTextContainer\":\"DesignControls_AddTextContainer__2kzlD\",\"AddImageContainer\":\"DesignControls_AddImageContainer__1-kZJ\",\"AddShapeContainer\":\"DesignControls_AddShapeContainer__2l0qj\",\"HoverContent\":\"DesignControls_HoverContent__RaV8d\",\"HoverTriangle\":\"DesignControls_HoverTriangle__uOTqR\",\"HoverText\":\"DesignControls_HoverText__3mdpQ\",\"ShapeDropdown\":\"DesignControls_ShapeDropdown__3m4QA\",\"ImageDropdown\":\"DesignControls_ImageDropdown__1kbq4\",\"SubtitlesDropdown\":\"DesignControls_SubtitlesDropdown__1E3X-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LineDropdown\":\"StrokeWidthDropdown_LineDropdown__2P8_5\",\"ShapeDropdown\":\"StrokeWidthDropdown_ShapeDropdown__1sirw\",\"StrokeOption\":\"StrokeWidthDropdown_StrokeOption__2JfPD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Editor\":\"Editor_Editor__3ckPM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Uploader\":\"Uploader_Uploader__lgMfw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Toolbar\":\"Toolbar_Toolbar__1YXGU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Templates\":\"Templates_Templates__18kjm\",\"NavLinks\":\"Templates_NavLinks__39YJI\",\"Link\":\"Templates_Link__BofFD\",\"Active\":\"Templates_Active__21pqj\",\"Heading\":\"Templates_Heading__uEwga\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Backdrop\":\"Backdrop_Backdrop__ko406\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Video\":\"Video_Video__3P9at\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Canvas\":\"SpeakersCanvas_Canvas__1_qgr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Download\":\"Download_Download__oDnCR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__364Yd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Token\":\"Token_Token__dZAfL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Slider\":\"TimelineSlider_Slider__3FZvE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Slider\":\"VolumeSlider_Slider__3Dz_-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"VideoToolbar\":\"VideoToolbar_VideoToolbar__23h3P\",\"BorderDiv\":\"VideoToolbar_BorderDiv__2wSCo\",\"StrokeContainer\":\"VideoToolbar_StrokeContainer__32EUg\",\"StrokeWidthContainer\":\"VideoToolbar_StrokeWidthContainer__20qdy\",\"CircleCropContainer\":\"VideoToolbar_CircleCropContainer__1fOak\",\"RadiusContainer\":\"VideoToolbar_RadiusContainer__ZqwJN\",\"CropContainer\":\"VideoToolbar_CropContainer__2Dxpf\",\"DoneContainer\":\"VideoToolbar_DoneContainer__2gT_8\",\"StrokeWidthInput\":\"VideoToolbar_StrokeWidthInput__Ss4Xq\",\"RadiusInput\":\"VideoToolbar_RadiusInput__1kwS5\",\"StrokeWidthArrowContainer\":\"VideoToolbar_StrokeWidthArrowContainer__1aF3z\",\"CircleCropCircle\":\"VideoToolbar_CircleCropCircle__3uHh9\",\"BorderStyle\":\"VideoToolbar_BorderStyle__392SW\",\"DownArrow\":\"VideoToolbar_DownArrow__1TUzs\",\"ColorPickerBorder\":\"VideoToolbar_ColorPickerBorder__21hnf\",\"ColorPicker\":\"VideoToolbar_ColorPicker__2H6CG\",\"StrokeWidthInputContainer\":\"VideoToolbar_StrokeWidthInputContainer__3iFYS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TextAlignDropdown\":\"TextAlignDropdown_TextAlignDropdown__PkoUd\",\"TextAlignOption\":\"TextAlignDropdown_TextAlignOption__2NPzu\",\"Current\":\"TextAlignDropdown_Current__2vk5u\",\"TextAlignImage\":\"TextAlignDropdown_TextAlignImage__wtSLz\",\"TextAlignText\":\"TextAlignDropdown_TextAlignText__nuEMl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ShapeToolbar\":\"ShapeToolbar_ShapeToolbar__3ltKA\",\"BorderDiv\":\"ShapeToolbar_BorderDiv__1MpYU\",\"DownArrow\":\"ShapeToolbar_DownArrow__MgRL3\",\"FillContainer\":\"ShapeToolbar_FillContainer__dFbZJ\",\"StrokeContainer\":\"ShapeToolbar_StrokeContainer__21-kB\",\"StrokeWidthContainer\":\"ShapeToolbar_StrokeWidthContainer__1IzFk\",\"RadiusContainer\":\"ShapeToolbar_RadiusContainer__3GI8W\",\"ColorPickerBorder\":\"ShapeToolbar_ColorPickerBorder__qXCuh\",\"ColorPicker\":\"ShapeToolbar_ColorPicker__2vzHo\",\"StrokeWidthInputContainer\":\"ShapeToolbar_StrokeWidthInputContainer__1ISoG\",\"StrokeWidthInput\":\"ShapeToolbar_StrokeWidthInput__239HS\",\"StrokeWidthArrowContainer\":\"ShapeToolbar_StrokeWidthArrowContainer__2MBk5\",\"RadiusInput\":\"ShapeToolbar_RadiusInput__19zGn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CanvasToolbar\":\"CanvasToolbar_CanvasToolbar__2hdMU\",\"BorderDiv\":\"CanvasToolbar_BorderDiv__1KyoH\",\"DownArrow\":\"CanvasToolbar_DownArrow__2Ii5A\",\"TemplatesContainer\":\"CanvasToolbar_TemplatesContainer__23oBW\",\"ResizeContainer\":\"CanvasToolbar_ResizeContainer__198p0\",\"CropContainer\":\"CanvasToolbar_CropContainer__1_XTo\",\"ColorContainer\":\"CanvasToolbar_ColorContainer__3uL9Q\",\"OptionText\":\"CanvasToolbar_OptionText__cr_ng\",\"ResizeDropdown\":\"CanvasToolbar_ResizeDropdown__2Fhs4\",\"ColorPickerBorder\":\"CanvasToolbar_ColorPickerBorder__1sugA\",\"ColorPicker\":\"CanvasToolbar_ColorPicker__3ROju\",\"ColorDropdownContainer\":\"CanvasToolbar_ColorDropdownContainer__L8SXX\",\"TemplatesDropdownContainer\":\"CanvasToolbar_TemplatesDropdownContainer__122dJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SelectSpeakers\":\"SelectSpeakers_SelectSpeakers__1sJES\",\"Heading\":\"SelectSpeakers_Heading__8zH9K\",\"Video\":\"SelectSpeakers_Video__3v4_Z\",\"CanvasContainer\":\"SelectSpeakers_CanvasContainer__yI3pN\",\"Controls\":\"SelectSpeakers_Controls__m__i7\",\"SelectedText\":\"SelectSpeakers_SelectedText__29VjD\",\"SelectedNumber\":\"SelectSpeakers_SelectedNumber__u1ZaC\",\"SpeakerButtons\":\"SelectSpeakers_SpeakerButtons__2E6zY\",\"AddSpeakerButton\":\"SelectSpeakers_AddSpeakerButton__2jPJf\",\"RemoveSpeakerButton\":\"SelectSpeakers_RemoveSpeakerButton__3EhX6\",\"AddSpeakers\":\"SelectSpeakers_AddSpeakers__yU4j4\",\"RemoveSpeakers\":\"SelectSpeakers_RemoveSpeakers__1IG3b\",\"AddSpeakersText\":\"SelectSpeakers_AddSpeakersText__bYScV\",\"RemoveSpeakersText\":\"SelectSpeakers_RemoveSpeakersText__2jvXO\",\"NextSteps\":\"SelectSpeakers_NextSteps__nYc_K\",\"Confirm\":\"SelectSpeakers_Confirm__29WEc\",\"Skip\":\"SelectSpeakers_Skip__10Iwh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dropdown\":\"TemplatesDropdown_Dropdown__1nC2R\",\"TemplateOptions\":\"TemplatesDropdown_TemplateOptions__3d213\",\"TemplateOption\":\"TemplatesDropdown_TemplateOption__1ONEJ\",\"Current\":\"TemplatesDropdown_Current__18Utt\",\"Templates\":\"TemplatesDropdown_Templates__3y5Bj\",\"Template\":\"TemplatesDropdown_Template__2jxza\",\"TemplateImg\":\"TemplatesDropdown_TemplateImg__32quA\",\"SaveTemplate\":\"TemplatesDropdown_SaveTemplate__2e2-_\",\"SaveImg\":\"TemplatesDropdown_SaveImg__-RyV8\",\"SaveText\":\"TemplatesDropdown_SaveText__1yvLb\",\"DeleteContainer\":\"TemplatesDropdown_DeleteContainer__1rs7p\",\"XLine1\":\"TemplatesDropdown_XLine1__2wL76\",\"XLine2\":\"TemplatesDropdown_XLine2__1uwvJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Webinar\":\"Webinar_Webinar__3CCu4\",\"Heading\":\"Webinar_Heading__2-VYO\",\"Subheading\":\"Webinar_Subheading__wvhlo\",\"TemplatesList\":\"Webinar_TemplatesList__3YOqH\",\"Template\":\"Webinar_Template__2t8zc\",\"TemplateInner\":\"Webinar_TemplateInner__3GfSd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Navbar\":\"Navbar_Navbar__3RMWK\",\"BackFileInfoContainer\":\"Navbar_BackFileInfoContainer__3ky9K\",\"BackButton\":\"Navbar_BackButton__1R1aO\",\"BackArrow\":\"Navbar_BackArrow__2uTRU\",\"FileInfoContainer\":\"Navbar_FileInfoContainer__3b5oQ\",\"FileName\":\"Navbar_FileName__23abe\",\"Creater\":\"Navbar_Creater__j3mKP\",\"EditVideo\":\"Navbar_EditVideo__1kNxg\",\"UserInfoContainer\":\"Navbar_UserInfoContainer__w_iEs\",\"User\":\"Navbar_User__2G6Ae\",\"UserInitials\":\"Navbar_UserInitials__1Z-As\",\"LogInLink\":\"Navbar_LogInLink__BnnPz\",\"SignUpLink\":\"Navbar_SignUpLink__33Ovn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Preview\":\"Preview_Preview__17wzV\",\"Main\":\"Preview_Main__1ts9X\",\"MainContent\":\"Preview_MainContent__3yphW\",\"CustomPlayer\":\"Preview_CustomPlayer__2cIUh\",\"VideoFooter\":\"Preview_VideoFooter__14BqQ\",\"Title\":\"Preview_Title__1FDCi\",\"DownloadAndLink\":\"Preview_DownloadAndLink__2b3Hg\",\"Download\":\"Preview_Download__1l2FY\",\"CopyLink\":\"Preview_CopyLink__g0mcY\",\"HeadlineAndExport\":\"Preview_HeadlineAndExport__3vxHH\",\"Headline\":\"Preview_Headline__2yd8P\",\"ExportButton\":\"Preview_ExportButton__3t5_Z\",\"Text\":\"Preview_Text__3m3nn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DragDrop\":\"DragDrop_DragDrop__69U1q\",\"UploadText\":\"DragDrop_UploadText__3BF2H\",\"DropArea\":\"DragDrop_DropArea__3Ck_W\",\"DropAreaContent\":\"DragDrop_DropAreaContent__2FbMw\",\"DropAreaText\":\"DragDrop_DropAreaText__3Nk_9\",\"DropAreaHeading\":\"DragDrop_DropAreaHeading__3SZMc\",\"DropAreaSubheading\":\"DragDrop_DropAreaSubheading__37y0F\",\"DropAreaBrowse\":\"DragDrop_DropAreaBrowse__1ku5G\",\"Active\":\"DragDrop_Active__2Le0T\"};","var _path, _path2, _path3, _path4;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTemplates(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6 2H2.66667C2.29848 2 2 2.29848 2 2.66667V6C2 6.36819 2.29848 6.66667 2.66667 6.66667H6C6.36819 6.66667 6.66667 6.36819 6.66667 6V2.66667C6.66667 2.29848 6.36819 2 6 2Z\",\n    stroke: \"black\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6 9.33331H2.66667C2.29848 9.33331 2 9.63179 2 9.99998V13.3333C2 13.7015 2.29848 14 2.66667 14H6C6.36819 14 6.66667 13.7015 6.66667 13.3333V9.99998C6.66667 9.63179 6.36819 9.33331 6 9.33331Z\",\n    stroke: \"black\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.3333 2H10C9.63182 2 9.33334 2.29848 9.33334 2.66667V6C9.33334 6.36819 9.63182 6.66667 10 6.66667H13.3333C13.7015 6.66667 14 6.36819 14 6V2.66667C14 2.29848 13.7015 2 13.3333 2Z\",\n    stroke: \"black\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.3333 9.33331H10C9.63182 9.33331 9.33334 9.63179 9.33334 9.99998V13.3333C9.33334 13.7015 9.63182 14 10 14H13.3333C13.7015 14 14 13.7015 14 13.3333V9.99998C14 9.63179 13.7015 9.33331 13.3333 9.33331Z\",\n    stroke: \"black\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTemplates);\nexport default __webpack_public_path__ + \"static/media/templates.9ddb4f2f.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/upload.e681cc4b.svg\";","import React, { useEffect, useRef, useCallback } from 'react';\r\nimport styles from './DragDrop.module.css';\r\nimport upload from '../../../assets/editor/upload.svg';\r\n\r\nconst DragDrop = ({ setVideoForUpload }) => {\r\n  const uploadRef = useRef(null);\r\n  const dropAreaRef = useRef(null);\r\n\r\n  const handleDragOver = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = 'copy';\r\n    dropAreaRef.current.classList.add(styles.Active);\r\n    return false;\r\n  }, []);\r\n\r\n  const handleDragEnter = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dropAreaRef.current.classList.add(styles.Active);\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dropAreaRef.current.classList.remove(styles.Active);\r\n  }, []);\r\n\r\n  const validateFile = useCallback(\r\n    (file) => {\r\n      if (file.type === 'video/mp4') {\r\n        let video = document.createElement('video');\r\n        video.preload = 'metadata';\r\n        video.onloadedmetadata = () => {\r\n          if (video.duration > 1) {\r\n            setVideoForUpload(file);\r\n          }\r\n          return;\r\n        };\r\n        video.src = URL.createObjectURL(file);\r\n      }\r\n    },\r\n    [setVideoForUpload]\r\n  );\r\n\r\n  const handleDrop = useCallback(\r\n    (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      dropAreaRef.current.classList.remove(styles.Active);\r\n      let file = e.dataTransfer.files[0];\r\n      validateFile(file);\r\n      return false;\r\n    },\r\n    [validateFile]\r\n  );\r\n\r\n  useEffect(() => {\r\n    let area = dropAreaRef.current;\r\n    area.addEventListener('dragover', handleDragOver, false);\r\n    area.addEventListener('dragenter', handleDragEnter, false);\r\n    area.addEventListener('dragleave', handleDragLeave, false);\r\n    area.addEventListener('drop', handleDrop, false);\r\n\r\n    return () => {\r\n      area.removeEventListener('dragover', handleDragOver, false);\r\n      area.removeEventListener('dragenter', handleDragEnter, false);\r\n      area.removeEventListener('dragleave', handleDragLeave, false);\r\n      area.removeEventListener('drop', handleDrop, false);\r\n    };\r\n  }, [handleDragOver, handleDrop, handleDragEnter, handleDragLeave]);\r\n\r\n  return (\r\n    <div className={styles.DragDrop}>\r\n      <p className={styles.UploadText}>Upload a video or audio file</p>\r\n      <div\r\n        ref={dropAreaRef}\r\n        className={styles.DropArea}\r\n        onClick={() => uploadRef.current.click()}\r\n      >\r\n        <div className={styles.DropAreaContent}>\r\n          <img src={upload} alt='upload' />\r\n          <div className={styles.DropAreaText}>\r\n            <p className={styles.DropAreaHeading}>Drag & drop your file here</p>\r\n            <p className={styles.DropAreaSubheading}>\r\n              or click to <span className={styles.DropAreaBrowse}>browse</span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <input\r\n        ref={uploadRef}\r\n        type='file'\r\n        accept='video/mp4'\r\n        style={{ display: 'none' }}\r\n        onChange={() => validateFile(uploadRef.current.files[0])}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DragDrop;\r\n","import React from 'react';\r\nimport styles from './Progress.module.css';\r\n\r\nconst Progress = ({ progress, heading }) => {\r\n  return (\r\n    <div className={styles.Progress}>\r\n      <p className={styles.Percentage}>{progress}%</p>\r\n      <p className={styles.Heading}>{heading}</p>\r\n      <div className={styles.ProgressBar}>\r\n        <div\r\n          className={styles.ProgressBarInner}\r\n          style={{\r\n            maxWidth: progress + '%',\r\n          }}\r\n        ></div>\r\n      </div>\r\n      <p className={styles.Subheading}>\r\n        Please be patient. It may take several minutes.\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Progress;\r\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n  baseURL: `${process.env.REACT_APP_API_BASE_URL_TEST}/api/v1`,\r\n});\r\n\r\nexport default instance;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useUploadVideo = () => {\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [info, setInfo] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const words = useRef(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const onUploadProgress = (e) => {\r\n    const currentProgress = Math.round((e.loaded * 100) / e.total);\r\n    if (isMounted.current && currentProgress !== 100) {\r\n      setUploadProgress(currentProgress);\r\n    }\r\n  };\r\n\r\n  const axiosUploadVideo = useCallback((formData) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .post('/videos', formData, {\r\n          params: { framerate: 4 },\r\n          onUploadProgress,\r\n          headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'multipart/form-data',\r\n          },\r\n        })\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const uploadVideo = useCallback(\r\n    async (formData) => {\r\n      setUploadProgress(0);\r\n      setIsUploading(true);\r\n      try {\r\n        const res = await axiosUploadVideo(formData);\r\n        console.log(res);\r\n        if (isMounted.current) {\r\n          setUploadProgress(100);\r\n          words.current = res.data.subtitles.captions;\r\n          setInfo({\r\n            id: res.data._id,\r\n            duration: res.data.duration,\r\n            url: res.data.original_video_url,\r\n            title: res.data.title,\r\n          });\r\n        }\r\n      } catch (err) {\r\n        console.log('Error Uploading Video', err);\r\n      } finally {\r\n        if (isMounted.current) setIsUploading(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosUploadVideo]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isUploading,\r\n    uploadVideo,\r\n    words: words.current,\r\n    info,\r\n    uploadProgress,\r\n  };\r\n};\r\n\r\nexport default useUploadVideo;\r\n","export default __webpack_public_path__ + \"static/media/backArrow.0fa2b863.svg\";","export default __webpack_public_path__ + \"static/media/twiso.8864782d.svg\";","import React from 'react';\r\nimport styles from './Navbar.module.css';\r\nimport backArrow from '../../assets/editor/backArrow.svg';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport twiso from '../../assets/preview/twiso.svg';\r\n\r\nconst Navbar = ({ children, videoData, isPreview, getVideoError, isAuth }) => {\r\n  const history = useHistory();\r\n  const backHandler = () => history.goBack();\r\n\r\n  return (\r\n    <header className={styles.Navbar}>\r\n      <div className={styles.BackFileInfoContainer}>\r\n        {isAuth || !isPreview ? (\r\n          <div className={styles.BackButton} onClick={backHandler}>\r\n            <img className={styles.BackArrow} src={backArrow} alt='back' />\r\n          </div>\r\n        ) : null}\r\n        {!isAuth && isPreview ? (\r\n          <img className={styles.Twiso} src={twiso} alt='twiso' />\r\n        ) : null}\r\n\r\n        {videoData && !isPreview ? (\r\n          <div className={styles.FileInfoContainer}>\r\n            <p className={styles.FileName}>{videoData.title}</p>\r\n            <p className={styles.Creater}>Dmitry</p>\r\n          </div>\r\n        ) : null}\r\n        {isPreview && isAuth && !getVideoError ? (\r\n          <Link to={`/editor/${videoData.id}`} className={styles.EditVideo}>\r\n            Edit video\r\n          </Link>\r\n        ) : null}\r\n      </div>\r\n      {children}\r\n      {!isAuth && isPreview ? (\r\n        <div className={styles.UserInfoContainer}>\r\n          <Link to={'/auth/sign-in'} className={styles.LogInLink}>\r\n            Log in\r\n          </Link>\r\n          <Link to={'/auth/sign-up'} className={styles.SignUpLink}>\r\n            Get Twiso for free\r\n          </Link>\r\n        </div>\r\n      ) : null}\r\n      {isAuth || !isPreview ? (\r\n        <div className={styles.UserInfoContainer}>\r\n          <div className={styles.User}>\r\n            <p className={styles.UserInitials}>DE</p>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import React, { useEffect } from 'react';\r\nimport styles from './Uploader.module.css';\r\nimport DragDrop from './DragDrop/DragDrop';\r\nimport Progress from '../../components/Progress/Progress';\r\nimport useUploadVideo from '../../hooks/useUploadVideo';\r\nimport Navbar from '../../components/Navbar/Navbar';\r\n\r\nconst Uploader = ({ viedoForUpload, setVideoForUpload, setVideoData }) => {\r\n  const { uploadVideo, info, uploadProgress } = useUploadVideo();\r\n\r\n  useEffect(() => {\r\n    if (info) setVideoData(info);\r\n  }, [info, setVideoData]);\r\n\r\n  useEffect(() => {\r\n    if (viedoForUpload) {\r\n      const formData = new FormData();\r\n      formData.append('video', viedoForUpload);\r\n      uploadVideo(formData);\r\n    }\r\n  }, [viedoForUpload, uploadVideo]);\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className={styles.Uploader}>\r\n        {!viedoForUpload ? (\r\n          <DragDrop setVideoForUpload={setVideoForUpload} />\r\n        ) : (\r\n          <Progress progress={uploadProgress} heading='Uploading your video' />\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Uploader;\r\n","export default __webpack_public_path__ + \"static/media/cut.663cdfbd.svg\";","export default __webpack_public_path__ + \"static/media/search.243833c0.svg\";","export const handleDeleted = (wordsArr, setCuts, setPlayerTime, wordIndex) => {\r\n  let arr = [];\r\n  let isLastDeleted = false;\r\n  let cutStart = 0;\r\n  let cutStartIndex = 0;\r\n  let cutEndIndex = 0;\r\n  let cutEnd = 0;\r\n  for (let i = 0; i < wordsArr.length; i++) {\r\n    let word = wordsArr[i];\r\n    if (word.active && isLastDeleted) {\r\n      isLastDeleted = false;\r\n      wordsArr[cutStartIndex].next = i;\r\n      arr.push({ start: cutStart, end: cutEnd });\r\n    } else if (!word.active && !isLastDeleted) {\r\n      isLastDeleted = true;\r\n      cutStart = word.start;\r\n      cutStartIndex = i;\r\n      cutEnd = word.end;\r\n    } else if (!word.active && isLastDeleted) {\r\n      cutEnd = word.end;\r\n      cutEndIndex = i;\r\n    }\r\n  }\r\n\r\n  if (isLastDeleted) arr.push({ start: cutStart, end: cutEnd });\r\n\r\n  if (isLastDeleted && cutStartIndex !== wordsArr.length - 1) {\r\n    wordsArr[cutStartIndex].next = cutEndIndex;\r\n  } else if (isLastDeleted) {\r\n    wordsArr[cutStartIndex].next = wordsArr.length - 1;\r\n  }\r\n  if (wordIndex !== null) setPlayerTime(wordIndex);\r\n  setCuts([...arr]);\r\n};\r\n\r\nconst handleRestore = (setCuts, setPlayerTime, wordIndex, restoreStart) => {\r\n  setCuts((prevState) => {\r\n    let newState = [];\r\n    for (let i = 0; i < prevState.length; i++) {\r\n      let cut = prevState[i];\r\n      if (cut.start !== restoreStart) newState.push(cut);\r\n    }\r\n    setPlayerTime(wordIndex);\r\n    return [...newState];\r\n  });\r\n};\r\n\r\nconst handleVideoCuts = (\r\n  type,\r\n  wordsArr,\r\n  setCuts,\r\n  setPlayerTime,\r\n  wordIndex,\r\n  restoreStart\r\n) => {\r\n  if (type === 'delete') {\r\n    handleDeleted(wordsArr, setCuts, setPlayerTime, wordIndex);\r\n  } else if (type === 'restore')\r\n    handleRestore(setCuts, setPlayerTime, wordIndex, restoreStart);\r\n};\r\n\r\nexport const findAndSetCurrentWord = (\r\n  deletedIndex,\r\n  wordsArr,\r\n  setWordIndex,\r\n  setCuts,\r\n  setPlayerTime\r\n) => {\r\n  let currentIndex = null;\r\n  for (let i = deletedIndex; i >= 0; i--) {\r\n    let word = wordsArr[i];\r\n    if (word.active) {\r\n      currentIndex = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (currentIndex === null) {\r\n    for (let i = deletedIndex; i < wordsArr.length; i++) {\r\n      let word = wordsArr[i];\r\n      if (word.active) {\r\n        currentIndex = i;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  setWordIndex(currentIndex);\r\n  handleVideoCuts('delete', wordsArr, setCuts, setPlayerTime, currentIndex);\r\n};\r\n\r\nexport const deleteWord = (\r\n  wordsArr,\r\n  wordIndex,\r\n  setWordIndex,\r\n  setCuts,\r\n  setPlayerTime\r\n) => {\r\n  let word = wordsArr[wordIndex];\r\n  word.active = false;\r\n  findAndSetCurrentWord(\r\n    wordIndex,\r\n    wordsArr,\r\n    setWordIndex,\r\n    setCuts,\r\n    setPlayerTime\r\n  );\r\n};\r\n\r\nexport const deleteSelection = (\r\n  wordsArr,\r\n  setWordIndex,\r\n  currentSelection,\r\n  setCurrentSelection,\r\n  setCuts,\r\n  setPlayerTime\r\n) => {\r\n  let deletedStartIndex = currentSelection.start;\r\n  let deleteEndIndex = currentSelection.end;\r\n\r\n  for (let i = deletedStartIndex; i < wordsArr.length; i++) {\r\n    let word = wordsArr[i];\r\n    word.active = false;\r\n    if (i === deleteEndIndex) break;\r\n  }\r\n\r\n  findAndSetCurrentWord(\r\n    deletedStartIndex,\r\n    wordsArr,\r\n    setWordIndex,\r\n    setCuts,\r\n    setPlayerTime\r\n  );\r\n  setCurrentSelection(null);\r\n};\r\n\r\nexport const restoreDeleted = (\r\n  wordsArr,\r\n  wordIndex,\r\n  setWordIndex,\r\n  setCurrentSelection,\r\n  setCuts,\r\n  setPlayerTime\r\n) => {\r\n  for (let i = wordIndex; i < wordsArr.length; i++) {\r\n    let word = wordsArr[i];\r\n    if (!word.active) {\r\n      word.active = true;\r\n      if (word.next !== null) word.next = null;\r\n    } else break;\r\n  }\r\n  let restoreStart = wordsArr[wordIndex].start;\r\n  handleVideoCuts(\r\n    'restore',\r\n    null,\r\n    setCuts,\r\n    setPlayerTime,\r\n    wordIndex,\r\n    restoreStart\r\n  );\r\n  setCurrentSelection(null);\r\n  setWordIndex(wordIndex);\r\n};\r\n","export default __webpack_public_path__ + \"static/media/restoreText.28a66a4d.svg\";","import {createContext} from 'react';\r\n\r\nconst EditorContext = createContext(null);\r\nexport default EditorContext;","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport styles from './Words.module.css';\r\nimport restoreText from '../../../assets/editor/restoreText.svg';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\n\r\nconst Words = ({\r\n  wordsArr,\r\n  currentWordIndex,\r\n  searchInput,\r\n  wordClickHandler,\r\n  inputIndex,\r\n  setInputIndex,\r\n  currentSelection,\r\n  fabricSub,\r\n  currentSub,\r\n  setShouldRerenderSub,\r\n}) => {\r\n  const { editorDispatch } = useContext(EditorContext);\r\n  const [input, setInput] = useState('');\r\n  const inputRef = useRef(null);\r\n\r\n  const handleNotSilenceAndText = (id, text) => {\r\n    let words = currentSub.val.words;\r\n    for (let i = 0; i < words.length; i++) {\r\n      let word = words[i];\r\n      if (word._id === id) {\r\n        let isWhitespace = word.text.indexOf(' ') === 0;\r\n        word.text = isWhitespace ? ' ' + text : text;\r\n        if (word.silence) word.silence = false;\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSilenceAndText = (id, text) => {\r\n    let words = currentSub.val.words;\r\n    if (words) {\r\n      for (let i = 0; i < words.length; i++) {\r\n        let word = words[i];\r\n        if (word._id === id) {\r\n          let isFirst = i === 0;\r\n          text = isFirst ? text + ' ' : text;\r\n          let isNoWhitespace = word.text.indexOf(' ') !== 0;\r\n          word.text = isNoWhitespace && !isFirst ? ' ' + text : text;\r\n          if (word.silence) word.silence = false;\r\n          break;\r\n        }\r\n      }\r\n    } else {\r\n      currentSub.val.silence = false;\r\n      currentSub.val.words = [{ ...currentSub.val, text }];\r\n    }\r\n  };\r\n\r\n  const handleNoText = (id) => {\r\n    let words = currentSub.val.words;\r\n    let silenceCount = 0;\r\n    for (let i = 0; i < words.length; i++) {\r\n      let word = words[i];\r\n      if (word._id === id) {\r\n        word.text = '';\r\n        word.silence = true;\r\n      }\r\n      if (word.silence) silenceCount++;\r\n    }\r\n    if (silenceCount === words.length) {\r\n      currentSub.val.silence = true;\r\n      currentSub.val.words = null;\r\n    }\r\n  };\r\n\r\n  const handleSubTextChange = (id, text, isSilence) => {\r\n    if (!isSilence && text && id) {\r\n      handleNotSilenceAndText(id, text);\r\n    } else if (text && isSilence) {\r\n      handleSilenceAndText(id, text);\r\n    } else if (id) {\r\n      handleNoText(id);\r\n    }\r\n    setShouldRerenderSub(true);\r\n  };\r\n\r\n  const blurHandler = (e) => {\r\n    let id = e.target.parentNode.id;\r\n    let inputVal = input.trim().length > 0 ? input : null;\r\n    if (wordsArr[inputIndex]) {\r\n      if (inputVal && !wordsArr[inputIndex].silence) {\r\n        wordsArr[inputIndex].text = inputVal;\r\n        if (fabricSub) handleSubTextChange(id, inputVal, false);\r\n      } else if (inputVal) {\r\n        wordsArr[inputIndex].text = inputVal;\r\n        wordsArr[inputIndex].silence = false;\r\n        if (fabricSub) handleSubTextChange(id, inputVal, true);\r\n      } else {\r\n        if (fabricSub && !wordsArr[inputIndex].silence)\r\n          handleSubTextChange(id, inputVal, false);\r\n        wordsArr[inputIndex].silence = true;\r\n      }\r\n    }\r\n    setInput('');\r\n    setInputIndex(null);\r\n    editorDispatch({ type: 'setShouldTriggerWordsUpdate', data: true });\r\n  };\r\n\r\n  let isLastDeleted = false;\r\n  let shouldShow = true;\r\n  let isSelectionMode = false;\r\n  let isSelectionEnd = false;\r\n\r\n  useEffect(() => {\r\n    if (inputIndex !== null) {\r\n      inputRef.current.focus();\r\n      if (wordsArr[inputIndex] && !wordsArr[inputIndex].silence) {\r\n        setInput(wordsArr[inputIndex].text);\r\n      }\r\n    }\r\n  }, [inputIndex, wordsArr]);\r\n\r\n  return wordsArr.map((word, i) => {\r\n    if (isLastDeleted && !word.active) shouldShow = false;\r\n    else shouldShow = true;\r\n    let isCurrent = i === currentWordIndex && !currentSelection && word.active;\r\n    let isHighlight =\r\n      !word.silence &&\r\n      word.active &&\r\n      searchInput.trim().length > 1 &&\r\n      word.text.trim().toLowerCase().includes(searchInput.trim().toLowerCase());\r\n\r\n    if (!isLastDeleted && !word.active) isLastDeleted = true;\r\n    if (isLastDeleted && word.active) isLastDeleted = false;\r\n\r\n    if (currentSelection && currentSelection.start === i) {\r\n      isSelectionMode = true;\r\n    } else if (currentSelection && currentSelection.end === i) {\r\n      isSelectionEnd = true;\r\n    } else if (isSelectionEnd) {\r\n      isSelectionMode = false;\r\n      isSelectionEnd = false;\r\n    }\r\n\r\n    let isInput = inputIndex !== null && isCurrent;\r\n    let innerContent = isInput ? (\r\n      <input\r\n        ref={inputRef}\r\n        className={styles.WordInput}\r\n        type='text'\r\n        value={input}\r\n        onBlur={blurHandler}\r\n        onChange={(e) => setInput(e.target.value)}\r\n      />\r\n    ) : (\r\n      <span className={!word.silence ? styles.Word : styles.Pause}>\r\n        {!word.silence ? word.text + ' ' : '•••• '}\r\n      </span>\r\n    );\r\n\r\n    let content = !word.active ? (\r\n      <span className={styles.Deleted}>\r\n        <span className={styles.DeletedImgContainer}>\r\n          <img\r\n            className={styles.DeletedImg}\r\n            src={restoreText}\r\n            alt='restore text'\r\n          />\r\n        </span>\r\n        <span className={styles.DeletedText}>[...] </span>\r\n      </span>\r\n    ) : (\r\n      innerContent\r\n    );\r\n\r\n    let containerStyle = { width: 'auto' };\r\n    if (isInput) {\r\n      containerStyle.width = !word.silence\r\n        ? word.text.length * 1.5 + 'ch'\r\n        : '70px';\r\n      containerStyle.marginRight = '0.4rem';\r\n    }\r\n\r\n    return shouldShow ? (\r\n      <span\r\n        style={containerStyle}\r\n        id={word._id}\r\n        key={word._id}\r\n        className={[\r\n          styles.WordContainer,\r\n          isCurrent ? styles.CurrentWord : null,\r\n          isHighlight ? styles.Highlight : null,\r\n          isSelectionMode ? styles.InSelection : null,\r\n        ].join(' ')}\r\n        onClick={(e) => wordClickHandler(e, !word.active)}\r\n      >\r\n        {content}\r\n      </span>\r\n    ) : null;\r\n  });\r\n};\r\n\r\nexport default Words;\r\n","// export const findSubWithWordIndex2 = (wordIndex, words, subList) => {\r\n//   let word = words[wordIndex];\r\n//   if (subList && word) {\r\n//     for (let i = 0; i < subList.length; i++) {\r\n//       let sub = subList[i];\r\n//       if (sub.words && +sub.end >= +word.start) {\r\n//         for (let j = 0; j < sub.words.length; j++) {\r\n//           let subWord = sub.words[j];\r\n//           if (subWord && subWord._id === word._id) return i;\r\n//         }\r\n//       } else if (sub.silence && word._id === sub._id) return i;\r\n//     }\r\n//     return null;\r\n//   } else return null;\r\n// };\r\n\r\n// Linked List Search\r\nexport const findSubWithWordIndex = (wordIndex, words, subList) => {\r\n  let word = words[wordIndex];\r\n  if (subList && word) {\r\n    let subNode = subList.head;\r\n    for (let i = 0; i < subList.length; i++) {\r\n      let sub = subNode.val;\r\n      if (sub.words && +sub.end >= +word.start) {\r\n        for (let j = 0; j < sub.words.length; j++) {\r\n          let subWord = sub.words[j];\r\n          if (subWord && subWord._id === word._id) return subNode;\r\n        }\r\n      } else if (sub.silence && word._id === sub._id) return subNode;\r\n      // console.log(sub);\r\n      subNode = subNode.next;\r\n    }\r\n    return null;\r\n  } else return null;\r\n};\r\n\r\nexport const findWordIndexWithId = (id, words) => {\r\n  for (let i = 0; i < words.length; i++) {\r\n    let word = words[i];\r\n    if (word._id === id) return i;\r\n  }\r\n  return null;\r\n};\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport styles from './TranscriptionProgress.module.css';\r\n\r\nconst TranscriptionProgress = ({ status, words, setIsFinished }) => {\r\n  const [progress, setProgress] = useState(0);\r\n  const isMounted = useRef(false);\r\n  const intervalRef = useRef(null);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      if (status.isFinished) setIsFinished(true);\r\n      setIsFirstLoad(false);\r\n    }\r\n  }, [isFirstLoad, status, setIsFinished]);\r\n\r\n  useEffect(() => {\r\n    let interval = intervalRef.current;\r\n    return () => {\r\n      if (interval) clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  const progressInterval = useCallback((intervalTime) => {\r\n    let interval = setInterval(() => {\r\n      if (isMounted.current) {\r\n        setProgress((prevState) => {\r\n          if (prevState >= 99) {\r\n            clearInterval(interval);\r\n            return 99;\r\n          } else return prevState + 1;\r\n        });\r\n      }\r\n    }, intervalTime);\r\n    intervalRef.current = interval;\r\n  }, []);\r\n\r\n  const progressHandler = useCallback(\r\n    (status) => {\r\n      if (status.timeLeft && status.timeLeft > 1) {\r\n        if (intervalRef.current) clearInterval(intervalRef.current);\r\n        let start = new Date(+status.startDate * 1000);\r\n        let now = new Date();\r\n        let secondsElapsed = Math.floor((now - start) / 1000);\r\n        let estimatedTime = secondsElapsed + status.timeLeft;\r\n        let finishedPercentage = (secondsElapsed * 100) / estimatedTime;\r\n        setProgress(finishedPercentage);\r\n        let intervalTime =\r\n          (status.timeLeft * 1000) / (100 - finishedPercentage);\r\n        setProgress(finishedPercentage);\r\n        progressInterval(intervalTime);\r\n      } else setProgress(99);\r\n    },\r\n    [progressInterval]\r\n  );\r\n\r\n  useEffect(() => {\r\n    let interval = null;\r\n    if (!isFirstLoad && status.isFinished) {\r\n      clearInterval(intervalRef.current);\r\n      let interval = setInterval(() => {\r\n        if (isMounted.current) {\r\n          setProgress((prevState) => {\r\n            if (prevState >= 100) {\r\n              clearInterval(interval);\r\n              return 100;\r\n            } else return prevState + 1;\r\n          });\r\n        }\r\n      }, 100);\r\n    } else progressHandler(status);\r\n\r\n    return () => {\r\n      if (interval !== null) clearInterval(interval);\r\n    };\r\n  }, [isFirstLoad, status, progressHandler]);\r\n\r\n  useEffect(() => {\r\n    let timeout = null;\r\n    if (progress === 100 && words) {\r\n      timeout = setTimeout(() => {\r\n        if (isMounted.current) setIsFinished(true);\r\n      }, 500);\r\n    }\r\n\r\n    return () => {\r\n      if (timeout !== null) clearTimeout(timeout);\r\n    };\r\n  }, [progress, words, setIsFinished]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.TranscriptionProgress}>\r\n      {!isFirstLoad ? (\r\n        <>\r\n          <p className={styles.Heading}>\r\n            We are transcribing your video, this process may take several\r\n            minutes. Once it's finished, you can edit your video by editing\r\n            text.\r\n          </p>\r\n          <p className={styles.Percentage}>{Math.floor(progress)}%</p>\r\n          <div className={styles.Box}>\r\n            {[...Array(20)].map((x, i) => (\r\n              <div className={styles.Line} key={i}></div>\r\n            ))}\r\n          </div>\r\n        </>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TranscriptionProgress;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport styles from './Transcription.module.css';\r\nimport cut from '../../assets/editor/cut.svg';\r\nimport search from '../../assets/editor/search.svg';\r\nimport {\r\n  deleteWord,\r\n  restoreDeleted,\r\n  deleteSelection,\r\n  findAndSetCurrentWord,\r\n} from './utils/updateTextAndCuts';\r\nimport Words from './Words/Words';\r\nimport { findWordIndexWithId } from '../../utils/findIndex';\r\nimport TranscriptionProgress from './TranscriptionProgress/TranscriptionProgress';\r\n\r\nconst Transcription = ({\r\n  words,\r\n  currentWordIndex,\r\n  setCurrentWordIndex,\r\n  isPlaying,\r\n  videoRef,\r\n  setCuts,\r\n  currentSelection,\r\n  setCurrentSelection,\r\n  currentSub,\r\n  fabricSub,\r\n  setShouldRerenderSub,\r\n  setCurrentTime,\r\n  setNextCutIndex,\r\n  videoCuts,\r\n  status,\r\n}) => {\r\n  const [searchInput, setSearchInput] = useState('');\r\n  const [inputIndex, setInputIndex] = useState(null);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [isFinished, setIsFinished] = useState(false);\r\n\r\n  const setPlayerTime = useCallback(\r\n    (wordIndex) => {\r\n      let endTime = '0';\r\n      if (wordIndex !== null) {\r\n        let word = words[wordIndex];\r\n        endTime = word.end;\r\n        videoRef.current.currentTime = +word.start;\r\n        setCurrentTime(+word.start);\r\n        // console.log('seting player time: ', +word.start);\r\n      }\r\n      let cutIndex = 0;\r\n      for (let i = 0; i < videoCuts.length; i++) {\r\n        let cut = videoCuts[i];\r\n        if (+endTime > +cut.end) {\r\n          cutIndex++;\r\n        }\r\n      }\r\n      setNextCutIndex(cutIndex);\r\n    },\r\n    [setCurrentTime, setNextCutIndex, videoCuts, videoRef, words]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad && words) {\r\n      setIsFirstLoad(null);\r\n      findAndSetCurrentWord(\r\n        0,\r\n        words,\r\n        setCurrentWordIndex,\r\n        setCuts,\r\n        setPlayerTime\r\n      );\r\n    }\r\n  }, [isFirstLoad, words, setCuts, setPlayerTime, setCurrentWordIndex]);\r\n\r\n  const wordClickHandler = (e, isDeleted) => {\r\n    let id = e.currentTarget.id;\r\n    let wordIndex = findWordIndexWithId(id, words);\r\n    if (isPlaying) videoRef.current.pause();\r\n    if (e.detail > 1 && inputIndex === null) setInputIndex(wordIndex);\r\n    if (!isDeleted && inputIndex === null && wordIndex !== null) {\r\n      setCurrentSelection(null);\r\n      setPlayerTime(wordIndex);\r\n      setCurrentWordIndex(wordIndex);\r\n    } else if (inputIndex === null) {\r\n      restoreDeleted(\r\n        words,\r\n        wordIndex,\r\n        setCurrentWordIndex,\r\n        setCurrentSelection,\r\n        setCuts,\r\n        setPlayerTime\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleSelection = useCallback(\r\n    (selection, anchorNode, focusNode, isAnchorNode, isFocusNode, position) => {\r\n      let start = '';\r\n      let end = '';\r\n      if (anchorNode.parentNode.id === focusNode.parentNode.id) {\r\n        let wordIndex = findWordIndexWithId(anchorNode.parentNode.id, words);\r\n        if (anchorNode.parentNode.id && wordIndex !== null) {\r\n          setPlayerTime(wordIndex);\r\n          setCurrentWordIndex(wordIndex);\r\n        }\r\n        selection.removeAllRanges();\r\n        setCurrentSelection(null);\r\n      } else if (isAnchorNode && isFocusNode) {\r\n        if (position === 4) {\r\n          start = anchorNode.parentNode.id;\r\n          end = focusNode.parentNode.id;\r\n        } else if (position === 2) {\r\n          start = focusNode.parentNode.id;\r\n          end = anchorNode.parentNode.id;\r\n        }\r\n      } else if (isAnchorNode) {\r\n        if (position === 4) {\r\n          start = anchorNode.parentNode.id;\r\n          end = anchorNode.parentNode.parentNode.lastChild.id;\r\n        } else if (position === 2) {\r\n          start = anchorNode.parentNode.parentNode.firstChild.id;\r\n          end = anchorNode.parentNode.id;\r\n        }\r\n      } else if (isFocusNode) {\r\n        if (position === 4) {\r\n          start = anchorNode.parentNode.parentNode.firstChild.parentNode.id;\r\n          end = focusNode.id;\r\n        } else if (position === 2) {\r\n          start = focusNode.id;\r\n          end = anchorNode.parentNode.parentNode.lastChild.parentNode.id;\r\n        }\r\n      }\r\n\r\n      if (start !== '' && end !== '') {\r\n        let indexStart = findWordIndexWithId(start, words);\r\n        let indexEnd = findWordIndexWithId(end, words);\r\n        if (indexStart !== null && indexEnd !== null) {\r\n          setCurrentSelection({ start: indexStart, end: indexEnd });\r\n          setPlayerTime(indexStart);\r\n          setCurrentWordIndex(indexStart);\r\n        }\r\n      }\r\n      // selection.removeAllRanges();\r\n    },\r\n    [setCurrentWordIndex, setCurrentSelection, setPlayerTime, words]\r\n  );\r\n\r\n  const mouseUpHandler = useCallback(\r\n    (e) => {\r\n      let selection = document.getSelection();\r\n      if (e.detail < 2 && selection.anchorNode && selection.focusNode) {\r\n        let anchorNode = selection.anchorNode.parentNode;\r\n        let focusNode = selection.focusNode.parentNode;\r\n        let isAnchorNode = anchorNode.tagName === 'SPAN';\r\n        let isFocusNode = focusNode.tagName === 'SPAN';\r\n        let position = selection.anchorNode.compareDocumentPosition(\r\n          selection.focusNode\r\n        );\r\n        if ((isAnchorNode || isFocusNode) && !selection.isCollapsed) {\r\n          if (isPlaying) videoRef.current.pause();\r\n          handleSelection(\r\n            selection,\r\n            anchorNode,\r\n            focusNode,\r\n            isAnchorNode,\r\n            isFocusNode,\r\n            position\r\n          );\r\n        }\r\n      }\r\n    },\r\n    [handleSelection, isPlaying, videoRef]\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('mouseup', mouseUpHandler);\r\n    return () => document.removeEventListener('mouseup', mouseUpHandler);\r\n  }, [mouseUpHandler]);\r\n\r\n  const cutClickHandler = () => {\r\n    if (isPlaying) videoRef.current.pause();\r\n    if (!currentSelection && currentWordIndex !== null && words) {\r\n      deleteWord(\r\n        words,\r\n        currentWordIndex,\r\n        setCurrentWordIndex,\r\n        setCuts,\r\n        setPlayerTime\r\n      );\r\n    } else if (currentSelection && words) {\r\n      deleteSelection(\r\n        words,\r\n        setCurrentWordIndex,\r\n        currentSelection,\r\n        setCurrentSelection,\r\n        setCuts,\r\n        setPlayerTime\r\n      );\r\n    }\r\n    let selection = document.getSelection();\r\n    selection.removeAllRanges();\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Transcription}>\r\n      <div className={styles.TextControls}>\r\n        <div className={styles.CutContainer} onClick={cutClickHandler}>\r\n          <img src={cut} alt='cut' />\r\n          <p>Cut</p>\r\n        </div>\r\n        <div className={styles.SearchContainer}>\r\n          <input\r\n            value={searchInput}\r\n            onChange={(e) => setSearchInput(e.target.value)}\r\n            className={styles.SearchInput}\r\n            placeholder='Search'\r\n            type='text'\r\n          />\r\n          <img className={styles.SearchSvg} src={search} alt='search' />\r\n        </div>\r\n      </div>\r\n      <div id='textbox' className={styles.Text}>\r\n        {isFinished ? (\r\n          <Words\r\n            wordsArr={words}\r\n            currentWordIndex={currentWordIndex}\r\n            searchInput={searchInput}\r\n            wordClickHandler={wordClickHandler}\r\n            inputIndex={inputIndex}\r\n            setInputIndex={setInputIndex}\r\n            currentSelection={currentSelection}\r\n            fabricSub={fabricSub}\r\n            currentSub={currentSub}\r\n            setShouldRerenderSub={setShouldRerenderSub}\r\n          />\r\n        ) : (\r\n          <TranscriptionProgress\r\n            status={status}\r\n            words={words}\r\n            setIsFinished={setIsFinished}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Transcription;\r\n","import { fabric } from 'fabric';\r\n\r\nexport const addNewImage = async (\r\n  state,\r\n  canvas,\r\n  dispatch,\r\n  id,\r\n  updateId,\r\n  userAssets,\r\n  setUserAssets,\r\n  isMounted\r\n) => {\r\n  let imageSrc = state.imageToAdd.src;\r\n  let imgAsset = userAssets.filter((asset) => asset.src === imageSrc)[0];\r\n  if (state.shouldReplaceImage) {\r\n    let active = canvas.getActiveObject();\r\n    if (imgAsset) {\r\n      let scale = (active.width * active.scaleX) / imgAsset.width;\r\n      let img = new fabric.CustomImage(imgAsset, {\r\n        originalWidth: imgAsset.width,\r\n        originalHeight: imgAsset.height,\r\n        width: imgAsset.width,\r\n        height: imgAsset.height,\r\n        src: imageSrc,\r\n        scaleX: scale,\r\n        scaleY: scale,\r\n        top: active.top,\r\n        left: active.left,\r\n        id: active.id,\r\n        cornerRadius: active.cornerRadius,\r\n        angle: active.angle,\r\n        isSvg: state.imageToAdd.type === 'svg',\r\n        crossOrigin: 'Anonymous',\r\n      });\r\n      canvas.remove(active);\r\n      canvas.add(img).setActiveObject(img);\r\n      canvas.requestRenderAll();\r\n      dispatch({ type: 'setShouldUpdateImage', data: true });\r\n    } else {\r\n      let imgEl = new Image();\r\n      imgEl.crossOrigin = 'Anonymous';\r\n      imgEl.src = imageSrc;\r\n      let img = new fabric.CustomImage(imgEl, {\r\n        originalWidth: 0,\r\n        originalHeight: 0,\r\n        width: active.width,\r\n        height: active.height,\r\n        src: imageSrc,\r\n        scaleX: active.scaleX,\r\n        scaleY: active.scaleY,\r\n        top: active.top,\r\n        left: active.left,\r\n        id: active.id,\r\n        cornerRadius: active.cornerRadius,\r\n        angle: active.angle,\r\n        isSvg: state.imageToAdd.type === 'svg',\r\n        crossOrigin: 'Anonymous',\r\n        excludeFromExport: true,\r\n      });\r\n\r\n      canvas.remove(active);\r\n      canvas.add(img).setActiveObject(img);\r\n      canvas.requestRenderAll();\r\n      imgEl.onload = () => {\r\n        if (isMounted.current) {\r\n          let newScale = (active.width * active.scaleX) / imgEl.width;\r\n          img.originalWidth = imgEl.width;\r\n          img.originalHeight = imgEl.height;\r\n          img.width = imgEl.width;\r\n          img.height = imgEl.height;\r\n          img.scaleX = newScale;\r\n          img.scaleY = newScale;\r\n          img.excludeFromExport = false;\r\n          canvas.requestRenderAll();\r\n          setUserAssets((prevState) => [...prevState, imgEl]);\r\n          dispatch({ type: 'setShouldUpdateImage', data: true });\r\n          dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n        }\r\n      };\r\n    }\r\n    dispatch({ type: 'setShouldReplaceImage', data: false });\r\n  } else {\r\n    if (imgAsset) {\r\n      let img = new fabric.CustomImage(imgAsset, {\r\n        originalWidth: imgAsset.width,\r\n        originalHeight: imgAsset.height,\r\n        width: imgAsset.width,\r\n        height: imgAsset.height,\r\n        src: imageSrc,\r\n        scaleX: 256 / imgAsset.width,\r\n        scaleY: 256 / imgAsset.width,\r\n        left: 100,\r\n        top: 100,\r\n        id: id,\r\n        cornerRadius: 0,\r\n        isSvg: state.imageToAdd.type === 'svg',\r\n        crossOrigin: 'Anonymous',\r\n      });\r\n      canvas.add(img).setActiveObject(img);\r\n      canvas.requestRenderAll();\r\n      updateId();\r\n    } else {\r\n      let imgEl = new Image();\r\n      imgEl.crossOrigin = 'Anonymous';\r\n      imgEl.src = imageSrc;\r\n      let width = imgEl.width;\r\n      let height = imgEl.height;\r\n      if (width === 0 || height === 0) {\r\n        width = 256;\r\n        height = 320;\r\n      }\r\n      let scale = 256 / width;\r\n      let img = new fabric.CustomImage(imgEl, {\r\n        originalWidth: 0,\r\n        originalHeight: 0,\r\n        width,\r\n        height,\r\n        src: imageSrc,\r\n        scaleX: scale,\r\n        scaleY: scale,\r\n        left: 100,\r\n        top: 100,\r\n        id: id,\r\n        cornerRadius: 0,\r\n        isSvg: state.imageToAdd.type === 'svg',\r\n        crossOrigin: 'Anonymous',\r\n        excludeFromExport: true,\r\n      });\r\n      canvas.add(img).setActiveObject(img);\r\n      canvas.requestRenderAll();\r\n      updateId();\r\n      imgEl.onload = () => {\r\n        if (isMounted.current) {\r\n          img.originalWidth = imgEl.width;\r\n          img.originalHeight = imgEl.height;\r\n          img.width = imgEl.width;\r\n          img.height = imgEl.height;\r\n          img.scaleX = 256 / imgEl.width;\r\n          img.scaleY = 256 / imgEl.width;\r\n          img.excludeFromExport = false;\r\n          canvas.requestRenderAll();\r\n          setUserAssets((prevState) => [...prevState, imgEl]);\r\n          dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n        }\r\n      };\r\n    }\r\n  }\r\n  dispatch({ type: 'setImageToAdd', data: null });\r\n};\r\n\r\nexport const addNewText = (canvas, state, dispatch, id, updateId) => {\r\n  dispatch({ type: 'setShouldAddText', data: false });\r\n  let text = new fabric.CustomTextbox('Add text‎', {\r\n    left: 100,\r\n    top: 100,\r\n    width: 130,\r\n    paddingX: 40,\r\n    paddingY: 0,\r\n    splitByGrapheme: true,\r\n    cursorWidth: 0.5,\r\n    ...state.textState,\r\n  });\r\n  text.id = id;\r\n  canvas.add(text).setActiveObject(text);\r\n  canvas.requestRenderAll();\r\n  updateId();\r\n};\r\n\r\nconst newRect = () => {\r\n  let rect = new fabric.Rect({\r\n    left: 100,\r\n    top: 100,\r\n    width: 152,\r\n    height: 152,\r\n    noScaleCache: false,\r\n    strokeUniform: true,\r\n    fill: 'rgba(196,196,196,1)',\r\n    stroke: 'rgba(255,255,255,1)',\r\n    strokeWidth: 0,\r\n    rx: 0,\r\n    ry: 0,\r\n  });\r\n  return rect;\r\n};\r\n\r\nconst newCircle = () => {\r\n  let circle = new fabric.Circle({\r\n    left: 100,\r\n    top: 100,\r\n    radius: 76,\r\n    noScaleCache: false,\r\n    strokeUniform: true,\r\n    fill: 'rgba(196,196,196,1)',\r\n    stroke: 'rgba(255,255,255,1)',\r\n    strokeWidth: 0,\r\n    rx: 0,\r\n    ry: 0,\r\n  });\r\n  return circle;\r\n};\r\n\r\nconst newTriangle = () => {\r\n  let triangle = new fabric.Triangle({\r\n    left: 100,\r\n    top: 100,\r\n    width: 152,\r\n    height: 150,\r\n    noScaleCache: false,\r\n    strokeUniform: true,\r\n    fill: 'rgba(196,196,196,1)',\r\n    stroke: 'rgba(255,255,255,1)',\r\n    strokeWidth: 0,\r\n    rx: 0,\r\n    ry: 0,\r\n  });\r\n  return triangle;\r\n};\r\n\r\nconst newLine = () => {\r\n  let line = new fabric.Line([0, 0, 300, 0], {\r\n    left: 100,\r\n    top: 100,\r\n    stroke: 'rgba(196,196,196,1)',\r\n    strokeWidth: 2,\r\n    noScaleCache: false,\r\n    rx: 0,\r\n    ry: 0,\r\n  });\r\n  return line;\r\n};\r\n\r\nexport const addNewShape = (state, canvas, dispatch, id, updateId) => {\r\n  dispatch({ type: 'setShapeToAdd', data: null });\r\n  let obj = null;\r\n  if (state.shapeToAdd === 'square') obj = newRect();\r\n  else if (state.shapeToAdd === 'circle') obj = newCircle();\r\n  else if (state.shapeToAdd === 'triangle') obj = newTriangle();\r\n  else if (state.shapeToAdd === 'line') obj = newLine();\r\n  if (obj) {\r\n    obj.id = id;\r\n    canvas.add(obj).setActiveObject(obj);\r\n    canvas.requestRenderAll();\r\n    updateId();\r\n  }\r\n};\r\n","import { useEffect, useRef } from 'react';\r\nimport { addNewImage, addNewShape, addNewText } from '../utils/addObject';\r\n\r\nconst useAddObject = (\r\n  state,\r\n  dispatch,\r\n  canvas,\r\n  id,\r\n  updateId,\r\n  userAssets,\r\n  setUserAssets\r\n) => {\r\n  const isMounted = useRef(false);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (state.shapeToAdd) {\r\n      addNewShape(state, canvas, dispatch, id, updateId);\r\n    } else if (state.imageToAdd) {\r\n      addNewImage(\r\n        state,\r\n        canvas,\r\n        dispatch,\r\n        id,\r\n        updateId,\r\n        userAssets,\r\n        setUserAssets,\r\n        isMounted\r\n      );\r\n    } else if (state.shouldAddText) {\r\n      addNewText(canvas, state, dispatch, id, updateId);\r\n    }\r\n  }, [canvas, dispatch, state, id, updateId, userAssets, setUserAssets]);\r\n};\r\n\r\nexport default useAddObject;\r\n","import {createContext} from 'react';\r\n\r\nconst EventContext = createContext(null);\r\nexport default EventContext;","const textPropertyArr = [\r\n  'fontFamily',\r\n  'fontStyle',\r\n  'fontWeight',\r\n  'fontSize',\r\n  'fill',\r\n  'opacity',\r\n  'textAlign',\r\n];\r\nconst shapePropertyArr = ['fill', 'stroke', 'strokeWidth', 'rx', 'ry'];\r\nconst imagePropertyArr = ['cornerRadius', 'isSvg'];\r\nconst videoPropertyArr = ['cornerRadius', 'stroke', 'strokeWidth'];\r\n\r\nconst handleObject = (e, dispatch, type, propertyArr) => {\r\n  let newState = {};\r\n  if (e.target.type === 'video' && e.target.stroke === null) {\r\n    e.target.stroke = 'rgba(255,255,255,1)';\r\n  }\r\n  propertyArr.forEach((property) => {\r\n    newState[property] = e.target[property];\r\n  });\r\n  dispatch({ type, data: newState });\r\n};\r\n\r\nconst handleSelected = (e, dispatch) => {\r\n  let obj = { type: '', object: null };\r\n  dispatch({ type: 'setCurrentCoords', data: e.target.lineCoords });\r\n  if (e.target.type === 'customTextbox') {\r\n    obj.type = 'text';\r\n    handleObject(e, dispatch, 'setTextState', textPropertyArr);\r\n  } else if (e.target.type === 'customImage') {\r\n    obj.type = 'customImage';\r\n    handleObject(e, dispatch, 'setImageState', imagePropertyArr);\r\n  } else if (e.target.type === 'subtitle') obj.type = 'subtitle';\r\n  else if (e.target.type === 'video') {\r\n    obj.type = 'video';\r\n    handleObject(e, dispatch, 'setVideoState', videoPropertyArr);\r\n  } else {\r\n    obj.type = e.target.type;\r\n    handleObject(e, dispatch, 'setShapeState', shapePropertyArr);\r\n  }\r\n  obj.object = e.target;\r\n  dispatch({ type: 'setCurrentObject', data: obj });\r\n};\r\n\r\nexport const onCreated = (e, c, dispatch, showCanvasToolbar) => {\r\n  if (e.target.type === 'activeSelection') {\r\n    c.discardActiveObject();\r\n    return;\r\n  }\r\n  if (showCanvasToolbar) {\r\n    dispatch({ type: 'setShowCanvasToolbar', data: false });\r\n  }\r\n  handleSelected(e, dispatch);\r\n};\r\n\r\nexport const onCleared = (e, dispatch, currentId) => {\r\n  currentId.current = null;\r\n  dispatch({\r\n    type: 'setCurrentObject',\r\n    data: { type: '', object: null },\r\n  });\r\n  dispatch({\r\n    type: 'setCurrentCoords',\r\n    data: null,\r\n  });\r\n};\r\n\r\nexport const onModified = (e, dispatch) => {\r\n  handleSelected(e, dispatch);\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const onAdded = (e, dispatch, canvas, fabricSub) => {\r\n  if (fabricSub) canvas.bringToFront(fabricSub);\r\n  if (\r\n    e.target.type === 'customImage' &&\r\n    (e.target.originalWidth === 0 || e.target.originalHeight === 0)\r\n  ) {\r\n    return;\r\n  }\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const onRemoved = (e, dispatch) => {\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const onUpdated = (e, dispatch) => {\r\n  dispatch({ type: 'setShowToolbar', data: false });\r\n  handleSelected(e, dispatch);\r\n};\r\n\r\nexport const onTextEnter = (e, c, setIsEditingText) => {\r\n  setIsEditingText(true);\r\n  if (e.target.text === 'Add text‎') {\r\n    e.target.text = '';\r\n    e.target.hiddenTextarea.value = '';\r\n    c.requestRenderAll();\r\n  }\r\n};\r\n\r\nexport const onTextExit = (e, c, setIsEditingText) => {\r\n  setIsEditingText(false);\r\n  if (e.target.text === '') e.target.text = 'Add text‎';\r\n  c.requestRenderAll();\r\n};\r\n","import { useCallback, useEffect, useState, useRef, useContext } from 'react';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport {\r\n  onCreated,\r\n  onModified,\r\n  onCleared,\r\n  onUpdated,\r\n  onTextEnter,\r\n  onTextExit,\r\n  onAdded,\r\n  onRemoved,\r\n} from '../utils/onCanvasEvents';\r\n\r\nconst removeListeners = (c) => {\r\n  c.off('selection:created');\r\n  c.off('selection:updated');\r\n  c.off('selection:cleared');\r\n  c.off('object:modified');\r\n  c.off('object:added');\r\n  c.off('object:removed');\r\n  c.off('object:rotating');\r\n  c.off('object:rotated');\r\n  c.off('object:scaling');\r\n  c.off('object:scaled');\r\n  c.off('object:skewing');\r\n  c.off('object:skewed');\r\n  c.off('object:moved');\r\n  c.off('text:editing:entered');\r\n  c.off('text:editing:exited');\r\n};\r\n\r\nconst useSelectionObserver = (canvas, state, dispatch, fabricSub) => {\r\n  const { eventState, eventDispatch } = useContext(EventContext);\r\n  const [isRotating, setIsRotating] = useState(false);\r\n  const [isScaling, setIsScaling] = useState(false);\r\n  const [isSkewing, setIsSkewing] = useState(false);\r\n  const [isEditingText, setIsEditingText] = useState(false);\r\n  const isFirstLoad = useRef(true);\r\n  const currentId = useRef(null);\r\n\r\n  const checkOffScreen = useCallback(\r\n    (e) => {\r\n      let obj = e.target;\r\n      if (!obj.isOnScreen()) {\r\n        if (obj.id === 'subtitle') {\r\n          obj.left = canvas.getWidth() / canvas.getZoom() / 2;\r\n          obj.top =\r\n            canvas.getHeight() / canvas.getZoom() - obj.height - obj.paddingY;\r\n        } else {\r\n          obj.top = 0;\r\n          obj.left = 0;\r\n          obj.angle = 0;\r\n        }\r\n        obj.setCoords();\r\n      }\r\n    },\r\n    [canvas]\r\n  );\r\n\r\n  const addListeners = useCallback(\r\n    (c, dispatch, showCanvasToolbar) => {\r\n      c.on('text:editing:entered', (e) => onTextEnter(e, c, setIsEditingText));\r\n      c.on('text:editing:exited', (e) => onTextExit(e, c, setIsEditingText));\r\n      c.on('selection:created', (e) =>\r\n        onCreated(e, c, dispatch, showCanvasToolbar)\r\n      );\r\n      c.on('selection:updated', (e) => onUpdated(e, dispatch));\r\n      c.on('object:modified', (e) => onModified(e, dispatch));\r\n      c.on('object:added', (e) => onAdded(e, dispatch, c, fabricSub));\r\n      c.on('object:removed', (e) => onRemoved(e, dispatch));\r\n      c.on('selection:cleared', (e) => onCleared(e, dispatch, currentId));\r\n      c.on('object:rotating', () => setIsRotating(true));\r\n      c.on('object:rotated', () => setIsRotating(false));\r\n      c.on('object:scaling', () => setIsScaling(true));\r\n      c.on('object:scaled', (e) => {\r\n        checkOffScreen(e);\r\n        setIsScaling(false);\r\n      });\r\n      c.on('object:skewing', () => setIsSkewing(true));\r\n      c.on('object:skewed', () => setIsSkewing(false));\r\n      c.on('object:moved', (e) => {\r\n        checkOffScreen(e);\r\n        eventDispatch({ type: 'setIsMoving', data: false });\r\n      });\r\n    },\r\n    [eventDispatch, checkOffScreen, fabricSub]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (canvas) {\r\n      if (!state.isCropMode) {\r\n        addListeners(canvas, dispatch, state.showCanvasToolbar);\r\n      } else removeListeners(canvas);\r\n    }\r\n    return () => {\r\n      if (canvas) removeListeners(canvas);\r\n    };\r\n  }, [\r\n    dispatch,\r\n    canvas,\r\n    addListeners,\r\n    state.isCropMode,\r\n    state.showCanvasToolbar,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!isFirstLoad.current) {\r\n      let data = true;\r\n      if (\r\n        isRotating ||\r\n        isScaling ||\r\n        isSkewing ||\r\n        eventState.isMoving ||\r\n        isEditingText ||\r\n        !state.currentCoords ||\r\n        state.isCropMode\r\n      )\r\n        data = false;\r\n      dispatch({ type: 'setShowToolbar', data });\r\n    }\r\n  }, [\r\n    eventState,\r\n    isRotating,\r\n    isScaling,\r\n    isSkewing,\r\n    isEditingText,\r\n    state.isCropMode,\r\n    state.currentCoords,\r\n    state.currentObject,\r\n    dispatch,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!isFirstLoad.current) {\r\n      if (!state.currentCoords) {\r\n        dispatch({ type: 'setShowToolbar', data: false });\r\n      } else if (\r\n        state.currentObject.object &&\r\n        state.currentObject.object.id !== currentId.current\r\n      ) {\r\n        currentId.current = state.currentObject.object.id;\r\n        dispatch({ type: 'setShowToolbar', data: true });\r\n      }\r\n    } else isFirstLoad.current = false;\r\n  }, [state.currentCoords, state.currentObject, dispatch, state.isCropMode]);\r\n};\r\n\r\nexport default useSelectionObserver;\r\n","import { fabric } from 'fabric';\r\n\r\nconst drawLine = (\r\n  x1,\r\n  y1,\r\n  x2,\r\n  y2,\r\n  ctx,\r\n  aligningLineWidth,\r\n  aligningLineColor,\r\n  viewportTransform,\r\n  zoom\r\n) => {\r\n  ctx.save();\r\n  ctx.lineWidth = aligningLineWidth;\r\n  ctx.strokeStyle = aligningLineColor;\r\n  ctx.beginPath();\r\n  ctx.moveTo(\r\n    (x1 + viewportTransform[4]) * zoom,\r\n    (y1 + viewportTransform[5]) * zoom\r\n  );\r\n  ctx.lineTo(\r\n    (x2 + viewportTransform[4]) * zoom,\r\n    (y2 + viewportTransform[5]) * zoom\r\n  );\r\n  ctx.stroke();\r\n  ctx.restore();\r\n};\r\n\r\nconst isInRange = (value1, value2, aligningLineMargin) => {\r\n  value1 = Math.round(value1);\r\n  value2 = Math.round(value2);\r\n  for (\r\n    let i = value1 - aligningLineMargin, len = value1 + aligningLineMargin;\r\n    i <= len;\r\n    i++\r\n  ) {\r\n    if (i === value2) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const drawVerticalLine = (\r\n  coords,\r\n  ctx,\r\n  aligningLineWidth,\r\n  aligningLineColor,\r\n  viewportTransform,\r\n  zoom\r\n) => {\r\n  drawLine(\r\n    coords.x + 0.5,\r\n    coords.y1 > coords.y2 ? coords.y2 : coords.y1,\r\n    coords.x + 0.5,\r\n    coords.y2 > coords.y1 ? coords.y2 : coords.y1,\r\n    ctx,\r\n    aligningLineWidth,\r\n    aligningLineColor,\r\n    viewportTransform,\r\n    zoom\r\n  );\r\n};\r\n\r\nexport const drawHorizontalLine = (\r\n  coords,\r\n  ctx,\r\n  aligningLineWidth,\r\n  aligningLineColor,\r\n  viewportTransform,\r\n  zoom\r\n) => {\r\n  drawLine(\r\n    coords.x1 > coords.x2 ? coords.x2 : coords.x1,\r\n    coords.y + 0.5,\r\n    coords.x2 > coords.x1 ? coords.x2 : coords.x1,\r\n    coords.y + 0.5,\r\n    ctx,\r\n    aligningLineWidth,\r\n    aligningLineColor,\r\n    viewportTransform,\r\n    zoom\r\n  );\r\n};\r\n\r\nexport const objectMovingObserver = (\r\n  e,\r\n  canvas,\r\n  viewportTransform,\r\n  aligningLineOffset,\r\n  setVerticalLines,\r\n  setHorizontalLines,\r\n  aligningLineMargin\r\n) => {\r\n  let activeObject = e.target,\r\n    canvasObjects = canvas.getObjects(),\r\n    activeObjectCenter = activeObject.getCenterPoint(),\r\n    activeObjectLeft = activeObjectCenter.x,\r\n    activeObjectTop = activeObjectCenter.y,\r\n    activeObjectBoundingRect = activeObject.getBoundingRect(),\r\n    activeObjectHeight = activeObjectBoundingRect.height / viewportTransform[3],\r\n    activeObjectWidth = activeObjectBoundingRect.width / viewportTransform[0],\r\n    horizontalInTheRange = false,\r\n    verticalInTheRange = false,\r\n    transform = canvas._currentTransform;\r\n\r\n  if (!transform) return;\r\n\r\n  for (let i = canvasObjects.length; i--; ) {\r\n    if (canvasObjects[i] === activeObject) continue;\r\n\r\n    let objectCenter = canvasObjects[i].getCenterPoint(),\r\n      objectLeft = objectCenter.x,\r\n      objectTop = objectCenter.y,\r\n      objectBoundingRect = canvasObjects[i].getBoundingRect(),\r\n      objectHeight = objectBoundingRect.height / viewportTransform[3],\r\n      objectWidth = objectBoundingRect.width / viewportTransform[0];\r\n\r\n    // snap by the horizontal center line\r\n    if (isInRange(objectLeft, activeObjectLeft, aligningLineMargin)) {\r\n      verticalInTheRange = true;\r\n      setVerticalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          x: objectLeft,\r\n          y1:\r\n            objectTop < activeObjectTop\r\n              ? objectTop - objectHeight / 2 - aligningLineOffset\r\n              : objectTop + objectHeight / 2 + aligningLineOffset,\r\n          y2:\r\n            activeObjectTop > objectTop\r\n              ? activeObjectTop + activeObjectHeight / 2 + aligningLineOffset\r\n              : activeObjectTop - activeObjectHeight / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(objectLeft, activeObjectTop),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n\r\n    // snap by the left edge\r\n    if (\r\n      isInRange(\r\n        objectLeft - objectWidth / 2,\r\n        activeObjectLeft - activeObjectWidth / 2,\r\n        aligningLineMargin\r\n      )\r\n    ) {\r\n      verticalInTheRange = true;\r\n      setVerticalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          x: objectLeft - objectWidth / 2,\r\n          y1:\r\n            objectTop < activeObjectTop\r\n              ? objectTop - objectHeight / 2 - aligningLineOffset\r\n              : objectTop + objectHeight / 2 + aligningLineOffset,\r\n          y2:\r\n            activeObjectTop > objectTop\r\n              ? activeObjectTop + activeObjectHeight / 2 + aligningLineOffset\r\n              : activeObjectTop - activeObjectHeight / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(\r\n          objectLeft - objectWidth / 2 + activeObjectWidth / 2,\r\n          activeObjectTop\r\n        ),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n\r\n    // snap by the right edge\r\n    if (\r\n      isInRange(\r\n        objectLeft + objectWidth / 2,\r\n        activeObjectLeft + activeObjectWidth / 2,\r\n        aligningLineMargin\r\n      )\r\n    ) {\r\n      verticalInTheRange = true;\r\n      setVerticalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          x: objectLeft + objectWidth / 2,\r\n          y1:\r\n            objectTop < activeObjectTop\r\n              ? objectTop - objectHeight / 2 - aligningLineOffset\r\n              : objectTop + objectHeight / 2 + aligningLineOffset,\r\n          y2:\r\n            activeObjectTop > objectTop\r\n              ? activeObjectTop + activeObjectHeight / 2 + aligningLineOffset\r\n              : activeObjectTop - activeObjectHeight / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(\r\n          objectLeft + objectWidth / 2 - activeObjectWidth / 2,\r\n          activeObjectTop\r\n        ),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n\r\n    // snap by the vertical center line\r\n    if (isInRange(objectTop, activeObjectTop, aligningLineMargin)) {\r\n      horizontalInTheRange = true;\r\n      setHorizontalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          y: objectTop,\r\n          x1:\r\n            objectLeft < activeObjectLeft\r\n              ? objectLeft - objectWidth / 2 - aligningLineOffset\r\n              : objectLeft + objectWidth / 2 + aligningLineOffset,\r\n          x2:\r\n            activeObjectLeft > objectLeft\r\n              ? activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset\r\n              : activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(activeObjectLeft, objectTop),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n\r\n    // snap by the top edge\r\n    if (\r\n      isInRange(\r\n        objectTop - objectHeight / 2,\r\n        activeObjectTop - activeObjectHeight / 2,\r\n        aligningLineMargin\r\n      )\r\n    ) {\r\n      horizontalInTheRange = true;\r\n      setHorizontalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          y: objectTop - objectHeight / 2,\r\n          x1:\r\n            objectLeft < activeObjectLeft\r\n              ? objectLeft - objectWidth / 2 - aligningLineOffset\r\n              : objectLeft + objectWidth / 2 + aligningLineOffset,\r\n          x2:\r\n            activeObjectLeft > objectLeft\r\n              ? activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset\r\n              : activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(\r\n          activeObjectLeft,\r\n          objectTop - objectHeight / 2 + activeObjectHeight / 2\r\n        ),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n\r\n    // snap by the bottom edge\r\n    if (\r\n      isInRange(\r\n        objectTop + objectHeight / 2,\r\n        activeObjectTop + activeObjectHeight / 2,\r\n        aligningLineMargin\r\n      )\r\n    ) {\r\n      horizontalInTheRange = true;\r\n      setHorizontalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          y: objectTop + objectHeight / 2,\r\n          x1:\r\n            objectLeft < activeObjectLeft\r\n              ? objectLeft - objectWidth / 2 - aligningLineOffset\r\n              : objectLeft + objectWidth / 2 + aligningLineOffset,\r\n          x2:\r\n            activeObjectLeft > objectLeft\r\n              ? activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset\r\n              : activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(\r\n          activeObjectLeft,\r\n          objectTop + objectHeight / 2 - activeObjectHeight / 2\r\n        ),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n  }\r\n\r\n  if (!horizontalInTheRange) setHorizontalLines([]);\r\n  if (!verticalInTheRange) setVerticalLines([]);\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\nconst showCenterLine = (\r\n  x1,\r\n  y1,\r\n  x2,\r\n  y2,\r\n  ctx,\r\n  centerLineColor,\r\n  centerLineWidth,\r\n  viewportTransform\r\n) => {\r\n  ctx.save();\r\n  ctx.strokeStyle = centerLineColor;\r\n  ctx.lineWidth = centerLineWidth;\r\n  ctx.beginPath();\r\n  ctx.moveTo(x1 * viewportTransform[0], y1 * viewportTransform[3]);\r\n  ctx.lineTo(x2 * viewportTransform[0], y2 * viewportTransform[3]);\r\n  ctx.stroke();\r\n  ctx.restore();\r\n};\r\n\r\nexport const showVerticalCenterLine = (\r\n  canvasWidthCenter,\r\n  canvasHeight,\r\n  ctx,\r\n  centerLineColor,\r\n  centerLineWidth,\r\n  viewportTransform\r\n) => {\r\n  showCenterLine(\r\n    canvasWidthCenter + 0.5,\r\n    0,\r\n    canvasWidthCenter + 0.5,\r\n    canvasHeight,\r\n    ctx,\r\n    centerLineColor,\r\n    centerLineWidth,\r\n    viewportTransform\r\n  );\r\n};\r\n\r\nexport const showHorizontalCenterLine = (\r\n  canvasHeightCenter,\r\n  canvasWidth,\r\n  ctx,\r\n  centerLineColor,\r\n  centerLineWidth,\r\n  viewportTransform\r\n) => {\r\n  showCenterLine(\r\n    0,\r\n    canvasHeightCenter + 0.5,\r\n    canvasWidth,\r\n    canvasHeightCenter + 0.5,\r\n    ctx,\r\n    centerLineColor,\r\n    centerLineWidth,\r\n    viewportTransform\r\n  );\r\n};\r\n\r\nexport const objectMovingCenterObserver = (\r\n  e,\r\n  canvas,\r\n  setIsInVerticalCenter,\r\n  setIsInHorizontalCenter,\r\n  canvasWidthCenterMap,\r\n  canvasHeightCenterMap,\r\n  canvasWidth,\r\n  canvasHeight\r\n) => {\r\n  let object = e.target,\r\n    objectCenter = object.getCenterPoint(),\r\n    transform = canvas._currentTransform;\r\n\r\n  if (!transform) return;\r\n  let isInVertical = Math.round(objectCenter.x) in canvasWidthCenterMap;\r\n  let isInHorizontal = Math.round(objectCenter.y) in canvasHeightCenterMap;\r\n  setIsInVerticalCenter(isInVertical);\r\n  setIsInHorizontalCenter(isInHorizontal);\r\n\r\n  if (isInVertical || isInHorizontal) {\r\n    object.setPositionByOrigin(\r\n      new fabric.Point(\r\n        isInVertical ? canvasWidth / 2 : objectCenter.x,\r\n        isInHorizontal ? canvasHeight / 2 : objectCenter.y\r\n      ),\r\n      'center',\r\n      'center'\r\n    );\r\n  }\r\n};\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n  drawVerticalLine,\r\n  drawHorizontalLine,\r\n  objectMovingObserver,\r\n} from '../utils/aligningGuidelines';\r\nimport {\r\n  showVerticalCenterLine,\r\n  showHorizontalCenterLine,\r\n  objectMovingCenterObserver,\r\n} from '../utils/centeringGuidelines';\r\n\r\nconst useGuideLines = (\r\n  state,\r\n  canvas,\r\n  eventState,\r\n  eventDispatch,\r\n  isSaving\r\n) => {\r\n  const [ctx, setCtx] = useState(null);\r\n  const [viewportTransform, setViewportTransform] = useState(null);\r\n  const [verticalLines, setVerticalLines] = useState([]);\r\n  const [horizontalLines, setHorizontalLines] = useState([]);\r\n  const [zoom, setZoom] = useState(1);\r\n\r\n  const [canvasWidth, setCanvasWidth] = useState(null);\r\n  const [canvasHeight, setCanvasHeight] = useState(null);\r\n  const [canvasWidthCenterMap, setCanvasWidthCenterMap] = useState({});\r\n  const [canvasHeightCenterMap, setCanvasHeightCenterMap] = useState({});\r\n  const [isInVerticalCenter, setIsInVerticalCenter] = useState(null);\r\n  const [isInHorizontalCenter, setIsInHorizontalCenter] = useState(null);\r\n\r\n  const aligningLineOffset = 5;\r\n  const aligningLineWidth = 1;\r\n  const aligningLineMargin = 4;\r\n  const centerLineMargin = 4;\r\n  const aligningLineColor = 'rgb(111, 123, 208)';\r\n  const centerLineWidth = 1;\r\n  const centerLineColor = 'rgb(111, 123, 208)';\r\n\r\n  const handleMouseDown = useCallback(() => {\r\n    setViewportTransform(canvas.viewportTransform);\r\n    setZoom(canvas.getZoom());\r\n  }, [canvas]);\r\n\r\n  const handleBeforeRender = useCallback(() => {\r\n    canvas.clearContext(canvas.contextTop);\r\n  }, [canvas]);\r\n\r\n  const handleMoving = useCallback(\r\n    (e) => {\r\n      objectMovingObserver(\r\n        e,\r\n        canvas,\r\n        viewportTransform,\r\n        aligningLineOffset,\r\n        setVerticalLines,\r\n        setHorizontalLines,\r\n        aligningLineMargin\r\n      );\r\n      objectMovingCenterObserver(\r\n        e,\r\n        canvas,\r\n        setIsInVerticalCenter,\r\n        setIsInHorizontalCenter,\r\n        canvasWidthCenterMap,\r\n        canvasHeightCenterMap,\r\n        canvasWidth,\r\n        canvasHeight\r\n      );\r\n    },\r\n    [\r\n      canvas,\r\n      viewportTransform,\r\n      canvasHeight,\r\n      canvasHeightCenterMap,\r\n      canvasWidth,\r\n      canvasWidthCenterMap,\r\n    ]\r\n  );\r\n\r\n  const handleAfterRender = useCallback(() => {\r\n    for (let i = verticalLines.length; i--; ) {\r\n      drawVerticalLine(\r\n        verticalLines[i],\r\n        ctx,\r\n        aligningLineWidth,\r\n        aligningLineColor,\r\n        viewportTransform,\r\n        zoom\r\n      );\r\n    }\r\n    for (let i = horizontalLines.length; i--; ) {\r\n      drawHorizontalLine(\r\n        horizontalLines[i],\r\n        ctx,\r\n        aligningLineWidth,\r\n        aligningLineColor,\r\n        viewportTransform,\r\n        zoom\r\n      );\r\n    }\r\n    setVerticalLines([]);\r\n    setHorizontalLines([]);\r\n    if (isInVerticalCenter) {\r\n      showVerticalCenterLine(\r\n        canvasWidth / 2,\r\n        canvasHeight,\r\n        ctx,\r\n        centerLineColor,\r\n        centerLineWidth,\r\n        viewportTransform\r\n      );\r\n    }\r\n    if (isInHorizontalCenter) {\r\n      showHorizontalCenterLine(\r\n        canvasHeight / 2,\r\n        canvasWidth,\r\n        ctx,\r\n        centerLineColor,\r\n        centerLineWidth,\r\n        viewportTransform\r\n      );\r\n    }\r\n  }, [\r\n    ctx,\r\n    viewportTransform,\r\n    horizontalLines,\r\n    verticalLines,\r\n    zoom,\r\n    canvasHeight,\r\n    canvasWidth,\r\n    isInHorizontalCenter,\r\n    isInVerticalCenter,\r\n  ]);\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    setVerticalLines([]);\r\n    setHorizontalLines([]);\r\n    setIsInVerticalCenter(null);\r\n    setIsInHorizontalCenter(null);\r\n    canvas.requestRenderAll();\r\n  }, [canvas]);\r\n\r\n  const initGuideLines = useCallback(() => {\r\n    setCtx(canvas.getSelectionContext());\r\n    setCanvasWidth(canvas.getWidth() / canvas.getZoom());\r\n    setCanvasHeight(canvas.getHeight() / canvas.getZoom());\r\n    let widthMap = {};\r\n    let heightMap = {};\r\n    for (\r\n      let i = canvasWidth / 2 - centerLineMargin,\r\n        len = canvasWidth / 2 + centerLineMargin;\r\n      i <= len;\r\n      i++\r\n    ) {\r\n      widthMap[Math.round(i)] = true;\r\n    }\r\n    for (\r\n      let i = canvasHeight / 2 - centerLineMargin,\r\n        len = canvasHeight / 2 + centerLineMargin;\r\n      i <= len;\r\n      i++\r\n    ) {\r\n      heightMap[Math.round(i)] = true;\r\n    }\r\n    setCanvasWidthCenterMap(widthMap);\r\n    setCanvasHeightCenterMap(heightMap);\r\n  }, [canvasHeight, canvasWidth, canvas]);\r\n\r\n  const removelistneres = useCallback((canvas) => {\r\n    canvas.off('mouse:down');\r\n    canvas.off('object:moving');\r\n    canvas.off('before:render');\r\n    canvas.off('after:render');\r\n    canvas.off('mouse:up');\r\n    canvas.off('mouse:dblclick');\r\n  }, []);\r\n\r\n  const removeRenderlistneres = useCallback((canvas) => {\r\n    canvas.off('before:render');\r\n    canvas.off('after:render');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (canvas) {\r\n      initGuideLines();\r\n    }\r\n  }, [state.shouldUpdateCanvasSize, canvas, initGuideLines]);\r\n\r\n  useEffect(() => {\r\n    if (canvas && ctx && !isSaving) {\r\n      canvas.on('mouse:down', handleMouseDown);\r\n      canvas.on('object:moving', (e) => {\r\n        if (eventDispatch && !eventState.isMoving) {\r\n          eventDispatch({ type: 'setIsMoving', data: true });\r\n        }\r\n        handleMoving(e);\r\n      });\r\n      canvas.on('mouse:up', (e) => {\r\n        if (eventDispatch && e.button === 3) {\r\n          eventDispatch({ type: 'setRightClickEvent', data: e });\r\n          e.e.preventDefault();\r\n        }\r\n        handleMouseUp(e);\r\n      });\r\n      canvas.on('mouse:dblclick', (e) => {\r\n        if (\r\n          e.target &&\r\n          (e.target.type === 'customImage' || e.target.type === 'video')\r\n        ) {\r\n          eventDispatch({ type: 'setDbClickEvent', data: e });\r\n        }\r\n      });\r\n    } else if (isSaving) removelistneres(canvas);\r\n\r\n    return () => {\r\n      if (canvas && ctx) removelistneres(canvas);\r\n    };\r\n  }, [\r\n    eventState,\r\n    eventDispatch,\r\n    state.shouldUpdateCanvasSize,\r\n    isSaving,\r\n    removelistneres,\r\n    canvas,\r\n    ctx,\r\n    handleMouseUp,\r\n    handleMoving,\r\n    handleMouseDown,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (canvas && ctx && !isSaving) {\r\n      canvas.on('before:render', handleBeforeRender);\r\n      canvas.on('after:render', handleAfterRender);\r\n    } else if (isSaving) removeRenderlistneres(canvas);\r\n\r\n    return () => {\r\n      if (canvas && ctx) removeRenderlistneres(canvas);\r\n    };\r\n  }, [\r\n    state.shouldUpdateCanvasSize,\r\n    isSaving,\r\n    removeRenderlistneres,\r\n    canvas,\r\n    ctx,\r\n    handleAfterRender,\r\n    handleBeforeRender,\r\n  ]);\r\n};\r\n\r\nexport default useGuideLines;\r\n","import WebFont from 'webfontloader';\r\nimport { fabric } from 'fabric';\r\n\r\nconst loaded = ['Inter'];\r\n\r\nexport const roundedCorners = (media, radius) => {\r\n  let finalRad = 0;\r\n  let width = media.width;\r\n  let height = media.height;\r\n  if (media.cropRect) {\r\n    width = media.cropRect.w;\r\n    height = media.cropRect.h;\r\n  }\r\n  width += media.strokeWidth;\r\n  height += media.strokeWidth;\r\n  if (width < height) finalRad = (width * radius) / 200;\r\n  else finalRad = (height * radius) / 200;\r\n\r\n  return new fabric.Rect({\r\n    width: media.width + media.strokeWidth,\r\n    height: media.height + media.strokeWidth,\r\n    rx: finalRad,\r\n    ry: finalRad,\r\n    left: (-media.width - media.strokeWidth) / 2,\r\n    top: (-media.height - media.strokeWidth) / 2,\r\n    noScaleCache: false,\r\n  });\r\n};\r\n\r\nexport const updateVideoStyle = (state, canvas, dispatch) => {\r\n  let video = state.currentObject.object;\r\n  if (video && video.type === 'video') {\r\n    let radius = state.videoState.cornerRadius;\r\n    if (radius === 0) video.clipPath = null;\r\n    else video.set('clipPath', roundedCorners(video, radius));\r\n    for (const [key, value] of Object.entries(state.videoState)) {\r\n      video.set(key, value);\r\n    }\r\n    if (!state.showToolbar) dispatch({ type: 'setShowToolbar', data: true });\r\n    canvas.requestRenderAll();\r\n  }\r\n  dispatch({ type: 'setShouldUpdateVideo', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const updateImageStyle = (state, canvas, dispatch) => {\r\n  let image = state.currentObject.object;\r\n  if (\r\n    image &&\r\n    image.type === 'customImage' &&\r\n    image.originalWidth > 0 &&\r\n    image.originalHeight > 0\r\n  ) {\r\n    let radius = state.imageState.cornerRadius;\r\n    image.set('clipPath', roundedCorners(image, radius));\r\n    image.cornerRadius = radius;\r\n    canvas.requestRenderAll();\r\n  }\r\n  dispatch({ type: 'setShouldUpdateImage', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const loadAndUse = (canvas, text, font, dispatch) => {\r\n  WebFont.load({\r\n    google: {\r\n      families: [font],\r\n    },\r\n    timeout: 5000,\r\n    fontactive: (familyName, fvd) => {\r\n      text.set({ fontFamily: familyName });\r\n      canvas.requestRenderAll();\r\n      if (dispatch) {\r\n        dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n      }\r\n    },\r\n  });\r\n};\r\n\r\nexport const updateTextStyle = (state, canvas, dispatch) => {\r\n  let text = state.currentObject.object;\r\n  let textState = state.textState;\r\n  if (textState && text) {\r\n    text._clearCache();\r\n    for (const [key, value] of Object.entries(textState)) {\r\n      if (key !== 'fontFamily') {\r\n        text.set(key, value);\r\n      }\r\n    }\r\n    if (!loaded.includes(textState.fontFamily)) {\r\n      loadAndUse(canvas, text, textState.fontFamily, dispatch);\r\n      loaded.push(textState.fontFamily);\r\n    } else {\r\n      text.set({\r\n        fontFamily: textState.fontFamily,\r\n      });\r\n      canvas.requestRenderAll();\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n    }\r\n\r\n    if (!state.showToolbar) dispatch({ type: 'setShowToolbar', data: true });\r\n  }\r\n  dispatch({ type: 'setShouldUpdateText', data: false });\r\n};\r\n\r\nexport const updateSubtitlesStyle = (state, canvas, dispatch) => {\r\n  let text = state.currentObject.object;\r\n  if (text) {\r\n    let textState = state.subtitlesState;\r\n    text._clearCache();\r\n    for (const [key, value] of Object.entries(textState)) {\r\n      if (key !== 'fontFamily') {\r\n        text.set(key, value);\r\n      }\r\n    }\r\n    if (!loaded.includes(textState.fontFamily)) {\r\n      loadAndUse(canvas, text, textState.fontFamily, dispatch);\r\n      loaded.push(textState.fontFamily);\r\n    } else {\r\n      text.set({\r\n        fontFamily: textState.fontFamily,\r\n      });\r\n      canvas.requestRenderAll();\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n    }\r\n\r\n    if (!state.showToolbar) dispatch({ type: 'setShowToolbar', data: true });\r\n  }\r\n  dispatch({ type: 'setShouldUpdateSubtitles', data: false });\r\n};\r\n\r\nexport const updateShapeStyle = (state, canvas, dispatch) => {\r\n  let shape = state.currentObject.object;\r\n  if (shape) {\r\n    // state.currentObject.object._clearCache();\r\n    for (const [key, value] of Object.entries(state.shapeState)) {\r\n      shape.set(key, value);\r\n    }\r\n    if (!state.showToolbar) dispatch({ type: 'setShowToolbar', data: true });\r\n    canvas.requestRenderAll();\r\n  }\r\n  dispatch({ type: 'setShouldUpdateShape', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n","import { useEffect } from 'react';\r\nimport {\r\n  updateImageStyle,\r\n  updateTextStyle,\r\n  updateShapeStyle,\r\n  updateSubtitlesStyle,\r\n  updateVideoStyle\r\n} from '../utils/updateObject';\r\n\r\nconst shapeArr = ['rect', 'circle', 'triangle', 'line'];\r\n\r\nconst useUpdateObject = (state, dispatch, canvas) => {\r\n  useEffect(() => {\r\n    if (state.shouldUpdateSubtitles) {\r\n      updateSubtitlesStyle(state, canvas, dispatch);\r\n    }\r\n    if (state.shouldUpdateText) {\r\n      updateTextStyle(state, canvas, dispatch);\r\n    }\r\n    if (\r\n      state.shouldUpdateShape &&\r\n      shapeArr.includes(state.currentObject.type)\r\n    ) {\r\n      updateShapeStyle(state, canvas, dispatch);\r\n    }\r\n    if (state.shouldUpdateImage && state.currentObject.type === 'customImage') {\r\n      updateImageStyle(state, canvas, dispatch);\r\n    }\r\n    if (state.shouldUpdateVideo) {\r\n      updateVideoStyle(state, canvas, dispatch);\r\n    }\r\n  }, [state, dispatch, canvas]);\r\n};\r\n\r\nexport default useUpdateObject;\r\n","export const updateCanvasStyle = (state, canvas, dispatch) => {\r\n  canvas.backgroundColor = state.backgroundColor;\r\n  canvas.requestRenderAll();\r\n  dispatch({ type: 'setShouldUpdateCanvas', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const setSize = (state, canvas) => {\r\n  let ratio = Math.min(\r\n    state.width / state.videoWidth,\r\n    state.height / state.videoHeight\r\n  );\r\n  canvas.setZoom(ratio);\r\n  canvas.setDimensions({\r\n    width: state.width,\r\n    height: state.height,\r\n  });\r\n  canvas.renderAll();\r\n};\r\n\r\nexport const checkOffScreen = (object, canvas, resize, dispatch) => {\r\n  let zoom = canvas.getZoom();\r\n  let canvasWidth = canvas.getWidth() / zoom;\r\n  let canvasHeight = canvas.getHeight() / zoom;\r\n  let objHeight = object.height * object.scaleY;\r\n  let objWidth = object.width * object.scaleX;\r\n  let isSub = object.type === 'subtitle';\r\n  let isTextObject = object.type === 'customTextbox' || isSub;\r\n  let isVertical = resize === 'vertical';\r\n  let shouldResize =\r\n    isVertical &&\r\n    (objWidth > (canvasWidth * 2) / 3 || objHeight > (canvasHeight * 2) / 3);\r\n\r\n  if (shouldResize && isTextObject) {\r\n    object.width = canvasWidth / 2;\r\n    objWidth = canvasWidth / 2;\r\n  } else if (shouldResize) {\r\n    let desiredSize = (canvasWidth * 2) / 3;\r\n    let scale = desiredSize / object.width;\r\n    object.scaleX = scale;\r\n    object.scaleY = scale;\r\n    objWidth = object.width * object.scaleX;\r\n    objHeight = object.height * object.scaleY;\r\n  }\r\n\r\n  if (isTextObject && isVertical && +object.fontSize > 30 && dispatch) {\r\n    object.fontSize = 30;\r\n    dispatch({\r\n      type: isSub ? 'setSubtitlesFontSize' : 'setFontSize',\r\n      data: 30,\r\n    });\r\n  }\r\n  if (!object.isOnScreen() && !isSub) {\r\n    if (object.top > canvasHeight || object.top < 0) {\r\n      object.top = canvasHeight - objHeight;\r\n    }\r\n    if (object.left > canvasWidth || object.left < 0) {\r\n      object.left = canvasWidth - objWidth;\r\n    }\r\n  } else if (isSub) {\r\n    object.left = canvasWidth / 2;\r\n    let top = canvasHeight - object.height - object.paddingY;\r\n    object.top = top > 0 ? top : object.height / 2;\r\n    object.width = 550 < canvasWidth / 2 ? 550 : canvasWidth / 2;\r\n  }\r\n  object.setCoords();\r\n};\r\n\r\nexport const updateCanvasSize = (state, canvas, dispatch) => {\r\n  dispatch({ type: 'setShouldUpdateCanvasSize', data: false });\r\n  if (canvas) {\r\n    canvas.discardActiveObject();\r\n    let isResize = canvas.resize !== state.resize;\r\n    canvas.resize = state.resize;\r\n    setSize(state, canvas);\r\n    if (isResize) {\r\n      let objects = canvas.getObjects();\r\n      for (let i = 0; i < objects.length; i++) {\r\n        let object = objects[i];\r\n        checkOffScreen(object, canvas, state.resize, dispatch);\r\n      }\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n    }\r\n    canvas.renderAll();\r\n  }\r\n};\r\n","import { useEffect } from 'react';\r\nimport { updateCanvasSize, updateCanvasStyle } from '../utils/updateCanvas';\r\n\r\nconst useUpdateCanvas = (state, dispatch, canvas) => {\r\n  useEffect(() => {\r\n    if (state.shouldUpdateCanvas) updateCanvasStyle(state, canvas, dispatch);\r\n    if (state.shouldUpdateCanvasSize) updateCanvasSize(state, canvas, dispatch);\r\n  }, [state, dispatch, canvas]);\r\n};\r\n\r\nexport default useUpdateCanvas;\r\n","import { useState, useEffect, useRef } from 'react';\r\nimport { fabric } from 'fabric';\r\nimport { setSize } from '../utils/updateCanvas';\r\nimport { loadAndUse } from '../utils/updateObject';\r\n\r\nconst loadCanvas = (\r\n  canvas,\r\n  canvasInfo,\r\n  shouldLoad,\r\n  isMounted,\r\n  state,\r\n  setCanvas,\r\n  setSpeakerVideos,\r\n  setObjectIdCount,\r\n  setFabricSub,\r\n  dispatch\r\n) => {\r\n  canvas.clear();\r\n  let videos = [];\r\n  let lastId = 1;\r\n  canvas.loadFromJSON(canvasInfo, () => {\r\n    if (isMounted.current) {\r\n      let objects = canvas.getObjects();\r\n      for (let i = 0; i < objects.length; i++) {\r\n        let obj = objects[i];\r\n        if (!shouldLoad && obj.type === 'video') canvas.remove(obj);\r\n        else if (obj.id === 'subtitle') {\r\n          setFabricSub(obj);\r\n          dispatch({ type: 'setIsSubtitles', data: true });\r\n          dispatch({\r\n            type: 'setSubtitlesState',\r\n            data: {\r\n              fontFamily: obj.fontFamily,\r\n              fontStyle: obj.fontStyle,\r\n              fontWeight: obj.fontWeight,\r\n              fontSize: obj.fontSize,\r\n              fill: obj.fill,\r\n              backgroundColor: obj.backgroundColor,\r\n            },\r\n          });\r\n          loadAndUse(canvas, obj, obj.fontFamily);\r\n        } else {\r\n          obj.id = lastId;\r\n          lastId++;\r\n          if (obj.type === 'customTextbox') {\r\n            loadAndUse(canvas, obj, obj.fontFamily);\r\n          } else if (obj.type === 'video') videos.push(obj);\r\n        }\r\n      }\r\n\r\n      setSize(state, canvas);\r\n      setObjectIdCount(lastId);\r\n      setCanvas(canvas);\r\n      if (shouldLoad) setSpeakerVideos(videos);\r\n    }\r\n  });\r\n};\r\n\r\nconst addCanvas = (\r\n  state,\r\n  info,\r\n  shouldLoad,\r\n  setCanvas,\r\n  isMounted,\r\n  setSpeakerVideos,\r\n  setObjectIdCount,\r\n  setFabricSub,\r\n  dispatch\r\n) => {\r\n  let canvas = new fabric.Canvas('canvas', {\r\n    width: state.videoWidth,\r\n    height: state.videoHeight,\r\n    resize: state.resize,\r\n    backgroundColor: 'rgba(255,255,255,1)',\r\n    preserveObjectStacking: true,\r\n    fireRightClick: true,\r\n    stopContextMenu: true,\r\n    selection: false,\r\n  });\r\n\r\n  if (info.canvas) {\r\n    loadCanvas(\r\n      canvas,\r\n      info.canvas,\r\n      shouldLoad,\r\n      isMounted,\r\n      state,\r\n      setCanvas,\r\n      setSpeakerVideos,\r\n      setObjectIdCount,\r\n      setFabricSub,\r\n      dispatch\r\n    );\r\n  } else {\r\n    setSize(state, canvas);\r\n    setCanvas(canvas);\r\n  }\r\n};\r\n\r\nconst useAddCanvas = (\r\n  editorState,\r\n  setCanvas,\r\n  info,\r\n  setIsCanvasData,\r\n  speakers,\r\n  setObjectIdCount,\r\n  setSpeakerVideos,\r\n  userAssets,\r\n  setFabricSub,\r\n  dispatch\r\n) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const isMounted = useRef(false);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad && editorState.width > 0 && userAssets) {\r\n      let isCanvas = info && info.canvas && info.canvas.objects.length > 0;\r\n      let shouldLoad = speakers.length === 0 && isCanvas;\r\n      if (shouldLoad) setIsCanvasData(true);\r\n      addCanvas(\r\n        editorState,\r\n        info,\r\n        shouldLoad,\r\n        setCanvas,\r\n        isMounted,\r\n        setSpeakerVideos,\r\n        setObjectIdCount,\r\n        setFabricSub,\r\n        dispatch\r\n      );\r\n      setIsFirstLoad(false);\r\n    }\r\n  }, [\r\n    speakers,\r\n    setCanvas,\r\n    editorState,\r\n    isFirstLoad,\r\n    info,\r\n    setIsCanvasData,\r\n    setObjectIdCount,\r\n    setSpeakerVideos,\r\n    userAssets,\r\n    setFabricSub,\r\n    dispatch,\r\n  ]);\r\n};\r\n\r\nexport default useAddCanvas;\r\n","import { useEffect, useState, useCallback } from 'react';\r\nimport { fabric } from 'fabric';\r\nimport { checkOffScreen } from '../utils/updateCanvas';\r\n\r\nconst useAddSpeakers = (\r\n  video,\r\n  canvas,\r\n  currentTime,\r\n  speakers,\r\n  objectIdCount,\r\n  setObjectIdCount,\r\n  isCanvasData,\r\n  setSpeakerVideos\r\n) => {\r\n  const [isFirtLoad, setIsFirtLoad] = useState(true);\r\n\r\n  const newVideo = useCallback((video, speaker, id) => {\r\n    return new fabric.Video(video, {\r\n      id,\r\n      src: video.src,\r\n      originalWidth: video.videoWidth,\r\n      originalHeight: video.videoHeight,\r\n      left: speaker.x,\r\n      top: speaker.y,\r\n      width: speaker.w,\r\n      height: speaker.h,\r\n      stroke: 'rgba(255,255,255,1)',\r\n      cropRect: { ...speaker },\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isFirtLoad && !isCanvasData && video && canvas) {\r\n      setIsFirtLoad(false);\r\n      // console.log(speakers);\r\n      let videos = [];\r\n      let lastId = objectIdCount;\r\n      if (speakers.length > 0) {\r\n        for (let i = 0; i < speakers.length; i++) {\r\n          let speaker = speakers[i];\r\n          let speakerVideo = newVideo(video, speaker, lastId);\r\n          canvas.add(speakerVideo);\r\n          lastId++;\r\n          checkOffScreen(speakerVideo, canvas, canvas.resize, null);\r\n          videos.push(speakerVideo);\r\n        }\r\n      } else {\r\n        let speakerVideo = newVideo(\r\n          video,\r\n          { w: video.videoWidth, h: video.videoHeight, x: 0, y: 0 },\r\n          lastId\r\n        );\r\n        // console.log(speakerVideo);\r\n        canvas.add(speakerVideo);\r\n        lastId++;\r\n        checkOffScreen(speakerVideo, canvas, canvas.resize, null);\r\n        videos.push(speakerVideo);\r\n      }\r\n      setSpeakerVideos(videos);\r\n      setObjectIdCount(lastId);\r\n    }\r\n  }, [\r\n    isCanvasData,\r\n    objectIdCount,\r\n    setObjectIdCount,\r\n    video,\r\n    canvas,\r\n    isFirtLoad,\r\n    newVideo,\r\n    speakers,\r\n    setSpeakerVideos,\r\n  ]);\r\n};\r\n\r\nexport default useAddSpeakers;\r\n","export const handlePaste = (\r\n  canvas,\r\n  clipboard,\r\n  objId,\r\n  updateId,\r\n  setClipboard,\r\n  dispatch,\r\n  fabricSub\r\n) => {\r\n  let top = clipboard.coords.top + 15;\r\n  let left = clipboard.coords.left + 15;\r\n  let type = clipboard.object.type;\r\n  clipboard.object.clone((cloned) => {\r\n    cloned.id = objId;\r\n    cloned.top = top;\r\n    cloned.left = left;\r\n    if (type === 'customImage') {\r\n      cloned.isSvg = clipboard.object.isSvg;\r\n      cloned.cornerRadius = clipboard.object.cornerRadius;\r\n    } else if (type === 'customTextbox') {\r\n      cloned.cursorWidth = 0.5;\r\n    } else if (type === 'line') {\r\n      cloned.borderColor = 'transparent';\r\n      cloned.noScaleCache = false;\r\n    } else {\r\n      cloned.noScaleCache = false;\r\n      cloned.strokeUniform = true;\r\n    }\r\n    canvas.add(cloned).setActiveObject(cloned);\r\n    if (fabricSub) canvas.bringToFront(fabricSub);\r\n    canvas.requestRenderAll();\r\n    setClipboard({\r\n      object: clipboard.object,\r\n      coords: { top, left },\r\n    });\r\n    updateId();\r\n    if (dispatch) dispatch({ type: 'setRightClickEvent', data: null });\r\n  });\r\n};\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { handlePaste } from '../utils/pasteObject';\r\n\r\nconst deleteHandler = (canvas, dispatch) => {\r\n  let active = canvas.getActiveObject();\r\n  if (!active) return;\r\n  let isInput = document.activeElement.tagName === 'INPUT';\r\n  if (active.id === 'subtitle') {\r\n    dispatch({ type: 'setIsSubtitles', data: false });\r\n  } else if (!isInput && !active.isEditing && active.type !== 'video') {\r\n    canvas.remove(active);\r\n    canvas.discardActiveObject().requestRenderAll();\r\n  }\r\n};\r\n\r\nconst keyDownHandler = (\r\n  e,\r\n  canvas,\r\n  setIsPasting,\r\n  setIsCopying,\r\n  setIsBringToFront,\r\n  setIsSendToBack,\r\n  dispatch\r\n) => {\r\n  if (canvas) {\r\n    let ctrl = e.ctrlKey || e.metaKey;\r\n    if (\r\n      e.code === 'Delete' ||\r\n      e.key === 'Delete' ||\r\n      e.code === 'Backspace' ||\r\n      e.key === 'Backspace'\r\n    ) {\r\n      deleteHandler(canvas, dispatch);\r\n    } else if (e.code === 'KeyC' || e.key === 'c') {\r\n      if (ctrl) {\r\n        e.preventDefault();\r\n        setIsCopying(true);\r\n      }\r\n    } else if (e.code === 'KeyV' || e.key === 'v') {\r\n      if (ctrl) {\r\n        e.preventDefault();\r\n        setIsPasting(true);\r\n      }\r\n    } else if (e.code === 'BracketRight' || e.key === ']') {\r\n      if (ctrl) {\r\n        e.preventDefault();\r\n        setIsBringToFront(true);\r\n      }\r\n    } else if (e.code === 'BracketLeft' || e.key === '[') {\r\n      if (ctrl) {\r\n        e.preventDefault();\r\n        setIsSendToBack(true);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nconst keyUpHandler = (\r\n  setIsPasting,\r\n  setIsCopying,\r\n  setIsBringToFront,\r\n  setIsSendToBack,\r\n  setShouldRun\r\n) => {\r\n  setIsCopying(false);\r\n  setIsPasting(false);\r\n  setIsBringToFront(false);\r\n  setIsSendToBack(false);\r\n  setShouldRun(true);\r\n};\r\n\r\nconst useKeyEvents = (\r\n  canvas,\r\n  clipboard,\r\n  setClipboard,\r\n  objId,\r\n  updateId,\r\n  fabricSub,\r\n  dispatch\r\n) => {\r\n  const [isPasting, setIsPasting] = useState(false);\r\n  const [isCopying, setIsCopying] = useState(false);\r\n  const [isBringToFront, setIsBringToFront] = useState(false);\r\n  const [isSendToBack, setIsSendToBack] = useState(false);\r\n  const [shouldRun, setShouldRun] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (shouldRun && isPasting && clipboard) {\r\n      setShouldRun(false);\r\n      handlePaste(\r\n        canvas,\r\n        clipboard,\r\n        objId,\r\n        updateId,\r\n        setClipboard,\r\n        null,\r\n        fabricSub\r\n      );\r\n    } else if (shouldRun && isCopying) {\r\n      setShouldRun(false);\r\n      let active = canvas.getActiveObject();\r\n      if (active && active.type !== 'video' && active.id !== 'subtitle') {\r\n        setClipboard({\r\n          object: active,\r\n          coords: { top: active.top, left: active.left },\r\n        });\r\n      }\r\n    } else if (shouldRun && isBringToFront) {\r\n      setShouldRun(false);\r\n      let active = canvas.getActiveObject();\r\n      if (active && active.id !== 'subtitle') {\r\n        canvas.bringToFront(active);\r\n        if (fabricSub) canvas.bringToFront(fabricSub);\r\n        dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n      }\r\n    } else if (shouldRun && isSendToBack) {\r\n      setShouldRun(false);\r\n      let active = canvas.getActiveObject();\r\n      if (active && active.id !== 'subtitle') {\r\n        canvas.sendToBack(active);\r\n        dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n      }\r\n    }\r\n  }, [\r\n    canvas,\r\n    isPasting,\r\n    isCopying,\r\n    isBringToFront,\r\n    isSendToBack,\r\n    objId,\r\n    setClipboard,\r\n    clipboard,\r\n    updateId,\r\n    shouldRun,\r\n    fabricSub,\r\n    dispatch,\r\n  ]);\r\n\r\n  const onKeyDown = useCallback(\r\n    (e) => {\r\n      keyDownHandler(\r\n        e,\r\n        canvas,\r\n        setIsPasting,\r\n        setIsCopying,\r\n        setIsBringToFront,\r\n        setIsSendToBack,\r\n        dispatch\r\n      );\r\n    },\r\n    [canvas, dispatch]\r\n  );\r\n\r\n  const onKeyUp = useCallback((e) => {\r\n    keyUpHandler(\r\n      setIsPasting,\r\n      setIsCopying,\r\n      setIsBringToFront,\r\n      setIsSendToBack,\r\n      setShouldRun\r\n    );\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', onKeyDown);\r\n    document.addEventListener('keyup', onKeyUp);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', onKeyDown);\r\n      document.removeEventListener('keyup', onKeyUp);\r\n    };\r\n  }, [onKeyDown, onKeyUp]);\r\n};\r\n\r\nexport default useKeyEvents;\r\n","import { useEffect, useCallback } from 'react';\r\n\r\nconst useClickListener = (canvas, state) => {\r\n  const clickHandler = useCallback(\r\n    (e) => {\r\n      if (\r\n        canvas &&\r\n        !state.isCropMode &&\r\n        !state.shouldCropMedia &&\r\n        !state.shouldReplaceImage\r\n      ) {\r\n        for (let i = 0; i < e.path.length; i++) {\r\n          if (e.path[i].id === 'canvasComponent') return;\r\n        }\r\n        canvas.discardActiveObject().requestRenderAll();\r\n      }\r\n    },\r\n    [canvas, state.isCropMode, state.shouldCropMedia, state.shouldReplaceImage]\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', clickHandler);\r\n    return () => document.removeEventListener('click', clickHandler);\r\n  }, [canvas, clickHandler]);\r\n};\r\n\r\nexport default useClickListener;\r\n","export default __webpack_public_path__ + \"static/media/downArrow.400d75ac.svg\";","export default __webpack_public_path__ + \"static/media/bold.d705790f.svg\";","export default __webpack_public_path__ + \"static/media/subBackground.dce1ffb0.svg\";","export default __webpack_public_path__ + \"static/media/italic.ee8b3de6.svg\";","export default __webpack_public_path__ + \"static/media/textLeft.37f6ba9c.svg\";","export default __webpack_public_path__ + \"static/media/textRight.67805ee0.svg\";","export default __webpack_public_path__ + \"static/media/textCenter.357cd59c.svg\";","export default __webpack_public_path__ + \"static/media/textJustify.3d19e46c.svg\";","const fonts =  [\r\n  'ABeeZee',\r\n  'Abel',\r\n  'Abhaya Libre',\r\n  'Abril Fatface',\r\n  'Aclonica',\r\n  'Acme',\r\n  'Actor',\r\n  'Adamina',\r\n  'Advent Pro',\r\n  'Aguafina Script',\r\n  'Akaya Kanadaka',\r\n  'Akaya Telivigala',\r\n  'Akronim',\r\n  'Aladin',\r\n  'Alata',\r\n  'Alatsi',\r\n  'Aldrich',\r\n  'Alef',\r\n  'Alegreya',\r\n  'Alegreya SC',\r\n  'Alegreya Sans',\r\n  'Alegreya Sans SC',\r\n  'Aleo',\r\n  'Alex Brush',\r\n  'Alfa Slab One',\r\n  'Alice',\r\n  'Alike',\r\n  'Alike Angular',\r\n  'Allan',\r\n  'Allerta',\r\n  'Allerta Stencil',\r\n  'Allura',\r\n  'Almarai',\r\n  'Almendra',\r\n  'Almendra Display',\r\n  'Almendra SC',\r\n  'Amarante',\r\n  'Amaranth',\r\n  'Amatic SC',\r\n  'Amethysta',\r\n  'Amiko',\r\n  'Amiri',\r\n  'Amita',\r\n  'Anaheim',\r\n  'Andada',\r\n  'Andika',\r\n  'Andika New Basic',\r\n  'Angkor',\r\n  'Annie Use Your Telescope',\r\n  'Anonymous Pro',\r\n  'Antic',\r\n  'Antic Didone',\r\n  'Antic Slab',\r\n  'Anton',\r\n  'Arapey',\r\n  'Arbutus',\r\n  'Arbutus Slab',\r\n  'Architects Daughter',\r\n  'Archivo',\r\n  'Archivo Black',\r\n  'Archivo Narrow',\r\n  'Aref Ruqaa',\r\n  'Arima Madurai',\r\n  'Arimo',\r\n  'Arizonia',\r\n  'Armata',\r\n  'Arsenal',\r\n  'Artifika',\r\n  'Arvo',\r\n  'Arya',\r\n  'Asap',\r\n  'Asap Condensed',\r\n  'Asar',\r\n  'Asset',\r\n  'Assistant',\r\n  'Astloch',\r\n  'Asul',\r\n  'Athiti',\r\n  'Atma',\r\n  'Atomic Age',\r\n  'Aubrey',\r\n  'Audiowide',\r\n  'Autour One',\r\n  'Average',\r\n  'Average Sans',\r\n  'Averia Gruesa Libre',\r\n  'Averia Libre',\r\n  'Averia Sans Libre',\r\n  'Averia Serif Libre',\r\n  'B612',\r\n  'B612 Mono',\r\n  'Bad Script',\r\n  'Bahiana',\r\n  'Bahianita',\r\n  'Bai Jamjuree',\r\n  'Ballet',\r\n  'Baloo 2',\r\n  'Baloo Bhai 2',\r\n  'Baloo Bhaina 2',\r\n  'Baloo Chettan 2',\r\n  'Baloo Da 2',\r\n  'Baloo Paaji 2',\r\n  'Baloo Tamma 2',\r\n  'Baloo Tammudu 2',\r\n  'Baloo Thambi 2',\r\n  'Balsamiq Sans',\r\n  'Balthazar',\r\n  'Bangers',\r\n  'Barlow',\r\n  'Barlow Condensed',\r\n  'Barlow Semi Condensed',\r\n  'Barriecito',\r\n  'Barrio',\r\n  'Basic',\r\n  'Baskervville',\r\n  'Battambang',\r\n  'Baumans',\r\n  'Bayon',\r\n  'Be Vietnam',\r\n  'Bebas Neue',\r\n  'Belgrano',\r\n  'Bellefair',\r\n  'Belleza',\r\n  'Bellota',\r\n  'Bellota Text',\r\n  'BenchNine',\r\n  'Benne',\r\n  'Bentham',\r\n  'Berkshire Swash',\r\n  'Beth Ellen',\r\n  'Bevan',\r\n  'Big Shoulders Display',\r\n  'Big Shoulders Inline Display',\r\n  'Big Shoulders Inline Text',\r\n  'Big Shoulders Stencil Display',\r\n  'Big Shoulders Stencil Text',\r\n  'Big Shoulders Text',\r\n  'Bigelow Rules',\r\n  'Bigshot One',\r\n  'Bilbo',\r\n  'Bilbo Swash Caps',\r\n  'BioRhyme',\r\n  'BioRhyme Expanded',\r\n  'Biryani',\r\n  'Bitter',\r\n  'Black And White Picture',\r\n  'Black Han Sans',\r\n  'Black Ops One',\r\n  'Blinker',\r\n  'Bodoni Moda',\r\n  'Bokor',\r\n  'Bonbon',\r\n  'Boogaloo',\r\n  'Bowlby One',\r\n  'Bowlby One SC',\r\n  'Brawler',\r\n  'Bree Serif',\r\n  'Brygada 1918',\r\n  'Bubblegum Sans',\r\n  'Bubbler One',\r\n  'Buda',\r\n  'Buenard',\r\n  'Bungee',\r\n  'Bungee Hairline',\r\n  'Bungee Inline',\r\n  'Bungee Outline',\r\n  'Bungee Shade',\r\n  'Butcherman',\r\n  'Butterfly Kids',\r\n  'Cabin',\r\n  'Cabin Condensed',\r\n  'Cabin Sketch',\r\n  'Caesar Dressing',\r\n  'Cagliostro',\r\n  'Cairo',\r\n  'Caladea',\r\n  'Calistoga',\r\n  'Calligraffitti',\r\n  'Cambay',\r\n  'Cambo',\r\n  'Candal',\r\n  'Cantarell',\r\n  'Cantata One',\r\n  'Cantora One',\r\n  'Capriola',\r\n  'Cardo',\r\n  'Carme',\r\n  'Carrois Gothic',\r\n  'Carrois Gothic SC',\r\n  'Carter One',\r\n  'Castoro',\r\n  'Catamaran',\r\n  'Caudex',\r\n  'Caveat',\r\n  'Caveat Brush',\r\n  'Cedarville Cursive',\r\n  'Ceviche One',\r\n  'Chakra Petch',\r\n  'Changa',\r\n  'Changa One',\r\n  'Chango',\r\n  'Charm',\r\n  'Charmonman',\r\n  'Chathura',\r\n  'Chau Philomene One',\r\n  'Chela One',\r\n  'Chelsea Market',\r\n  'Chenla',\r\n  'Cherry Cream Soda',\r\n  'Cherry Swash',\r\n  'Chewy',\r\n  'Chicle',\r\n  'Chilanka',\r\n  'Chivo',\r\n  'Chonburi',\r\n  'Cinzel',\r\n  'Cinzel Decorative',\r\n  'Clicker Script',\r\n  'Coda',\r\n  'Coda Caption',\r\n  'Codystar',\r\n  'Coiny',\r\n  'Combo',\r\n  'Comfortaa',\r\n  'Comic Neue',\r\n  'Coming Soon',\r\n  'Commissioner',\r\n  'Concert One',\r\n  'Condiment',\r\n  'Content',\r\n  'Contrail One',\r\n  'Convergence',\r\n  'Cookie',\r\n  'Copse',\r\n  'Corben',\r\n  'Cormorant',\r\n  'Cormorant Garamond',\r\n  'Cormorant Infant',\r\n  'Cormorant SC',\r\n  'Cormorant Unicase',\r\n  'Cormorant Upright',\r\n  'Courgette',\r\n  'Courier Prime',\r\n  'Cousine',\r\n  'Coustard',\r\n  'Covered By Your Grace',\r\n  'Crafty Girls',\r\n  'Creepster',\r\n  'Crete Round',\r\n  'Crimson Pro',\r\n  'Crimson Text',\r\n  'Croissant One',\r\n  'Crushed',\r\n  'Cuprum',\r\n  'Cute Font',\r\n  'Cutive',\r\n  'Cutive Mono',\r\n  'DM Mono',\r\n  'DM Sans',\r\n  'DM Serif Display',\r\n  'DM Serif Text',\r\n  'Damion',\r\n  'Dancing Script',\r\n  'Dangrek',\r\n  'Darker Grotesque',\r\n  'David Libre',\r\n  'Dawning of a New Day',\r\n  'Days One',\r\n  'Dekko',\r\n  'Dela Gothic One',\r\n  'Delius',\r\n  'Delius Swash Caps',\r\n  'Delius Unicase',\r\n  'Della Respira',\r\n  'Denk One',\r\n  'Devonshire',\r\n  'Dhurjati',\r\n  'Didact Gothic',\r\n  'Diplomata',\r\n  'Diplomata SC',\r\n  'Do Hyeon',\r\n  'Dokdo',\r\n  'Domine',\r\n  'Donegal One',\r\n  'Doppio One',\r\n  'Dorsa',\r\n  'Dosis',\r\n  'DotGothic16',\r\n  'Dr Sugiyama',\r\n  'Duru Sans',\r\n  'Dynalight',\r\n  'EB Garamond',\r\n  'Eagle Lake',\r\n  'East Sea Dokdo',\r\n  'Eater',\r\n  'Economica',\r\n  'Eczar',\r\n  'El Messiri',\r\n  'Electrolize',\r\n  'Elsie',\r\n  'Elsie Swash Caps',\r\n  'Emblema One',\r\n  'Emilys Candy',\r\n  'Encode Sans',\r\n  'Encode Sans Condensed',\r\n  'Encode Sans Expanded',\r\n  'Encode Sans Semi Condensed',\r\n  'Encode Sans Semi Expanded',\r\n  'Engagement',\r\n  'Englebert',\r\n  'Enriqueta',\r\n  'Epilogue',\r\n  'Erica One',\r\n  'Esteban',\r\n  'Euphoria Script',\r\n  'Ewert',\r\n  'Exo',\r\n  'Exo 2',\r\n  'Expletus Sans',\r\n  'Fahkwang',\r\n  'Fanwood Text',\r\n  'Farro',\r\n  'Farsan',\r\n  'Fascinate',\r\n  'Fascinate Inline',\r\n  'Faster One',\r\n  'Fasthand',\r\n  'Fauna One',\r\n  'Faustina',\r\n  'Federant',\r\n  'Federo',\r\n  'Felipa',\r\n  'Fenix',\r\n  'Finger Paint',\r\n  'Fira Code',\r\n  'Fira Mono',\r\n  'Fira Sans',\r\n  'Fira Sans Condensed',\r\n  'Fira Sans Extra Condensed',\r\n  'Fjalla One',\r\n  'Fjord One',\r\n  'Flamenco',\r\n  'Flavors',\r\n  'Fondamento',\r\n  'Fontdiner Swanky',\r\n  'Forum',\r\n  'Francois One',\r\n  'Frank Ruhl Libre',\r\n  'Fraunces',\r\n  'Freckle Face',\r\n  'Fredericka the Great',\r\n  'Fredoka One',\r\n  'Freehand',\r\n  'Fresca',\r\n  'Frijole',\r\n  'Fruktur',\r\n  'Fugaz One',\r\n  'GFS Didot',\r\n  'GFS Neohellenic',\r\n  'Gabriela',\r\n  'Gaegu',\r\n  'Gafata',\r\n  'Galada',\r\n  'Galdeano',\r\n  'Galindo',\r\n  'Gamja Flower',\r\n  'Gayathri',\r\n  'Gelasio',\r\n  'Gentium Basic',\r\n  'Gentium Book Basic',\r\n  'Geo',\r\n  'Geostar',\r\n  'Geostar Fill',\r\n  'Germania One',\r\n  'Gidugu',\r\n  'Gilda Display',\r\n  'Girassol',\r\n  'Give You Glory',\r\n  'Glass Antiqua',\r\n  'Glegoo',\r\n  'Gloria Hallelujah',\r\n  'Goblin One',\r\n  'Gochi Hand',\r\n  'Goldman',\r\n  'Gorditas',\r\n  'Gothic A1',\r\n  'Gotu',\r\n  'Goudy Bookletter 1911',\r\n  'Graduate',\r\n  'Grand Hotel',\r\n  'Grandstander',\r\n  'Gravitas One',\r\n  'Great Vibes',\r\n  'Grenze',\r\n  'Grenze Gotisch',\r\n  'Griffy',\r\n  'Gruppo',\r\n  'Gudea',\r\n  'Gugi',\r\n  'Gupter',\r\n  'Gurajada',\r\n  'Habibi',\r\n  'Hachi Maru Pop',\r\n  'Halant',\r\n  'Hammersmith One',\r\n  'Hanalei',\r\n  'Hanalei Fill',\r\n  'Handlee',\r\n  'Hanuman',\r\n  'Happy Monkey',\r\n  'Harmattan',\r\n  'Headland One',\r\n  'Heebo',\r\n  'Henny Penny',\r\n  'Hepta Slab',\r\n  'Herr Von Muellerhoff',\r\n  'Hi Melody',\r\n  'Hind',\r\n  'Hind Guntur',\r\n  'Hind Madurai',\r\n  'Hind Siliguri',\r\n  'Hind Vadodara',\r\n  'Holtwood One SC',\r\n  'Homemade Apple',\r\n  'Homenaje',\r\n  'IBM Plex Mono',\r\n  'IBM Plex Sans',\r\n  'IBM Plex Sans Condensed',\r\n  'IBM Plex Serif',\r\n  'IM Fell DW Pica',\r\n  'IM Fell DW Pica SC',\r\n  'IM Fell Double Pica',\r\n  'IM Fell Double Pica SC',\r\n  'IM Fell English',\r\n  'IM Fell English SC',\r\n  'IM Fell French Canon',\r\n  'IM Fell French Canon SC',\r\n  'IM Fell Great Primer',\r\n  'IM Fell Great Primer SC',\r\n  'Ibarra Real Nova',\r\n  'Iceberg',\r\n  'Iceland',\r\n  'Imbue',\r\n  'Imprima',\r\n  'Inconsolata',\r\n  'Inder',\r\n  'Indie Flower',\r\n  'Inika',\r\n  'Inknut Antiqua',\r\n  'Inria Sans',\r\n  'Inria Serif',\r\n  'Inter',\r\n  'Irish Grover',\r\n  'Istok Web',\r\n  'Italiana',\r\n  'Italianno',\r\n  'Itim',\r\n  'Jacques Francois',\r\n  'Jacques Francois Shadow',\r\n  'Jaldi',\r\n  'JetBrains Mono',\r\n  'Jim Nightshade',\r\n  'Jockey One',\r\n  'Jolly Lodger',\r\n  'Jomhuria',\r\n  'Jomolhari',\r\n  'Josefin Sans',\r\n  'Josefin Slab',\r\n  'Jost',\r\n  'Joti One',\r\n  'Jua',\r\n  'Judson',\r\n  'Julee',\r\n  'Julius Sans One',\r\n  'Junge',\r\n  'Jura',\r\n  'Just Another Hand',\r\n  'Just Me Again Down Here',\r\n  'K2D',\r\n  'Kadwa',\r\n  'Kalam',\r\n  'Kameron',\r\n  'Kanit',\r\n  'Kantumruy',\r\n  'Karla',\r\n  'Karma',\r\n  'Katibeh',\r\n  'Kaushan Script',\r\n  'Kavivanar',\r\n  'Kavoon',\r\n  'Kdam Thmor',\r\n  'Keania One',\r\n  'Kelly Slab',\r\n  'Kenia',\r\n  'Khand',\r\n  'Khmer',\r\n  'Khula',\r\n  'Kirang Haerang',\r\n  'Kite One',\r\n  'Kiwi Maru',\r\n  'Knewave',\r\n  'KoHo',\r\n  'Kodchasan',\r\n  'Kosugi',\r\n  'Kosugi Maru',\r\n  'Kotta One',\r\n  'Koulen',\r\n  'Kranky',\r\n  'Kreon',\r\n  'Kristi',\r\n  'Krona One',\r\n  'Krub',\r\n  'Kufam',\r\n  'Kulim Park',\r\n  'Kumar One',\r\n  'Kumar One Outline',\r\n  'Kumbh Sans',\r\n  'Kurale',\r\n  'La Belle Aurore',\r\n  'Lacquer',\r\n  'Laila',\r\n  'Lakki Reddy',\r\n  'Lalezar',\r\n  'Lancelot',\r\n  'Langar',\r\n  'Lateef',\r\n  'Lato',\r\n  'League Script',\r\n  'Leckerli One',\r\n  'Ledger',\r\n  'Lekton',\r\n  'Lemon',\r\n  'Lemonada',\r\n  'Lexend',\r\n  'Lexend Deca',\r\n  'Lexend Exa',\r\n  'Lexend Giga',\r\n  'Lexend Mega',\r\n  'Lexend Peta',\r\n  'Lexend Tera',\r\n  'Lexend Zetta',\r\n  'Libre Barcode 128',\r\n  'Libre Barcode 128 Text',\r\n  'Libre Barcode 39',\r\n  'Libre Barcode 39 Extended',\r\n  'Libre Barcode 39 Extended Text',\r\n  'Libre Barcode 39 Text',\r\n  'Libre Barcode EAN13 Text',\r\n  'Libre Baskerville',\r\n  'Libre Caslon Display',\r\n  'Libre Caslon Text',\r\n  'Libre Franklin',\r\n  'Life Savers',\r\n  'Lilita One',\r\n  'Lily Script One',\r\n  'Limelight',\r\n  'Linden Hill',\r\n  'Literata',\r\n  'Liu Jian Mao Cao',\r\n  'Livvic',\r\n  'Lobster',\r\n  'Lobster Two',\r\n  'Londrina Outline',\r\n  'Londrina Shadow',\r\n  'Londrina Sketch',\r\n  'Londrina Solid',\r\n  'Long Cang',\r\n  'Lora',\r\n  'Love Ya Like A Sister',\r\n  'Loved by the King',\r\n  'Lovers Quarrel',\r\n  'Luckiest Guy',\r\n  'Lusitana',\r\n  'Lustria',\r\n  'M PLUS 1p',\r\n  'M PLUS Rounded 1c',\r\n  'Ma Shan Zheng',\r\n  'Macondo',\r\n  'Macondo Swash Caps',\r\n  'Mada',\r\n  'Magra',\r\n  'Maiden Orange',\r\n  'Maitree',\r\n  'Major Mono Display',\r\n  'Mako',\r\n  'Mali',\r\n  'Mallanna',\r\n  'Mandali',\r\n  'Manjari',\r\n  'Manrope',\r\n  'Mansalva',\r\n  'Manuale',\r\n  'Marcellus',\r\n  'Marcellus SC',\r\n  'Marck Script',\r\n  'Margarine',\r\n  'Markazi Text',\r\n  'Marko One',\r\n  'Marmelad',\r\n  'Martel',\r\n  'Martel Sans',\r\n  'Marvel',\r\n  'Mate',\r\n  'Mate SC',\r\n  'Maven Pro',\r\n  'McLaren',\r\n  'Meddon',\r\n  'MedievalSharp',\r\n  'Medula One',\r\n  'Meera Inimai',\r\n  'Megrim',\r\n  'Meie Script',\r\n  'Merienda',\r\n  'Merienda One',\r\n  'Merriweather',\r\n  'Merriweather Sans',\r\n  'Metal',\r\n  'Metal Mania',\r\n  'Metamorphous',\r\n  'Metrophobic',\r\n  'Michroma',\r\n  'Milonga',\r\n  'Miltonian',\r\n  'Miltonian Tattoo',\r\n  'Mina',\r\n  'Miniver',\r\n  'Miriam Libre',\r\n  'Mirza',\r\n  'Miss Fajardose',\r\n  'Mitr',\r\n  'Modak',\r\n  'Modern Antiqua',\r\n  'Mogra',\r\n  'Molengo',\r\n  'Molle',\r\n  'Monda',\r\n  'Monofett',\r\n  'Monoton',\r\n  'Monsieur La Doulaise',\r\n  'Montaga',\r\n  'Montez',\r\n  'Montserrat',\r\n  'Montserrat Alternates',\r\n  'Montserrat Subrayada',\r\n  'Moul',\r\n  'Moulpali',\r\n  'Mountains of Christmas',\r\n  'Mouse Memoirs',\r\n  'Mr Bedfort',\r\n  'Mr Dafoe',\r\n  'Mr De Haviland',\r\n  'Mrs Saint Delafield',\r\n  'Mrs Sheppards',\r\n  'Mukta',\r\n  'Mukta Mahee',\r\n  'Mukta Malar',\r\n  'Mukta Vaani',\r\n  'Mulish',\r\n  'MuseoModerno',\r\n  'Mystery Quest',\r\n  'NTR',\r\n  'Nanum Brush Script',\r\n  'Nanum Gothic',\r\n  'Nanum Gothic Coding',\r\n  'Nanum Myeongjo',\r\n  'Nanum Pen Script',\r\n  'Nerko One',\r\n  'Neucha',\r\n  'Neuton',\r\n  'New Rocker',\r\n  'New Tegomin',\r\n  'News Cycle',\r\n  'Newsreader',\r\n  'Niconne',\r\n  'Niramit',\r\n  'Nixie One',\r\n  'Nobile',\r\n  'Nokora',\r\n  'Norican',\r\n  'Nosifer',\r\n  'Notable',\r\n  'Nothing You Could Do',\r\n  'Noticia Text',\r\n  'Noto Sans',\r\n  'Noto Sans HK',\r\n  'Noto Sans JP',\r\n  'Noto Sans KR',\r\n  'Noto Sans SC',\r\n  'Noto Sans TC',\r\n  'Noto Serif',\r\n  'Noto Serif JP',\r\n  'Noto Serif KR',\r\n  'Noto Serif SC',\r\n  'Noto Serif TC',\r\n  'Nova Cut',\r\n  'Nova Flat',\r\n  'Nova Mono',\r\n  'Nova Oval',\r\n  'Nova Round',\r\n  'Nova Script',\r\n  'Nova Slim',\r\n  'Nova Square',\r\n  'Numans',\r\n  'Nunito',\r\n  'Nunito Sans',\r\n  'Odibee Sans',\r\n  'Odor Mean Chey',\r\n  'Offside',\r\n  'Oi',\r\n  'Old Standard TT',\r\n  'Oldenburg',\r\n  'Oleo Script',\r\n  'Oleo Script Swash Caps',\r\n  'Open Sans',\r\n  'Open Sans Condensed',\r\n  'Oranienbaum',\r\n  'Orbitron',\r\n  'Oregano',\r\n  'Orienta',\r\n  'Original Surfer',\r\n  'Oswald',\r\n  'Over the Rainbow',\r\n  'Overlock',\r\n  'Overlock SC',\r\n  'Overpass',\r\n  'Overpass Mono',\r\n  'Ovo',\r\n  'Oxanium',\r\n  'Oxygen',\r\n  'Oxygen Mono',\r\n  'PT Mono',\r\n  'PT Sans',\r\n  'PT Sans Caption',\r\n  'PT Sans Narrow',\r\n  'PT Serif',\r\n  'PT Serif Caption',\r\n  'Pacifico',\r\n  'Padauk',\r\n  'Palanquin',\r\n  'Palanquin Dark',\r\n  'Pangolin',\r\n  'Paprika',\r\n  'Parisienne',\r\n  'Passero One',\r\n  'Passion One',\r\n  'Pathway Gothic One',\r\n  'Patrick Hand',\r\n  'Patrick Hand SC',\r\n  'Pattaya',\r\n  'Patua One',\r\n  'Pavanam',\r\n  'Paytone One',\r\n  'Peddana',\r\n  'Peralta',\r\n  'Permanent Marker',\r\n  'Petit Formal Script',\r\n  'Petrona',\r\n  'Philosopher',\r\n  'Piazzolla',\r\n  'Piedra',\r\n  'Pinyon Script',\r\n  'Pirata One',\r\n  'Plaster',\r\n  'Play',\r\n  'Playball',\r\n  'Playfair Display',\r\n  'Playfair Display SC',\r\n  'Podkova',\r\n  'Poiret One',\r\n  'Poller One',\r\n  'Poly',\r\n  'Pompiere',\r\n  'Pontano Sans',\r\n  'Poor Story',\r\n  'Poppins',\r\n  'Port Lligat Sans',\r\n  'Port Lligat Slab',\r\n  'Potta One',\r\n  'Pragati Narrow',\r\n  'Prata',\r\n  'Preahvihear',\r\n  'Press Start 2P',\r\n  'Pridi',\r\n  'Princess Sofia',\r\n  'Prociono',\r\n  'Prompt',\r\n  'Prosto One',\r\n  'Proza Libre',\r\n  'Public Sans',\r\n  'Puritan',\r\n  'Purple Purse',\r\n  'Quando',\r\n  'Quantico',\r\n  'Quattrocento',\r\n  'Quattrocento Sans',\r\n  'Questrial',\r\n  'Quicksand',\r\n  'Quintessential',\r\n  'Qwigley',\r\n  'Racing Sans One',\r\n  'Radley',\r\n  'Rajdhani',\r\n  'Rakkas',\r\n  'Raleway',\r\n  'Raleway Dots',\r\n  'Ramabhadra',\r\n  'Ramaraja',\r\n  'Rambla',\r\n  'Rammetto One',\r\n  'Ranchers',\r\n  'Rancho',\r\n  'Ranga',\r\n  'Rasa',\r\n  'Rationale',\r\n  'Ravi Prakash',\r\n  'Recursive',\r\n  'Red Hat Display',\r\n  'Red Hat Text',\r\n  'Red Rose',\r\n  'Redressed',\r\n  'Reem Kufi',\r\n  'Reenie Beanie',\r\n  'Reggae One',\r\n  'Revalia',\r\n  'Rhodium Libre',\r\n  'Ribeye',\r\n  'Ribeye Marrow',\r\n  'Righteous',\r\n  'Risque',\r\n  'Roboto',\r\n  'Roboto Condensed',\r\n  'Roboto Mono',\r\n  'Roboto Slab',\r\n  'Rochester',\r\n  'Rock Salt',\r\n  'RocknRoll One',\r\n  'Rokkitt',\r\n  'Romanesco',\r\n  'Ropa Sans',\r\n  'Rosario',\r\n  'Rosarivo',\r\n  'Rouge Script',\r\n  'Rowdies',\r\n  'Rozha One',\r\n  'Rubik',\r\n  'Rubik Mono One',\r\n  'Ruda',\r\n  'Rufina',\r\n  'Ruge Boogie',\r\n  'Ruluko',\r\n  'Rum Raisin',\r\n  'Ruslan Display',\r\n  'Russo One',\r\n  'Ruthie',\r\n  'Rye',\r\n  'Sacramento',\r\n  'Sahitya',\r\n  'Sail',\r\n  'Saira',\r\n  'Saira Condensed',\r\n  'Saira Extra Condensed',\r\n  'Saira Semi Condensed',\r\n  'Saira Stencil One',\r\n  'Salsa',\r\n  'Sanchez',\r\n  'Sancreek',\r\n  'Sansita',\r\n  'Sansita Swashed',\r\n  'Sarabun',\r\n  'Sarala',\r\n  'Sarina',\r\n  'Sarpanch',\r\n  'Satisfy',\r\n  'Sawarabi Gothic',\r\n  'Sawarabi Mincho',\r\n  'Scada',\r\n  'Scheherazade',\r\n  'Schoolbell',\r\n  'Scope One',\r\n  'Seaweed Script',\r\n  'Secular One',\r\n  'Sedgwick Ave',\r\n  'Sedgwick Ave Display',\r\n  'Sen',\r\n  'Sevillana',\r\n  'Seymour One',\r\n  'Shadows Into Light',\r\n  'Shadows Into Light Two',\r\n  'Shanti',\r\n  'Share',\r\n  'Share Tech',\r\n  'Share Tech Mono',\r\n  'Shippori Mincho',\r\n  'Shippori Mincho B1',\r\n  'Shojumaru',\r\n  'Short Stack',\r\n  'Shrikhand',\r\n  'Siemreap',\r\n  'Sigmar One',\r\n  'Signika',\r\n  'Signika Negative',\r\n  'Simonetta',\r\n  'Single Day',\r\n  'Sintony',\r\n  'Sirin Stencil',\r\n  'Six Caps',\r\n  'Skranji',\r\n  'Slabo 13px',\r\n  'Slabo 27px',\r\n  'Slackey',\r\n  'Smokum',\r\n  'Smythe',\r\n  'Sniglet',\r\n  'Snippet',\r\n  'Snowburst One',\r\n  'Sofadi One',\r\n  'Sofia',\r\n  'Solway',\r\n  'Song Myung',\r\n  'Sonsie One',\r\n  'Sora',\r\n  'Sorts Mill Goudy',\r\n  'Source Code Pro',\r\n  'Source Sans Pro',\r\n  'Source Serif Pro',\r\n  'Space Grotesk',\r\n  'Space Mono',\r\n  'Spartan',\r\n  'Special Elite',\r\n  'Spectral',\r\n  'Spectral SC',\r\n  'Spicy Rice',\r\n  'Spinnaker',\r\n  'Spirax',\r\n  'Squada One',\r\n  'Sree Krushnadevaraya',\r\n  'Sriracha',\r\n  'Srisakdi',\r\n  'Staatliches',\r\n  'Stalemate',\r\n  'Stalinist One',\r\n  'Stardos Stencil',\r\n  'Stick',\r\n  'Stint Ultra Condensed',\r\n  'Stint Ultra Expanded',\r\n  'Stoke',\r\n  'Strait',\r\n  'Stylish',\r\n  'Sue Ellen Francisco',\r\n  'Suez One',\r\n  'Sulphur Point',\r\n  'Sumana',\r\n  'Sunflower',\r\n  'Sunshiney',\r\n  'Supermercado One',\r\n  'Sura',\r\n  'Suranna',\r\n  'Suravaram',\r\n  'Suwannaphum',\r\n  'Swanky and Moo Moo',\r\n  'Syncopate',\r\n  'Syne',\r\n  'Syne Mono',\r\n  'Syne Tactile',\r\n  'Tajawal',\r\n  'Tangerine',\r\n  'Taprom',\r\n  'Tauri',\r\n  'Taviraj',\r\n  'Teko',\r\n  'Telex',\r\n  'Tenali Ramakrishna',\r\n  'Tenor Sans',\r\n  'Text Me One',\r\n  'Texturina',\r\n  'Thasadith',\r\n  'The Girl Next Door',\r\n  'Tienne',\r\n  'Tillana',\r\n  'Timmana',\r\n  'Tinos',\r\n  'Titan One',\r\n  'Titillium Web',\r\n  'Tomorrow',\r\n  'Trade Winds',\r\n  'Train One',\r\n  'Trirong',\r\n  'Trispace',\r\n  'Trocchi',\r\n  'Trochut',\r\n  'Truculenta',\r\n  'Trykker',\r\n  'Tulpen One',\r\n  'Turret Road',\r\n  'Ubuntu',\r\n  'Ubuntu Condensed',\r\n  'Ubuntu Mono',\r\n  'Ultra',\r\n  'Uncial Antiqua',\r\n  'Underdog',\r\n  'Unica One',\r\n  'UnifrakturCook',\r\n  'UnifrakturMaguntia',\r\n  'Unkempt',\r\n  'Unlock',\r\n  'Unna',\r\n  'VT323',\r\n  'Vampiro One',\r\n  'Varela',\r\n  'Varela Round',\r\n  'Varta',\r\n  'Vast Shadow',\r\n  'Vesper Libre',\r\n  'Viaoda Libre',\r\n  'Vibes',\r\n  'Vibur',\r\n  'Vidaloka',\r\n  'Viga',\r\n  'Voces',\r\n  'Volkhov',\r\n  'Vollkorn',\r\n  'Vollkorn SC',\r\n  'Voltaire',\r\n  'Waiting for the Sunrise',\r\n  'Wallpoet',\r\n  'Walter Turncoat',\r\n  'Warnes',\r\n  'Wellfleet',\r\n  'Wendy One',\r\n  'Wire One',\r\n  'Work Sans',\r\n  'Xanh Mono',\r\n  'Yanone Kaffeesatz',\r\n  'Yantramanav',\r\n  'Yatra One',\r\n  'Yellowtail',\r\n  'Yeon Sung',\r\n  'Yeseva One',\r\n  'Yesteryear',\r\n  'Yrsa',\r\n  'Yusei Magic',\r\n  'ZCOOL KuaiLe',\r\n  'ZCOOL QingKe HuangYou',\r\n  'ZCOOL XiaoWei',\r\n  'Zeyada',\r\n  'Zhi Mang Xing',\r\n  'Zilla Slab',\r\n  'Zilla Slab Highlight'\r\n];\r\n\r\nexport default fonts;","import React, { useState } from 'react';\r\nimport styles from './FontsDropdown.module.css';\r\nimport search from '../../../../assets/editor/search.svg';\r\nimport fonts from './fontsData';\r\n\r\nconst FontsDropdown = ({ setIsDropDown, dispatch, isSub }) => {\r\n  const [input, setInput] = useState('');\r\n  const optionsClickHandler = (e) => {\r\n    if (e.target.tagName === 'LI') {\r\n      let type = isSub ? 'setSubtitlesFontFamily' : 'setFontFamily';\r\n      dispatch({ type, data: e.target.textContent });\r\n      dispatch({ type: 'setShowToolbar', data: false });\r\n      setIsDropDown(false);\r\n    }\r\n  };\r\n  \r\n  const options = fonts\r\n    .filter((font) => {\r\n      return font.toLowerCase().includes(input.toLowerCase());\r\n    })\r\n    .map((font) => {\r\n      return (\r\n        <li className={styles.FontOption} key={font}>\r\n          {font}\r\n        </li>\r\n      );\r\n    });\r\n\r\n  return (\r\n    <div className={styles.FontsDropdown}>\r\n      <div className={styles.SearchContainer}>\r\n        <img className={styles.SearchSvg} src={search} alt='search' />\r\n        <input\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          className={styles.SearchInput}\r\n          placeholder='Search'\r\n          type='text'\r\n        />\r\n      </div>\r\n      <ul className={styles.FontOptionsContainer} onClick={optionsClickHandler}>\r\n        {options}\r\n      </ul>\r\n      <div className={styles.UploadFontContainer}>\r\n        <button className={styles.UploadFontButton}>Upload font</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FontsDropdown;\r\n","import React from 'react';\r\nimport styles from './FontSizeDropdown.module.css';\r\n\r\nconst FontSizeDropdown = ({ setIsDropDown, dispatch, isSub }) => {\r\n  const optionsClickHandler = (e) => {\r\n    if (e.target.tagName === 'LI') {\r\n      let type = isSub ? 'setSubtitlesFontSize' : 'setFontSize';\r\n      dispatch({ type, data: e.target.textContent });\r\n      dispatch({ type: 'setShowToolbar', data: false });\r\n      setIsDropDown(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ul className={styles.FontSizeDropdown} onClick={optionsClickHandler}>\r\n      <li className={styles.FontSizeOption}>14</li>\r\n      <li className={styles.FontSizeOption}>24</li>\r\n      <li className={styles.FontSizeOption}>30</li>\r\n      <li className={styles.FontSizeOption}>36</li>\r\n      <li className={styles.FontSizeOption}>48</li>\r\n      <li className={styles.FontSizeOption}>60</li>\r\n      <li className={styles.FontSizeOption}>72</li>\r\n      <li className={styles.FontSizeOption}>96</li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default FontSizeDropdown;\r\n","import React from 'react';\r\nimport styles from './TextAlignDropdown.module.css';\r\nimport textLeft from '../../../../assets/editor/textLeft.svg';\r\nimport textRight from '../../../../assets/editor/textRight.svg';\r\nimport textCenter from '../../../../assets/editor/textCenter.svg';\r\nimport textJustify from '../../../../assets/editor/textJustify.svg';\r\n\r\nconst TextAlignDropdown = ({ setIsDropDown, dispatch, current }) => {\r\n  const optionsClickHandler = (e) => {\r\n    let data = null;\r\n    if (e.target.tagName === 'LI') data = e.target.childNodes[0].alt;\r\n    else if (e.target.tagName === 'P') data = e.target.textContent;\r\n    else if (e.target.tagName === 'IMG') data = e.target.alt;\r\n    if (data) {\r\n      dispatch({ type: 'setTextAlign', data: data.toLowerCase() });\r\n      setIsDropDown(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ul className={styles.TextAlignDropdown} onClick={optionsClickHandler}>\r\n      <li\r\n        className={[\r\n          styles.TextAlignOption,\r\n          current === 'left' ? styles.Current : null,\r\n        ].join(' ')}\r\n      >\r\n        <img className={styles.TextAlignImage} src={textLeft} alt='left' />\r\n        <p className={styles.TextAlignText}>Left</p>\r\n      </li>\r\n      <li\r\n        className={[\r\n          styles.TextAlignOption,\r\n          current === 'center' ? styles.Current : null,\r\n        ].join(' ')}\r\n      >\r\n        <img className={styles.TextAlignImage} src={textCenter} alt='center' />\r\n        <p className={styles.TextAlignText}>Center</p>\r\n      </li>\r\n      <li\r\n        className={[\r\n          styles.TextAlignOption,\r\n          current === 'right' ? styles.Current : null,\r\n        ].join(' ')}\r\n      >\r\n        <img className={styles.TextAlignImage} src={textRight} alt='right' />\r\n        <p className={styles.TextAlignText}>Right</p>\r\n      </li>\r\n      <li\r\n        className={[\r\n          styles.TextAlignOption,\r\n          current === 'justify' ? styles.Current : null,\r\n        ].join(' ')}\r\n      >\r\n        <img\r\n          className={styles.TextAlignImage}\r\n          src={textJustify}\r\n          alt='justify'\r\n        />\r\n        <p className={styles.TextAlignText}>Justify</p>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default TextAlignDropdown;\r\n","import React, { useState, useEffect } from 'react';\r\nimport FontsDropdown from './FontsDropdown/FontsDropdown';\r\nimport FontSizeDropdown from './FontSizeDropdown/FontSizeDropdown';\r\nimport TextAlignDropdown from './TextAlignDropdown/TextAlignDropdown';\r\nimport { SketchPicker } from 'react-color';\r\nimport styles from './TextDropdowns.module.css';\r\n\r\nconst TextDropdowns = ({\r\n  state,\r\n  dispatch,\r\n  coords,\r\n  isFontFamilyDropdown,\r\n  isFontSizeDropdown,\r\n  isColorDropdown,\r\n  isTextAlignDropDown,\r\n  setIsFontFamilyDropdown,\r\n  setIsFontSizeDropdown,\r\n  colorChangeCompleteHandler,\r\n  setIsTextAlignDropDown,\r\n  setColor,\r\n  color,\r\n  colorPickerRef,\r\n  isSub,\r\n  isBgColorDropdown,\r\n  setBgColor,\r\n  bgColor,\r\n  bgColorPickerRef,\r\n}) => {\r\n  const [dropDownStyle, setDropdownStyle] = useState({ top: 41 });\r\n  const maxDropdownHeight = 301;\r\n  const DropdownOffset = 41;\r\n  const DropdownPadding = 20;\r\n\r\n  useEffect(() => {\r\n    if (\r\n      coords &&\r\n      coords.coordY + maxDropdownHeight + DropdownOffset + DropdownPadding >\r\n        state.canvasState.height\r\n    ) {\r\n      setDropdownStyle({ bottom: 41 });\r\n    }\r\n  }, [state.canvasState, coords]);\r\n\r\n  return (\r\n    <>\r\n      {isFontFamilyDropdown ? (\r\n        <div className={styles.FontsDropdown} style={dropDownStyle}>\r\n          <FontsDropdown\r\n            setIsDropDown={setIsFontFamilyDropdown}\r\n            dispatch={dispatch}\r\n            isSub={isSub}\r\n          />\r\n        </div>\r\n      ) : null}\r\n      {isFontSizeDropdown ? (\r\n        <div\r\n          className={styles.FontSizeDropdown}\r\n          style={{ ...dropDownStyle, right: isSub ? '223px' : '151px' }}\r\n        >\r\n          <FontSizeDropdown\r\n            setIsDropDown={setIsFontSizeDropdown}\r\n            dispatch={dispatch}\r\n            isSub={isSub}\r\n          />\r\n        </div>\r\n      ) : null}\r\n      {isColorDropdown ? (\r\n        <div className={styles.SketchPickerContainer} style={dropDownStyle}>\r\n          <SketchPicker\r\n            color={color}\r\n            onChange={(c) => setColor(c.rgb)}\r\n            onChangeComplete={(c) =>\r\n              colorChangeCompleteHandler(\r\n                c,\r\n                colorPickerRef,\r\n                dispatch,\r\n                isSub,\r\n                isBgColorDropdown\r\n              )\r\n            }\r\n          />\r\n        </div>\r\n      ) : null}\r\n      {isTextAlignDropDown ? (\r\n        <div className={styles.TextAlignDropdown} style={dropDownStyle}>\r\n          <TextAlignDropdown\r\n            setIsDropDown={setIsTextAlignDropDown}\r\n            dispatch={dispatch}\r\n            current={state.textState.textAlign}\r\n          />\r\n        </div>\r\n      ) : null}\r\n\r\n      {isBgColorDropdown ? (\r\n        <div className={styles.SketchPickerContainer} style={dropDownStyle}>\r\n          <SketchPicker\r\n            color={bgColor}\r\n            onChange={(c) => setBgColor(c.rgb)}\r\n            onChangeComplete={(c) =>\r\n              colorChangeCompleteHandler(\r\n                c,\r\n                bgColorPickerRef,\r\n                dispatch,\r\n                isSub,\r\n                isBgColorDropdown\r\n              )\r\n            }\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TextDropdowns;\r\n","export const colorChangeCompleteHandler = (c, ref, dispatch, isSub, isBg) => {\r\n  let colorString = `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`;\r\n  if (isBg && ref.current) {\r\n    ref.current.style.background = colorString;\r\n    dispatch({ type: 'setSubtitlesbackgroundColor', data: colorString });\r\n  } else if (ref.current) {\r\n    let type = isSub ? 'setSubtitlesTextFill' : 'setTextFill';\r\n    ref.current.style.background = colorString;\r\n    dispatch({ type, data: colorString });\r\n  }\r\n};\r\n\r\nexport const handleClick = (e, dropdownHandlers, styleHandlers) => {\r\n  if (e.currentTarget.id === 'bold' || e.currentTarget.id === 'italic') {\r\n    styleHandlers[e.currentTarget.id]();\r\n  }\r\n  for (let [id, handler] of Object.entries(dropdownHandlers)) {\r\n    if (id === e.currentTarget.id) handler((prevState) => !prevState);\r\n    else handler(false);\r\n  }\r\n};\r\n\r\nexport const fontSizeChangeHandler = (e, setFontSizeInput, dispatch, isSub) => {\r\n  setFontSizeInput(e.target.value);\r\n  let data = +e.target.value;\r\n  if (data <= 0) data = 1;\r\n  else if (data > 1080) data = 1080;\r\n  let type = isSub ? 'setSubtitlesFontSize' : 'setFontSize';\r\n  dispatch({ type, data });\r\n};\r\n","import React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport styles from './TextToolbar.module.css';\r\nimport downArrow from '../../../assets/editor/downArrow.svg';\r\nimport bold from '../../../assets/editor/bold.svg';\r\nimport subBackground from '../../../assets/editor/subBackground.svg';\r\nimport italic from '../../../assets/editor/italic.svg';\r\nimport textLeft from '../../../assets/editor/textLeft.svg';\r\nimport textRight from '../../../assets/editor/textRight.svg';\r\nimport textCenter from '../../../assets/editor/textCenter.svg';\r\nimport textJustify from '../../../assets/editor/textJustify.svg';\r\nimport TextDropdowns from '../TextDropdowns/TextDropdowns';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport {\r\n  handleClick,\r\n  fontSizeChangeHandler,\r\n  colorChangeCompleteHandler,\r\n} from './utils/handlers';\r\n\r\nconst TextToolbar = ({ coords, isSub }) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const [fontSizeInput, setFontSizeInput] = useState(0);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [isFontFamilyDropdown, setIsFontFamilyDropdown] = useState(false);\r\n  const [isFontSizeDropdown, setIsFontSizeDropdown] = useState(false);\r\n  const [isColorDropdown, setIsColorDropdown] = useState(false);\r\n  const [isTextAlignDropDown, setIsTextAlignDropDown] = useState(false);\r\n  const [isBgColorDropdown, setIsBgColorDropdown] = useState(false);\r\n  const [color, setColor] = useState({\r\n    r: 0,\r\n    g: 0,\r\n    b: 0,\r\n    a: 1,\r\n  });\r\n  const [bgColor, setBgColor] = useState({\r\n    r: 0,\r\n    g: 0,\r\n    b: 0,\r\n    a: 1,\r\n  });\r\n\r\n  const colorPickerRef = useRef(null);\r\n  const bgColorPickerRef = useRef(null);\r\n\r\n  // Active styles\r\n  const boldStlyes = [styles.FontWeightBoldContainer];\r\n  const italicStyles = [styles.FontStyleItalicContainer];\r\n  const state = isSub ? editorState.subtitlesState : editorState.textState;\r\n  const isBold = state.fontWeight === 'Bold';\r\n  const isItalic = state.fontStyle === 'Italic';\r\n  if (isBold) boldStlyes.push(styles.Active);\r\n  if (isItalic) italicStyles.push(styles.Active);\r\n\r\n  // Text Align SVG\r\n  let textAlignSrc = textLeft;\r\n  if (editorState.textState.textAlign === 'center') {\r\n    textAlignSrc = textCenter;\r\n  } else if (editorState.textState.textAlign === 'right') {\r\n    textAlignSrc = textRight;\r\n  } else if (editorState.textState.textAlign === 'justify') {\r\n    textAlignSrc = textJustify;\r\n  }\r\n\r\n  const boldHandler = () => {\r\n    let weight = 'Bold';\r\n    if (isBold) weight = 'Normal';\r\n    let type = isSub ? 'setSubtitlesFontWeight' : 'setFontWeight';\r\n    editorDispatch({ type, data: weight });\r\n  };\r\n\r\n  const italicHandler = () => {\r\n    let style = 'Italic';\r\n    if (isItalic) style = 'Normal';\r\n    let type = isSub ? 'setSubtitlesFontStyle' : 'setFontStyle';\r\n    editorDispatch({ type, data: style });\r\n  };\r\n\r\n  const dropdownHandlers = {\r\n    fontFamily: setIsFontFamilyDropdown,\r\n    fontSizeArrow: setIsFontSizeDropdown,\r\n    colorPicker: setIsColorDropdown,\r\n    textAlign: setIsTextAlignDropDown,\r\n    bgColor: setIsBgColorDropdown,\r\n  };\r\n\r\n  const styleHandlers = {\r\n    bold: boldHandler,\r\n    italic: italicHandler,\r\n  };\r\n\r\n  const clickHandler = (e) => handleClick(e, dropdownHandlers, styleHandlers);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      setFontSizeInput(state.fontSize);\r\n      let [r, g, b, a] = state.fill.split('(')[1].split(')')[0].split(',');\r\n      setColor({ r, g, b, a });\r\n      colorPickerRef.current.style.background = state.fill;\r\n      if (isSub) {\r\n        [r, g, b, a] = state.backgroundColor\r\n          .split('(')[1]\r\n          .split(')')[0]\r\n          .split(',');\r\n        setBgColor({ r, g, b, a });\r\n        bgColorPickerRef.current.style.background = state.backgroundColor;\r\n      }\r\n    }\r\n  }, [state, isFirstLoad, isSub]);\r\n\r\n  return (\r\n    <div className={styles.TextToolbar}>\r\n      <div\r\n        className={styles.FontsContainer}\r\n        id='fontFamily'\r\n        onClick={clickHandler}\r\n      >\r\n        <p>{state.fontFamily}</p>\r\n        <img className={styles.DownArrow} src={downArrow} alt='arrow' />\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div className={styles.FontSizeContainer}>\r\n        <div className={styles.FontSizeInputContainer}>\r\n          <input\r\n            className={styles.FontSizeInput}\r\n            type='number'\r\n            value={fontSizeInput}\r\n            onChange={(e) =>\r\n              fontSizeChangeHandler(e, setFontSizeInput, editorDispatch, isSub)\r\n            }\r\n          />\r\n        </div>\r\n        <div\r\n          className={styles.FontSizeArrowContainer}\r\n          id='fontSizeArrow'\r\n          onClick={clickHandler}\r\n        >\r\n          <img className={styles.DownArrow} src={downArrow} alt='arrow' />\r\n        </div>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n\r\n      <div\r\n        className={styles.ColorPickerContainer}\r\n        id='colorPicker'\r\n        onClick={clickHandler}\r\n      >\r\n        <div className={styles.ColorPickerBorder}>\r\n          <div ref={colorPickerRef} className={styles.ColorPicker}></div>\r\n        </div>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n\r\n      <div className={boldStlyes.join(' ')} id='bold' onClick={clickHandler}>\r\n        <img className={styles.Bold} src={bold} alt='bold' />\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div\r\n        className={italicStyles.join(' ')}\r\n        id='italic'\r\n        onClick={clickHandler}\r\n      >\r\n        <img className={styles.Italic} src={italic} alt='italic' />\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      {!isSub ? (\r\n        <>\r\n          <div\r\n            className={styles.TextAlignContainer}\r\n            id='textAlign'\r\n            onClick={clickHandler}\r\n          >\r\n            <img\r\n              className={styles.TextAlign}\r\n              src={textAlignSrc}\r\n              alt='textAlign'\r\n            />\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div\r\n          className={styles.BgColorContainer}\r\n          id='bgColor'\r\n          onClick={clickHandler}\r\n        >\r\n          <div className={styles.BgColor} ref={bgColorPickerRef}></div>\r\n          <img src={subBackground} alt='italic' />\r\n          <p>Background</p>\r\n        </div>\r\n      )}\r\n\r\n      <TextDropdowns\r\n        state={editorState}\r\n        dispatch={editorDispatch}\r\n        coords={coords}\r\n        isFontFamilyDropdown={isFontFamilyDropdown}\r\n        isFontSizeDropdown={isFontSizeDropdown}\r\n        isColorDropdown={isColorDropdown}\r\n        isTextAlignDropDown={isTextAlignDropDown}\r\n        setIsFontFamilyDropdown={setIsFontFamilyDropdown}\r\n        setIsFontSizeDropdown={setIsFontSizeDropdown}\r\n        colorChangeCompleteHandler={colorChangeCompleteHandler}\r\n        setIsTextAlignDropDown={setIsTextAlignDropDown}\r\n        setColor={setColor}\r\n        setBgColor={setBgColor}\r\n        color={color}\r\n        bgColor={bgColor}\r\n        colorPickerRef={colorPickerRef}\r\n        bgColorPickerRef={bgColorPickerRef}\r\n        isSub={isSub}\r\n        isBgColorDropdown={isBgColorDropdown}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextToolbar;\r\n","export default __webpack_public_path__ + \"static/media/cornerRadius.edfa6868.svg\";","import React from 'react';\r\nimport styles from './StrokeWidthDropdown.module.css';\r\n\r\nconst StrokeWidthDropdown = ({\r\n  setIsDropDown,\r\n  dispatch,\r\n  type,\r\n  isSmallRange,\r\n  includesZero,\r\n}) => {\r\n  const optionsClickHandler = (e) => {\r\n    if (e.target.tagName === 'LI') {\r\n      dispatch({ type, data: +e.target.textContent });\r\n      dispatch({ type: 'setShowToolbar', data: false });\r\n      setIsDropDown(false);\r\n    }\r\n  };\r\n  let list = null;\r\n  if (isSmallRange) {\r\n    list = (\r\n      <ul className={styles.LineDropdown} onClick={optionsClickHandler}>\r\n        {includesZero ? (\r\n          <li className={styles.StrokeOption}>0</li>\r\n        ) : (\r\n          <li className={styles.StrokeOption}>1</li>\r\n        )}\r\n        <li className={styles.StrokeOption}>5</li>\r\n        <li className={styles.StrokeOption}>10</li>\r\n        <li className={styles.StrokeOption}>15</li>\r\n        <li className={styles.StrokeOption}>20</li>\r\n        <li className={styles.StrokeOption}>25</li>\r\n        <li className={styles.StrokeOption}>30</li>\r\n        <li className={styles.StrokeOption}>35</li>\r\n        <li className={styles.StrokeOption}>40</li>\r\n        <li className={styles.StrokeOption}>45</li>\r\n        <li className={styles.StrokeOption}>50</li>\r\n      </ul>\r\n    );\r\n  } else {\r\n    list = (\r\n      <ul className={styles.ShapeDropdown} onClick={optionsClickHandler}>\r\n        <li className={styles.StrokeOption}>0</li>\r\n        <li className={styles.StrokeOption}>4</li>\r\n        <li className={styles.StrokeOption}>8</li>\r\n        <li className={styles.StrokeOption}>12</li>\r\n        <li className={styles.StrokeOption}>24</li>\r\n        <li className={styles.StrokeOption}>48</li>\r\n        <li className={styles.StrokeOption}>96</li>\r\n        <li className={styles.StrokeOption}>120</li>\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  return list;\r\n};\r\n\r\nexport default StrokeWidthDropdown;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { SketchPicker } from 'react-color';\r\nimport styles from './ShapeDropdowns.module.css';\r\nimport StrokeWidthDropdown from '../StrokeWidthDropdown/StrokeWidthDropdown';\r\n\r\nconst ShapeDropdowns = ({\r\n  state,\r\n  dispatch,\r\n  coords,\r\n  shapeToolbar,\r\n  isStrokeWidthDropdown,\r\n  isFillDropdown,\r\n  isStrokeDropdown,\r\n  fill,\r\n  setFill,\r\n  fillChangeCompleteHandler,\r\n  fillRef,\r\n  stroke,\r\n  setStroke,\r\n  strokeChangeCompleteHandler,\r\n  strokeRef,\r\n  setIsStrokeWidthDropdown,\r\n  isLine,\r\n  isRect,\r\n}) => {\r\n  const [dropDownStyle, setDropdownStyle] = useState({ top: 41 });\r\n  const [strokeWidthDropDownStyle, setStrokeWidthDropDownStyle] = useState({\r\n    top: 41,\r\n  });\r\n  const maxDropdownHeight = 301;\r\n  const maxDropdownWidth = 220;\r\n  const DropdownOffset = 41;\r\n  const DropdownPadding = 20;\r\n\r\n  const handleDropdownPosition = useCallback(\r\n    (coords, shapeToolbar, canvasHeight) => {\r\n      let toolbarWidth = shapeToolbar.offsetWidth;\r\n      let style = {};\r\n      if (\r\n        coords.coordY + maxDropdownHeight + DropdownOffset + DropdownPadding >\r\n        canvasHeight\r\n      ) {\r\n        style.bottom = 41;\r\n        setStrokeWidthDropDownStyle({ bottom: 41, right: !isRect ? 0 : 66 });\r\n      }\r\n\r\n      if (coords.coordX + toolbarWidth - maxDropdownWidth < 0) {\r\n        style.left = 0;\r\n        if (!style.bottom) style.top = 41;\r\n      }\r\n      if (Object.keys(style).length !== 0) setDropdownStyle(style);\r\n    },\r\n    [isRect]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (coords && shapeToolbar) {\r\n      handleDropdownPosition(coords, shapeToolbar, state.canvasState.height);\r\n    }\r\n  }, [handleDropdownPosition, shapeToolbar, state.canvasState, coords]);\r\n\r\n  return (\r\n    <>\r\n      {isFillDropdown ? (\r\n        <div className={styles.FillDropdownContainer} style={dropDownStyle}>\r\n          <SketchPicker\r\n            color={fill}\r\n            onChange={(c) => setFill(c.rgb)}\r\n            onChangeComplete={(c) =>\r\n              fillChangeCompleteHandler(c, dispatch, fillRef)\r\n            }\r\n          />\r\n        </div>\r\n      ) : null}\r\n\r\n      {isStrokeDropdown ? (\r\n        <div className={styles.StrokeDropdownContainer} style={dropDownStyle}>\r\n          <SketchPicker\r\n            color={stroke}\r\n            onChange={(c) => setStroke(c.rgb)}\r\n            onChangeComplete={(c) =>\r\n              strokeChangeCompleteHandler(c, dispatch, strokeRef)\r\n            }\r\n          />\r\n        </div>\r\n      ) : null}\r\n\r\n      {isStrokeWidthDropdown ? (\r\n        <div\r\n          className={styles.StrokeWidthDropdownContainer}\r\n          style={strokeWidthDropDownStyle}\r\n        >\r\n          <StrokeWidthDropdown\r\n            setIsDropDown={setIsStrokeWidthDropdown}\r\n            isSmallRange={isLine}\r\n            includesZero={false}\r\n            dispatch={dispatch}\r\n            type={'setShapeStrokeWidth'}\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ShapeDropdowns;\r\n","export const initialLoadHandler = (\r\n  isLine,\r\n  shapeState,\r\n  setIsFirstLoad,\r\n  setFill,\r\n  fillRef,\r\n  strokeContainerRef,\r\n  setStroke,\r\n  strokeRef\r\n) => {\r\n  setIsFirstLoad(false);\r\n  if (!isLine) {\r\n    let [r, g, b, a] = shapeState.fill.split('(')[1].split(')')[0].split(',');\r\n    setFill({ r, g, b, a });\r\n    fillRef.current.style.background = shapeState.fill;\r\n  } else {\r\n    strokeContainerRef.current.style.borderTopLeftRadius = '15px';\r\n    strokeContainerRef.current.style.borderBottomLeftRadius = '15px';\r\n  }\r\n  let [r, g, b, a] = shapeState.stroke.split('(')[1].split(')')[0].split(',');\r\n  setStroke({ r, g, b, a });\r\n  strokeRef.current.style.background = shapeState.stroke;\r\n};\r\n\r\nexport const fillChangeCompleteHandler = (c, dispatch, fillRef) => {\r\n  if (fillRef.current) {\r\n    let colorString = `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`;\r\n    dispatch({ type: 'setShapeFill', data: colorString });\r\n    fillRef.current.style.background = colorString;\r\n  }\r\n};\r\n\r\nexport const strokeChangeCompleteHandler = (c, dispatch, strokeRef) => {\r\n  if (strokeRef.current) {\r\n    let colorString = `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`;\r\n    dispatch({ type: 'setShapeStroke', data: colorString });\r\n    strokeRef.current.style.background = colorString;\r\n  }\r\n};\r\n\r\nexport const strokeWidthChangeHandler = (\r\n  e,\r\n  dispatch,\r\n  setStrokeWidthInput,\r\n  isLine\r\n) => {\r\n  setStrokeWidthInput(e.target.value);\r\n  let data = +e.target.value;\r\n  if (isLine && data <= 0) data = 1;\r\n  else if (isLine && data > 50) data = 50;\r\n  else if (!isLine && data > 120) data = 120;\r\n  else if (!isLine && data < 0) data = 0;\r\n  dispatch({ type: 'setShapeStrokeWidth', data });\r\n};\r\n\r\nexport const handleClick = (\r\n  e,\r\n  setIsFillDropdown,\r\n  setIsStrokeDropdown,\r\n  setIsStrokeWidthDropdown\r\n) => {\r\n  let clicked = e.currentTarget.id;\r\n  if (clicked === 'fill') {\r\n    setIsFillDropdown((prevState) => !prevState);\r\n    setIsStrokeDropdown(false);\r\n    setIsStrokeWidthDropdown(false);\r\n  } else if (clicked === 'stroke') {\r\n    setIsStrokeDropdown((prevState) => !prevState);\r\n    setIsFillDropdown(false);\r\n    setIsStrokeWidthDropdown(false);\r\n  } else if (clicked === 'strokeWidth') {\r\n    setIsStrokeWidthDropdown((prevState) => !prevState);\r\n    setIsFillDropdown(false);\r\n    setIsStrokeDropdown(false);\r\n  } else {\r\n    setIsStrokeWidthDropdown(false);\r\n    setIsFillDropdown(false);\r\n    setIsStrokeDropdown(false);\r\n  }\r\n};\r\n","import React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport styles from './ShapeToolbar.module.css';\r\nimport downArrow from '../../../assets/editor/downArrow.svg';\r\nimport cornerRadius from '../../../assets/editor/cornerRadius.svg';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport ShapeDropdowns from '../ShapeDropdowns/ShapeDropdowns';\r\nimport {\r\n  initialLoadHandler,\r\n  handleClick,\r\n  fillChangeCompleteHandler,\r\n  strokeChangeCompleteHandler,\r\n  strokeWidthChangeHandler,\r\n} from './utils/handlers';\r\n\r\nconst ShapeToolbar = ({ coords }) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [fill, setFill] = useState('rgba(196,196,196,1)');\r\n  const [stroke, setStroke] = useState('rgba(255,255,255,1)');\r\n  const [isFillDropdown, setIsFillDropdown] = useState(false);\r\n  const [isStrokeDropdown, setIsStrokeDropdown] = useState(false);\r\n  const [isStrokeWidthDropdown, setIsStrokeWidthDropdown] = useState(false);\r\n  const [strokeWidthInput, setStrokeWidthInput] = useState(\r\n    editorState.shapeState.strokeWidth\r\n  );\r\n  const [radiusInput, setRadiusInput] = useState(editorState.shapeState.rx);\r\n  const shapeToolbarRef = useRef(null);\r\n  const fillRef = useRef(null);\r\n  const strokeRef = useRef(null);\r\n  const strokeContainerRef = useRef(null);\r\n  const isLine = editorState.currentObject.type === 'line';\r\n  const isRect = editorState.currentObject.type === 'rect';\r\n\r\n  const radiusChangeHandler = (e) => {\r\n    setRadiusInput(e.target.value);\r\n    let val = +e.target.value;\r\n    if (val < 0) val = 0;\r\n    if (val > 100) val = 100;\r\n    editorDispatch({ type: 'setShapeRadius', data: val });\r\n  };\r\n\r\n  const clickHandler = (e) =>\r\n    handleClick(\r\n      e,\r\n      setIsFillDropdown,\r\n      setIsStrokeDropdown,\r\n      setIsStrokeWidthDropdown\r\n    );\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      initialLoadHandler(\r\n        isLine,\r\n        editorState.shapeState,\r\n        setIsFirstLoad,\r\n        setFill,\r\n        fillRef,\r\n        strokeContainerRef,\r\n        setStroke,\r\n        strokeRef\r\n      );\r\n    }\r\n  }, [isLine, editorState.shapeState, isFirstLoad]);\r\n\r\n  return (\r\n    <div ref={shapeToolbarRef} className={styles.ShapeToolbar}>\r\n      {!isLine ? (\r\n        <>\r\n          <div\r\n            className={styles.FillContainer}\r\n            id='fill'\r\n            onClick={clickHandler}\r\n          >\r\n            <div className={styles.ColorPickerBorder}>\r\n              <div ref={fillRef} className={styles.ColorPicker}></div>\r\n            </div>\r\n            <p>Fill</p>\r\n          </div>\r\n          <div className={styles.BorderDiv}></div>\r\n        </>\r\n      ) : null}\r\n\r\n      <div\r\n        ref={strokeContainerRef}\r\n        className={styles.StrokeContainer}\r\n        id='stroke'\r\n        onClick={clickHandler}\r\n      >\r\n        <div className={styles.ColorPickerBorder}>\r\n          <div ref={strokeRef} className={styles.ColorPicker}></div>\r\n        </div>\r\n        <p>Stroke</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div className={styles.StrokeWidthContainer}>\r\n        <div className={styles.StrokeWidthInputContainer}>\r\n          <input\r\n            className={styles.StrokeWidthInput}\r\n            type='number'\r\n            value={strokeWidthInput}\r\n            onChange={(e) =>\r\n              strokeWidthChangeHandler(\r\n                e,\r\n                editorDispatch,\r\n                setStrokeWidthInput,\r\n                isLine\r\n              )\r\n            }\r\n          />\r\n        </div>\r\n        <div\r\n          style={{\r\n            borderTopRightRadius: isRect ? '0' : '15px',\r\n            borderBottomRightRadius: isRect ? '0' : '15px',\r\n          }}\r\n          className={styles.StrokeWidthArrowContainer}\r\n          id='strokeWidth'\r\n          onClick={clickHandler}\r\n        >\r\n          <img className={styles.DownArrow} src={downArrow} alt='arrow' />\r\n        </div>\r\n      </div>\r\n\r\n      {isRect ? (\r\n        <>\r\n          <div className={styles.BorderDiv}></div>\r\n          <div\r\n            className={styles.RadiusContainer}\r\n            id='radius'\r\n            onClick={clickHandler}\r\n          >\r\n            <img src={cornerRadius} alt='radius' />\r\n            <input\r\n              className={styles.RadiusInput}\r\n              type='number'\r\n              value={radiusInput}\r\n              onChange={radiusChangeHandler}\r\n            />\r\n          </div>\r\n        </>\r\n      ) : null}\r\n      <ShapeDropdowns\r\n        state={editorState}\r\n        dispatch={editorDispatch}\r\n        coords={coords}\r\n        shapeToolbar={shapeToolbarRef.current}\r\n        isStrokeWidthDropdown={isStrokeWidthDropdown}\r\n        setIsStrokeWidthDropdown={setIsStrokeWidthDropdown}\r\n        isStrokeDropdown={isStrokeDropdown}\r\n        isFillDropdown={isFillDropdown}\r\n        fill={fill}\r\n        setFill={setFill}\r\n        fillChangeCompleteHandler={fillChangeCompleteHandler}\r\n        fillRef={fillRef}\r\n        stroke={stroke}\r\n        setStroke={setStroke}\r\n        strokeChangeCompleteHandler={strokeChangeCompleteHandler}\r\n        strokeRef={strokeRef}\r\n        isLine={isLine}\r\n        isRect={isRect}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShapeToolbar;\r\n","export default __webpack_public_path__ + \"static/media/replaceImage.24b71204.svg\";","export default __webpack_public_path__ + \"static/media/cropImage.06a8d86d.svg\";","import React, { useState, useContext, useEffect } from 'react';\r\nimport styles from './ImageToolbar.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport replaceImage from '../../../assets/editor/replaceImage.svg';\r\nimport cornerRadius from '../../../assets/editor/cornerRadius.svg';\r\nimport cropImage from '../../../assets/editor/cropImage.svg';\r\n\r\nconst ImageToolbar = () => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { eventState } = useContext(EventContext);\r\n  const [radiusInput, setRadiusInput] = useState(\r\n    editorState.imageState.cornerRadius\r\n  );\r\n\r\n  const clickHandler = (e) => {\r\n    if (e.currentTarget.id === 'replace') {\r\n      editorDispatch({ type: 'setShouldReplaceImage', data: true });\r\n    } else if (e.currentTarget.id === 'crop') {\r\n      editorDispatch({ type: 'setCropType', data: 'rect' });\r\n    }\r\n  };\r\n\r\n  const radiusChangeHandler = (e) => {\r\n    setRadiusInput(e.target.value);\r\n    let val = +e.target.value;\r\n    if (val < 0) val = 0;\r\n    if (val > 100) val = 100;\r\n    editorDispatch({ type: 'setImageCornerRadius', data: val });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (eventState.dbClickEvent) {\r\n      editorDispatch({ type: 'setCropType', data: 'rect' });\r\n    }\r\n  }, [eventState, editorDispatch]);\r\n\r\n  // const cropDoneHandler = () => {\r\n  //   editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n  //   editorDispatch({ type: 'setShowToolbar', data: false });\r\n  // };\r\n\r\n  const content = (\r\n    <>\r\n      <div\r\n        className={[\r\n          styles.ReaplaceContainer,\r\n          editorState.imageState.isSvg ? styles.BorderStyle : null,\r\n        ].join(' ')}\r\n        id='replace'\r\n        onClick={clickHandler}\r\n      >\r\n        <img src={replaceImage} alt='replace' />\r\n        <p>Replace</p>\r\n      </div>\r\n\r\n      {!editorState.imageState.isSvg ? (\r\n        <>\r\n          <div className={styles.BorderDiv}></div>\r\n          <div\r\n            className={styles.RadiusContainer}\r\n            id='radius'\r\n            onClick={clickHandler}\r\n          >\r\n            <img src={cornerRadius} alt='radius' />\r\n            <input\r\n              className={styles.RadiusInput}\r\n              type='number'\r\n              value={radiusInput}\r\n              onChange={radiusChangeHandler}\r\n            />\r\n          </div>\r\n          <div className={styles.BorderDiv}></div>\r\n          <div\r\n            className={styles.CropContainer}\r\n            id='crop'\r\n            onClick={clickHandler}\r\n          >\r\n            <img src={cropImage} alt='crop' />\r\n            <p>Crop</p>\r\n          </div>\r\n        </>\r\n      ) : null}\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <div className={styles.ImageToolbar}>\r\n      {content}\r\n      {/* {!editorState.isCropMode ? (\r\n        content\r\n      ) : (\r\n        <div className={styles.DoneContainer} onClick={cropDoneHandler}>\r\n          Done\r\n        </div>\r\n      )} */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageToolbar;\r\n","export const initialLoadHandler = (videoState, setStroke, strokeRef) => {\r\n  if (strokeRef.current && videoState.stroke !== null) {\r\n    let [r, g, b, a] = videoState.stroke.split('(')[1].split(')')[0].split(',');\r\n    setStroke({ r, g, b, a });\r\n    strokeRef.current.style.background = videoState.stroke;\r\n  }\r\n};\r\n\r\nexport const strokeChangeCompleteHandler = (c, dispatch, strokeRef) => {\r\n  if (strokeRef.current) {\r\n    let colorString = `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`;\r\n    dispatch({ type: 'setVideoStroke', data: colorString });\r\n    strokeRef.current.style.background = colorString;\r\n  }\r\n};\r\n\r\nexport const strokeWidthChangeHandler = (e, dispatch, setStrokeWidthInput) => {\r\n  setStrokeWidthInput(e.target.value);\r\n  let data = +e.target.value;\r\n  if (data > 50) data = 50;\r\n  else if (data < 0) data = 0;\r\n  dispatch({ type: 'setVideoStrokeWidth', data });\r\n};\r\n\r\nexport const handleClick = (\r\n  clicked,\r\n  setIsStrokeDropdown,\r\n  setIsStrokeWidthDropdown\r\n) => {\r\n  if (clicked === 'stroke') {\r\n    setIsStrokeDropdown((prevState) => !prevState);\r\n    setIsStrokeWidthDropdown(false);\r\n  } else if (clicked === 'strokeWidth') {\r\n    setIsStrokeWidthDropdown((prevState) => !prevState);\r\n    setIsStrokeDropdown(false);\r\n  } else {\r\n    setIsStrokeWidthDropdown(false);\r\n    setIsStrokeDropdown(false);\r\n  }\r\n};\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { SketchPicker } from 'react-color';\r\nimport styles from './VideoDropdowns.module.css';\r\nimport StrokeWidthDropdown from '../../StrokeWidthDropdown/StrokeWidthDropdown';\r\n\r\nconst VideoDropdowns = ({\r\n  state,\r\n  dispatch,\r\n  coords,\r\n  videoToolbar,\r\n  isStrokeWidthDropdown,\r\n  setIsStrokeWidthDropdown,\r\n  isStrokeDropdown,\r\n  stroke,\r\n  setStroke,\r\n  strokeChangeCompleteHandler,\r\n  strokeRef,\r\n}) => {\r\n  const [dropDownStyle, setDropdownStyle] = useState({ top: 41 });\r\n  const maxDropdownHeight = 301;\r\n  const maxDropdownWidth = 220;\r\n  const DropdownOffset = 41;\r\n  const DropdownPadding = 20;\r\n\r\n  const handleDropdownPosition = useCallback(\r\n    (coords, shapeToolbar, canvasHeight) => {\r\n      let toolbarWidth = shapeToolbar.offsetWidth;\r\n      let style = {};\r\n      if (\r\n        coords.coordY + maxDropdownHeight + DropdownOffset + DropdownPadding >\r\n        canvasHeight\r\n      ) {\r\n        style.bottom = 41;\r\n      }\r\n\r\n      if (coords.coordX + toolbarWidth - maxDropdownWidth < 0) {\r\n        style.left = 0;\r\n        if (!style.bottom) style.top = 41;\r\n      }\r\n      if (Object.keys(style).length !== 0) setDropdownStyle(style);\r\n    },\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (coords && videoToolbar) {\r\n      handleDropdownPosition(coords, videoToolbar, state.canvasState.height);\r\n    }\r\n  }, [handleDropdownPosition, videoToolbar, state.canvasState, coords]);\r\n\r\n  return (\r\n    <>\r\n      {isStrokeDropdown ? (\r\n        <div className={styles.StrokeDropdownContainer} style={dropDownStyle}>\r\n          <SketchPicker\r\n            color={stroke}\r\n            onChange={(c) => setStroke(c.rgb)}\r\n            onChangeComplete={(c) =>\r\n              strokeChangeCompleteHandler(c, dispatch, strokeRef)\r\n            }\r\n          />\r\n        </div>\r\n      ) : null}\r\n\r\n      {isStrokeWidthDropdown ? (\r\n        <div\r\n          className={styles.StrokeWidthDropdownContainer}\r\n          style={dropDownStyle}\r\n        >\r\n          <StrokeWidthDropdown\r\n            type={'setVideoStrokeWidth'}\r\n            setIsDropDown={setIsStrokeWidthDropdown}\r\n            isSmallRange={true}\r\n            includesZero={true}\r\n            dispatch={dispatch}\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default VideoDropdowns;\r\n","import React, { useState, useContext, useRef, useEffect } from 'react';\r\nimport styles from './VideoToolbar.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport cornerRadius from '../../../assets/editor/cornerRadius.svg';\r\nimport cropImage from '../../../assets/editor/cropImage.svg';\r\nimport downArrow from '../../../assets/editor/downArrow.svg';\r\nimport {\r\n  strokeWidthChangeHandler,\r\n  handleClick,\r\n  initialLoadHandler,\r\n  strokeChangeCompleteHandler\r\n} from './utils/handlers';\r\nimport VideoDropdowns from './VideoDropdowns/VideoDropdowns';\r\n\r\nconst VideoToolbar = ({ coords }) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { eventState } = useContext(EventContext);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [radiusInput, setRadiusInput] = useState(\r\n    editorState.videoState.cornerRadius\r\n  );\r\n  const [stroke, setStroke] = useState('rgba(255,255,255,1)');\r\n  const [isStrokeDropdown, setIsStrokeDropdown] = useState(false);\r\n  const [isStrokeWidthDropdown, setIsStrokeWidthDropdown] = useState(false);\r\n  const [strokeWidthInput, setStrokeWidthInput] = useState(\r\n    editorState.videoState.strokeWidth\r\n  );\r\n  const strokeRef = useRef(null);\r\n  const strokeContainerRef = useRef(null);\r\n  const videoToolbarRef = useRef(null);\r\n\r\n  const clickHandler = (e) => {\r\n    let id = e.currentTarget.id;\r\n    if (id === 'crop') editorDispatch({ type: 'setCropType', data: 'rect' });\r\n    else if (id === 'circleCrop') {\r\n      editorDispatch({ type: 'setCropType', data: 'circle' });\r\n    }\r\n    handleClick(id, setIsStrokeDropdown, setIsStrokeWidthDropdown);\r\n  };\r\n\r\n  const radiusChangeHandler = (e) => {\r\n    setRadiusInput(e.target.value);\r\n    let val = +e.target.value;\r\n    if (val < 0) val = 0;\r\n    if (val > 100) val = 100;\r\n    editorDispatch({ type: 'setVideoCornerRadius', data: val });\r\n  };\r\n\r\n  // const cropDoneHandler = () => {\r\n  //   editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n  //   editorDispatch({ type: 'setShowToolbar', data: false });\r\n  // };\r\n\r\n  useEffect(() => {\r\n    if(eventState.dbClickEvent) {\r\n      editorDispatch({ type: 'setCropType', data: 'rect' });\r\n    }\r\n  }, [eventState, editorDispatch])\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      initialLoadHandler(editorState.videoState, setStroke, strokeRef);\r\n    }\r\n  }, [editorState.videoState, isFirstLoad]);\r\n\r\n  const content = (\r\n    <>\r\n      <div className={styles.CropContainer} id='crop' onClick={clickHandler}>\r\n        <img src={cropImage} alt='replace' />\r\n        <p>Crop</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div\r\n        className={styles.CircleCropContainer}\r\n        id='circleCrop'\r\n        onClick={clickHandler}\r\n      >\r\n        <div className={styles.CircleCropCircle}></div>\r\n        <p>Circle crop</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n\r\n      <div\r\n        ref={strokeContainerRef}\r\n        className={styles.StrokeContainer}\r\n        id='stroke'\r\n        onClick={clickHandler}\r\n      >\r\n        <div className={styles.ColorPickerBorder}>\r\n          <div ref={strokeRef} className={styles.ColorPicker}></div>\r\n        </div>\r\n        <p>Stroke</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div className={styles.StrokeWidthContainer}>\r\n        <div className={styles.StrokeWidthInputContainer}>\r\n          <input\r\n            className={styles.StrokeWidthInput}\r\n            type='number'\r\n            value={strokeWidthInput}\r\n            onChange={(e) =>\r\n              strokeWidthChangeHandler(e, editorDispatch, setStrokeWidthInput)\r\n            }\r\n          />\r\n        </div>\r\n        <div\r\n          className={styles.StrokeWidthArrowContainer}\r\n          id='strokeWidth'\r\n          onClick={clickHandler}\r\n        >\r\n          <img className={styles.DownArrow} src={downArrow} alt='arrow' />\r\n        </div>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n\r\n      <div\r\n        className={styles.RadiusContainer}\r\n        id='radius'\r\n        onClick={clickHandler}\r\n      >\r\n        <img src={cornerRadius} alt='radius' />\r\n        <input\r\n          className={styles.RadiusInput}\r\n          type='number'\r\n          value={radiusInput}\r\n          onChange={radiusChangeHandler}\r\n        />\r\n      </div>\r\n\r\n      <VideoDropdowns\r\n        state={editorState}\r\n        dispatch={editorDispatch}\r\n        coords={coords}\r\n        videoToolbar={videoToolbarRef.current}\r\n        isStrokeWidthDropdown={isStrokeWidthDropdown}\r\n        setIsStrokeWidthDropdown={setIsStrokeWidthDropdown}\r\n        isStrokeDropdown={isStrokeDropdown}\r\n        stroke={stroke}\r\n        setStroke={setStroke}\r\n        strokeChangeCompleteHandler={strokeChangeCompleteHandler}\r\n        strokeRef={strokeRef}\r\n      />\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <div className={styles.VideoToolbar} ref={videoToolbarRef}>\r\n      {content}\r\n      {/* {!editorState.isCropMode ? (\r\n        content\r\n      ) : (\r\n        <div className={styles.DoneContainer} onClick={cropDoneHandler}>\r\n          Done\r\n        </div>\r\n      )} */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoToolbar;\r\n","import React, {\r\n  useContext,\r\n  useRef,\r\n  useEffect,\r\n  useCallback,\r\n  useState,\r\n} from 'react';\r\nimport EditorContext from '../../contexts/EditorContext';\r\nimport styles from './Toolbar.module.css';\r\nimport { calcPosition } from './utils/toolbarPosition';\r\nimport TextToolbar from './TextToolbar/TextToolbar';\r\nimport ShapeToolbar from './ShapeToolbar/ShapeToolbar';\r\nimport ImageToolbar from './ImageToolbar/ImageToolbar';\r\nimport VideoToolbar from './VideoToolbar/VideoToolbar';\r\n\r\nconst Toolbar = ({ canvas }) => {\r\n  const [coords, setCoords] = useState(null);\r\n  const { editorState } = useContext(EditorContext);\r\n  const toolbarRef = useRef(null);\r\n  const toolbarOffset = 28;\r\n  const toolbarPadding = 10;\r\n  const shapeArr = ['rect', 'circle', 'triangle', 'line'];\r\n  const setTransform = useCallback((c) => {\r\n    toolbarRef.current.style.transform = `translate(${c.coordX}px, ${c.coordY}px)`;\r\n    toolbarRef.current.style.opacity = 1;\r\n    setCoords(c);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (editorState.currentCoords) {\r\n      setTransform(\r\n        calcPosition(\r\n          editorState.currentCoords,\r\n          canvas.getWidth(),\r\n          canvas.getHeight(),\r\n          toolbarRef.current,\r\n          toolbarOffset,\r\n          toolbarPadding\r\n        )\r\n      );\r\n    }\r\n  }, [\r\n    canvas,\r\n    setTransform,\r\n    editorState.currentCoords,\r\n    editorState.isCroppingImage,\r\n  ]);\r\n\r\n  return (\r\n    <div ref={toolbarRef} className={styles.Toolbar}>\r\n      {editorState.currentObject.type === 'text' ? (\r\n        <TextToolbar coords={coords} isSub={false} />\r\n      ) : null}\r\n      {editorState.currentObject.type === 'subtitle' ? (\r\n        <TextToolbar coords={coords} isSub={true} />\r\n      ) : null}\r\n      {shapeArr.includes(editorState.currentObject.type) ? (\r\n        <ShapeToolbar coords={coords} />\r\n      ) : null}\r\n      {editorState.currentObject.type === 'customImage' ? (\r\n        <ImageToolbar />\r\n      ) : null}\r\n      {editorState.currentObject.type === 'video' ? (\r\n        <VideoToolbar coords={coords} />\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Toolbar;\r\n","export const calcPosition = (\r\n  currentCoords,\r\n  canvasWidth,\r\n  canvasHeight,\r\n  toolbar,\r\n  toolbarOffset,\r\n  toolbarPadding,\r\n) => {\r\n  let toolbarWidth = toolbar.offsetWidth;\r\n  let toolbarHeight = toolbar.offsetHeight;\r\n\r\n  let isBottomCloser = currentCoords.tl.y > currentCoords.bl.y;\r\n  let offset = isBottomCloser ? toolbarOffset + toolbarHeight : toolbarOffset;\r\n\r\n  // Coord Y\r\n  let coordY =\r\n    Math.min(\r\n      currentCoords.tl.y,\r\n      currentCoords.tr.y,\r\n      currentCoords.br.y,\r\n      currentCoords.bl.y\r\n    ) -\r\n    toolbarHeight -\r\n    offset;\r\n  if (coordY - toolbarPadding < 0) {\r\n    let tempCoordY =\r\n      Math.max(\r\n        currentCoords.tl.y,\r\n        currentCoords.tr.y,\r\n        currentCoords.br.y,\r\n        currentCoords.bl.y\r\n      ) +\r\n      toolbarOffset +\r\n      (!isBottomCloser ? toolbarHeight : 0);\r\n    if (tempCoordY + toolbarPadding + toolbarHeight < canvasHeight)\r\n      coordY = tempCoordY;\r\n    else coordY = canvasHeight - toolbarHeight - toolbarOffset;\r\n  }\r\n\r\n  // Coord X\r\n  let coordX = Math.min(\r\n    currentCoords.tl.x,\r\n    currentCoords.tr.x,\r\n    currentCoords.br.x,\r\n    currentCoords.bl.x\r\n  );\r\n  if (coordX + toolbarWidth > canvasWidth) coordX = canvasWidth - toolbarWidth;\r\n  else if (coordX < 0) coordX = 0;\r\n  return { coordX, coordY };\r\n};\r\n","import React, {\r\n  useEffect,\r\n  useCallback,\r\n  useContext,\r\n  useRef,\r\n  useState,\r\n} from 'react';\r\nimport styles from './ContextMenu.module.css';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport { handlePaste } from '../utils/pasteObject';\r\n\r\nconst ContextMenu = ({\r\n  canvas,\r\n  objId,\r\n  updateId,\r\n  clipboard,\r\n  setClipboard,\r\n  fabricSub,\r\n  dispatch,\r\n}) => {\r\n  const { eventState, eventDispatch } = useContext(EventContext);\r\n  const [isMounted, setIsMounted] = useState(false);\r\n  const [activeObj, setActiveObj] = useState(false);\r\n  const [canOnlyPaste, setCanOnlyPaste] = useState(false);\r\n  const menuRef = useRef(null);\r\n  const isMountedRef = useRef(true);\r\n  useEffect(() => () => (isMountedRef.current = false), []);\r\n\r\n  const handleClick = useCallback(\r\n    (e) => {\r\n      if ((e.currentTarget && e.currentTarget.id !== 'subtitle') || clipboard) {\r\n        if (e.currentTarget && e.currentTarget.id !== 'subtitle') {\r\n          let active = canvas.getActiveObject();\r\n          if (!active || active.id !== e.currentTarget.id) {\r\n            canvas.setActiveObject(e.currentTarget);\r\n          }\r\n          setActiveObj(e.currentTarget);\r\n          setCanOnlyPaste(false);\r\n        } else setCanOnlyPaste(true);\r\n        if (e.pointer.x + menuRef.current.offsetWidth > canvas.getWidth()) {\r\n          menuRef.current.style.left =\r\n            e.pointer.x - menuRef.current.offsetWidth + 'px';\r\n        } else menuRef.current.style.left = e.pointer.x + 'px';\r\n        menuRef.current.style.top = e.pointer.y + 'px';\r\n      } else {\r\n        eventDispatch({ type: 'setRightClickEvent', data: null });\r\n      }\r\n    },\r\n    [canvas, eventDispatch, clipboard]\r\n  );\r\n\r\n  const overlayClickHandler = (e) => {\r\n    e.preventDefault();\r\n    if (isMounted) {\r\n      setIsMounted(false);\r\n      eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    }\r\n  };\r\n\r\n  const optionClickHandler = (e) => {\r\n    let id = e.currentTarget.id;\r\n    if (id === 'delete' && activeObj.type !== 'video') {\r\n      canvas.remove(activeObj);\r\n      canvas.discardActiveObject().requestRenderAll();\r\n      eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    } else if (id === 'bringToFront') {\r\n      canvas.bringToFront(activeObj);\r\n      if (fabricSub) canvas.bringToFront(fabricSub);\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n      eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    } else if (id === 'sendToBack') {\r\n      canvas.sendToBack(activeObj);\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n      eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    } else if (id === 'copy') {\r\n      setClipboard({\r\n        object: activeObj,\r\n        coords: { top: activeObj.top, left: activeObj.left },\r\n      });\r\n      eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    } else if (id === 'paste') {\r\n      if (clipboard) {\r\n        handlePaste(\r\n          canvas,\r\n          clipboard,\r\n          objId,\r\n          updateId,\r\n          setClipboard,\r\n          eventDispatch,\r\n          fabricSub\r\n        );\r\n      } else eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (canvas && eventState.rightClickEvent) {\r\n      handleClick(eventState.rightClickEvent);\r\n      setTimeout(() => {\r\n        if (isMountedRef.current) setIsMounted(true);\r\n      }, 400);\r\n    }\r\n    return () => {\r\n      if (isMountedRef.current) setIsMounted(false);\r\n    };\r\n  }, [canvas, eventState.rightClickEvent, handleClick]);\r\n  let isVideo = activeObj && activeObj.type === 'video';\r\n  let content = (\r\n    <>\r\n      <div\r\n        className={styles.Overlay}\r\n        onContextMenu={overlayClickHandler}\r\n        onClick={overlayClickHandler}\r\n      ></div>\r\n      <ul\r\n        onContextMenu={(e) => e.preventDefault()}\r\n        ref={menuRef}\r\n        className={styles.Menu}\r\n        id='contextMenu'\r\n      >\r\n        {!canOnlyPaste && !isVideo ? (\r\n          <li className={styles.Option} id='copy' onClick={optionClickHandler}>\r\n            <p>Copy</p>\r\n            <p>⌘C</p>\r\n          </li>\r\n        ) : null}\r\n\r\n        <li className={styles.Option} id='paste' onClick={optionClickHandler}>\r\n          <p>Paste</p>\r\n          <p>⌘V</p>\r\n        </li>\r\n\r\n        {!canOnlyPaste && !isVideo ? (\r\n          <li\r\n            className={styles.Option}\r\n            id='delete'\r\n            onClick={optionClickHandler}\r\n          >\r\n            <p>Delete</p>\r\n            <p>DEL</p>\r\n          </li>\r\n        ) : null}\r\n        {!canOnlyPaste ? <li className={styles.Border}></li> : null}\r\n        {!canOnlyPaste ? (\r\n          <>\r\n            <li\r\n              className={styles.Option}\r\n              id='bringToFront'\r\n              onClick={optionClickHandler}\r\n            >\r\n              <p>Bring to front</p>\r\n              <p>{'⌘]'}</p>\r\n            </li>\r\n            <li\r\n              className={styles.Option}\r\n              id='sendToBack'\r\n              onClick={optionClickHandler}\r\n            >\r\n              <p>Send to back</p>\r\n              <p>{'⌘['}</p>\r\n            </li>\r\n          </>\r\n        ) : null}\r\n      </ul>\r\n    </>\r\n  );\r\n\r\n  return eventState.rightClickEvent ? content : null;\r\n};\r\n\r\nexport default ContextMenu;\r\n","import { useEffect, useRef, useCallback, useState } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst useAnimate = (canvas, speakerVideos, isPlaying, video, currentTime) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(null);\r\n  const isMounted = useRef(true);\r\n  const frameRef = useRef(null);\r\n\r\n  const cancelAnimation = useCallback(() => {\r\n    // console.log('canceling', frameRef.current);\r\n    if (frameRef.current) fabric.util.cancelAnimFrame(frameRef.current);\r\n    if (canvas) canvas.requestRenderAll();\r\n    frameRef.current = null;\r\n  }, [canvas]);\r\n\r\n  const animate = useCallback(\r\n    (speakers) => {\r\n      if (frameRef.current) fabric.util.cancelAnimFrame(frameRef.current);\r\n      const render = () => {\r\n        canvas.requestRenderAll();\r\n        for (let i = 0; i < speakers.length; i++) {\r\n          speakers[i].dirty = true;\r\n        }\r\n        // console.log('animating');\r\n        frameRef.current = fabric.util.requestAnimFrame(render);\r\n      };\r\n      fabric.util.requestAnimFrame(render);\r\n    },\r\n    [canvas]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (canvas && speakerVideos) {\r\n      animate(speakerVideos);\r\n      // if (isPlaying) animate(speakerVideos);\r\n      // else cancelAnimation(speakerVideos);\r\n    } else if (canvas) cancelAnimation();\r\n  }, [canvas, animate, cancelAnimation, isPlaying, speakerVideos]);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      video.currentTime = currentTime > 0 ? currentTime : 0.001;\r\n    }\r\n  }, [isFirstLoad, currentTime, video]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (frameRef.current) fabric.util.cancelAnimFrame(frameRef.current);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => () => (isMounted.current = false), []);\r\n};\r\n\r\nexport default useAnimate;\r\n","import { fabric } from 'fabric';\r\n\r\nexport const getSpeakerBox = (boxSize, boxId) => {\r\n  return new fabric.SpeakerCropBox({\r\n    ...boxSize,\r\n    fill: 'rgba(111, 122, 208, 0.4)',\r\n    top: 0,\r\n    left: 0,\r\n    borderColor: '#6F7BD0',\r\n    lockScalingFlip: true,\r\n    id: boxId,\r\n  });\r\n};\r\n\r\nexport const getOverlayBox = (canvas) => {\r\n  let zoom = canvas.getZoom();\r\n  let width = canvas.getWidth() / zoom;\r\n  let height = canvas.getHeight() / zoom;\r\n  let rect = new fabric.Rect({\r\n    left: 0,\r\n    top: 0,\r\n    width,\r\n    height,\r\n    noScaleCache: false,\r\n    fill: 'rgba(0, 0, 0, 0.5)',\r\n    strokeWidth: 0,\r\n    selectable: false,\r\n    excludeFromExport: true,\r\n    rx: 0,\r\n    ry: 0,\r\n    id: 'overlay',\r\n    globalCompositeOperation: 'source-over',\r\n  });\r\n  return rect;\r\n};\r\n\r\nexport const getCropBoxSize = (obj) => {\r\n  let scaleX = obj.scaleX;\r\n  let scaleY = obj.scaleY;\r\n  let width = obj.width;\r\n  let height = obj.height;\r\n  let cropRect = obj.cropRect;\r\n  if (cropRect) {\r\n    scaleX *= obj.width / obj.originalWidth;\r\n    scaleY *= obj.height / obj.originalHeight;\r\n    width = obj.originalWidth;\r\n    height = obj.originalHeight;\r\n  }\r\n  return { scaleX, scaleY, width, height };\r\n};\r\n\r\nexport const getCircleCropBoxSize = (obj) => {\r\n  let scaleX = obj.scaleX;\r\n  let scaleY = obj.scaleY;\r\n  let width = obj.width;\r\n  let height = obj.height;\r\n  let cropRect = obj.cropRect;\r\n  let minSize = Math.min(width, height);\r\n  let size = minSize;\r\n  let scale = size === height ? scaleY : scaleX;\r\n  if (cropRect) {\r\n    size = Math.min(obj.originalWidth, obj.originalHeight);\r\n    scale *= minSize / size;\r\n  }\r\n  let radius = size / 2;\r\n  return { scale, radius };\r\n};\r\n\r\nexport const getMediaCircleCropBox = (obj) => {\r\n  let { scale, radius } = getCircleCropBoxSize(obj);\r\n  return new fabric.CircleCropBox({\r\n    originX: 'left',\r\n    originY: 'top',\r\n    left: obj.left,\r\n    top: obj.top,\r\n    strokeDashArray: [12, 12],\r\n    // borderDashArray: [8, 8],\r\n    // borderColor: 'rgba(111, 122, 208, 1)',\r\n    fill: 'rgba(255, 255, 255, 0)',\r\n    borderColor: 'rgba(0, 0, 0, 0)',\r\n    strokeWidth: 2,\r\n    strokeUniform: true,\r\n    stroke: '#dbff17',\r\n    radius: radius,\r\n    scaleX: scale,\r\n    scaleY: scale,\r\n    selectable: true,\r\n    lockScalingFlip: true,\r\n    type: 'cropbox',\r\n    excludeFromExport: true,\r\n    noScaleCache: false,\r\n    globalCompositeOperation: 'source-over',\r\n  });\r\n};\r\n\r\nexport const getMediaRectCropBox = (obj) => {\r\n  let { scaleX, scaleY, width, height } = getCropBoxSize(obj);\r\n  return new fabric.RectCropBox({\r\n    // fill: 'rgba(255, 255, 255, 1)',\r\n    fill: 'rgba(255, 255, 255, 0)',\r\n    originX: 'left',\r\n    originY: 'top',\r\n    left: obj.left,\r\n    top: obj.top,\r\n    width: width,\r\n    height: height,\r\n    scaleX,\r\n    scaleY,\r\n    // borderDashArray: [2, 2],\r\n    // borderColor: '#dbff17',\r\n    // borderColor: 'rgba(111, 122, 208, 1)',\r\n    borderColor: 'rgba(0, 0, 0, 0)',\r\n    strokeWidth: 2,\r\n    strokeUniform: true,\r\n    strokeDashArray: [12, 12],\r\n    stroke: '#dbff17',\r\n    selectable: true,\r\n    lockScalingFlip: true,\r\n    type: 'cropbox',\r\n    noScaleCache: false,\r\n    excludeFromExport: true,\r\n    globalCompositeOperation: 'source-over',\r\n  });\r\n};\r\n\r\nexport const getCircleHoleBox = (obj) => {\r\n  return new fabric.Circle({\r\n    fill: 'rgba(255, 255, 255, 1)',\r\n    originX: 'left',\r\n    originY: 'top',\r\n    top: obj.top,\r\n    left: obj.left,\r\n    radius: obj.radius,\r\n    scaleX: obj.scaleX,\r\n    scaleY: obj.scaleY,\r\n    selectable: false,\r\n    lockScalingFlip: true,\r\n    borderColor: 'rgba(0, 0, 0, 0)',\r\n    stroke: 'rgba(0, 0, 0, 0)',\r\n    strokeWidth: 2,\r\n    strokeUniform: false,\r\n    type: 'holeBox',\r\n    excludeFromExport: true,\r\n    noScaleCache: false,\r\n    globalCompositeOperation: 'destination-out',\r\n  });\r\n};\r\n\r\nexport const getRectHoleBox = (obj) => {\r\n  return new fabric.Rect({\r\n    fill: 'rgba(255, 255, 255, 1)',\r\n    originX: 'left',\r\n    originY: 'top',\r\n    top: obj.top,\r\n    left: obj.left,\r\n    width: obj.width,\r\n    height: obj.height,\r\n    scaleX: obj.scaleX,\r\n    scaleY: obj.scaleY,\r\n    selectable: false,\r\n    lockScalingFlip: true,\r\n    borderColor: 'rgba(0, 0, 0, 0)',\r\n    stroke: 'rgba(0, 0, 0, 0)',\r\n    strokeWidth: 2,\r\n    strokeUniform: false,\r\n    type: 'holeBox',\r\n    excludeFromExport: true,\r\n    noScaleCache: false,\r\n    globalCompositeOperation: 'destination-out',\r\n  });\r\n};\r\n","import { fabric } from 'fabric';\r\nimport {\r\n  getOverlayBox,\r\n  getMediaRectCropBox,\r\n  getRectHoleBox,\r\n  getMediaCircleCropBox,\r\n  getCircleHoleBox,\r\n} from './box';\r\n\r\nconst reverseMedia = (active) => {\r\n  let cropRect = active.cropRect;\r\n  if (cropRect) {\r\n    active.top = active.top - cropRect.y * active.scaleY;\r\n    active.left = active.left - cropRect.x * active.scaleX;\r\n    active.width = active.originalWidth;\r\n    active.height = active.originalHeight;\r\n    active.cropRect = {\r\n      x: 0,\r\n      y: 0,\r\n      w: active.width,\r\n      h: active.height,\r\n    };\r\n  }\r\n  active.setCoords();\r\n};\r\n\r\nexport const prepareMediaForCrop = (\r\n  active,\r\n  canvas,\r\n  cropCanvas,\r\n  setActiveCopy,\r\n  setCropbox,\r\n  setHoleBox,\r\n  cropType,\r\n  assets\r\n) => {\r\n  canvas.discardActiveObject();\r\n  active.visible = false;\r\n  active.angle = 0;\r\n  active.setCoords();\r\n  active.clipPath = null;\r\n  active.strokeWidth = 0;\r\n  let isVideo = active.type === 'video';\r\n  let isRectCrop = cropType === 'rect';\r\n  let box = null;\r\n  let holeBox = null;\r\n  if (isRectCrop) {\r\n    box = getMediaRectCropBox(active);\r\n    holeBox = getRectHoleBox(box);\r\n  } else {\r\n    box = getMediaCircleCropBox(active);\r\n    holeBox = getCircleHoleBox(box);\r\n  }\r\n  let ObjectClass = isVideo ? fabric.Video : fabric.CustomImage;\r\n  let mediaAsset = null;\r\n  if (!isVideo) {\r\n    mediaAsset = assets.filter((asset) => asset.src === active.src)[0];\r\n  } else mediaAsset = active._element;\r\n  cropCanvas.add(getOverlayBox(cropCanvas));\r\n\r\n  if (mediaAsset) {\r\n    cropCanvas.add(holeBox);\r\n    let media = new ObjectClass(mediaAsset, {\r\n      originalWidth: active.originalWidth,\r\n      originalHeight: active.originalHeight,\r\n      left: active.left,\r\n      top: active.top,\r\n      width: active.width,\r\n      height: active.height,\r\n      scaleX: active.scaleX,\r\n      scaleY: active.scaleY,\r\n      cornerRadius: active.cornerRadius,\r\n      excludeFromExport: true,\r\n      id: 'media',\r\n      // borderColor: 'rgba(0, 0, 0, 0)',\r\n      cropRect: active.cropRect,\r\n      globalCompositeOperation: 'destination-atop',\r\n    });\r\n    media.setControlsVisibility({\r\n      mtr: false,\r\n      // ml: false,\r\n      // mr: false,\r\n      // mt: false,\r\n      // mb: false,\r\n    });\r\n    cropCanvas.add(media);\r\n    reverseMedia(media);\r\n    setActiveCopy(media);\r\n    cropCanvas.setActiveObject(media);\r\n\r\n    cropCanvas.add(box);\r\n    cropCanvas.requestRenderAll();\r\n    setHoleBox(holeBox);\r\n    setCropbox(box);\r\n  } else {\r\n    active.clone((cloned) => {\r\n      cropCanvas.add(holeBox);\r\n      cloned.excludeFromExport = true;\r\n      cloned.id = 'media';\r\n      cloned.visible = true;\r\n      cloned.globalCompositeOperation = 'destination-atop';\r\n      cropCanvas.add(cloned);\r\n      reverseMedia(cloned);\r\n      setActiveCopy(cloned);\r\n      cropCanvas.setActiveObject(cloned);\r\n      cloned.setControlsVisibility({\r\n        mtr: false,\r\n        // ml: false,\r\n        // mr: false,\r\n        // mt: false,\r\n        // mb: false,\r\n      });\r\n      cropCanvas.add(box);\r\n      cropCanvas.requestRenderAll();\r\n      setHoleBox(holeBox);\r\n      setCropbox(box);\r\n    });\r\n  }\r\n};\r\n\r\nexport const cropMedia = (active, box, activeCopy, setCropped, canvas) => {\r\n  let ratioX = box.scaleX / activeCopy.scaleX;\r\n  let ratioY = box.scaleY / activeCopy.scaleY;\r\n  let newTop = (box.top - activeCopy.top) / activeCopy.scaleY;\r\n  let newLeft = (box.left - activeCopy.left) / activeCopy.scaleX;\r\n  active.width = box.width * ratioX;\r\n  active.height = box.height * ratioY;\r\n  active.scaleX = activeCopy.scaleX;\r\n  active.scaleY = activeCopy.scaleY;\r\n  active.cropRect = {\r\n    x: newLeft,\r\n    y: newTop,\r\n    w: box.width * ratioX,\r\n    h: box.height * ratioY,\r\n  };\r\n\r\n  if (box.isOnScreen()) {\r\n    active.top = box.top;\r\n    active.left = box.left;\r\n  } else {\r\n    let zoom = canvas.getZoom();\r\n    let canvasWidth = canvas.getWidth() / zoom;\r\n    let canvasHeight = canvas.getHeight() / zoom;\r\n    if (box.top > canvasHeight) {\r\n      active.top = canvasHeight - active.height * active.scaleY;\r\n    } else if (box.top < 0) active.top = 0;\r\n    if (box.left > canvasWidth) {\r\n      active.left = canvasWidth - active.width * active.scaleX;\r\n    } else if (box.left < 0) active.left = 0;\r\n  }\r\n\r\n  setCropped(active);\r\n};\r\n\r\nexport const cropFinishHandler = (\r\n  canvas,\r\n  cropCanvas,\r\n  dispatch,\r\n  obj,\r\n  cropType,\r\n  info,\r\n  eventDispatch,\r\n  clearState\r\n) => {\r\n  obj.visible = true;\r\n  obj.angle = info.angle;\r\n  canvas.setActiveObject(obj);\r\n  let type = obj.type;\r\n  obj.setControlsVisibility({\r\n    mtr: type === 'customImage',\r\n    // ml: true,\r\n    // mr: true,\r\n    // mt: true,\r\n    // mb: true,\r\n  });\r\n  if (cropType === 'circle') obj.cornerRadius = 100;\r\n  dispatch({\r\n    type: 'setCurrentObject',\r\n    data: { type, object: obj },\r\n  });\r\n\r\n  if (obj.cornerRadius > 0) {\r\n    obj.strokeWidth = 0;\r\n    dispatch({\r\n      type: type === 'video' ? 'setVideoCornerRadius' : 'setImageCornerRadius',\r\n      data: obj.cornerRadius,\r\n    });\r\n  } else if (type === 'video') {\r\n    dispatch({\r\n      type: 'setVideoStrokeWidth',\r\n      data: obj.strokeWidth,\r\n    });\r\n  }\r\n  obj.setCoords();\r\n  if (type !== 'video') obj.setControlsVisibility({ mtr: true });\r\n  cropCanvas.clear();\r\n  clearState();\r\n  canvas.requestRenderAll();\r\n  eventDispatch({ type: 'setDbClickEvent', data: null });\r\n  dispatch({ type: 'setShouldCropMedia', data: false });\r\n  dispatch({ type: 'setIsCropMode', data: false });\r\n  dispatch({ type: 'setCurrentCoords', data: obj.lineCoords });\r\n  dispatch({ type: 'setShowToolbar', data: true });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n","export const restrictActive = (active, box) => {\r\n  active.on('moving', (e) => {\r\n    let objectHeight = active.height * active.scaleY;\r\n    let objectWidth = active.width * active.scaleX;\r\n\r\n    let boundHeight = box.height * box.scaleY;\r\n    let boundWidth = box.width * box.scaleX;\r\n\r\n    let top = active.top;\r\n    let left = active.left;\r\n\r\n    let bottom = active.top + objectHeight;\r\n    let right = active.left + objectWidth;\r\n\r\n    let topBound = box.top;\r\n    let bottomBound = topBound + boundHeight;\r\n\r\n    let leftBound = box.left;\r\n    let rightBound = leftBound + boundWidth;\r\n\r\n    //left\r\n    if (left > leftBound) active.left = leftBound;\r\n    //top\r\n    if (top > topBound) active.top = topBound;\r\n    //right\r\n    if (right < rightBound) active.left = rightBound - objectWidth;\r\n    //bottom\r\n    if (bottom < bottomBound) active.top = bottomBound - objectHeight;\r\n  });\r\n\r\n  active.on('scaling', (e) => {\r\n    let objectHeight = active.height * active.scaleY;\r\n    let objectWidth = active.width * active.scaleX;\r\n\r\n    let boundHeight = box.height * box.scaleY;\r\n    let boundWidth = box.width * box.scaleX;\r\n\r\n    let top = active.top;\r\n    let bottom = top + objectHeight;\r\n\r\n    let left = active.left;\r\n    let right = left + objectWidth;\r\n\r\n    let topBound = box.top;\r\n    let bottomBound = topBound + boundHeight;\r\n\r\n    let leftBound = box.left;\r\n    let rightBound = leftBound + boundWidth;\r\n\r\n    active.left = Math.max(Math.min(left, leftBound), rightBound - objectWidth);\r\n    active.top = Math.max(Math.min(top, topBound), bottomBound - objectHeight);\r\n\r\n    if (active.scaleX < box.scaleX || active.scaleY < box.scaleY) {\r\n      active.scaleX = Math.max(box.scaleX, box.scaleY);\r\n      active.scaleY = active.scaleX;\r\n      if (left > leftBound || right < rightBound) active.left = leftBound;\r\n      if (top > topBound || bottom < bottomBound) active.top = topBound;\r\n    }\r\n  });\r\n};\r\n\r\nconst setHoleBoxPosition = (holeBox, box) => {\r\n  holeBox.left = box.left;\r\n  holeBox.top = box.top;\r\n  holeBox.scaleY = box.scaleY;\r\n  holeBox.scaleX = box.scaleX;\r\n  holeBox.setCoords();\r\n};\r\n\r\nconst getBoxBounds = (active, box) => {\r\n  let objectHeight = box.height * box.scaleY;\r\n  let objectWidth = box.width * box.scaleX;\r\n  let boundHeight = active.height * active.scaleY;\r\n  let boundWidth = active.width * active.scaleX;\r\n  let top = box.top;\r\n  let left = box.left;\r\n  let bottom = top + objectHeight;\r\n  let right = left + objectWidth;\r\n  let topBound = active.top;\r\n  let bottomBound = topBound + boundHeight;\r\n  let leftBound = active.left;\r\n  let rightBound = leftBound + boundWidth;\r\n  return {\r\n    top,\r\n    left,\r\n    right,\r\n    bottom,\r\n    leftBound,\r\n    topBound,\r\n    rightBound,\r\n    bottomBound,\r\n    objectWidth,\r\n    objectHeight,\r\n  };\r\n};\r\n\r\nexport const restrictBox = (active, box, holeBox) => {\r\n  box.on('moving', (e) => {\r\n    let {\r\n      top,\r\n      left,\r\n      right,\r\n      bottom,\r\n      leftBound,\r\n      topBound,\r\n      rightBound,\r\n      bottomBound,\r\n      objectWidth,\r\n      objectHeight,\r\n    } = getBoxBounds(active, box);\r\n    //left\r\n    if (left < leftBound) box.left = leftBound;\r\n    //top\r\n    if (top < topBound) box.top = topBound;\r\n    //right\r\n    if (right > rightBound) box.left = rightBound - objectWidth;\r\n    //bottom\r\n    if (bottom > bottomBound) box.top = bottomBound - objectHeight;\r\n\r\n    if (holeBox) setHoleBoxPosition(holeBox, box);\r\n  });\r\n\r\n  box.on('scaling', (e) => {\r\n    let {\r\n      top,\r\n      left,\r\n      right,\r\n      bottom,\r\n      leftBound,\r\n      topBound,\r\n      rightBound,\r\n      bottomBound,\r\n      objectWidth,\r\n      objectHeight,\r\n    } = getBoxBounds(active, box);\r\n\r\n    box.left = Math.min(Math.max(left, leftBound), rightBound - objectWidth);\r\n    box.top = Math.min(Math.max(top, topBound), bottomBound - objectHeight);\r\n    if (box.scaleX > active.scaleX) {\r\n      box.scaleX = active.scaleX;\r\n      if (left < leftBound || right > rightBound) box.left = leftBound;\r\n    }\r\n    if (box.scaleY > active.scaleY) {\r\n      box.scaleY = active.scaleY;\r\n      if (top < topBound || bottom > bottomBound) box.top = topBound;\r\n    }\r\n    if (holeBox) setHoleBoxPosition(holeBox, box);\r\n  });\r\n};\r\n","import { useEffect, useCallback, useState } from 'react';\r\nimport {\r\n  prepareMediaForCrop,\r\n  cropMedia,\r\n  cropFinishHandler,\r\n} from '../utils/mediaCrop';\r\nimport { restrictActive, restrictBox } from '../utils/restrict';\r\n\r\nconst useCropMedia = (\r\n  state,\r\n  dispatch,\r\n  canvas,\r\n  cropCanvas,\r\n  eventDispatch,\r\n  assets\r\n) => {\r\n  const [activeInfo, setActiveInfo] = useState(null);\r\n  const [activeEl, setAcitveEl] = useState(null);\r\n  const [activeCopy, setActiveCopy] = useState(null);\r\n  const [holeBox, setHoleBox] = useState(null);\r\n  const [cropbox, setCropbox] = useState(null);\r\n  const [croppedMedia, setCroppedMedia] = useState(null);\r\n\r\n  const clearState = useCallback(() => {\r\n    setActiveInfo(null);\r\n    setActiveCopy(null);\r\n    setAcitveEl(null);\r\n    setCropbox(null);\r\n    setCroppedMedia(null);\r\n  }, []);\r\n\r\n  // Crop Media\r\n  useEffect(() => {\r\n    if (state.shouldCropMedia && activeEl && cropbox && activeCopy) {\r\n      cropMedia(activeEl, cropbox, activeCopy, setCroppedMedia, cropCanvas);\r\n    } else if (state.shouldCropMedia) {\r\n      setCroppedMedia(activeEl);\r\n    }\r\n  }, [state.shouldCropMedia, activeEl, cropbox, activeCopy, cropCanvas]);\r\n\r\n  // If Cropped Media\r\n  useEffect(() => {\r\n    if (croppedMedia && state.shouldCropMedia) {\r\n      cropFinishHandler(\r\n        canvas,\r\n        cropCanvas,\r\n        dispatch,\r\n        croppedMedia,\r\n        state.cropType,\r\n        activeInfo,\r\n        eventDispatch,\r\n        clearState\r\n      );\r\n    }\r\n  }, [\r\n    activeInfo,\r\n    croppedMedia,\r\n    state,\r\n    dispatch,\r\n    canvas,\r\n    cropCanvas,\r\n    eventDispatch,\r\n    clearState,\r\n  ]);\r\n\r\n  /// Preparation For Crop\r\n  useEffect(() => {\r\n    if (state.isCropMode) {\r\n      let active = canvas.getActiveObject();\r\n      if (active && active.originalWidth > 0 && active.originalHeight > 0) {\r\n        setAcitveEl(active);\r\n        setActiveInfo({\r\n          cornerRadius: active.cornerRadius,\r\n          width: active.width,\r\n          height: active.height,\r\n          top: active.top,\r\n          left: active.left,\r\n          angle: active.angle,\r\n          strokeWidth: active.strokeWidth,\r\n          cropRect: active.cropRect,\r\n        });\r\n        prepareMediaForCrop(\r\n          active,\r\n          canvas,\r\n          cropCanvas,\r\n          setActiveCopy,\r\n          setCropbox,\r\n          setHoleBox,\r\n          state.cropType,\r\n          assets\r\n        );\r\n      } else {\r\n        eventDispatch({ type: 'setDbClickEvent', data: null });\r\n        dispatch({ type: 'setIsCropMode', data: false });\r\n      }\r\n    }\r\n  }, [\r\n    state.isCropMode,\r\n    state.cropType,\r\n    canvas,\r\n    cropCanvas,\r\n    dispatch,\r\n    eventDispatch,\r\n    assets,\r\n  ]);\r\n\r\n  /// If Cropbox and Active El start Crop\r\n  useEffect(() => {\r\n    if (cropbox && activeCopy && holeBox) {\r\n      restrictBox(activeCopy, cropbox, holeBox);\r\n      restrictActive(activeCopy, cropbox);\r\n    }\r\n    return () => {\r\n      if (activeCopy) {\r\n        activeCopy.off('moving');\r\n        activeCopy.off('scaling');\r\n      }\r\n      if (cropbox) {\r\n        cropbox.off('moving');\r\n        cropbox.off('scaling');\r\n      }\r\n    };\r\n  }, [cropbox, activeCopy, holeBox]);\r\n\r\n  // Listen to Canvas Click\r\n  useEffect(() => {\r\n    if (cropbox && state.isCropMode) {\r\n      cropCanvas.on('mouse:down', (e) => {\r\n        if (\r\n          !e.target ||\r\n          (e.target.type !== 'cropbox' && e.target.id !== 'media')\r\n        ) {\r\n          dispatch({ type: 'setShouldCropMedia', data: true });\r\n          dispatch({ type: 'setShowToolbar', data: false });\r\n        }\r\n        //  else {\r\n        //   cropCanvas.setActiveObject(activeCopy);\r\n        //   cropCanvas.renderAll();\r\n        // }\r\n      });\r\n      cropCanvas.on('mouse:over', (e) => {\r\n        if (\r\n          e.target &&\r\n          (e.target.type === 'cropbox' || e.target.id === 'media')\r\n        ) {\r\n          cropCanvas.setActiveObject(e.target);\r\n          cropCanvas.renderAll();\r\n        }\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (cropCanvas) {\r\n        cropCanvas.off('mouse:over');\r\n        cropCanvas.off('mouse:down');\r\n      }\r\n    };\r\n  }, [cropbox, state, dispatch, cropCanvas, activeCopy]);\r\n};\r\n\r\nexport default useCropMedia;\r\n","import { useState, useEffect } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst useAddCanvas = (\r\n  canvas,\r\n  setCropCanvas\r\n) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  useEffect(() => {\r\n    if(canvas && isFirstLoad) {\r\n      setIsFirstLoad(false)\r\n      let fabricCanvas = new fabric.Canvas('cropCanvas', {\r\n        width: 0,\r\n        height: 0,\r\n        preserveObjectStacking: true,\r\n        fireRightClick: true,\r\n        stopContextMenu: true,\r\n        selection: false,\r\n      });\r\n      setCropCanvas(fabricCanvas)\r\n    }\r\n  }, [canvas, isFirstLoad, setCropCanvas])\r\n};\r\n\r\nexport default useAddCanvas;","import { useEffect } from 'react';\r\nimport { setSize } from '../../utils/updateCanvas';\r\n\r\nconst useUpdateCanvas = (cropCanvas, state, isCropMode, canvasRef) => {\r\n  useEffect(() => {\r\n    if (cropCanvas) {\r\n      cropCanvas.resize = state.resize;\r\n      setSize(state, cropCanvas);\r\n    }\r\n  }, [state, cropCanvas]);\r\n\r\n  useEffect(() => {\r\n    if (isCropMode) canvasRef.current.style.display = 'block';\r\n    else canvasRef.current.style.display = 'none';\r\n  }, [isCropMode, cropCanvas, canvasRef]);\r\n};\r\n\r\nexport default useUpdateCanvas;\r\n","import React, { useState, useContext, useRef } from 'react';\r\nimport styles from './CropCanvas.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport useCropMedia from '../hooks/useCropMedia';\r\nimport useAddCanvas from './hooks/useAddCanvas';\r\nimport useUpdateCanvas from './hooks/useUpdateCanvas';\r\n\r\nconst CropCanvas = ({ canvas, userAssets }) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { eventDispatch } = useContext(EventContext);\r\n  const [cropCanvas, setCropCanvas] = useState(null);\r\n  const cropCanvasRef = useRef(null);\r\n\r\n  useAddCanvas(canvas, setCropCanvas);\r\n  useCropMedia(\r\n    editorState,\r\n    editorDispatch,\r\n    canvas,\r\n    cropCanvas,\r\n    eventDispatch,\r\n    userAssets\r\n  );\r\n  useUpdateCanvas(\r\n    cropCanvas,\r\n    editorState.canvasState,\r\n    editorState.isCropMode,\r\n    cropCanvasRef\r\n  );\r\n\r\n  const backdropClickHandler = () => {\r\n    editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n    editorDispatch({ type: 'setShowToolbar', data: false });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.CropCanvas} ref={cropCanvasRef}>\r\n        <canvas id='cropCanvas' />\r\n      </div>\r\n      {editorState.isCropMode ? (\r\n        <div className={styles.Backdrop} onClick={backdropClickHandler} />\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CropCanvas;\r\n","const cacheAsset = async (asset) => {\r\n  return new Promise((resolve, reject) => {\r\n    let img = new Image();\r\n    img.crossOrigin = \"Anonymous\";\r\n    img.onload = () => resolve(img);\r\n    img.onerror = () => reject();\r\n    img.src = asset.src;\r\n  });\r\n};\r\n\r\nexport const cacheAssets = async (arr, setAssets, isMounted) => {\r\n  let promises = await arr.map((asset) => cacheAsset(asset));\r\n  let assets = await Promise.allSettled(promises);\r\n  let assetArr = assets\r\n    .filter((asset) => asset.status === 'fulfilled')\r\n    .map((asset) => asset.value);\r\n  if (isMounted.current) setAssets(assetArr);\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\nexport const getCanvasObject = (canvas) => {\r\n  let jsonCanvas = canvas.toJSON([\r\n    'id',\r\n    'cornerRadius',\r\n    'isSvg',\r\n    'padding',\r\n    'cursorWidth',\r\n    'rx',\r\n    'ry',\r\n    'noScaleCache',\r\n    'crossOrigin',\r\n  ]);\r\n  let zoom = canvas.getZoom();\r\n  jsonCanvas.width = Math.round(canvas.getWidth() / zoom);\r\n  jsonCanvas.height = Math.round(canvas.getHeight() / zoom);\r\n  jsonCanvas.resize = canvas.resize;\r\n  return jsonCanvas;\r\n};\r\n\r\nexport const getCanvasImage = (canvas, setImage) => {\r\n  let pxRatio = 1;\r\n  let newCanvas = new fabric.Canvas();\r\n  let jsonCanvas = JSON.stringify(canvas);\r\n  let zoom = canvas.getZoom();\r\n  newCanvas.loadFromJSON(jsonCanvas, () => {\r\n    newCanvas.setZoom(pxRatio);\r\n    newCanvas.setDimensions({\r\n      width: (canvas.getWidth() / zoom) * pxRatio,\r\n      height: (canvas.getHeight() / zoom) * pxRatio,\r\n    });\r\n    let img = newCanvas.toDataURL({\r\n      format: 'image/jpg',\r\n      quality: 1,\r\n    });\r\n    setImage(img);\r\n  });\r\n};\r\n\r\nexport const getResizeValues = (initialWidth, initialHeight, option) => {\r\n  let width = initialWidth;\r\n  let height = initialHeight;\r\n  let resize = 'original';\r\n  if (option === 'landscape') {\r\n    // width = Math.round((height * 16) / 9);\r\n    // height = Math.round((width * 9) / 16);\r\n    width = 1280;\r\n    height = 720;\r\n    resize = option;\r\n  } else if (option === 'square') {\r\n    // if (height > width) width = height;\r\n    // else height = width;\r\n    width = 1280;\r\n    height = 1280;\r\n    resize = option;\r\n  } else if (option === 'vertical') {\r\n    // if (width > height) width = initialHeight;\r\n    // else width = initialWidth;\r\n    // height = Math.round((width * 16) / 9);\r\n    width = 720;\r\n    height = 1280;\r\n    resize = option;\r\n  }\r\n  return { width, height, resize };\r\n};\r\n","import { roundedCorners, loadAndUse } from './updateObject';\r\nimport { getResizeValues } from '../../../utils/canvasUtils';\r\n\r\nconst positionObject = (templateEl, currentEl) => {\r\n  let width = currentEl.width;\r\n  let height = currentEl.height;\r\n  let x = templateEl.left;\r\n  let y = templateEl.top;\r\n\r\n  if (\r\n    templateEl.width * templateEl.scaleX > currentEl.originalWidth ||\r\n    templateEl.height * templateEl.scaleY > currentEl.originalHeight\r\n  ) {\r\n    let heightRatio = templateEl.height / templateEl.originalHeight;\r\n    let widthRatio = templateEl.width / templateEl.originalWidth;\r\n    width = currentEl.originalWidth * widthRatio;\r\n    height = currentEl.originalHeight * heightRatio;\r\n\r\n    let scaleX = (templateEl.width * templateEl.scaleX) / width;\r\n    let scaleY = (templateEl.height * templateEl.scaleY) / height;\r\n    let scale = Math.min(scaleX, scaleY);\r\n    templateEl.scaleX = scale;\r\n    templateEl.scaleY = scale;\r\n  } else {\r\n    width = templateEl.width * templateEl.scaleX;\r\n    height = templateEl.height * templateEl.scaleY;\r\n    templateEl.scaleX = 1;\r\n    templateEl.scaleY = 1;\r\n  }\r\n\r\n  if (x + width > currentEl.originalWidth) {\r\n    x -= x + width - currentEl.originalWidth;\r\n  }\r\n  if (y + height > currentEl.originalHeight) {\r\n    y -= y + height - currentEl.originalHeight;\r\n  }\r\n\r\n  templateEl.originalWidth = currentEl.originalWidth;\r\n  templateEl.originalHeight = currentEl.originalHeight;\r\n  templateEl.width = width;\r\n  templateEl.height = height;\r\n  templateEl.cropRect = {\r\n    x,\r\n    y,\r\n    w: width,\r\n    h: height,\r\n  };\r\n  templateEl.src = currentEl.src;\r\n  if (templateEl.cornerRadius !== 0) {\r\n    templateEl.set(\r\n      'clipPath',\r\n      roundedCorners(templateEl, templateEl.cornerRadius)\r\n    );\r\n  }\r\n  templateEl.setCoords();\r\n};\r\n\r\nconst finishHandler = (\r\n  canvas,\r\n  lastId,\r\n  videos,\r\n  state,\r\n  template,\r\n  setSpeakerVideos,\r\n  setObjectIdCount,\r\n  dispatch,\r\n  speakerVideos\r\n) => {\r\n  let currentEl = null;\r\n  for (let i = 0; i < videos.length; i++) {\r\n    let templateEl = videos[i];\r\n    if (speakerVideos[i]) currentEl = speakerVideos[i];\r\n    if (currentEl) positionObject(templateEl, currentEl);\r\n    else canvas.remove(templateEl);\r\n  }\r\n\r\n  let { width, height, resize } = getResizeValues(\r\n    state.canvasState.initialWidth,\r\n    state.canvasState.initialHeight,\r\n    template.resize\r\n  );\r\n\r\n  dispatch({ type: 'setVideoSize', data: { width, height, resize } });\r\n  setObjectIdCount(lastId);\r\n  setSpeakerVideos(videos);\r\n  dispatch({ type: 'setIsLoadingTemplate', data: false });\r\n};\r\n\r\nexport const loadCanvas = (\r\n  canvas,\r\n  template,\r\n  isMounted,\r\n  state,\r\n  setSpeakerVideos,\r\n  setObjectIdCount,\r\n  dispatch,\r\n  speakerVideos,\r\n  setFabricSub\r\n) => {\r\n  canvas.clear();\r\n  let videos = [];\r\n  let lastId = 1;\r\n  canvas.loadFromJSON(template, () => {\r\n    if (isMounted.current) {\r\n      let objects = canvas.getObjects();\r\n      for (let i = 0; i < objects.length; i++) {\r\n        let obj = objects[i];\r\n        if (obj.id === 'subtitle') {\r\n          setFabricSub(obj);\r\n          if (!state.isSubtitles) {\r\n            dispatch({ type: 'setIsSubtitles', data: true });\r\n          }\r\n          dispatch({\r\n            type: 'setSubtitlesState',\r\n            data: {\r\n              fontFamily: obj.fontFamily,\r\n              fontStyle: obj.fontStyle,\r\n              fontWeight: obj.fontWeight,\r\n              fontSize: obj.fontSize,\r\n              fill: obj.fill,\r\n              backgroundColor: obj.backgroundColor,\r\n            },\r\n          });\r\n          loadAndUse(canvas, obj, obj.fontFamily);\r\n        } else {\r\n          obj.id = lastId;\r\n          lastId++;\r\n          if (obj.type === 'customTextbox') {\r\n            loadAndUse(canvas, obj, obj.fontFamily);\r\n          } else if (obj.type === 'video') videos.push(obj);\r\n        }\r\n      }\r\n\r\n      finishHandler(\r\n        canvas,\r\n        lastId,\r\n        videos,\r\n        state,\r\n        template,\r\n        setSpeakerVideos,\r\n        setObjectIdCount,\r\n        dispatch,\r\n        speakerVideos,\r\n      );\r\n    }\r\n  });\r\n};\r\n","import { useState, useEffect, useRef } from 'react';\r\nimport { cacheAssets } from '../../../utils/cacheAssets';\r\nimport { loadCanvas } from '../utils/template';\r\n\r\nconst useLoadTemplate = (\r\n  templateToLoad,\r\n  setTemplateToLoad,\r\n  canvas,\r\n  video,\r\n  editorState,\r\n  dispatch,\r\n  setUserAssets,\r\n  setObjectIdCount,\r\n  setSpeakerVideos,\r\n  speakerVideos,\r\n  setFabricSub\r\n) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [assets, setAssets] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (assets) {\r\n      setIsFirstLoad(true);\r\n      setAssets(null);\r\n      setUserAssets(assets);\r\n      loadCanvas(\r\n        canvas,\r\n        templateToLoad,\r\n        isMounted,\r\n        editorState,\r\n        setSpeakerVideos,\r\n        setObjectIdCount,\r\n        dispatch,\r\n        speakerVideos,\r\n        setFabricSub\r\n      );\r\n      setTemplateToLoad(null);\r\n    }\r\n  }, [\r\n    templateToLoad,\r\n    canvas,\r\n    assets,\r\n    editorState,\r\n    setUserAssets,\r\n    setTemplateToLoad,\r\n    setSpeakerVideos,\r\n    setObjectIdCount,\r\n    dispatch,\r\n    speakerVideos,\r\n    setFabricSub\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (templateToLoad && isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      dispatch({ type: 'setIsSubtitles', data: false });\r\n      setFabricSub(null);\r\n      dispatch({ type: 'setIsLoadingTemplate', data: true });\r\n      video.pause();\r\n      canvas.clear();\r\n      let assets = templateToLoad.objects.filter(\r\n        (obj) => obj.type === 'customImage'\r\n      );\r\n      cacheAssets(assets, setAssets, isMounted);\r\n    }\r\n  }, [templateToLoad, canvas, dispatch, video, isFirstLoad, setFabricSub]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n};\r\n\r\nexport default useLoadTemplate;\r\n","import React, { useState, useContext, useCallback } from 'react';\r\nimport styles from './PlayerCanvas.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport useAddObject from '../hooks/useAddObject';\r\nimport useSelectionObserver from '../hooks/useSelectionObserver';\r\nimport useGuideLines from '../hooks/useGuideLines';\r\nimport useUpdateObject from '../hooks/useUpdateObject';\r\nimport useUpdateCanvas from '../hooks/useUpdateCanvas';\r\nimport useAddCanvas from '../hooks/useAddCanvas';\r\nimport useAddSpeakers from '../hooks/useAddSpeakers';\r\nimport useKeyEvents from '../hooks/useKeyEvents';\r\nimport useClickListener from '../hooks/useClickListener';\r\nimport Toolbar from '../../Toolbar/Toolbar';\r\nimport ContextMenu from '../ContextMenu/ContextMenu';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport useAnimate from '../hooks/useAnimate';\r\nimport CropCanvas from '../CropCanvas/CropCanvas';\r\nimport useLoadTemplate from '../hooks/useLoadTemplate';\r\n\r\nconst PlayerCanvas = ({\r\n  canvas,\r\n  setCanvas,\r\n  video,\r\n  fabricSub,\r\n  setFabricSub,\r\n  currentTime,\r\n  speakers,\r\n  info,\r\n  isPlaying,\r\n  userAssets,\r\n  setUserAssets,\r\n  templateToLoad,\r\n  setTemplateToLoad,\r\n}) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { eventState, eventDispatch } = useContext(EventContext);\r\n  const [objectIdCount, setObjectIdCount] = useState(1);\r\n  const [clipboard, setClipboard] = useState(null);\r\n  const [isCanvasData, setIsCanvasData] = useState(false);\r\n  const updatetObjectId = useCallback(() => setObjectIdCount((i) => i + 1), []);\r\n  const [speakerVideos, setSpeakerVideos] = useState([]);\r\n\r\n  useLoadTemplate(\r\n    templateToLoad,\r\n    setTemplateToLoad,\r\n    canvas,\r\n    video,\r\n    editorState,\r\n    editorDispatch,\r\n    setUserAssets,\r\n    setObjectIdCount,\r\n    setSpeakerVideos,\r\n    speakerVideos,\r\n    setFabricSub\r\n  );\r\n  useAnimate(canvas, speakerVideos, isPlaying, video, currentTime);\r\n  useGuideLines(\r\n    editorState.canvasState,\r\n    canvas,\r\n    eventState,\r\n    eventDispatch,\r\n    editorState.shouldSaveTemplate\r\n  );\r\n  useAddObject(\r\n    editorState,\r\n    editorDispatch,\r\n    canvas,\r\n    objectIdCount,\r\n    updatetObjectId,\r\n    userAssets,\r\n    setUserAssets\r\n  );\r\n  useSelectionObserver(canvas, editorState, editorDispatch, fabricSub);\r\n  useUpdateObject(editorState, editorDispatch, canvas);\r\n  useUpdateCanvas(editorState.canvasState, editorDispatch, canvas);\r\n  useAddCanvas(\r\n    editorState.canvasState,\r\n    setCanvas,\r\n    info,\r\n    setIsCanvasData,\r\n    speakers,\r\n    setObjectIdCount,\r\n    setSpeakerVideos,\r\n    userAssets,\r\n    setFabricSub,\r\n    editorDispatch\r\n  );\r\n  useKeyEvents(\r\n    canvas,\r\n    clipboard,\r\n    setClipboard,\r\n    objectIdCount,\r\n    updatetObjectId,\r\n    fabricSub,\r\n    editorDispatch\r\n  );\r\n  useClickListener(canvas, editorState);\r\n  useAddSpeakers(\r\n    video,\r\n    canvas,\r\n    currentTime,\r\n    speakers,\r\n    objectIdCount,\r\n    setObjectIdCount,\r\n    isCanvasData,\r\n    setSpeakerVideos\r\n  );\r\n\r\n  return (\r\n    <div className={styles.CanvasComponent} id='canvasComponent'>\r\n      <div className={styles.Canvas}>\r\n        <canvas id='canvas' />\r\n      </div>\r\n      <CropCanvas canvas={canvas} userAssets={userAssets} />\r\n      {editorState.showToolbar ? <Toolbar canvas={canvas} /> : null}\r\n      <ContextMenu\r\n        canvas={canvas}\r\n        objId={objectIdCount}\r\n        updateId={updatetObjectId}\r\n        clipboard={clipboard}\r\n        setClipboard={setClipboard}\r\n        fabricSub={fabricSub}\r\n        dispatch={editorDispatch}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlayerCanvas;\r\n","import { useReducer } from 'react';\r\n\r\nconst initialState = {\r\n  isMoving: false,\r\n  rightClickEvent: null,\r\n  dbClickEvent: null,\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'setIsMoving':\r\n      return { ...state, isMoving: action.data };\r\n    case 'setRightClickEvent':\r\n      return { ...state, rightClickEvent: action.data };\r\n    case 'setDbClickEvent':\r\n      return { ...state, dbClickEvent: action.data };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst useEventState = () => {\r\n  const [eventState, eventDispatch] = useReducer(reducer, initialState);\r\n  return [eventState, eventDispatch];\r\n};\r\n\r\nexport default useEventState;\r\n","import React, { useContext } from 'react';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport styles from './ResizeDropdown.module.css';\r\nimport { getResizeValues } from '../../../utils/canvasUtils';\r\n\r\nconst options = [\r\n  {\r\n    name: 'landscape',\r\n    text: 'Landscape 16:9',\r\n    boxStyle: { width: '11.25rem' },\r\n  },\r\n  {\r\n    name: 'square',\r\n    text: 'Square 1:1',\r\n    boxStyle: { width: '6.375rem' },\r\n  },\r\n  {\r\n    name: 'vertical',\r\n    text: 'Vertical 9:16',\r\n    boxStyle: { width: '3.6875rem' },\r\n  },\r\n];\r\n\r\nconst ResizeDropdown = () => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const clickHandler = (e) => {\r\n    let id = e.currentTarget.id;\r\n    let { width, height, resize } = getResizeValues(\r\n      editorState.canvasState.initialWidth,\r\n      editorState.canvasState.initialHeight,\r\n      id\r\n    );\r\n    editorDispatch({ type: 'setVideoSize', data: { width, height, resize } });\r\n    editorDispatch({ type: 'setIsResizeDropdown', data: false });\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Dropdown}>\r\n      <ul className={styles.SizeOptions}>\r\n        {options.map((size) => {\r\n          return (\r\n            <li\r\n              key={size.name}\r\n              id={size.name}\r\n              className={[\r\n                styles.SizeOption,\r\n                editorState.canvasState.resize === size.name\r\n                  ? styles.Current\r\n                  : null,\r\n              ].join(' ')}\r\n              onClick={clickHandler}\r\n            >\r\n              <p className={styles.SizeOptionText}>{size.text}</p>\r\n              <div className={styles.SizeOptionBox} style={size.boxStyle}></div>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResizeDropdown;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useDeleteTemplate = () => {\r\n  const [isDeletingTemplate, setIsDeletingTemplate] = useState(false);\r\n  const [deleteTemplateRes, setDeleteTemplateRes] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosDeleteTemplate = useCallback((id) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .delete(`/template/${id}`)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const deleteTemplate = useCallback(\r\n    async (id) => {\r\n      setDeleteTemplateRes(null);\r\n      setIsDeletingTemplate(true);\r\n      try {\r\n        const res = await axiosDeleteTemplate(id);\r\n        if (isMounted.current) setDeleteTemplateRes(res.data);\r\n        console.log(res);\r\n      } catch (uploadError) {\r\n        console.log('Error Deleting Templates', uploadError);\r\n      } finally {\r\n        if (isMounted.current) setIsDeletingTemplate(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosDeleteTemplate]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isDeletingTemplate, deleteTemplate, deleteTemplateRes };\r\n};\r\n\r\nexport default useDeleteTemplate;\r\n","import React from 'react';\r\nimport './Spinner.css';\r\n\r\nconst spinner = ({style}) => {\r\n  return (\r\n    <div className='sk-circle' style={style}>\r\n      <div className='sk-circle1 sk-child'></div>\r\n      <div className='sk-circle2 sk-child'></div>\r\n      <div className='sk-circle3 sk-child'></div>\r\n      <div className='sk-circle4 sk-child'></div>\r\n      <div className='sk-circle5 sk-child'></div>\r\n      <div className='sk-circle6 sk-child'></div>\r\n      <div className='sk-circle7 sk-child'></div>\r\n      <div className='sk-circle8 sk-child'></div>\r\n      <div className='sk-circle9 sk-child'></div>\r\n      <div className='sk-circle10 sk-child'></div>\r\n      <div className='sk-circle11 sk-child'></div>\r\n      <div className='sk-circle12 sk-child'></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default spinner;\r\n","import React, { useContext, useEffect, useRef, useCallback } from 'react';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport styles from './TemplatesDropdown.module.css';\r\nimport useDeleteTemplate from '../../../hooks/useDeleteTemplate';\r\nimport Spinner from '../../../components/Spinner2/Spinner';\r\nimport uploadSvg from '../../../assets/editor/upload.svg';\r\n\r\nconst TemplatesDropdown = ({\r\n  isCreatingTemplate,\r\n  templates,\r\n  setShouldGetTemplates,\r\n  currentOption,\r\n  setCurrentOption,\r\n  setTemplateToLoad,\r\n  isGettingTemplates,\r\n  templateTypeOption,\r\n}) => {\r\n  const { editorDispatch } = useContext(EditorContext);\r\n  const { isDeletingTemplate, deleteTemplate, deleteTemplateRes } =\r\n    useDeleteTemplate();\r\n  const templatesRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (deleteTemplateRes) setShouldGetTemplates(true);\r\n  }, [deleteTemplateRes, setShouldGetTemplates]);\r\n\r\n  useEffect(() => {\r\n    if (!currentOption) setShouldGetTemplates(true);\r\n  }, [currentOption, setShouldGetTemplates]);\r\n\r\n  const handleScroll = useCallback((e) => {\r\n    e.preventDefault();\r\n    templatesRef.current.scrollLeft += e.deltaY;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let container = templatesRef.current;\r\n    container.addEventListener('wheel', handleScroll);\r\n    return () => container.removeEventListener('wheel', handleScroll);\r\n  }, [handleScroll]);\r\n\r\n  const templateOptionClickHanlder = (e) => {\r\n    let id = e.currentTarget.id;\r\n    if (templates && templates[id]) {\r\n      setCurrentOption({\r\n        type: id,\r\n        templates: [...templates[id]],\r\n      });\r\n    }\r\n  };\r\n\r\n  const saveAsTemplateClickHandler = () => {\r\n    if (!isCreatingTemplate) {\r\n      editorDispatch({ type: 'setShouldSaveTemplate', data: true });\r\n    }\r\n  };\r\n\r\n  const templateClickHandler = (target) => {\r\n    editorDispatch({ type: 'setIsTemplatesDropdown', data: false });\r\n    setTemplateToLoad(target);\r\n  };\r\n\r\n  const deleteClickHandler = (target) => {\r\n    let box = window.confirm('Are you sure you want to delete this template?');\r\n    if (box === true) deleteTemplate(target._id);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Dropdown}>\r\n      <ul className={styles.TemplateOptions}>\r\n        <li\r\n          className={[\r\n            styles.TemplateOption,\r\n            currentOption && currentOption.type === 'commonTemplate'\r\n              ? styles.Current\r\n              : null,\r\n          ].join(' ')}\r\n          id='commonTemplate'\r\n          onClick={templateOptionClickHanlder}\r\n        >\r\n          Templates\r\n        </li>\r\n        <li\r\n          className={[\r\n            styles.TemplateOption,\r\n            currentOption && currentOption.type === 'userTemplate'\r\n              ? styles.Current\r\n              : null,\r\n          ].join(' ')}\r\n          id='userTemplate'\r\n          onClick={templateOptionClickHanlder}\r\n        >\r\n          My templates\r\n        </li>\r\n      </ul>\r\n      <ul className={styles.Templates} ref={templatesRef}>\r\n        {currentOption && currentOption.type === 'userTemplate' ? (\r\n          <li\r\n            className={[styles.Template, styles.SaveTemplate].join(' ')}\r\n            id='saveAsTemplate'\r\n            onClick={saveAsTemplateClickHandler}\r\n          >\r\n            {isCreatingTemplate ? (\r\n              <Spinner style={{ width: '40px', height: '40px' }} />\r\n            ) : (\r\n              <>\r\n                <img className={styles.SaveImg} src={uploadSvg} alt='save' />\r\n                <span className={styles.SaveText}>Save as template</span>\r\n              </>\r\n            )}\r\n          </li>\r\n        ) : null}\r\n        {currentOption && !isDeletingTemplate && !isGettingTemplates ? (\r\n          currentOption.templates.map((template) => {\r\n            return (\r\n              <li\r\n                className={styles.Template}\r\n                key={template._id}\r\n                id={template._id}\r\n              >\r\n                {templateTypeOption === currentOption.type ? (\r\n                  <div\r\n                    className={styles.DeleteContainer}\r\n                    onClick={() => deleteClickHandler(template)}\r\n                  >\r\n                    <span className={styles.XLine1}></span>\r\n                    <span className={styles.XLine2}></span>\r\n                  </div>\r\n                ) : null}\r\n                <img\r\n                  src={template.image_url}\r\n                  alt='template'\r\n                  className={styles.TemplateImg}\r\n                  onClick={() => templateClickHandler(template)}\r\n                />\r\n              </li>\r\n            );\r\n          })\r\n        ) : (\r\n          <Spinner style={{ width: '70px', height: '70px' }} />\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TemplatesDropdown;\r\n","import React, { useContext } from 'react';\r\nimport styles from './Backdrop.module.css';\r\nimport EditorContext from '../../contexts/EditorContext';\r\n\r\nconst Backdrop = (props) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n\r\n  const clickHandler = (e) => {\r\n    if (e.target.id === 'backdrop') {\r\n      let actionType = '';\r\n      if (editorState.isImageDropdown) actionType = 'setIsImageDropdown';\r\n      else if (editorState.isShapeDropdown) actionType = 'setIsShapeDropdown';\r\n      else if (editorState.isSubtitlesDropdown)\r\n        actionType = 'setIsSubtitlesDropdown';\r\n      else if (editorState.shouldReplaceImage)\r\n        actionType = 'setShouldReplaceImage';\r\n      else if (editorState.isResizeDropdown) actionType = 'setIsResizeDropdown';\r\n      else if (editorState.isCanvasBgColorDropdown)\r\n        actionType = 'setIsCanvasBgColorDropdown';\r\n      else if (editorState.isTemplatesDropdown)\r\n        actionType = 'setIsTemplatesDropdown';\r\n      else if (editorState.isZoomDropdown) actionType = 'setIsZoomDropdown';\r\n      else if (editorState.shouldAddCanvasBgImage)\r\n        actionType = 'setShouldAddCanvasBgImage';\r\n      else if (editorState.isDownloadDropdown)\r\n        actionType = 'setIsDownloadDropdown';\r\n      editorDispatch({ type: actionType, data: false });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Backdrop} onClick={clickHandler} id='backdrop'>\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\nexport default Backdrop;\r\n","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgResize(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 15,\n    height: 13,\n    viewBox: \"0 0 15 13\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13 1H2.33333C1.59695 1 1 1.59695 1 2.33333V10.3333C1 11.0697 1.59695 11.6667 2.33333 11.6667H13C13.7364 11.6667 14.3333 11.0697 14.3333 10.3333V2.33333C14.3333 1.59695 13.7364 1 13 1Z\",\n    stroke: \"black\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.9997 7H9.66634C8.92996 7 8.33301 7.59695 8.33301 8.33333V10.3333C8.33301 11.0697 8.92996 11.6667 9.66634 11.6667H12.9997C13.7361 11.6667 14.333 11.0697 14.333 10.3333V8.33333C14.333 7.59695 13.7361 7 12.9997 7Z\",\n    stroke: \"black\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgResize);\nexport default __webpack_public_path__ + \"static/media/resize.cab64d8c.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCropImage(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M4.5 11.4H4.1V11V5.4H1.5V4.6H4.1V2H4.9V4.6H11H11.4V5V10.6H14V11.4H11.4V14H10.6V11.4H4.5ZM10.6 10.6H4.9V5.4H10.6V10.6Z\",\n    fill: \"#1E1E1E\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCropImage);\nexport default __webpack_public_path__ + \"static/media/cropImage.06a8d86d.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3, _path4, _path5, _path6, _path7;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSubtitlesOn(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.7188 2.21875H3.28125C1.47192 2.21875 0 3.69067 0 5.5V10.5212C0 12.3304 1.47192 13.8025 3.28125 13.8025H12.7188C14.5281 13.8025 16 12.3304 16 10.5212V5.5C16 3.69067 14.5281 2.21875 12.7188 2.21875ZM15.0625 10.5212C15.0625 11.8135 14.0111 12.865 12.7188 12.865H3.28125C1.98889 12.865 0.9375 11.8135 0.9375 10.5212V5.5C0.9375 4.20764 1.98889 3.15625 3.28125 3.15625H12.7188C14.0111 3.15625 15.0625 4.20764 15.0625 5.5V10.5212Z\",\n    fill: \"current\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.4938 5.88477H6.33405C6.07513 5.88477 5.8653 6.0946 5.8653 6.35352C5.8653 6.61243 6.07513 6.82227 6.33405 6.82227H12.4938C12.7527 6.82227 12.9626 6.61243 12.9626 6.35352C12.9626 6.0946 12.7527 5.88477 12.4938 5.88477Z\",\n    fill: \"current\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.5061 6.82227H4.93494C5.19385 6.82227 5.40369 6.61243 5.40369 6.35352C5.40369 6.0946 5.19385 5.88477 4.93494 5.88477H3.5061C3.24719 5.88477 3.03735 6.0946 3.03735 6.35352C3.03735 6.61243 3.24719 6.82227 3.5061 6.82227Z\",\n    fill: \"current\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.5061 8.47949H9.66589C9.9248 8.47949 10.1346 8.26953 10.1346 8.01074C10.1346 7.75183 9.9248 7.54199 9.66589 7.54199H3.5061C3.24719 7.54199 3.03735 7.75183 3.03735 8.01074C3.03735 8.26953 3.24719 8.47949 3.5061 8.47949Z\",\n    fill: \"current\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.4939 7.54199H11.0651C10.8062 7.54199 10.5963 7.75183 10.5963 8.01074C10.5963 8.26953 10.8062 8.47949 11.0651 8.47949H12.4939C12.7528 8.47949 12.9626 8.26953 12.9626 8.01074C12.9626 7.75183 12.7528 7.54199 12.4939 7.54199Z\",\n    fill: \"current\"\n  })), _path6 || (_path6 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.4938 9.19873H6.33405C6.07513 9.19873 5.8653 9.40869 5.8653 9.66748C5.8653 9.92639 6.07513 10.1362 6.33405 10.1362H12.4938C12.7527 10.1362 12.9626 9.92639 12.9626 9.66748C12.9626 9.40869 12.7527 9.19873 12.4938 9.19873Z\",\n    fill: \"current\"\n  })), _path7 || (_path7 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.93494 9.19873H3.5061C3.24719 9.19873 3.03735 9.40869 3.03735 9.66748C3.03735 9.92639 3.24719 10.1362 3.5061 10.1362H4.93494C5.19385 10.1362 5.40369 9.92639 5.40369 9.66748C5.40369 9.40869 5.19385 9.19873 4.93494 9.19873Z\",\n    fill: \"current\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSubtitlesOn);\nexport default __webpack_public_path__ + \"static/media/subtitlesOn.5f02e8f2.svg\";\nexport { ForwardRef as ReactComponent };","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetTemplates = () => {\r\n  const [isGettingTemplates, setIsGettingTemplates] = useState(false);\r\n  const [templates, setTemplates] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetTemplates = useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get('/template')\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getTemplates = useCallback(async () => {\r\n    setTemplates(null);\r\n    setIsGettingTemplates(true);\r\n    try {\r\n      const res = await axiosGetTemplates();\r\n      if (isMounted.current) setTemplates(res.data);\r\n      console.log(res);\r\n    } catch (uploadError) {\r\n      console.log('Error Getting Templates', uploadError);\r\n    } finally {\r\n      if (isMounted.current) setIsGettingTemplates(false);\r\n      return;\r\n    }\r\n  }, [axiosGetTemplates]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isGettingTemplates, getTemplates, templates, setTemplates };\r\n};\r\n\r\nexport default useGetTemplates;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useCreateTemplate = () => {\r\n  const [isCreatingTemplate, setIsCreatingTemplate] = useState(false);\r\n  const [createdTemplate, setCreatedTemplate] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosCreateTemplate = useCallback((data) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .post('/template', data)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const createTemplate = useCallback(\r\n    async (data) => {\r\n      setCreatedTemplate(null);\r\n      setIsCreatingTemplate(true);\r\n      try {\r\n        const res = await axiosCreateTemplate(data);\r\n        if (isMounted.current) setCreatedTemplate(res.data);\r\n        console.log(res);\r\n      } catch (uploadError) {\r\n        console.log('Error Creating Template', uploadError);\r\n      } finally {\r\n        if (isMounted.current) setIsCreatingTemplate(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosCreateTemplate]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isCreatingTemplate,\r\n    createTemplate,\r\n    createdTemplate,\r\n    setCreatedTemplate,\r\n  };\r\n};\r\n\r\nexport default useCreateTemplate;\r\n","import { useEffect, useState } from 'react';\r\nimport { getCanvasObject, getCanvasImage } from '../../../utils/canvasUtils';\r\n\r\nconst useSaveTemplate = (\r\n  state,\r\n  dispatch,\r\n  canvas,\r\n  isCreatingTemplate,\r\n  createTemplate,\r\n  type\r\n) => {\r\n  const [canvasImage, setCanvasImage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (state.shouldSaveTemplate && canvasImage) {\r\n      let canvasObject = getCanvasObject(canvas);\r\n      let templateData = {\r\n        ...canvasObject,\r\n        image: canvasImage,\r\n        type: type,\r\n      };\r\n      createTemplate(templateData);\r\n      dispatch({ type: 'setShouldSaveTemplate', data: false });\r\n      setCanvasImage(null);\r\n    }\r\n  }, [\r\n    state.shouldSaveTemplate,\r\n    dispatch,\r\n    canvas,\r\n    createTemplate,\r\n    canvasImage,\r\n    type,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (state.shouldSaveTemplate && !isCreatingTemplate) {\r\n      getCanvasImage(canvas, setCanvasImage);\r\n    }\r\n  }, [isCreatingTemplate, state.shouldSaveTemplate, canvas]);\r\n};\r\n\r\nexport default useSaveTemplate;\r\n","import React, { useContext, useState, useEffect, useRef } from 'react';\r\nimport styles from './CanvasToolbar.module.css';\r\nimport ResizeDropdown from './ResizeDropdown/ResizeDropdown';\r\nimport TemplatesDropdown from './TemplatesDropdown/TemplatesDropdown';\r\nimport EditorContext from '../../contexts/EditorContext';\r\nimport Backdrop from '../../components/Backdrop/Backdrop';\r\nimport { ReactComponent as Templates } from '../../assets/editor/templates.svg';\r\nimport { ReactComponent as Resize } from '../../assets/editor/resize.svg';\r\nimport { ReactComponent as Crop } from '../../assets/editor/cropImage.svg';\r\nimport { SketchPicker } from 'react-color';\r\nimport { useHistory } from 'react-router-dom';\r\nimport useGetTemplates from '../../hooks/useGetTemplates';\r\nimport useCreateTemplate from '../../hooks/useCreateTemplate';\r\nimport useSaveTemplate from './hooks/useSaveTemplate';\r\n\r\n// const templateType = 'userOnly';\r\n// const templateTypeOption = 'userTemplate';\r\nconst templateType = 'common';\r\nconst templateTypeOption = 'commonTemplate';\r\n\r\nconst CanvasToolbar = ({\r\n  setVideoData,\r\n  info,\r\n  setSpeakers,\r\n  canvas,\r\n  setTemplateToLoad,\r\n}) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { isGettingTemplates, getTemplates, templates, setTemplates } =\r\n    useGetTemplates();\r\n  const {\r\n    isCreatingTemplate,\r\n    createTemplate,\r\n    createdTemplate,\r\n    setCreatedTemplate,\r\n  } = useCreateTemplate();\r\n  const [shouldGetTemplates, setShouldGetTemplates] = useState(false);\r\n  const [bgColor, setBgColor] = useState(\r\n    editorState.canvasState.backgroundColor\r\n  );\r\n  const backgroundColorRef = useRef(null);\r\n  const resizeDropdownRef = useRef(null);\r\n  const [currentTemplateOption, setCurrentTemplateOption] = useState(null);\r\n\r\n  const history = useHistory();\r\n  useSaveTemplate(\r\n    editorState,\r\n    editorDispatch,\r\n    canvas,\r\n    isCreatingTemplate,\r\n    createTemplate,\r\n    templateType\r\n  );\r\n\r\n  const clickHandler = (e) => {\r\n    if (!editorState.shouldCropMedia && !editorState.isLoadingTemplate) {\r\n      if (editorState.isCropMode) {\r\n        editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n      } else {\r\n        let id = e.currentTarget.id;\r\n        if (id === 'resize') {\r\n          editorDispatch({ type: 'setIsResizeDropdown', data: true });\r\n        } else if (id === 'bgColor') {\r\n          editorDispatch({ type: 'setIsCanvasBgColorDropdown', data: true });\r\n        } else if (id === 'crop') {\r\n          setVideoData({ ...info });\r\n          let objects = canvas.getObjects();\r\n          let speakerVideos = [];\r\n          for (let i = 0; i < objects.length; i++) {\r\n            let obj = objects[i];\r\n            if (obj.type === 'video') speakerVideos.push({ ...obj.cropRect });\r\n          }\r\n          setSpeakers(speakerVideos);\r\n          history.push(`/editor/speakers`);\r\n        } else if (id === 'templates') {\r\n          editorDispatch({ type: 'setIsTemplatesDropdown', data: true });\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const colorChangeCompleteHandler = (c) => {\r\n    if (backgroundColorRef.current) {\r\n      let colorString = `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`;\r\n      backgroundColorRef.current.style.background = colorString;\r\n      editorDispatch({ type: 'setCanvasBackgroundColor', data: colorString });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    backgroundColorRef.current.style.background = bgColor;\r\n  }, [bgColor]);\r\n\r\n  useEffect(() => {\r\n    if (shouldGetTemplates) {\r\n      setShouldGetTemplates(false);\r\n      getTemplates();\r\n    }\r\n  }, [shouldGetTemplates, getTemplates]);\r\n\r\n  useEffect(() => {\r\n    if (templates) {\r\n      setCurrentTemplateOption((prevState) => {\r\n        if (prevState) {\r\n          return {\r\n            type: prevState.type,\r\n            templates: [...templates[prevState.type]],\r\n          };\r\n        } else {\r\n          return {\r\n            type: 'commonTemplate',\r\n            templates: [...templates.commonTemplate],\r\n          };\r\n        }\r\n      });\r\n    }\r\n  }, [templates]);\r\n\r\n  useEffect(() => {\r\n    if (createdTemplate) {\r\n      setTemplates((prevState) => {\r\n        let type = createdTemplate.type;\r\n        if (type === 'common') {\r\n          return {\r\n            ...prevState,\r\n            commonTemplate: [...templates.commonTemplate, createdTemplate],\r\n          };\r\n        } else if (type === 'userOnly') {\r\n          return {\r\n            ...prevState,\r\n            userTemplate: [...templates.userTemplate, createdTemplate],\r\n          };\r\n        } else return { ...prevState };\r\n      });\r\n      setCreatedTemplate(null);\r\n    }\r\n  }, [createdTemplate, setTemplates, templates, setCreatedTemplate]);\r\n\r\n  return (\r\n    <div className={styles.CanvasToolbar}>\r\n      <div\r\n        className={styles.TemplatesContainer}\r\n        id='templates'\r\n        onClick={clickHandler}\r\n      >\r\n        <Templates />\r\n        <p className={styles.OptionText}>Templates</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div\r\n        className={styles.ResizeContainer}\r\n        id='resize'\r\n        onClick={clickHandler}\r\n      >\r\n        <Resize />\r\n        <p className={styles.OptionText}>Resize</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div className={styles.CropContainer} id='crop' onClick={clickHandler}>\r\n        <Crop />\r\n        <p className={styles.OptionText}>Crop</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div\r\n        className={styles.ColorContainer}\r\n        id='bgColor'\r\n        onClick={clickHandler}\r\n      >\r\n        <div className={styles.ColorPickerBorder}>\r\n          <div ref={backgroundColorRef} className={styles.ColorPicker}></div>\r\n        </div>\r\n        <p className={styles.OptionText}>Background color</p>\r\n      </div>\r\n\r\n      {editorState.isTemplatesDropdown ? (\r\n        <>\r\n          <Backdrop></Backdrop>\r\n          <div className={styles.TemplatesDropdownContainer}>\r\n            <TemplatesDropdown\r\n              isCreatingTemplate={isCreatingTemplate}\r\n              getTemplates={getTemplates}\r\n              templates={templates}\r\n              setShouldGetTemplates={setShouldGetTemplates}\r\n              currentOption={currentTemplateOption}\r\n              setCurrentOption={setCurrentTemplateOption}\r\n              setTemplateToLoad={setTemplateToLoad}\r\n              isGettingTemplates={isGettingTemplates}\r\n              templateTypeOption={templateTypeOption}\r\n            />\r\n          </div>\r\n        </>\r\n      ) : null}\r\n\r\n      {editorState.isResizeDropdown ? (\r\n        <>\r\n          <Backdrop></Backdrop>\r\n          <div className={styles.ResizeDropdown} ref={resizeDropdownRef}>\r\n            <ResizeDropdown />\r\n          </div>\r\n        </>\r\n      ) : null}\r\n\r\n      {editorState.isCanvasBgColorDropdown ? (\r\n        <>\r\n          <Backdrop></Backdrop>\r\n          <div className={styles.ColorDropdownContainer}>\r\n            <SketchPicker\r\n              color={bgColor}\r\n              onChange={(c) => setBgColor(c.rgb)}\r\n              onChangeComplete={colorChangeCompleteHandler}\r\n            />\r\n          </div>\r\n        </>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CanvasToolbar;\r\n","export default __webpack_public_path__ + \"static/media/play.516f516e.svg\";","export default __webpack_public_path__ + \"static/media/pause.2c1b8172.svg\";","import { useEffect, useCallback } from 'react';\r\nimport { getContainerSize } from '../utils/getSize';\r\n\r\nconst getCanvasSize = (state) => {\r\n  let maxWidth = 800;\r\n  let maxHeight = 560;\r\n  if (state.resize === 'square') maxHeight = 500;\r\n  // if (state.containerHeight < maxHeight){\r\n  //   console.log(true);\r\n  //   maxHeight = 100;\r\n  // } \r\n  let width = state.containerWidth;\r\n  let height = (state.videoHeight * width) / state.videoWidth;\r\n  \r\n  // console.log(state.containerHeight);\r\n  if (width > height) {\r\n    if (width > maxWidth) {\r\n      height = (height * maxWidth) / width;\r\n      width = maxWidth;\r\n    }\r\n  } else {\r\n    if (height > maxHeight) {\r\n      width = (width * maxHeight) / height;\r\n      height = maxHeight;\r\n    }\r\n  }\r\n  return { width, height };\r\n};\r\n\r\nconst useContainerSize = (state, dispatch, containerRef) => {\r\n  const containerPadding = 88;\r\n  const getSizeInfo = useCallback(() => {\r\n    let { width, height } = getCanvasSize(state);\r\n    if (width > height) containerRef.current.style.paddingTop = '5rem';\r\n    else containerRef.current.style.paddingTop = '1rem';\r\n    let isInRange = width > 100;\r\n    return isInRange ? { width, height } : {};\r\n  }, [containerRef, state]);\r\n\r\n  const handleResize = useCallback(() => {\r\n    let { containerWidth, containerHeight } = getContainerSize(\r\n      containerRef,\r\n      containerPadding\r\n    );\r\n    dispatch({\r\n      type: 'setContainerSize',\r\n      data: { width: containerWidth, height: containerHeight },\r\n    });\r\n  }, [dispatch, containerRef]);\r\n\r\n  useEffect(() => {\r\n    if (state.initialWidth > 0 && state.shouldСalculateCanvasSize) {\r\n      dispatch({ type: 'setShouldСalculateCanvasSize', data: false });\r\n      let { width, height } = getSizeInfo();\r\n      if (width) {\r\n        dispatch({\r\n          type: 'setCanvasSize',\r\n          data: { width, height },\r\n        });\r\n      }\r\n    }\r\n  }, [dispatch, getSizeInfo, state]);\r\n\r\n  useEffect(() => {\r\n    handleResize();\r\n  }, [handleResize]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [handleResize]);\r\n};\r\n\r\nexport default useContainerSize;\r\n","export const getContainerSize = (containerRef, containerPadding) => {\r\n  let containerWidth =\r\n    window.innerWidth - containerRef.current.offsetLeft - containerPadding;\r\n  let containerHeight = containerRef.current.offsetHeight;\r\n  if (containerWidth > 800) {\r\n    containerHeight = (containerHeight * 800) / containerWidth;\r\n    containerWidth = 800;\r\n  }\r\n  return { containerWidth, containerHeight };\r\n};\r\n","import { useEffect, useCallback } from 'react';\r\n\r\nconst usePlayerTime = (\r\n  videoRef,\r\n  videoCuts,\r\n  words,\r\n  isPlaying,\r\n  currentTime,\r\n  nextCutIndex,\r\n  setNextCutIndex,\r\n  currentWordIndex,\r\n  setCurrentWordIndex,\r\n  currentSub,\r\n  setCurrentSub,\r\n  fabricSub\r\n) => {\r\n  const handleVideoCuts = useCallback(\r\n    (time) => {\r\n      if (videoCuts.length > 0 && videoCuts[nextCutIndex]) {\r\n        time = +time + 0.05;\r\n        let moreThanStart = time >= +videoCuts[nextCutIndex].start;\r\n        let lessThanEnd = time <= +videoCuts[nextCutIndex].end;\r\n        let isShortTime =\r\n          +videoCuts[nextCutIndex].end - videoCuts[nextCutIndex].start <=\r\n            0.05 && moreThanStart;\r\n        if ((moreThanStart && lessThanEnd) || isShortTime) {\r\n          videoRef.current.currentTime = +videoCuts[nextCutIndex].end;\r\n          // console.log(\r\n          //   `%c setting to: ${+videoCuts[nextCutIndex].end}`,\r\n          //   'background:red; color:white'\r\n          // );\r\n\r\n          if (videoCuts[nextCutIndex + 1]) setNextCutIndex(nextCutIndex + 1);\r\n          else setNextCutIndex(null);\r\n        }\r\n      }\r\n    },\r\n    [videoCuts, nextCutIndex, videoRef, setNextCutIndex]\r\n  );\r\n\r\n  const handleCurrentWord = useCallback(\r\n    (time, index) => {\r\n      time = +time + 0.05;\r\n      let word = words[index];\r\n      let nextWord = words[index + 1];\r\n      // if (word) {\r\n      //   console.log('comparing: ', time, '>', +word.end, time >= +word.end);\r\n      // }\r\n      if (index !== null && nextWord && time > +word.end) {\r\n        let isShortTime = +word.end - word.start <= 0.05 && !isPlaying;\r\n        if (!isShortTime && !nextWord.active && nextWord.next !== null) {\r\n          setCurrentWordIndex(nextWord.next);\r\n        } else if (!isShortTime) {\r\n          setCurrentWordIndex((prevState) => prevState + 1);\r\n        }\r\n      }\r\n    },\r\n    [isPlaying, words, setCurrentWordIndex]\r\n  );\r\n\r\n  const handleCurrentSub = useCallback(\r\n    (time, sub) => {\r\n      time = +time + 0.05;\r\n      let nextSub = sub.next;\r\n      // if (word) {\r\n      //   console.log('comparing: ', time, '>', +word.end, time >= +word.end);\r\n      // }\r\n      if (sub && nextSub && time > +sub.val.end) {\r\n        if (nextSub.val.active) setCurrentSub((prevState) => prevState.next);\r\n        else setCurrentSub(nextSub.nextSub);\r\n      }\r\n    },\r\n    [setCurrentSub]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (words && isPlaying && fabricSub && currentSub && currentTime !== null) {\r\n      handleCurrentSub(currentTime, currentSub);\r\n    }\r\n  }, [words, isPlaying, fabricSub, currentTime, handleCurrentSub, currentSub]);\r\n\r\n  useEffect(() => {\r\n    if (words && currentTime !== null)\r\n      handleCurrentWord(currentTime, currentWordIndex);\r\n  }, [words, currentTime, handleCurrentWord, currentWordIndex]);\r\n\r\n  useEffect(() => {\r\n    if (words && currentTime !== null) handleVideoCuts(currentTime);\r\n  }, [words, currentTime, handleVideoCuts]);\r\n};\r\n\r\nexport default usePlayerTime;\r\n","class Node {\r\n  constructor(val) {\r\n    this.val = val;\r\n    this.next = null;\r\n  }\r\n}\r\n\r\nexport class LinkedList {\r\n  constructor() {\r\n    this.head = null;\r\n    this.tail = null;\r\n    this.length = 0;\r\n  }\r\n\r\n  push(val) {\r\n    let newNode = new Node(val);\r\n    if (!this.head) {\r\n      this.head = newNode;\r\n      this.tail = newNode;\r\n    } else {\r\n      this.tail.next = newNode;\r\n      this.tail = newNode;\r\n    }\r\n    this.length++;\r\n    return this.length;\r\n  }\r\n\r\n  pop() {\r\n    if (!this.head) return null;\r\n    let current = this.head;\r\n    let newTail = current;\r\n    while (current.next) {\r\n      newTail = current;\r\n      current = current.next;\r\n    }\r\n    if (this.length === 1) {\r\n      this.head = null;\r\n      this.tail = null;\r\n    } else {\r\n      this.tail = newTail;\r\n      this.tail.next = null;\r\n    }\r\n    this.length--;\r\n\r\n    return current;\r\n  }\r\n\r\n  shift() {\r\n    if (!this.head) return null;\r\n    let temp = this.head;\r\n    this.head = this.head.next;\r\n    temp.next = null;\r\n    this.length--;\r\n    if (this.length === 0) this.tail = null;\r\n    return temp;\r\n  }\r\n\r\n  unshift(val) {\r\n    let newNode = new Node(val);\r\n    if (!this.head) this.tail = newNode;\r\n    else newNode.next = this.head;\r\n    this.head = newNode;\r\n    this.length++;\r\n    return this;\r\n  }\r\n\r\n  get(idx) {\r\n    if (idx < 0 || idx >= this.length) return null;\r\n    let current = this.head;\r\n    for (let i = 0; i <= idx; i++) {\r\n      if (i === idx) return current;\r\n      current = current.next;\r\n    }\r\n  }\r\n\r\n  set(idx, val) {\r\n    let temp = this.get(idx);\r\n    if (temp) {\r\n      temp.val = val;\r\n      return true;\r\n    } else return false;\r\n  }\r\n\r\n  insert(idx, val) {\r\n    if (idx < 0 || idx > this.length) return false;\r\n    if (idx === 0) return !!this.unshift(val);\r\n    if (idx === this.length) return !!this.push(val);\r\n    let newNode = new Node(val);\r\n    let current = this.get(idx - 1);\r\n    newNode.next = current.next;\r\n    current.next = newNode;\r\n    this.length++;\r\n    return true;\r\n  }\r\n\r\n  remove(idx) {\r\n    if (idx < 0 || idx >= this.length) return false;\r\n    if (idx === 0) return !!this.shift();\r\n    if (idx === this.length - 1) return !!this.pop();\r\n    let current = this.get(idx - 1);\r\n    current.next = current.next.next;\r\n    this.length--;\r\n    return true;\r\n  }\r\n\r\n  reverse(pre = null, current = this.head) {\r\n    if (this.length <= 1) return this;\r\n    let nextNode = current.next;\r\n    if (!pre) {\r\n      this.tail = this.head ;\r\n      this.tail.next = null;\r\n    }\r\n    current.next = pre;\r\n    pre = current;\r\n    if (nextNode.next === null) {\r\n      this.head = nextNode;\r\n      this.head.next = pre;\r\n      return this;\r\n    }\r\n    return this.reverse(pre, nextNode);\r\n  }\r\n}\r\n","import { useEffect } from 'react';\r\nimport { generateSubtitles } from '../utils/generateSubtitles';\r\nimport { newSubtitle, displaySub } from '../utils/subtitle.js';\r\nimport { findSubWithWordIndex } from '../../../utils/findIndex';\r\n\r\nconst useSubtitles = (\r\n  state,\r\n  canvas,\r\n  fabricSub,\r\n  setFabricSub,\r\n  words,\r\n  subList,\r\n  setSubList,\r\n  currentSub,\r\n  setCurrentSub,\r\n  currentWordIndex,\r\n  videoCuts,\r\n  shouldRerenderSub,\r\n  setShouldRerenderSub,\r\n  isPlaying,\r\n  videoRef\r\n) => {\r\n  useEffect(() => {\r\n    if (fabricSub && currentSub && !state.isLoadingTemplate) {\r\n      if (shouldRerenderSub) setShouldRerenderSub(false);\r\n      displaySub(fabricSub, currentSub);\r\n    }\r\n  }, [\r\n    fabricSub,\r\n    currentSub,\r\n    shouldRerenderSub,\r\n    setShouldRerenderSub,\r\n    subList,\r\n    state.isLoadingTemplate,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (subList && !isPlaying && !state.isLoadingTemplate) {\r\n      let sub = findSubWithWordIndex(currentWordIndex, words, subList);\r\n      if (sub !== null) setCurrentSub(sub);\r\n    }\r\n  }, [\r\n    subList,\r\n    setCurrentSub,\r\n    words,\r\n    currentWordIndex,\r\n    isPlaying,\r\n    state.isLoadingTemplate,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (fabricSub && videoCuts) generateSubtitles(words, setSubList);\r\n  }, [fabricSub, videoCuts, setSubList, words]);\r\n\r\n  useEffect(() => {\r\n    if (canvas && !fabricSub && state.isSubtitles) {\r\n      if (isPlaying) videoRef.current.pause();\r\n      let sub = newSubtitle(canvas, state);\r\n      canvas.add(sub);\r\n      canvas.requestRenderAll();\r\n      setFabricSub(sub);\r\n    } else if (\r\n      canvas &&\r\n      fabricSub &&\r\n      !state.isSubtitles &&\r\n      !state.isLoadingTemplate\r\n    ) {\r\n      canvas.remove(fabricSub);\r\n      setFabricSub(null);\r\n    }\r\n  }, [\r\n    videoRef,\r\n    isPlaying,\r\n    state,\r\n    fabricSub,\r\n    setFabricSub,\r\n    canvas,\r\n    subList,\r\n    words,\r\n    setSubList,\r\n  ]);\r\n};\r\n\r\nexport default useSubtitles;\r\n","import { fabric } from 'fabric';\r\n\r\nexport const newSubtitle = (canvas, state) => {\r\n  let zoom = canvas.getZoom();\r\n  let canvasWidth = canvas.getWidth() / zoom;\r\n  let canvasHeight = canvas.getHeight() / zoom;\r\n  let width = 550 < canvasWidth / 2 ? 550 : canvasWidth / 2;\r\n  let subtitle = new fabric.Subtitle(' ', {\r\n    width,\r\n    paddingX: 20,\r\n    paddingY: 20,\r\n    breakWords: true,\r\n    editable: false,\r\n    originX: 'center',\r\n    originY: 'center',\r\n    textAlign: 'center',\r\n    visible: false,\r\n    ...state.subtitlesState,\r\n    // bgCornerRadius: 5,\r\n    // excludeFromExport: true,\r\n  });\r\n  subtitle.left = canvasWidth / 2;\r\n  subtitle.top = canvasHeight - subtitle.height - subtitle.paddingY;\r\n  return subtitle;\r\n};\r\n\r\nexport const displaySub = (fabricSub, currentSub) => {\r\n  if (currentSub.val.silence) fabricSub.visible = false;\r\n  else if (currentSub.val.active) {\r\n    let text = '';\r\n    for (let i = 0; i < currentSub.val.words.length; i++) {\r\n      let word = currentSub.val.words[i];\r\n      text += word.text;\r\n    }\r\n    fabricSub.set({ text, visible: true });\r\n  }\r\n};","import { LinkedList } from './linkedList';\r\n\r\nexport const generateSubtitles = (words, setSubs) => {\r\n  let list = new LinkedList();\r\n  let sub = null;\r\n  let firstDeletedIndex = null;\r\n\r\n  const checkForPrevDeleted = (word, which, i) => {\r\n    if (firstDeletedIndex) {\r\n      list.get(firstDeletedIndex).nextSub = list.tail;\r\n      // console.log(i);\r\n      // console.log(\r\n      //   list[firstDeletedIndex],\r\n      //   list[firstDeletedIndex].nextSub,\r\n      //   'setting nextSub Sub',\r\n      //   word,\r\n      //   list.length - 1,\r\n      //   which\r\n      // );\r\n      firstDeletedIndex = null;\r\n    }\r\n  };\r\n\r\n  for (let i = 0; i < words.length; i++) {\r\n    let word = words[i];\r\n    let nextWord = words[i + 1];\r\n    if (!word.active) {\r\n      if (sub) {\r\n        list.push({ ...sub });\r\n        checkForPrevDeleted(word, 'not active and is Sub', i);\r\n        sub = null;\r\n        list.push({ ...word });\r\n        firstDeletedIndex = list.length - 1;\r\n        // console.log('setting reference for nextSub', word, list.length - 1);\r\n      } else {\r\n        list.push({ ...word });\r\n        if (!firstDeletedIndex) {\r\n          firstDeletedIndex = list.length - 1;\r\n          // console.log('setting reference for nextSub', word, list.length - 1);\r\n        }\r\n      }\r\n      continue;\r\n    }\r\n\r\n    let isLast = i === words.length - 1;\r\n    let wordTimeLength = +word.end - +word.start;\r\n    let isLongSilence =\r\n      !!word.silence &&\r\n      ((!sub && nextWord && !nextWord.active) || wordTimeLength >= 0.4);\r\n    if (isLongSilence) {\r\n      if (sub) {\r\n        list.push({ ...sub });\r\n        checkForPrevDeleted(word, 'isSub and isLongSilence', i);\r\n        sub = null;\r\n        // console.log('isSub and isLongSilence', i, word.text);\r\n      }\r\n      // console.log(' isLongSilence', i, word.text);\r\n      list.push({ ...word });\r\n      checkForPrevDeleted(word, 'isLongSilence', i);\r\n      continue;\r\n    } else if (word.silence) {\r\n      if (sub) {\r\n        sub.end += word.end;\r\n        sub.words.push({\r\n          ...word,\r\n          text: '',\r\n        });\r\n        if (isLast) {\r\n          list.push(sub);\r\n          checkForPrevDeleted(word, 'isSub and isLongSilence', i);\r\n        }\r\n        // console.log('isSub and silence', i, word.text);\r\n      } else {\r\n        sub = {\r\n          words: [{ ...word, text: '' }],\r\n          start: word.start,\r\n          end: word.end,\r\n          strLength: 0,\r\n          active: true,\r\n        };\r\n        if (isLast) {\r\n          list.push({ ...word });\r\n          checkForPrevDeleted(word, 'silence', i);\r\n        }\r\n        // console.log('silence', i, word.text);\r\n      }\r\n      continue;\r\n    }\r\n\r\n    let containsMark = !!word.text.match(/[.,:!?]$/);\r\n\r\n    let isRoomForWord =\r\n      sub !== null && sub.strLength + word.text.length + 1 < 48;\r\n    // if (sub) console.log(sub.words, sub.strLength, word.text, isRoomForWord);\r\n\r\n    if (isRoomForWord && containsMark && sub) {\r\n      let text = '';\r\n      if (sub.strLength > 0) text = ' ';\r\n      text += word.text;\r\n      sub.words.push({ ...word, text });\r\n      sub.end = word.end;\r\n      sub.strLength += text.length;\r\n      list.push({ ...sub });\r\n      checkForPrevDeleted(word, 'isRoomForWord && containsMark && sub', i);\r\n      sub = null;\r\n      // console.log('isRoomForWord && containsMark && sub', i, word.text);\r\n    } else if (containsMark && sub) {\r\n      list.push({ ...sub });\r\n      checkForPrevDeleted(word, 'containsMark && sub', i);\r\n      sub = {\r\n        words: [{ ...word }],\r\n        start: word.start,\r\n        end: word.end,\r\n        strLength: word.text.length,\r\n        active: true,\r\n      };\r\n      list.push({ ...sub });\r\n      sub = null;\r\n      // console.log('containsMark && sub', i, word.text);\r\n    } else if (containsMark) {\r\n      sub = {\r\n        words: [{ ...word }],\r\n        start: word.start,\r\n        end: word.end,\r\n        strLength: word.text.length,\r\n        active: true,\r\n      };\r\n      list.push({ ...sub });\r\n      checkForPrevDeleted(word, 'containsMark && sub', i);\r\n      sub = null;\r\n      // console.log('containsMark && sub', i, word.text);\r\n    } else if (isRoomForWord) {\r\n      let text = '';\r\n      if (sub.strLength > 0) text = ' ';\r\n      text += word.text;\r\n      sub.words.push({ ...word, text });\r\n      sub.end = word.end;\r\n      sub.strLength += text.length;\r\n      if (isLast) {\r\n        list.push(sub);\r\n        checkForPrevDeleted(word, 'isRoomForWord', i);\r\n      }\r\n      // console.log('isRoomForWord', i, word.text);\r\n    } else if (sub) {\r\n      list.push({ ...sub });\r\n      checkForPrevDeleted(word, 'sub', i);\r\n      sub = {\r\n        words: [{ ...word }],\r\n        start: word.start,\r\n        end: word.end,\r\n        strLength: word.text.length,\r\n        active: true,\r\n      };\r\n      if (isLast) list.push(sub);\r\n      // console.log('sub', i, word.text);\r\n    } else {\r\n      sub = {\r\n        words: [{ ...word }],\r\n        start: word.start,\r\n        end: word.end,\r\n        strLength: word.text.length,\r\n        active: true,\r\n      };\r\n      if (isLast) {\r\n        list.push(sub);\r\n        checkForPrevDeleted(word, 'end', i);\r\n      }\r\n      // console.log('elsee', i, word.text);\r\n    }\r\n  }\r\n  // console.log(list);\r\n  setSubs(list);\r\n};\r\n","import React, { useRef, useContext, useEffect, useState } from 'react';\r\nimport styles from './Player.module.css';\r\nimport PlayerCanvas from '../Canvas/PlayerCanvas/PlayerCanvas';\r\nimport EventContext from '../../contexts/EventContext';\r\nimport useEventState from '../../hooks/useEventsState';\r\nimport EditorContext from '../../contexts/EditorContext';\r\nimport CanvasToolbar from '../CanvasToolbar/CanvasToolbar';\r\nimport playSvg from '../../assets/editor/play.svg';\r\nimport pauseSvg from '../../assets/editor/pause.svg';\r\nimport useContainerSize from './hooks/useContainerSize';\r\nimport usePlayerTime from './hooks/usePlayerTime';\r\nimport useSubtitles from './hooks/useSubtitles';\r\nimport Spinner from '../../components/Spinner2/Spinner';\r\n\r\nconst Player = ({\r\n  videoRef,\r\n  canvas,\r\n  setCanvas,\r\n  isPlaying,\r\n  words,\r\n  currentTime,\r\n  videoCuts,\r\n  setNextCutIndex,\r\n  setCurrentWordIndex,\r\n  nextCutIndex,\r\n  currentWordIndex,\r\n  subList,\r\n  setSubList,\r\n  fabricSub,\r\n  setFabricSub,\r\n  currentSub,\r\n  setCurrentSub,\r\n  shouldRerenderSub,\r\n  setShouldRerenderSub,\r\n  speakers,\r\n  info,\r\n  setVideoData,\r\n  transcriptonStatus,\r\n  setSpeakers,\r\n  userAssets,\r\n  setUserAssets,\r\n}) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const [eventState, eventDispatch] = useEventState();\r\n  const [templateToLoad, setTemplateToLoad] = useState(null);\r\n\r\n  const containerRef = useRef(null);\r\n\r\n  const playClickHandler = () => {\r\n    if(!editorState.isLoadingTemplate) {\r\n      if (isPlaying) videoRef.current.pause();\r\n      else videoRef.current.play();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (transcriptonStatus && transcriptonStatus.isFinished) {\r\n      videoRef.current.pause();\r\n    }\r\n  }, [transcriptonStatus, videoRef]);\r\n\r\n  useEffect(() => {\r\n    if (editorState.isCropMode) videoRef.current.pause();\r\n  }, [editorState.isCropMode, videoRef]);\r\n\r\n  useContainerSize(editorState.canvasState, editorDispatch, containerRef);\r\n\r\n  usePlayerTime(\r\n    videoRef,\r\n    videoCuts,\r\n    words,\r\n    isPlaying,\r\n    currentTime,\r\n    nextCutIndex,\r\n    setNextCutIndex,\r\n    currentWordIndex,\r\n    setCurrentWordIndex,\r\n    currentSub,\r\n    setCurrentSub,\r\n    fabricSub\r\n  );\r\n\r\n  useSubtitles(\r\n    editorState,\r\n    canvas,\r\n    fabricSub,\r\n    setFabricSub,\r\n    words,\r\n    subList,\r\n    setSubList,\r\n    currentSub,\r\n    setCurrentSub,\r\n    currentWordIndex,\r\n    videoCuts,\r\n    shouldRerenderSub,\r\n    setShouldRerenderSub,\r\n    isPlaying,\r\n    videoRef\r\n  );\r\n\r\n  return (\r\n    <div className={styles.Player} ref={containerRef}>\r\n      {!canvas || editorState.isLoadingTemplate ? (\r\n        <Spinner\r\n          style={{\r\n            width: '100px',\r\n            height: '100px',\r\n            position: 'absolute',\r\n            zIndex: '100',\r\n            margin: 'auto',\r\n            left: '0',\r\n            right: '0',\r\n            top: '200px',\r\n          }}\r\n        />\r\n      ) : null}\r\n      <EventContext.Provider value={{ eventState, eventDispatch }}>\r\n        <div className={styles.PlayerContent}>\r\n          <PlayerCanvas\r\n            canvas={canvas}\r\n            setCanvas={setCanvas}\r\n            video={videoRef.current}\r\n            fabricSub={fabricSub}\r\n            setFabricSub={setFabricSub}\r\n            currentTime={currentTime}\r\n            speakers={speakers}\r\n            info={info}\r\n            isPlaying={isPlaying}\r\n            userAssets={userAssets}\r\n            setUserAssets={setUserAssets}\r\n            templateToLoad={templateToLoad}\r\n            setTemplateToLoad={setTemplateToLoad}\r\n          />\r\n          {canvas ? (\r\n            <>\r\n              <div className={styles.PlayerControls}>\r\n                <div className={styles.PlayButton} onClick={playClickHandler}>\r\n                  {isPlaying ? (\r\n                    <img src={pauseSvg} alt='pause' />\r\n                  ) : (\r\n                    <img src={playSvg} alt='play' />\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <CanvasToolbar\r\n                setVideoData={setVideoData}\r\n                info={info}\r\n                setSpeakers={setSpeakers}\r\n                canvas={canvas}\r\n                setTemplateToLoad={setTemplateToLoad}\r\n              />\r\n            </>\r\n          ) : null}\r\n        </div>\r\n      </EventContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Player;\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport styles from './Video.module.css';\r\nimport { handlePlay, handleEnd, handlePause } from './utils/videoEvents';\r\nimport EditorContext from '../../contexts/EditorContext';\r\n// import useGetVideoFile from '../../hooks/useGetVideoFile';\r\n\r\nconst Video = ({\r\n  videoRef,\r\n  setIsPlaying,\r\n  currentSelection,\r\n  setCurrentSelection,\r\n  setCurrentTime,\r\n  videoCuts,\r\n  words,\r\n  setNextCutIndex,\r\n  setCurrentWordIndex,\r\n  setCurrentSub,\r\n  subList,\r\n  info,\r\n}) => {\r\n  const { editorDispatch } = useContext(EditorContext);\r\n  const [intervalId, setIntervalId] = useState(null);\r\n  // const { isGettingVideo, getVideo, file, getVideoError } = useGetVideoFile();\r\n  \r\n  // useEffect(() => {\r\n  //   if(info && info.url) {\r\n  //     getVideo(info.url)\r\n  //   }\r\n  // }, [info, getVideo]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (intervalId) clearInterval(intervalId);\r\n    };\r\n  }, [intervalId]);\r\n\r\n  const getVideoSize = () => {\r\n    let initialWidth = videoRef.current.videoWidth;\r\n    let initialHeight = videoRef.current.videoHeight;\r\n    editorDispatch({\r\n      type: 'setCanvasInitialSize',\r\n      data: { initialWidth, initialHeight },\r\n    });\r\n    let data = {};\r\n    if (info.canvas && info.canvas.width) {\r\n      data = {\r\n        width: +info.canvas.width,\r\n        height: +info.canvas.height,\r\n        resize: info.canvas.resize,\r\n      };\r\n    } else {\r\n      data = {\r\n        width: initialWidth,\r\n        height: initialHeight,\r\n        resize: 'original',\r\n      };\r\n    }\r\n    editorDispatch({ type: 'setVideoSize', data });\r\n  };\r\n\r\n  // const onSeeking = (e) => {\r\n  //   console.log('Seeking', e);\r\n  // };\r\n\r\n  // const onSeeked = (e) => {\r\n  //   console.log('Seeked', e);\r\n  // };\r\n\r\n  return (\r\n    <video\r\n      src={info ? info.url : null}\r\n      // src={file ? file : null}\r\n      id='video'\r\n      preload='auto'\r\n      className={styles.Video}\r\n      ref={videoRef}\r\n      controls\r\n      onPause={() => handlePause(setIsPlaying, intervalId, words)}\r\n      onPlay={() =>\r\n        handlePlay(\r\n          currentSelection,\r\n          setCurrentSelection,\r\n          setIsPlaying,\r\n          setCurrentTime,\r\n          videoRef,\r\n          setIntervalId,\r\n          words\r\n        )\r\n      }\r\n      onEnded={() =>\r\n        handleEnd(\r\n          videoCuts,\r\n          setNextCutIndex,\r\n          words,\r\n          setCurrentWordIndex,\r\n          setCurrentTime,\r\n          setCurrentSub,\r\n          subList\r\n        )\r\n      }\r\n      // onSeeking={onSeeking}\r\n      // onSeeked={onSeeked}\r\n      onLoadedMetadata={getVideoSize}\r\n      crossOrigin='Anonymous'\r\n    />\r\n  );\r\n};\r\n\r\nexport default Video;\r\n","import { findSubWithWordIndex } from '../../../utils/findIndex';\r\n\r\nexport const handlePlay = (\r\n  currentSelection,\r\n  setCurrentSelection,\r\n  setIsPlaying,\r\n  setCurrentTime,\r\n  videoRef,\r\n  setIntervalId,\r\n  words\r\n) => {\r\n  setIsPlaying(true);\r\n  let selection = document.getSelection();\r\n  selection.removeAllRanges();\r\n  if (currentSelection) setCurrentSelection(null);\r\n  let interval = setInterval(() => {\r\n    // console.log('interval: ', videoRef.current.currentTime);\r\n    // console.log('playing');\r\n    if (words && videoRef.current) setCurrentTime(videoRef.current.currentTime);\r\n  }, 10);\r\n  setIntervalId(interval);\r\n};\r\n\r\nexport const handlePause = (setIsPlaying, intervalId, words) => {\r\n  setIsPlaying(false);\r\n  if (words) clearInterval(intervalId);\r\n};\r\n\r\nexport const handleEnd = (\r\n  videoCuts,\r\n  setNextCutIndex,\r\n  words,\r\n  setCurrentWordIndex,\r\n  setCurrentTime,\r\n  setCurrentSub,\r\n  subList\r\n) => {\r\n  if (words) {\r\n    if (videoCuts.length > 0) setNextCutIndex(0);\r\n    let word = words[0];\r\n    let wordIndex = 0;\r\n    let start = word.start;\r\n    if (!word.active && word.next !== null) {\r\n      wordIndex = word.next;\r\n      start = words[wordIndex].start;\r\n    }\r\n    setCurrentWordIndex(wordIndex);\r\n    let sub = findSubWithWordIndex(wordIndex, words, subList);\r\n    setCurrentSub(sub);\r\n    setCurrentTime(+start);\r\n  }\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\n// const toBase64 = (file) =>\r\n//   new Promise((resolve, reject) => {\r\n//     const reader = new FileReader();\r\n//     reader.readAsDataURL(file);\r\n//     reader.onload = () => resolve(reader.result);\r\n//     reader.onerror = (error) => reject(error);\r\n//   });\r\n\r\nconst getVideoInfo = (video, i) => ({\r\n  position: {\r\n    x: video.left,\r\n    y: video.top,\r\n    w: video.width * video.scaleX,\r\n    h: video.height * video.scaleY,\r\n    z: i,\r\n    radius: video.cornerRadius,\r\n    crop: video.cropRect,\r\n  },\r\n});\r\n\r\nconst generateLayer = (exportCanvas, width, height, arr, z) => {\r\n  exportCanvas.renderAll();\r\n  let image = exportCanvas.toDataURL({\r\n    format: 'image/jpg',\r\n    quality: 1,\r\n  });\r\n  arr.push({\r\n    image,\r\n    position: {\r\n      x: 0,\r\n      y: 0,\r\n      w: width,\r\n      h: height,\r\n      z,\r\n    },\r\n  });\r\n  exportCanvas.clear();\r\n  exportCanvas.backgroundColor = 'rgba(255, 255, 255, 0)';\r\n};\r\n\r\nconst handleLayers = (exportCanvas, canvas, setElements, setVideoInfo) => {\r\n  let objects = canvas.getObjects();\r\n  let width = canvas.getWidth() / canvas.getZoom();\r\n  let height = canvas.getHeight() / canvas.getZoom();\r\n  let videosArr = [];\r\n  let elementsArr = [];\r\n  let isAdded = true;\r\n  let index = 1;\r\n  generateLayer(exportCanvas, width, height, elementsArr, 0);\r\n  for (let i = 0; i < objects.length; i++) {\r\n    let el = objects[i];\r\n    if (el.type === 'subtitle' && isAdded) {\r\n      generateLayer(exportCanvas, width, height, elementsArr, index);\r\n      isAdded = false;\r\n    } else if (el.type === 'subtitle') continue;\r\n    else if (el.type === 'video') {\r\n      if (isAdded) {\r\n        generateLayer(exportCanvas, width, height, elementsArr, index);\r\n        index++;\r\n        isAdded = false;\r\n      }\r\n      videosArr.push(getVideoInfo(el, index));\r\n      index++;\r\n    } else if (el.type !== 'video' && el.type !== 'subtitle') {\r\n      let clone = fabric.util.object.clone(el);\r\n      exportCanvas.add(clone);\r\n      isAdded = true;\r\n    }\r\n  }\r\n  if (isAdded) generateLayer(exportCanvas, width, height, elementsArr, index);\r\n  setVideoInfo({ coordinates: videosArr });\r\n  setElements(elementsArr);\r\n};\r\n\r\nexport const prepareCanvas = async (canvas, setElements, setVideoInfo) => {\r\n  let exportCanvas = new fabric.Canvas();\r\n  exportCanvas.setDimensions({\r\n    width: canvas.getWidth() / canvas.getZoom(),\r\n    height: canvas.getHeight() / canvas.getZoom(),\r\n  });\r\n  exportCanvas.backgroundColor = canvas.backgroundColor;\r\n  handleLayers(exportCanvas, canvas, setElements, setVideoInfo);\r\n};\r\n","const randomUUID = () =>\r\n  Math.random().toString(36).substring(2, 15) +\r\n  Math.random().toString(36).substring(2, 15);\r\n\r\nexport default randomUUID;\r\n","const rgbaTohex = (color) => {\r\n  let rgb = color\r\n      .replace(/\\s/g, '')\r\n      .match(/^rgba?\\((\\d+),(\\d+),(\\d+),?([^,\\s)]+)?/i),\r\n    alpha = ((rgb && rgb[4]) || '').trim(),\r\n    hex = rgb\r\n      ? (rgb[1] | (1 << 8)).toString(16).slice(1) +\r\n        (rgb[2] | (1 << 8)).toString(16).slice(1) +\r\n        (rgb[3] | (1 << 8)).toString(16).slice(1)\r\n      : color;\r\n\r\n  let a = alpha !== '' ? alpha : '01';\r\n\r\n  a = ((+a * 255) | (1 << 8)).toString(16).slice(1);\r\n  hex = hex + a;\r\n  return hex;\r\n};\r\n\r\nexport default rgbaTohex;\r\n","import generateUUID from '../../../utils/generateRandomUUID';\r\nimport rgbaToHex from './rgbaToHex';\r\n\r\nexport const prepareBreaks = (cuts, endTime, setBreaks) => {\r\n  let videoBreaks = [];\r\n  let prev = null;\r\n  for (let i = 0; i < cuts.length; i++) {\r\n    let el = cuts[i];\r\n    if (i === 0 && el.start !== 0) {\r\n      videoBreaks.push({ start: 0, end: el.start });\r\n    } else if (el.start !== 0) {\r\n      videoBreaks.push({ start: prev, end: el.start });\r\n    }\r\n    prev = el.end;\r\n\r\n    if (i === cuts.length - 1 && el.end !== endTime) {\r\n      videoBreaks.push({ start: el.end, end: endTime });\r\n    }\r\n  }\r\n  setBreaks(videoBreaks);\r\n};\r\n\r\n\r\nconst getSubConfig = (object, subState) => {\r\n  let zoom = object.canvas.getZoom();\r\n  let width = object.canvas.getWidth() / zoom;\r\n  let height = object.canvas.getHeight() / zoom;\r\n  let x = (object.left * 100) / width;\r\n  let y = (object.top * 100) / height;\r\n  return {\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    objectWidth: object.width,\r\n    objectHeight: object.height,\r\n    xCoordinate: object.left,\r\n    yCoordinate: object.top,\r\n    top: object.lineCoords.tl.y,\r\n    left: object.lineCoords.tl.x,\r\n    fontSize: subState.fontSize,\r\n    fontColor: rgbaToHex(subState.fill),\r\n    fontFamily: subState.fontFamily,\r\n    backgroundColor: rgbaToHex(subState.backgroundColor),\r\n    textAlign: 'center',\r\n    padding: object.paddingY !== 0 ? object.paddingY / 2 : 0,\r\n    fontWeight: subState.fontWeight,\r\n    fontStyle: subState.fontStyle,\r\n  };\r\n}\r\n\r\nexport const prepareSubs = (subList, object, subState, setSubs) => {\r\n  let config = getSubConfig(object, subState);\r\n  console.log(config);\r\n  // let prev = null;\r\n  let deleteStart = 0;\r\n  let deleteEnd = 0;\r\n  let isLastDeleted = false;\r\n  let captions = [];\r\n\r\n  let subNode = subList.head;\r\n  for (let i = 0; i < subList.length; i++) {\r\n    let sub = subNode.val;\r\n    if (sub.active && isLastDeleted) {\r\n      let _id = generateUUID();\r\n      isLastDeleted = false;\r\n      captions.push({\r\n        start: deleteStart,\r\n        end: deleteEnd,\r\n        active: false,\r\n        silence: true,\r\n        _id,\r\n      });\r\n    } else if (!sub.active && !isLastDeleted) {\r\n      isLastDeleted = true;\r\n      deleteStart = sub.start;\r\n      deleteEnd = sub.end;\r\n    } else if (!sub.active && isLastDeleted) {\r\n      deleteEnd = sub.end;\r\n    }\r\n\r\n    if (sub.silence && sub.active) {\r\n      let _id = generateUUID();\r\n      captions.push({\r\n        start: sub.start,\r\n        end: sub.end,\r\n        silence: true,\r\n        _id,\r\n        active: true,\r\n      });\r\n    } else if (sub.active) {\r\n      let _id = generateUUID();\r\n      let text = '';\r\n      for (let i = 0; i < sub.words.length; i++) {\r\n        let word = sub.words[i];\r\n        text += word.text;\r\n      }\r\n      captions.push({\r\n        start: sub.start,\r\n        end: sub.end,\r\n        text,\r\n        silence: false,\r\n        active: true,\r\n        _id,\r\n      });\r\n    }\r\n    subNode = subNode.next;\r\n  }\r\n\r\n  if (isLastDeleted) {\r\n    let _id = generateUUID();\r\n    captions.push({\r\n      start: deleteStart,\r\n      end: deleteEnd,\r\n      active: false,\r\n      silence: true,\r\n      _id,\r\n    });\r\n  }\r\n  let subtitles = { captions, config };\r\n  console.log(subtitles);\r\n  setSubs(subtitles);\r\n};\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useUploadAsset = () => {\r\n  const [isUploadingAsset, setIsUploadingAsset] = useState(false);\r\n  const [uploadResponse, setUploadResponse] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosUploadAsset = useCallback((formData) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .post('/images', formData)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const uploadAsset = useCallback(\r\n    async (formData) => {\r\n      setUploadResponse(null);\r\n      setIsUploadingAsset(true);\r\n      try {\r\n        const res = await axiosUploadAsset(formData);\r\n        if (isMounted.current) setUploadResponse(res.data);\r\n        console.log(res);\r\n      } catch (uploadError) {\r\n        console.log('Error Uploading Asset', uploadError);\r\n        if (isMounted.current) setUploadResponse('error');\r\n      } finally {\r\n        if (isMounted.current) setIsUploadingAsset(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosUploadAsset]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isUploadingAsset, uploadAsset, uploadResponse };\r\n};\r\n\r\nexport default useUploadAsset;\r\n","import React, { useContext, useRef, useEffect } from 'react';\r\nimport styles from './ImageDropdown.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport useUploadAsset from '../../../hooks/useUploadAsset';\r\nimport Spinner from '../../../components/Spinner2/Spinner';\r\n\r\nconst ImageDropdown = ({ assets, setAssets }) => {\r\n  const { editorDispatch } = useContext(EditorContext);\r\n  const { isUploadingAsset, uploadAsset, uploadResponse } = useUploadAsset();\r\n  const fileInput = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (uploadResponse && uploadResponse !== 'error') {\r\n      setAssets((prevState) => [...prevState, uploadResponse.image]);\r\n    }\r\n  }, [uploadResponse, setAssets]);\r\n\r\n  const clickHandler = (e) => {\r\n    let imageType = 'customImage';\r\n    let src = e.currentTarget.src;\r\n    let splitSrc = src.split('.');\r\n    if (splitSrc[splitSrc.length - 1] === 'svg') imageType = 'svg';\r\n    editorDispatch({ type: 'setImageToAdd', data: { type: imageType, src } });\r\n  };\r\n\r\n  const inputChangeHandler = () => {\r\n    if (fileInput.current.files[0]) {\r\n      let file = fileInput.current.files[0];\r\n      let formData = new FormData();\r\n      formData.append('image', file);\r\n      uploadAsset(formData);\r\n    }\r\n  };\r\n\r\n  const uploadClickHandler = () => {\r\n    fileInput.current.click();\r\n  };\r\n\r\n  const oddArr = assets ? assets.filter((_, i) => (i + 1) % 2 !== 0) : null;\r\n  const evenArr = assets ? assets.filter((_, i) => (i + 1) % 2 === 0) : null;\r\n\r\n  let assetsContent = assets ? (\r\n    <div className={styles.Images}>\r\n      <div className={styles.Column}>\r\n        {oddArr.map((el, i) => {\r\n          return (\r\n            <div key={el._id} className={styles.ImageContainer}>\r\n              <img\r\n                className={styles.Image}\r\n                src={el.image_url}\r\n                alt='asset'\r\n                onClick={clickHandler}\r\n              />\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <div className={styles.Column}>\r\n        {evenArr.map((el, i) => {\r\n          return (\r\n            <div key={el._id} className={styles.ImageContainer}>\r\n              <img\r\n                className={styles.Image}\r\n                src={el.image_url}\r\n                alt='asset'\r\n                onClick={clickHandler}\r\n              />\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n\r\n  return (\r\n    <div className={styles.Dropdown}>\r\n      <div className={styles.UplaodButtonContainer}>\r\n        <button onClick={uploadClickHandler} className={styles.UploadButton}>\r\n          Upload image\r\n        </button>\r\n        <input\r\n          accept='image/png, image/gif, image/jpeg, image/svg+xml'\r\n          className={styles.FileInput}\r\n          ref={fileInput}\r\n          type='file'\r\n          onChange={inputChangeHandler}\r\n        />\r\n        {isUploadingAsset ? (\r\n          <Spinner\r\n            style={{\r\n              width: '25px',\r\n              height: '25px',\r\n              margin: '25px auto',\r\n              position: 'absolute',\r\n              right: '20px',\r\n            }}\r\n          />\r\n        ) : null}\r\n      </div>\r\n      {!assets ? (\r\n        <Spinner style={{ width: '50px', height: '50px' }} />\r\n      ) : (\r\n        assetsContent\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageDropdown;\r\n","export default __webpack_public_path__ + \"static/media/square.1a317c4f.svg\";","export default __webpack_public_path__ + \"static/media/circle.0bedfa10.svg\";","export default __webpack_public_path__ + \"static/media/triangle.84433629.svg\";","export default __webpack_public_path__ + \"static/media/line.60fd0829.svg\";","import React, { useContext } from 'react';\r\nimport styles from './ShapeDropdown.module.css';\r\nimport square from '../../../assets/editor/square.svg';\r\nimport circle from '../../../assets/editor/circle.svg';\r\nimport triangle from '../../../assets/editor/triangle.svg';\r\nimport line from '../../../assets/editor/line.svg';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\n\r\nconst ShapeDropdown = () => {\r\n  const { editorDispatch } = useContext(EditorContext);\r\n  const clickHandler = (e) => {\r\n    if (e.target.tagName === 'IMG') {\r\n      editorDispatch({ type: 'setShapeToAdd', data: e.target.id });\r\n    } else if (e.target.classList.contains(styles.ShapeContainer)) {\r\n      editorDispatch({ type: 'setShapeToAdd', data: e.target.childNodes[0].id });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Dropdown} onClick={clickHandler}>\r\n      <div className={styles.ShapeContainer}>\r\n        <img className={styles.Shape} src={square} alt='square' id='square' />\r\n      </div>\r\n      <div className={styles.ShapeContainer}>\r\n        <img className={styles.Shape} src={circle} alt='circle' id='circle' />\r\n      </div>\r\n      <div className={styles.ShapeContainer}>\r\n        <img\r\n          className={styles.Shape}\r\n          src={triangle}\r\n          alt='triangle'\r\n          id='triangle'\r\n        />\r\n      </div>\r\n      <div className={styles.ShapeContainer}>\r\n        <img className={styles.Shape} src={line} alt='line' id='line' />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShapeDropdown;\r\n","var _g, _defs;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSubtitlesOff(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip0)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.6488 2.35025C10.515 -0.783537 5.48507 -0.784599 2.35025 2.35025C-0.783537 5.48401 -0.784599 10.514 2.35025 13.6488C5.48401 16.7826 10.514 16.7836 13.6488 13.6488C16.7826 10.515 16.7836 5.48507 13.6488 2.35025ZM7.99951 15.0606C4.106 15.0606 0.938405 11.893 0.938405 7.99951C0.938405 4.106 4.106 0.938405 7.99951 0.938405C11.893 0.938405 15.0606 4.106 15.0606 7.99951C15.0606 11.893 11.893 15.0606 7.99951 15.0606Z\",\n    fill: \"current\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.3012 5.40529C10.1075 5.23348 9.81135 5.25114 9.63954 5.44475C9.46773 5.63834 9.48538 5.93456 9.679 6.10637C10.2203 6.58675 10.5307 7.27692 10.5307 7.99997C10.5307 9.39544 9.39543 10.5307 7.99996 10.5307C6.60448 10.5307 5.46921 9.39544 5.46921 7.99997C5.46921 7.26977 5.7848 6.57506 6.33504 6.09394C6.52987 5.92357 6.54974 5.6275 6.37934 5.43263C6.20897 5.23776 5.9129 5.21796 5.71803 5.38833C4.96421 6.04745 4.53186 6.99935 4.53186 7.99997C4.53186 9.91228 6.08762 11.468 7.99993 11.468C9.91224 11.468 11.468 9.91228 11.468 7.99997C11.468 7.0091 11.0427 6.06341 10.3012 5.40529Z\",\n    fill: \"current\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.00003 7.21905C8.25885 7.21905 8.46868 7.00921 8.46868 6.75039V4.25088C8.46868 3.99206 8.25885 3.78223 8.00003 3.78223C7.7412 3.78223 7.53137 3.99206 7.53137 4.25088V6.75039C7.53137 7.00925 7.7412 7.21905 8.00003 7.21905Z\",\n    fill: \"current\"\n  }))), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip0\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 16,\n    height: 16,\n    fill: \"white\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSubtitlesOff);\nexport default __webpack_public_path__ + \"static/media/subtitlesOff.66e0babc.svg\";\nexport { ForwardRef as ReactComponent };","import { fabric } from 'fabric';\r\n\r\nfabric.RectCropBox = fabric.util.createClass(fabric.Rect);\r\n\r\nfabric.RectCropBox.prototype.setControlsVisibility({\r\n  mtr: false,\r\n});\r\n\r\nfabric.RectCropBox.prototype.render = (function (render) {\r\n  return function (ctx) {\r\n    render.apply(this, arguments);\r\n    this._renderControls(ctx);\r\n    if (!this.canvas._activeObject) this.canvas._activeObject = this;\r\n  };\r\n})(fabric.RectCropBox.prototype.render);","import React, { useContext } from 'react';\r\nimport styles from './SubtitlesDropdown.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport { ReactComponent as SubtitlesOn } from '../../../assets/editor/subtitlesOn.svg';\r\nimport { ReactComponent as SubtitlesOff } from '../../../assets/editor/subtitlesOff.svg';\r\n\r\nconst SubtitlesDropdown = ({ words }) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const clickHandler = (e) => {\r\n    if (words) {\r\n      let data = true;\r\n      if (e.currentTarget.id === 'subOff') data = false;\r\n      editorDispatch({ type: 'setIsSubtitles', data });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Dropdown}>\r\n      <p className={styles.Text}>Subtitles</p>\r\n      <div className={styles.Buttons}>\r\n        <div\r\n          className={[\r\n            styles.Button,\r\n            !editorState.isSubtitles ? styles.Active : null,\r\n          ].join(' ')}\r\n          id='subOff'\r\n          onClick={clickHandler}\r\n        >\r\n          <SubtitlesOff\r\n            fill={!editorState.isSubtitles ? '#6F7BD0' : '#000000'}\r\n          />\r\n          <p className={styles.ButtonText}>Off</p>\r\n        </div>\r\n        <div\r\n          className={[\r\n            styles.Button,\r\n            editorState.isSubtitles ? styles.Active : null,\r\n          ].join(' ')}\r\n          id='subOn'\r\n          onClick={clickHandler}\r\n        >\r\n          <SubtitlesOn fill={editorState.isSubtitles ? '#6F7BD0' : '#000000'} />\r\n          <p className={styles.ButtonText}>On</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubtitlesDropdown;\r\n","export default __webpack_public_path__ + \"static/media/addText.3a1cc6fe.svg\";","export default __webpack_public_path__ + \"static/media/addImage.5167341a.svg\";","export default __webpack_public_path__ + \"static/media/addShape.efc88c00.svg\";","export default __webpack_public_path__ + \"static/media/subtitles.185e9c1f.svg\";","/* eslint-disable jsx-a11y/img-redundant-alt */\r\nimport React, { useContext } from 'react';\r\nimport styles from './DesignControls.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport Backdrop from '../../../components/Backdrop/Backdrop';\r\nimport ImageDropdown from '../ImageDropdown/ImageDropdown';\r\nimport ShapeDropdown from '../ShapeDropdown/ShapeDropdown';\r\nimport SubtitlesDropdown from '../SubtitlesDropdown/SubtitlesDropdown';\r\nimport addText from '../../../assets/editor/addText.svg';\r\nimport addImage from '../../../assets/editor/addImage.svg';\r\nimport addShape from '../../../assets/editor/addShape.svg';\r\nimport subtitles from '../../../assets/editor/subtitles.svg';\r\n\r\nconst DesignControls = ({ canvas, words, assets, setAssets }) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n\r\n  const clickHandler = (e) => {\r\n    if (\r\n      canvas &&\r\n      !editorState.shouldCropMedia &&\r\n      !editorState.isLoadingTemplate\r\n    ) {\r\n      let type = '';\r\n      let id = e.currentTarget.id;\r\n      if (id === 'addText') type = 'setShouldAddText';\r\n      else if (id === 'addImage') type = 'setIsImageDropdown';\r\n      else if (id === 'addShape') type = 'setIsShapeDropdown';\r\n      else if (id === 'subtitles') type = 'setIsSubtitlesDropdown';\r\n      editorDispatch({ type, data: true });\r\n      if (editorState.isCropMode) {\r\n        editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.ControlsContainer}>\r\n      <div\r\n        className={styles.AddTextContainer}\r\n        id='addText'\r\n        onClick={clickHandler}\r\n      >\r\n        <img src={addText} alt='add text' />\r\n        <div className={styles.HoverContent}>\r\n          <div className={styles.HoverTriangle}></div>\r\n          <p className={styles.HoverText}>Add text</p>\r\n        </div>\r\n      </div>\r\n      <div className={styles.DesignControl}>\r\n        <div\r\n          className={styles.AddImageContainer}\r\n          id='addImage'\r\n          onClick={clickHandler}\r\n        >\r\n          <img src={addImage} alt='add image' />\r\n          <div className={styles.HoverContent}>\r\n            <div className={styles.HoverTriangle}></div>\r\n            <p className={styles.HoverText}>Add image</p>\r\n          </div>\r\n        </div>\r\n        {editorState.isImageDropdown ||\r\n        editorState.shouldReplaceImage ||\r\n        editorState.shouldAddCanvasBgImage ? (\r\n          <>\r\n            <Backdrop />\r\n            <div className={styles.ImageDropdown}>\r\n              <ImageDropdown assets={assets} setAssets={setAssets} />\r\n            </div>\r\n          </>\r\n        ) : null}\r\n      </div>\r\n\r\n      <div className={styles.DesignControl}>\r\n        <div\r\n          className={styles.AddShapeContainer}\r\n          id='addShape'\r\n          onClick={clickHandler}\r\n        >\r\n          <img src={addShape} alt='add shape' />\r\n          <div className={styles.HoverContent}>\r\n            <div className={styles.HoverTriangle}></div>\r\n            <p className={styles.HoverText}>Add shape</p>\r\n          </div>\r\n        </div>\r\n        {editorState.isShapeDropdown ? (\r\n          <>\r\n            <Backdrop />\r\n            <div className={styles.ShapeDropdown}>\r\n              <ShapeDropdown />\r\n            </div>\r\n          </>\r\n        ) : null}\r\n      </div>\r\n      <div className={styles.DesignControl}>\r\n        <div\r\n          className={styles.AddShapeContainer}\r\n          id='subtitles'\r\n          onClick={clickHandler}\r\n        >\r\n          <img src={subtitles} alt='subtitles' />\r\n          <div className={styles.HoverContent}>\r\n            <div className={styles.HoverTriangle}></div>\r\n            <p className={styles.HoverText}>Subtitles</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {editorState.isSubtitlesDropdown ? (\r\n        <>\r\n          <Backdrop />\r\n          <div className={styles.SubtitlesDropdown}>\r\n            <SubtitlesDropdown words={words} />\r\n          </div>\r\n        </>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DesignControls;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetAssets = () => {\r\n  const [isGettingAssets, setIsGettingAssets] = useState(false);\r\n  const [assets, setAssets] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetAssets = useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get('/images')\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getAssets = useCallback(async () => {\r\n    setAssets(null);\r\n    setIsGettingAssets(true);\r\n    try {\r\n      const res = await axiosGetAssets();\r\n      if (isMounted.current) setAssets(res.data);\r\n      console.log(res);\r\n    } catch (uploadError) {\r\n      console.log('Error Getting Assets', uploadError);\r\n    } finally {\r\n      if (isMounted.current) setIsGettingAssets(false);\r\n      return;\r\n    }\r\n  }, [axiosGetAssets]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isGettingAssets, getAssets, assets, setAssets };\r\n};\r\n\r\nexport default useGetAssets;\r\n","import React, {\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useRef,\r\n} from 'react';\r\nimport styles from './Navigation.module.css';\r\nimport EditorContext from '../../contexts/EditorContext';\r\nimport { prepareCanvas } from './utils/prepareCanvas';\r\nimport { prepareBreaks, prepareSubs } from './utils/prepareBreaksAndSubs';\r\nimport DesignControls from './DesignControls/DesignControls';\r\nimport Navbar from '../../components/Navbar/Navbar';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Spinner from '../../components/Spinner2/Spinner';\r\nimport useGetAssets from '../../hooks/useGetAssets';\r\nimport { fabric } from 'fabric';\r\nimport { cacheAssets } from '../../utils/cacheAssets';\r\n\r\nconst Navigation = ({\r\n  canvas,\r\n  videoRef,\r\n  videoCuts,\r\n  duration,\r\n  subList,\r\n  fabricSub,\r\n  setPreviewUrl,\r\n  videoData,\r\n  isUpdatingProject,\r\n  isDownloading,\r\n  downloadVideo,\r\n  isDownloadDataUploaded,\r\n  setIsDownloadDataUploaded,\r\n  words,\r\n  setUserAssets,\r\n}) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { getAssets, assets, setAssets } = useGetAssets();\r\n  const [shouldFetchAssets, setShouldFetchAssets] = useState(true);\r\n  const [downloadData, setDownloadData] = useState(null);\r\n  const [elements, setElements] = useState(null);\r\n  const [videoInfo, setVideoInfo] = useState(null);\r\n  const [breaks, setBreaks] = useState(null);\r\n  const [subs, setSubs] = useState(null);\r\n  const [resizeInfo, setResizeInfo] = useState(null);\r\n  const history = useHistory();\r\n  const isMounted = useRef(false);\r\n  const downloadRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (isDownloadDataUploaded) {\r\n      history.push(`/editor/progress/${videoData.id}`);\r\n      // history.push(`/preview/${videoData.id}`);\r\n    }\r\n  }, [isDownloadDataUploaded, history, videoData]);\r\n\r\n  useEffect(() => {\r\n    if (downloadData) {\r\n      downloadVideo(downloadData);\r\n      setDownloadData(null);\r\n    }\r\n  }, [downloadData, downloadVideo, history, videoData]);\r\n\r\n  useEffect(() => {\r\n    if (videoData && videoData.canvas) {\r\n      let assets = videoData.canvas.objects.filter(\r\n        (obj) => obj.type === 'customImage'\r\n      );\r\n      cacheAssets(assets, setUserAssets, isMounted);\r\n    } else if (videoData) setUserAssets([]);\r\n  }, [setUserAssets, videoData]);\r\n\r\n  useEffect(() => {\r\n    if (shouldFetchAssets) {\r\n      setShouldFetchAssets(false);\r\n      getAssets();\r\n    }\r\n  }, [shouldFetchAssets, getAssets]);\r\n\r\n  // const imageDownloadHandler = useCallback((elArr) => {\r\n  //   for (let i = 0; i < elArr.length; i++) {\r\n  //     let el = elArr[i];\r\n  //     downloadRef.current.href = el.image;\r\n  //     downloadRef.current.download = `design${i + 1}.png`;\r\n  //     downloadRef.current.click();\r\n  //   }\r\n  //   setElements(null);\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   if (elements) imageDownloadHandler(elements);\r\n  // }, [elements, imageDownloadHandler]);\r\n\r\n  const downloadClickHandler = () => {\r\n    if (editorState.isCropMode) {\r\n      editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n    } else if (canvas && !isDownloading && !isUpdatingProject && words) {\r\n      videoRef.current.pause();\r\n      prepareBreaks(videoCuts, duration, setBreaks);\r\n      if (fabricSub && subList) {\r\n        prepareSubs(subList, fabricSub, editorState.subtitlesState, setSubs);\r\n      } else setSubs({ captions: [], config: {} });\r\n      prepareCanvas(canvas, setElements, setVideoInfo);\r\n      setResizeInfo({\r\n        type: editorState.canvasState.resize,\r\n        w: editorState.canvasState.videoWidth,\r\n        h: editorState.canvasState.videoHeight,\r\n      });\r\n    }\r\n  };\r\n\r\n  const saveTemplateClickHandler = () => {\r\n    let pxRatio = 1;\r\n    let newCanvas = new fabric.Canvas();\r\n    let jsonCanvas = JSON.stringify(canvas);\r\n    let zoom = canvas.getZoom();\r\n    newCanvas.loadFromJSON(jsonCanvas, () => {\r\n      newCanvas.setZoom(pxRatio);\r\n      newCanvas.setDimensions({\r\n        width: (canvas.getWidth() / zoom) * pxRatio,\r\n        height: (canvas.getHeight() / zoom) * pxRatio,\r\n      });\r\n      let image = newCanvas.toDataURL({\r\n        format: 'image/jpg',\r\n        quality: 1,\r\n      });\r\n      downloadRef.current.href = image;\r\n      downloadRef.current.download = 'canvas.png';\r\n      downloadRef.current.click();\r\n    });\r\n  };\r\n\r\n  // const downloadClickHandler2 = () => {\r\n  //   setPreviewUrl(videoData.url);\r\n  // };\r\n\r\n  const prepareData = useCallback(\r\n    (elementsArr, videoData, breaksData, subsData, resize, id) => {\r\n      let elements = [...elementsArr];\r\n      let data = {\r\n        id,\r\n        resize: { ...resize },\r\n        video: { ...videoData },\r\n        elements,\r\n        breaks: [...breaksData],\r\n        subtitles: { ...subsData },\r\n      };\r\n      console.log(data);\r\n      let jsonData = JSON.stringify(data);\r\n      setDownloadData(jsonData);\r\n      setElements(null);\r\n      setResizeInfo(null);\r\n      setBreaks(null);\r\n      setVideoInfo(null);\r\n      setSubs(null);\r\n    },\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (elements && videoInfo && breaks && subs && resizeInfo) {\r\n      prepareData(elements, videoInfo, breaks, subs, resizeInfo, videoData.id);\r\n    }\r\n  }, [elements, videoInfo, prepareData, breaks, subs, videoData, resizeInfo]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return (\r\n    <Navbar videoData={videoData}>\r\n      <div className={styles.Navigation}>\r\n        {canvas ? (\r\n          <DesignControls\r\n            canvas={canvas}\r\n            words={words}\r\n            assets={assets}\r\n            setAssets={setAssets}\r\n          />\r\n        ) : null}\r\n        {/* <button\r\n              id='downloadDesign'\r\n              className={styles.DownloadButton}\r\n              onClick={saveTemplateClickHandler}\r\n              style={{ marginRight: '0.7rem' }}\r\n            >\r\n              {!isDownloading ? 'Save Template' : 'Saving...'}\r\n            </button> */}\r\n        {isUpdatingProject ? (\r\n          <Spinner\r\n            style={{\r\n              width: '1.25rem',\r\n              height: '1.25rem',\r\n              marginRight: '10px',\r\n            }}\r\n          />\r\n        ) : (\r\n          <div\r\n            style={{\r\n              width: '1.25rem',\r\n              height: '1.25rem',\r\n              marginRight: '10px',\r\n            }}\r\n          ></div>\r\n        )}\r\n        {canvas && !editorState.isLoadingTemplate ? (\r\n          <button\r\n            id='downloadDesign'\r\n            className={styles.DownloadButton}\r\n            onClick={downloadClickHandler}\r\n          >\r\n            {!isDownloading ? 'Download' : 'Loading...'}\r\n          </button>\r\n        ) : null}\r\n\r\n        <a className={styles.DownloadLink} ref={downloadRef} href='/'>\r\n          Download\r\n        </a>\r\n      </div>\r\n    </Navbar>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import { useReducer } from 'react';\r\n\r\nconst initialState = {\r\n  shouldTriggerCanvasUpdate: true,\r\n  shouldTriggerWordsUpdate: false,\r\n  shouldSaveTemplate: false,\r\n  isLoadingTemplate: false,\r\n  canvasState: {\r\n    initialWidth: 0,\r\n    initialHeight: 0,\r\n    videoHeight: 0,\r\n    videoWidth: 0,\r\n    containerWidth: 0,\r\n    containerHeight: 0,\r\n    resize: 'original',\r\n    width: 0,\r\n    height: 0,\r\n    backgroundColor: 'rgba(255,255,255,1)',\r\n    shouldUpdateCanvas: false,\r\n    shouldUpdateCanvasSize: false,\r\n    shouldСalculateCanvasSize: false,\r\n  },\r\n  shapeToAdd: null,\r\n  imageToAdd: null,\r\n  currentCoords: null,\r\n  showToolbar: false,\r\n  shapeState: {\r\n    fill: 'rgba(196,196,196,1)',\r\n    stroke: 'rgba(255,255,255,1)',\r\n    strokeWidth: 0,\r\n    rx: 0,\r\n    ry: 0,\r\n  },\r\n  imageState: {\r\n    cornerRadius: 0,\r\n    isSvg: false,\r\n  },\r\n  videoState: {\r\n    cornerRadius: 0,\r\n    stroke: 'rgba(255,255,255,1)',\r\n    strokeWidth: 0,\r\n  },\r\n  isSubtitles: false,\r\n  isCropMode: false,\r\n  cropType: 'rect',\r\n  shouldCropMedia: false,\r\n  isImageDropdown: false,\r\n  isSubtitlesDropdown: false,\r\n  isShapeDropdown: false,\r\n  isTemplatesDropdown: false,\r\n  isResizeDropdown: false,\r\n  isCanvasBgColorDropdown: false,\r\n  isDownloadDropdown: false,\r\n  shouldAddText: false,\r\n  shouldUpdateText: false,\r\n  shouldUpdateSubtitles: false,\r\n  shouldUpdateShape: false,\r\n  shouldUpdateImage: false,\r\n  shouldUpdateVideo: false,\r\n  shouldReplaceImage: false,\r\n  currentObject: {\r\n    type: '',\r\n    object: null,\r\n  },\r\n  textState: {\r\n    fontFamily: 'Inter',\r\n    fontStyle: 'Normal',\r\n    fontWeight: 'Normal',\r\n    fontSize: 30,\r\n    fill: 'rgba(0,0,0,1)',\r\n    textAlign: 'left',\r\n  },\r\n  subtitlesState: {\r\n    fontFamily: 'Inter',\r\n    fontStyle: 'Normal',\r\n    fontWeight: 'Normal',\r\n    fontSize: 24,\r\n    fill: 'rgba(0,0,0,1)',\r\n    backgroundColor: 'rgba(255,255,255,1)',\r\n  },\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'setShouldTriggerCanvasUpdate':\r\n      return { ...state, shouldTriggerCanvasUpdate: action.data };\r\n    case 'setShouldTriggerWordsUpdate':\r\n      return { ...state, shouldTriggerWordsUpdate: action.data };\r\n    case 'setShouldSaveTemplate':\r\n      return { ...state, shouldSaveTemplate: action.data };\r\n    case 'setIsLoadingTemplate':\r\n      return { ...state, isLoadingTemplate: action.data };\r\n    case 'setCanvasState':\r\n      return { ...state, canvasState: action.data };\r\n    case 'setIsDownloadDropdown':\r\n      return { ...state, isDownloadDropdown: action.data };\r\n    case 'setIsSubtitles':\r\n      return { ...state, isSubtitles: action.data, isSubtitlesDropdown: false };\r\n    case 'setIsCropMode':\r\n      return { ...state, isCropMode: action.data };\r\n    case 'setCropType':\r\n      return { ...state, isCropMode: true, cropType: action.data };\r\n    case 'setShouldCropMedia':\r\n      return { ...state, shouldCropMedia: action.data };\r\n    case 'setIsImageDropdown':\r\n      return { ...state, isImageDropdown: action.data };\r\n    case 'setIsSubtitlesDropdown':\r\n      return { ...state, isSubtitlesDropdown: action.data };\r\n    case 'setIsTemplatesDropdown':\r\n      return { ...state, isTemplatesDropdown: action.data };\r\n    case 'setIsShapeDropdown':\r\n      return { ...state, isShapeDropdown: action.data };\r\n    case 'setIsResizeDropdown':\r\n      return { ...state, isResizeDropdown: action.data };\r\n    case 'setIsCanvasBgColorDropdown':\r\n      return { ...state, isCanvasBgColorDropdown: action.data };\r\n    case 'setCurrentCoords':\r\n      return { ...state, currentCoords: action.data };\r\n    case 'setShowToolbar':\r\n      return { ...state, showToolbar: action.data };\r\n    case 'setShowCanvasToolbar':\r\n      return { ...state, showCanvasToolbar: action.data };\r\n    case 'setShouldAddText':\r\n      return { ...state, shouldAddText: action.data };\r\n    case 'setShouldUpdateText':\r\n      return { ...state, shouldUpdateText: action.data };\r\n    case 'setShouldUpdateSubtitles':\r\n      return { ...state, shouldUpdateSubtitles: action.data };\r\n    case 'setShouldUpdateShape':\r\n      return { ...state, shouldUpdateShape: action.data };\r\n    case 'setShouldUpdateImage':\r\n      return { ...state, shouldUpdateImage: action.data };\r\n    case 'setShouldUpdateVideo':\r\n      return { ...state, shouldUpdateVideo: action.data };\r\n    case 'setCurrentObject':\r\n      return { ...state, currentObject: action.data };\r\n    case 'setShapeToAdd':\r\n      return { ...state, shapeToAdd: action.data, isShapeDropdown: false };\r\n    case 'setImageToAdd':\r\n      return { ...state, imageToAdd: action.data, isImageDropdown: false };\r\n    case 'setShapeState':\r\n      return { ...state, shapeState: { ...action.data } };\r\n    case 'setImageState':\r\n      return { ...state, imageState: { ...action.data } };\r\n    case 'setVideoState':\r\n      return { ...state, videoState: { ...action.data } };\r\n    case 'setTextState':\r\n      return { ...state, textState: { ...action.data } };\r\n    case 'setSubtitlesState':\r\n      return { ...state, subtitlesState: { ...action.data } };\r\n    case 'setShouldReplaceImage':\r\n      return { ...state, shouldReplaceImage: action.data };\r\n    case 'setShouldUpdateCanvas':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldUpdateCanvas: action.data,\r\n        },\r\n      };\r\n    case 'setShouldUpdateCanvasSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldUpdateCanvasSize: action.data,\r\n        },\r\n      };\r\n    case 'setShouldСalculateCanvasSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldСalculateCanvasSize: action.data,\r\n        },\r\n      };\r\n    case 'setCanvasBackgroundColor':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldUpdateCanvas: true,\r\n          backgroundColor: action.data,\r\n        },\r\n      };\r\n    case 'setCanvasSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldUpdateCanvasSize: true,\r\n          width: action.data.width,\r\n          height: action.data.height,\r\n        },\r\n      };\r\n    case 'setVideoSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldСalculateCanvasSize: true,\r\n          videoWidth: action.data.width,\r\n          videoHeight: action.data.height,\r\n          resize: action.data.resize,\r\n        },\r\n      };\r\n    case 'setContainerSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldСalculateCanvasSize: true,\r\n          containerWidth: action.data.width,\r\n          containerHeight: action.data.height,\r\n        },\r\n      };\r\n    case 'setCanvasInitialSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          initialWidth: action.data.initialWidth,\r\n          initialHeight: action.data.initialHeight,\r\n        },\r\n      };\r\n    case 'setImageCornerRadius':\r\n      return {\r\n        ...state,\r\n        shouldUpdateImage: true,\r\n        imageState: {\r\n          ...state.imageState,\r\n          cornerRadius: action.data,\r\n        },\r\n      };\r\n    case 'setVideoCornerRadius':\r\n      return {\r\n        ...state,\r\n        shouldUpdateVideo: true,\r\n        videoState: {\r\n          ...state.videoState,\r\n          strokeWidth: 0,\r\n          cornerRadius: action.data,\r\n        },\r\n      };\r\n    case 'setVideoStroke':\r\n      return {\r\n        ...state,\r\n        shouldUpdateVideo: true,\r\n        videoState: {\r\n          ...state.videoState,\r\n          stroke: action.data,\r\n        },\r\n      };\r\n    case 'setVideoStrokeWidth':\r\n      return {\r\n        ...state,\r\n        shouldUpdateVideo: true,\r\n        videoState: {\r\n          ...state.videoState,\r\n          strokeWidth: action.data,\r\n          cornerRadius: 0,\r\n        },\r\n      };\r\n    case 'setShapeRadius':\r\n      return {\r\n        ...state,\r\n        shouldUpdateShape: true,\r\n        shapeState: {\r\n          ...state.shapeState,\r\n          rx: action.data,\r\n          ry: action.data,\r\n        },\r\n      };\r\n    case 'setShapeFill':\r\n      return {\r\n        ...state,\r\n        shouldUpdateShape: true,\r\n        shapeState: {\r\n          ...state.shapeState,\r\n          fill: action.data,\r\n        },\r\n      };\r\n    case 'setShapeStroke':\r\n      return {\r\n        ...state,\r\n        shouldUpdateShape: true,\r\n        shapeState: {\r\n          ...state.shapeState,\r\n          stroke: action.data,\r\n        },\r\n      };\r\n    case 'setShapeStrokeWidth':\r\n      return {\r\n        ...state,\r\n        shouldUpdateShape: true,\r\n        shapeState: {\r\n          ...state.shapeState,\r\n          strokeWidth: action.data,\r\n        },\r\n      };\r\n\r\n    case 'setFontFamily':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          fontFamily: action.data,\r\n        },\r\n      };\r\n    case 'setFontStyle':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          fontStyle: action.data,\r\n        },\r\n      };\r\n    case 'setFontWeight':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          fontWeight: action.data,\r\n        },\r\n      };\r\n    case 'setFontSize':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          fontSize: action.data,\r\n        },\r\n      };\r\n    case 'setTextFill':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          fill: action.data,\r\n        },\r\n      };\r\n    case 'setTextAlign':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          textAlign: action.data,\r\n        },\r\n      };\r\n\r\n    case 'setSubtitlesbackgroundColor':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          backgroundColor: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesFontFamily':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          fontFamily: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesFontStyle':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          fontStyle: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesFontWeight':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          fontWeight: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesFontSize':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          fontSize: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesTextFill':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          fill: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesTextAlign':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          textAlign: action.data,\r\n        },\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst useEditorState = () => {\r\n  const [editorState, editorDispatch] = useReducer(reducer, initialState);\r\n  return [editorState, editorDispatch];\r\n};\r\n\r\nexport default useEditorState;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetVideo = () => {\r\n  const [isGettingVideo, setIsGettingVideo] = useState(false);\r\n  const [info, setInfo] = useState(null);\r\n  const [transcriptonStatus, setTranscriptionStatus] = useState(null);\r\n  const [getVideoError, setGetVideoError] = useState(null);\r\n  const words = useRef(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetVideo = useCallback((id) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get(`/videos/${id}`)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getVideo = useCallback(\r\n    async (id) => {\r\n      setGetVideoError(null);\r\n      setIsGettingVideo(true);\r\n      try {\r\n        const res = await axiosGetVideo(id);\r\n        if (isMounted.current) {\r\n          let transcription = res.data.transcription;\r\n          if (transcription && transcription.length > 0) {\r\n            words.current = [...transcription];\r\n            setTranscriptionStatus({\r\n              timeLeft: res.data.transcriptionTime,\r\n              startDate: res.data.transcription_start,\r\n              isFinished: true,\r\n            });\r\n          } else {\r\n            setTranscriptionStatus({\r\n              timeLeft: res.data.transcriptionTime,\r\n              startDate: res.data.transcription_start,\r\n              isFinished: false,\r\n            });\r\n          }\r\n          setInfo((prevState) => {\r\n            return prevState\r\n              ? prevState\r\n              : {\r\n                  id: res.data._id,\r\n                  duration: res.data.duration,\r\n                  // url: res.data.original_video_url,\r\n                  url: res.data.frame_rate_video_url\r\n                    ? res.data.frame_rate_video_url\r\n                    : res.data.original_video_url,\r\n                  finalUrl: res.data.final_video_url || null,\r\n                  canvas: res.data.canvas || null,\r\n                  title: res.data.title,\r\n                  finalText: res.data.final_full_text || null,\r\n                };\r\n          });\r\n        }\r\n        console.log(res);\r\n      } catch (err) {\r\n        if (isMounted.current) setGetVideoError(err);\r\n        console.log('Error Getting Video', err);\r\n      } finally {\r\n        if (isMounted.current) setIsGettingVideo(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosGetVideo]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isGettingVideo,\r\n    getVideo,\r\n    words: words.current,\r\n    info,\r\n    getVideoError,\r\n    transcriptonStatus,\r\n  };\r\n};\r\n\r\nexport default useGetVideo;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useUpdateProject = () => {\r\n  const [isUpdatingProject, setIsUpdatingProject] = useState(false);\r\n  const [updateResponse, setUpdateResponse] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosUpdateProject = useCallback((data) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .put('/videos', data)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const updateProject = useCallback(\r\n    async (data) => {\r\n      setUpdateResponse(null);\r\n      setIsUpdatingProject(true);\r\n      try {\r\n        const res = await axiosUpdateProject(data);\r\n        if (isMounted.current) setUpdateResponse(res.data);\r\n        console.log(res);\r\n      } catch (uploadError) {\r\n        console.log('Error Updating Project', uploadError);\r\n        if (isMounted.current) setUpdateResponse('error');\r\n      } finally {\r\n        if (isMounted.current) setIsUpdatingProject(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosUpdateProject]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isUpdatingProject, updateProject, updateResponse };\r\n};\r\n\r\nexport default useUpdateProject;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useDownloadVideo = () => {\r\n  const [isDownloading, setIsDownloading] = useState(false);\r\n  const [isDownloadDataUploaded, setIsDownloadDataUploaded] = useState(false);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosDownloadVideo = useCallback((data) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .post('/download-video', data, {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        })\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const downloadVideo = useCallback(\r\n    async (data) => {\r\n      setIsDownloading(true);\r\n      try {\r\n        const res = await axiosDownloadVideo(data);\r\n        if (isMounted.current && res.data.status === 'ok') {\r\n          setIsDownloadDataUploaded(true);\r\n        }\r\n        console.log(res);\r\n      } catch (err) {\r\n        console.log('Error Downloading Video', err);\r\n      } finally {\r\n        if (isMounted.current) setIsDownloading(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosDownloadVideo]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isDownloading,\r\n    downloadVideo,\r\n    isDownloadDataUploaded,\r\n    setIsDownloadDataUploaded,\r\n  };\r\n};\r\n\r\nexport default useDownloadVideo;\r\n","import { useEffect, useRef, useCallback } from 'react';\r\nimport { getCanvasObject } from '../../../utils/canvasUtils';\r\n\r\nconst useCanvasUpdate = (\r\n  isMounted,\r\n  updateProject,\r\n  canvas,\r\n  info,\r\n  dispatch,\r\n  isDownloading,\r\n  state\r\n) => {\r\n  const timerRef = useRef(null);\r\n  const canUpdateRef = useRef(true);\r\n\r\n  const triggerCanvasUpdate = useCallback(() => {\r\n    if (timerRef.current) clearTimeout(timerRef.current);\r\n    let timeout = setTimeout(() => {\r\n      if (isMounted.current && canUpdateRef.current) {\r\n        timerRef.current = null;\r\n        let jsonCanvas = getCanvasObject(canvas);\r\n        updateProject({\r\n          id: info.id,\r\n          canvas: { ...jsonCanvas },\r\n        });\r\n      }\r\n    }, 1500);\r\n    timerRef.current = timeout;\r\n  }, [updateProject, info, canvas, isMounted]);\r\n\r\n  useEffect(() => {\r\n    if (state.shouldTriggerCanvasUpdate && canvas) {\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: false });\r\n      if (!isDownloading) triggerCanvasUpdate();\r\n    }\r\n  }, [\r\n    triggerCanvasUpdate,\r\n    state.shouldTriggerCanvasUpdate,\r\n    dispatch,\r\n    isDownloading,\r\n    canvas,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (state.isCropMode || state.isLoadingTemplate) {\r\n      canUpdateRef.current = false;\r\n    } else canUpdateRef.current = true;\r\n  }, [state.isCropMode, state.isLoadingTemplate]);\r\n};\r\n\r\nexport default useCanvasUpdate;\r\n","import { useEffect, useRef, useCallback } from 'react';\r\n\r\nconst useWordsUpdate = (\r\n  isMounted,\r\n  updateProject,\r\n  info,\r\n  words,\r\n  dispatch,\r\n  isDownloading,\r\n  shouldUpdate,\r\n  videoCuts\r\n) => {\r\n  const wordsUpdateTimerRef = useRef(null);\r\n  const isFirstLoad = useRef(true);\r\n\r\n  const triggerWordsUpdate = useCallback(() => {\r\n    if (wordsUpdateTimerRef.current) clearTimeout(wordsUpdateTimerRef.current);\r\n    let timeout = setTimeout(() => {\r\n      if (isMounted.current) {\r\n        wordsUpdateTimerRef.current = null;\r\n        updateProject({\r\n          id: info.id,\r\n          transcription: [...words],\r\n        });\r\n      }\r\n    }, 1000);\r\n    wordsUpdateTimerRef.current = timeout;\r\n  }, [updateProject, info, words, isMounted]);\r\n\r\n  useEffect(() => {\r\n    if (shouldUpdate) {\r\n      dispatch({ type: 'setShouldTriggerWordsUpdate', data: false });\r\n      if (!isDownloading) triggerWordsUpdate();\r\n    }\r\n  }, [triggerWordsUpdate, shouldUpdate, dispatch, isDownloading]);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad.current) isFirstLoad.current = false;\r\n    else if (words) {\r\n      dispatch({ type: 'setShouldTriggerWordsUpdate', data: true });\r\n    }\r\n  }, [videoCuts, isDownloading, words, dispatch]);\r\n};\r\n\r\nexport default useWordsUpdate;\r\n","import { useEffect, useRef, useCallback } from 'react';\r\n\r\nconst useCheckTranscription = (\r\n  isGettingVideo,\r\n  getVideo,\r\n  status,\r\n  isMounted,\r\n  params\r\n) => {\r\n  const intervalRef = useRef(null);\r\n\r\n  const checkTranscription = useCallback(() => {\r\n    if (intervalRef.current) clearInterval(intervalRef.current);\r\n    let interval = setInterval(() => {\r\n      if (isMounted.current && !isGettingVideo) getVideo(params.id);\r\n    }, 4000);\r\n    intervalRef.current = interval;\r\n  }, [getVideo, params, isMounted, isGettingVideo]);\r\n\r\n  useEffect(() => {\r\n    if (status && !status.isFinished) {\r\n      checkTranscription();\r\n    } else if (status && status.isFinished) {\r\n      if (intervalRef.current) clearInterval(intervalRef.current);\r\n    }\r\n\r\n    return () => {\r\n      if (intervalRef.current) clearInterval(intervalRef.current);\r\n    };\r\n  }, [status, checkTranscription]);\r\n};\r\n\r\nexport default useCheckTranscription;\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport styles from './VideoEditor.module.css';\r\nimport Transcription from '../Transcription/Transcription';\r\nimport Player from '../Player/Player';\r\nimport Video from '../Video/Video';\r\nimport Navigation from '../Navigation/Navigation';\r\nimport useEditorState from '../../hooks/useEditorState';\r\nimport EditorContext from '../../contexts/EditorContext';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport useGetVideo from '../../hooks/useGetVideo';\r\nimport Spinner from '../../components/Spinner2/Spinner';\r\nimport useUpdateProject from '../../hooks/useUpdateProject';\r\nimport useDownloadVideo from '../../hooks/useDownloadVideo';\r\nimport useCanvasUpdate from './hooks/useCanvasUpdate';\r\nimport useWordsUpdate from './hooks/useWordsUpdate';\r\nimport useCheckTranscription from './hooks/useCheckTranscription';\r\n\r\nconst VideoEditor = ({\r\n  speakers,\r\n  setSpeakers,\r\n  setVideoData,\r\n  // words,\r\n  // info,\r\n  // transcriptonStatus,\r\n}) => {\r\n  const [editorState, editorDispatch] = useEditorState();\r\n  const {\r\n    isGettingVideo,\r\n    getVideo,\r\n    words,\r\n    info,\r\n    transcriptonStatus,\r\n    getVideoError,\r\n  } = useGetVideo();\r\n  const { isUpdatingProject, updateProject } = useUpdateProject();\r\n  const {\r\n    isDownloading,\r\n    downloadVideo,\r\n    isDownloadDataUploaded,\r\n    setIsDownloadDataUploaded,\r\n  } = useDownloadVideo();\r\n  const [currentSelection, setCurrentSelection] = useState(null);\r\n  const [currentWordIndex, setCurrentWordIndex] = useState(0);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(null);\r\n  const [nextCutIndex, setNextCutIndex] = useState(null);\r\n  const [shouldRerenderSub, setShouldRerenderSub] = useState(false);\r\n  const [canvas, setCanvas] = useState(null);\r\n  const [fabricSub, setFabricSub] = useState(null);\r\n  const [currentSub, setCurrentSub] = useState(null);\r\n  const [subList, setSubList] = useState(null);\r\n  const [videoCuts, setVideoCuts] = useState([]);\r\n  const [userAssets, setUserAssets] = useState(null);\r\n  const history = useHistory();\r\n  const params = useParams();\r\n  const videoRef = useRef(null);\r\n  const isMounted = useRef(false);\r\n\r\n  // useEffect(() => {\r\n  //   if (userAssets) console.log(userAssets);\r\n  // }, [userAssets]);\r\n\r\n  // useEffect(() => {\r\n  //   let obj = editorState.currentObject.object;\r\n  //   if (obj) {\r\n  //     console.log(obj);\r\n  //   }\r\n  // }, [editorState]);\r\n  useCanvasUpdate(\r\n    isMounted,\r\n    updateProject,\r\n    canvas,\r\n    info,\r\n    editorDispatch,\r\n    isDownloading,\r\n    editorState\r\n  );\r\n  useWordsUpdate(\r\n    isMounted,\r\n    updateProject,\r\n    info,\r\n    words,\r\n    editorDispatch,\r\n    isDownloading,\r\n    editorState.shouldTriggerWordsUpdate,\r\n    videoCuts\r\n  );\r\n  useCheckTranscription(\r\n    isGettingVideo,\r\n    getVideo,\r\n    transcriptonStatus,\r\n    isMounted,\r\n    params\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (params && params.id) getVideo(params.id);\r\n  }, [params, getVideo]);\r\n\r\n  useEffect(() => {\r\n    if (getVideoError) history.push('/home');\r\n  }, [getVideoError, history]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <EditorContext.Provider value={{ editorState, editorDispatch }}>\r\n        {info ? (\r\n          <>\r\n            <Navigation\r\n              canvas={canvas}\r\n              videoRef={videoRef}\r\n              videoCuts={videoCuts}\r\n              duration={info ? info.duration : null}\r\n              words={words}\r\n              subList={subList}\r\n              fabricSub={fabricSub}\r\n              videoData={info}\r\n              isUpdatingProject={isUpdatingProject}\r\n              isDownloading={isDownloading}\r\n              downloadVideo={downloadVideo}\r\n              isDownloadDataUploaded={isDownloadDataUploaded}\r\n              setIsDownloadDataUploaded={setIsDownloadDataUploaded}\r\n              setUserAssets={setUserAssets}\r\n            />\r\n            <main className={styles.Main}>\r\n              <Transcription\r\n                className={styles.VideoEditor}\r\n                words={words}\r\n                currentWordIndex={currentWordIndex}\r\n                setCurrentWordIndex={setCurrentWordIndex}\r\n                isPlaying={isPlaying}\r\n                videoRef={videoRef}\r\n                setCuts={setVideoCuts}\r\n                currentSelection={currentSelection}\r\n                setCurrentSelection={setCurrentSelection}\r\n                currentSub={currentSub}\r\n                setCurrentSub={setCurrentSub}\r\n                fabricSub={fabricSub}\r\n                setShouldRerenderSub={setShouldRerenderSub}\r\n                setCurrentTime={setCurrentTime}\r\n                setNextCutIndex={setNextCutIndex}\r\n                videoCuts={videoCuts}\r\n                status={transcriptonStatus}\r\n              />\r\n              <Player\r\n                videoRef={videoRef}\r\n                canvas={canvas}\r\n                setCanvas={setCanvas}\r\n                isPlaying={isPlaying}\r\n                words={words}\r\n                currentTime={currentTime}\r\n                videoCuts={videoCuts}\r\n                setNextCutIndex={setNextCutIndex}\r\n                setCurrentWordIndex={setCurrentWordIndex}\r\n                nextCutIndex={nextCutIndex}\r\n                currentWordIndex={currentWordIndex}\r\n                subList={subList}\r\n                setSubList={setSubList}\r\n                fabricSub={fabricSub}\r\n                setFabricSub={setFabricSub}\r\n                currentSub={currentSub}\r\n                setCurrentSub={setCurrentSub}\r\n                shouldRerenderSub={shouldRerenderSub}\r\n                setShouldRerenderSub={setShouldRerenderSub}\r\n                speakers={speakers}\r\n                setSpeakers={setSpeakers}\r\n                info={info}\r\n                setVideoData={setVideoData}\r\n                transcriptonStatus={transcriptonStatus}\r\n                userAssets={userAssets}\r\n                setUserAssets={setUserAssets}\r\n              />\r\n              <Video\r\n                videoRef={videoRef}\r\n                setIsPlaying={setIsPlaying}\r\n                currentSelection={currentSelection}\r\n                setCurrentSelection={setCurrentSelection}\r\n                setCurrentTime={setCurrentTime}\r\n                videoCuts={videoCuts}\r\n                words={words}\r\n                setNextCutIndex={setNextCutIndex}\r\n                setCurrentWordIndex={setCurrentWordIndex}\r\n                setCurrentSub={setCurrentSub}\r\n                subList={subList}\r\n                info={info}\r\n              />\r\n              {/* <div className={styles.DownloadCanvas}>\r\n                <canvas id='downloadCanvas' />\r\n              </div> */}\r\n            </main>\r\n          </>\r\n        ) : (\r\n          <Spinner style={{ width: '100px', height: '100px' }} />\r\n        )}\r\n      </EditorContext.Provider>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default VideoEditor;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst CustomRoute = ({ component: Component, where, allowed, redirect, ...rest }) => {\r\n  // console.log(rest, where);\r\n  return (\r\n    <Route {...rest}>\r\n      {allowed ? <Component {...rest} /> : <Redirect to={redirect} />}\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default CustomRoute;\r\n","export default __webpack_public_path__ + \"static/media/addSpeaker.45816d68.svg\";","export default __webpack_public_path__ + \"static/media/removeSpeaker.2614b0b2.svg\";","import { useState, useEffect } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst addCanvas = (state, id) => {\r\n  let canvas = new fabric.Canvas(id, {\r\n    width: state.initialWidth,\r\n    height: state.initialHeight,\r\n    backgroundColor: 'rgba(255,255,255,1)',\r\n    preserveObjectStacking: true,\r\n    fireRightClick: true,\r\n    stopContextMenu: true,\r\n    selection: false,\r\n  });\r\n  let ratio = Math.min(\r\n    state.width / state.initialWidth,\r\n    state.height / state.initialHeight\r\n  );\r\n  canvas.setZoom(ratio);\r\n  canvas.setDimensions({\r\n    width: state.width,\r\n    height: state.height,\r\n  });\r\n  return canvas;\r\n};\r\n\r\nconst useAddCanvas = (state, setCanvas, id) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad && state.initialWidth > 0) {\r\n      let canvas = addCanvas(state, id);\r\n      setCanvas(canvas);\r\n      setIsFirstLoad(false);\r\n    }\r\n  }, [setCanvas, state, isFirstLoad, id]);\r\n};\r\n\r\nexport default useAddCanvas;\r\n","import { useEffect, useState, useCallback, useRef } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst useAddVideo = (video, canvas, currentTime, setVideo) => {\r\n  const [isFirtLoad, setIsFirtLoad] = useState(true);\r\n  const isMounted = useRef(true);\r\n  const frameRef = useRef(null);\r\n  useEffect(() => () => (isMounted.current = false), []);\r\n\r\n  const cancelAnimation = useCallback(() => {\r\n    // console.log('canceling', frameRef.current);\r\n    fabric.util.cancelAnimFrame(frameRef.current);\r\n    frameRef.current = null;\r\n    if (canvas) canvas.requestRenderAll();\r\n  }, [canvas]);\r\n\r\n  const animate = useCallback(() => {\r\n    const render = () => {\r\n      canvas.requestRenderAll();\r\n      // console.log('animating');\r\n      frameRef.current = fabric.util.requestAnimFrame(render);\r\n    };\r\n    fabric.util.requestAnimFrame(render);\r\n  }, [canvas]);\r\n\r\n  const newVideo = useCallback((video) => {\r\n    let fabricVideo = new fabric.Video(video, {\r\n      top: 0,\r\n      left: 0,\r\n    });\r\n    return fabricVideo;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isFirtLoad) {\r\n      setTimeout(() => {\r\n        if (isMounted.current) cancelAnimation();\r\n      }, 1000);\r\n    }\r\n  }, [cancelAnimation, isFirtLoad]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (frameRef.current) fabric.util.cancelAnimFrame(frameRef.current);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isFirtLoad && video && canvas) {\r\n      setIsFirtLoad(false);\r\n      video.currentTime = currentTime > 0 ? currentTime : 0.001;\r\n      let fabricVideo = newVideo(video);\r\n      canvas.add(fabricVideo);\r\n      fabricVideo.evented = false;\r\n      fabricVideo.selectable = false;\r\n      setVideo(fabricVideo);\r\n      animate();\r\n    }\r\n  }, [video, canvas, isFirtLoad, currentTime, animate, setVideo, newVideo]);\r\n};\r\n\r\nexport default useAddVideo;\r\n","import { useEffect } from 'react';\r\nimport { updateCanvasSize, updateCanvasStyle } from '../utils/updateCanvas';\r\n\r\nconst useUpdateCanvas = (state, dispatch, canvas) => {\r\n  useEffect(() => {\r\n    if (state.shouldUpdateCanvas) updateCanvasStyle(state, canvas, dispatch);\r\n    if (state.shouldUpdateCanvasSize) updateCanvasSize(state, canvas, dispatch);\r\n  }, [state, dispatch, canvas]);\r\n};\r\n\r\nexport default useUpdateCanvas;\r\n","export const updateCanvasStyle = (state, canvas, dispatch) => {\r\n  canvas.backgroundColor = state.backgroundColor;\r\n  canvas.requestRenderAll();\r\n  dispatch({ type: 'setShouldUpdateCanvas', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const updateCanvasSize = (state, canvas, dispatch) => {\r\n  canvas.discardActiveObject();\r\n  let ratio = Math.min(\r\n    state.width / state.initialWidth,\r\n    state.height / state.initialHeight\r\n  );\r\n  canvas.setZoom(ratio);\r\n  canvas.setDimensions({\r\n    width: state.width,\r\n    height: state.height,\r\n  });\r\n  canvas.requestRenderAll();\r\n  dispatch({ type: 'setShouldUpdateCanvasSize', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n","import { createContext } from 'react';\r\n\r\nconst SpeakersContext = createContext(null);\r\nexport default SpeakersContext;","import { useEffect, useContext, useState } from 'react';\r\nimport { addSpeaker, handleFirstLoadSpeakers } from '../utils/speakerCrop';\r\nimport SpeakersContext from '../../../contexts/SpeakersContext';\r\n\r\nconst useCropSpeakers = (\r\n  canvas,\r\n  video,\r\n  boxArr,\r\n  setBoxArr,\r\n  boxId,\r\n  updateBoxId,\r\n  speakers,\r\n  setSpeakers\r\n) => {\r\n  const { speakersState, speakersDispatch } = useContext(SpeakersContext);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n\r\n  // Handle Speaker Adding On First Load\r\n  useEffect(() => {\r\n    if (video && canvas && isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      if (speakers.length > 0) {\r\n        handleFirstLoadSpeakers(\r\n          canvas,\r\n          setBoxArr,\r\n          updateBoxId,\r\n          video,\r\n          speakers\r\n        );\r\n        setSpeakers([]);\r\n      } else speakersDispatch({ type: 'setShouldAddSpeaker', data: true });\r\n    }\r\n  }, [\r\n    canvas,\r\n    setBoxArr,\r\n    updateBoxId,\r\n    isFirstLoad,\r\n    video,\r\n    speakers,\r\n    speakersDispatch,\r\n    setSpeakers\r\n  ]);\r\n\r\n  // Handle Speaker Adding\r\n  useEffect(() => {\r\n    if (video && speakersState.shouldAddSpeaker) {\r\n      speakersDispatch({ type: 'setShouldAddSpeaker', data: false });\r\n      addSpeaker(boxArr, boxId, canvas, setBoxArr, updateBoxId, video);\r\n    }\r\n  }, [\r\n    boxArr,\r\n    speakersState,\r\n    speakersDispatch,\r\n    canvas,\r\n    video,\r\n    setBoxArr,\r\n    boxId,\r\n    updateBoxId,\r\n  ]);\r\n\r\n  // Handle Speaker Removing\r\n  useEffect(() => {\r\n    if (video && speakersState.shouldRemoveSpeaker) {\r\n      speakersDispatch({ type: 'setShouldRemoveSpeaker', data: false });\r\n      let active = canvas.getActiveObject();\r\n      if (active) {\r\n        canvas.remove(active);\r\n        setBoxArr((prevState) =>\r\n          prevState.filter((box) => box.id !== active.id)\r\n        );\r\n        canvas.requestRenderAll();\r\n      }\r\n    }\r\n  }, [speakersState, speakersDispatch, canvas, video, setBoxArr]);\r\n};\r\n\r\nexport default useCropSpeakers;\r\n","import { getSpeakerBox } from './box';\r\nimport { restrictBox } from './restrict';\r\n\r\nexport const handleFirstLoadSpeakers = (\r\n  canvas,\r\n  setBoxArr,\r\n  updateBoxId,\r\n  video,\r\n  speakers\r\n) => {\r\n  let boxes = [];\r\n  for (let i = 0; i < speakers.length; i++) {\r\n    let speaker = speakers[i];\r\n    let size = {\r\n      width: video.width,\r\n      height: video.height,\r\n      scaleX: speaker.w / video.width,\r\n      scaleY: speaker.h / video.height,\r\n    };\r\n    let box = getSpeakerBox(size, i + 1);\r\n    box.top = speaker.y;\r\n    box.left = speaker.x;\r\n    updateBoxId();\r\n    canvas.add(box).setActiveObject(box);\r\n    canvas.requestRenderAll();\r\n    boxes.push(box);\r\n    restrictBox(video, box);\r\n  }\r\n  setBoxArr(boxes);\r\n};\r\n\r\nexport const addSpeaker = (\r\n  boxArr,\r\n  boxId,\r\n  canvas,\r\n  setBoxArr,\r\n  updateBoxId,\r\n  video\r\n) => {\r\n  let size = null;\r\n  if (boxArr.length === 0) {\r\n    size = {\r\n      width: video.width,\r\n      height: video.height,\r\n      scaleX: video.scaleX / 2,\r\n      scaleY: video.scaleY / 2,\r\n    };\r\n  } else {\r\n    let last = boxArr[boxArr.length - 1];\r\n    size = {\r\n      width: last.width,\r\n      height: last.height,\r\n      scaleX: last.scaleX,\r\n      scaleY: last.scaleY,\r\n    };\r\n  }\r\n  let box = getSpeakerBox(size, boxId);\r\n  updateBoxId();\r\n  canvas.add(box).setActiveObject(box);\r\n  canvas.requestRenderAll();\r\n  setBoxArr((prevState) => [...prevState, box]);\r\n  restrictBox(video, box);\r\n};\r\n","import React, { useState, useCallback } from 'react';\r\nimport styles from './SpeakersCanvas.module.css';\r\nimport useAddCanvas from './hooks/useAddCanvas';\r\nimport useAddVideo from './hooks/useAddVideo';\r\nimport useUpdateCanvas from './hooks/useUpdateCanvas';\r\nimport useGuideLines from '../hooks/useGuideLines';\r\nimport useCropSpeakers from '../hooks/useCropSpeakers';\r\n\r\nconst SpeakersCanvas = ({\r\n  canvas,\r\n  setCanvas,\r\n  canvasState,\r\n  canvasDispatch,\r\n  videoRef,\r\n  setBoxArr,\r\n  duration,\r\n  boxArr,\r\n  speakers,\r\n  setSpeakers,\r\n}) => {\r\n  const [video, setVideo] = useState(null);\r\n  const [boxId, setBoxId] = useState(1);\r\n  const updateBoxId = useCallback(() => setBoxId((i) => i + 1), []);\r\n\r\n  useGuideLines(canvasState, canvas, null, null);\r\n  useUpdateCanvas(canvasState, canvasDispatch, canvas);\r\n  useAddCanvas(canvasState, setCanvas, 'speakerCanvas');\r\n  useAddVideo(videoRef.current, canvas, duration / 10, setVideo);\r\n  useCropSpeakers(\r\n    canvas,\r\n    video,\r\n    boxArr,\r\n    setBoxArr,\r\n    boxId,\r\n    updateBoxId,\r\n    speakers,\r\n    setSpeakers\r\n  );\r\n\r\n  return (\r\n    <div className={styles.Canvas}>\r\n      <canvas id='speakerCanvas' />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SpeakersCanvas;\r\n","import { useReducer } from 'react';\r\n\r\nconst initialState = {\r\n  initialWidth: 0,\r\n  initialHeight: 0,\r\n  width: 0,\r\n  height: 0,\r\n  shouldUpdateCanvas: false,\r\n  shouldUpdateCanvasSize: false,\r\n  shouldAddSpeaker: false,\r\n  shouldRemoveSpeaker: false,\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'setCanvasSize':\r\n      return {\r\n        ...state,\r\n        shouldUpdateCanvasSize: true,\r\n        width: action.data.width,\r\n        height: action.data.height,\r\n      };\r\n    case 'setCanvasInitialSize':\r\n      return {\r\n        ...state,\r\n        initialWidth: action.data.initialWidth,\r\n        initialHeight: action.data.initialHeight,\r\n        width: action.data.width,\r\n        height: action.data.height,\r\n      };\r\n    case 'setShouldUpdateCanvas':\r\n      return { ...state, shouldUpdateCanvas: action.data };\r\n    case 'setShouldUpdateCanvasSize':\r\n      return { ...state, shouldUpdateCanvasSize: action.data };\r\n    case 'setShouldAddSpeaker':\r\n      return { ...state, shouldAddSpeaker: action.data };\r\n    case 'setShouldRemoveSpeaker':\r\n      return { ...state, shouldRemoveSpeaker: action.data };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst useSpeakersState = () => {\r\n  const [speakerState, speakerDispatch] = useReducer(reducer, initialState);\r\n  return [speakerState, speakerDispatch];\r\n};\r\n\r\nexport default useSpeakersState;\r\n","import { useEffect, useCallback, useState } from 'react';\r\nimport { getContainerSize } from '../utils/getSize';\r\n\r\nconst getCanvasSize = (containerSize, videoSize) => {\r\n  let width = containerSize.width;\r\n  let height = (videoSize.height * width) / videoSize.width;\r\n  let maxHeight = containerSize.height - 300;\r\n  if (height > maxHeight) {\r\n    height = maxHeight;\r\n    width = (height * videoSize.width) / videoSize.height;\r\n  }\r\n  return { width, height };\r\n};\r\n\r\nconst useContainerSize = (videoSize, dispatch, containerRef) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [containerSize, setContainerSize] = useState(null);\r\n  const containerPadding = 200;\r\n\r\n  const handleSize = useCallback(() => {\r\n    if (containerRef.current) {\r\n      getContainerSize(containerRef, setContainerSize, containerPadding);\r\n    }\r\n  }, [containerRef, setContainerSize, containerPadding]);\r\n\r\n  useEffect(() => {\r\n    handleSize();\r\n  }, [handleSize]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', handleSize);\r\n    return () => window.removeEventListener('resize', handleSize);\r\n  }, [handleSize]);\r\n\r\n  useEffect(() => {\r\n    if (videoSize && containerSize) {\r\n      let { width, height } = getCanvasSize(containerSize, videoSize);\r\n      let isInRange = width > 100;\r\n      if (isFirstLoad && isInRange) {\r\n        setIsFirstLoad(false);\r\n        dispatch({\r\n          type: 'setCanvasInitialSize',\r\n          data: {\r\n            initialWidth: videoSize.width,\r\n            initialHeight: videoSize.height,\r\n            width,\r\n            height,\r\n          },\r\n        });\r\n      } else if (isInRange) {\r\n        dispatch({ type: 'setCanvasSize', data: { width, height } });\r\n      }\r\n    }\r\n  }, [isFirstLoad, containerSize, videoSize, dispatch]);\r\n};\r\n\r\nexport default useContainerSize;\r\n","export const getContainerSize = (\r\n  containerRef,\r\n  setContainerSize,\r\n  containerPadding\r\n) => {\r\n  let width =\r\n    window.innerWidth - containerRef.current.offsetLeft - containerPadding;\r\n  let height = containerRef.current.offsetHeight;\r\n  setContainerSize({ width, height });\r\n};\r\n\r\nexport const getVideoSize = (videoRef, setVideoSize) => {\r\n  let width = videoRef.current.videoWidth;\r\n  let height = videoRef.current.videoHeight;\r\n  setVideoSize({ width, height });\r\n};\r\n","import React, { useState, useRef } from 'react';\r\nimport styles from './SelectSpeakers.module.css';\r\nimport Navbar from '../../components/Navbar/Navbar';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { getVideoSize } from './utils/getSize';\r\nimport addSpeaker from '../../assets/editor/addSpeaker.svg';\r\nimport removeSpeaker from '../../assets/editor/removeSpeaker.svg';\r\nimport SpeakersCanvas from '../Canvas/SpeakersCanvas/SpeakersCanvas';\r\nimport SpeakersContext from '../../contexts/SpeakersContext';\r\nimport useSpeakersState from '../../hooks/useSpeakersState';\r\nimport useContainerSize from './hooks/useContainerSize';\r\n\r\nconst SelectSpeakers = ({ videoData, setSpeakers, speakers }) => {\r\n  const [speakersState, speakersDispatch] = useSpeakersState();\r\n  const history = useHistory();\r\n  const [canvas, setCanvas] = useState(null);\r\n  const containerRef = useRef(null);\r\n  const videoRef = useRef(null);\r\n  const [videoSize, setVideoSize] = useState(null);\r\n  const [boxArr, setBoxArr] = useState([]);\r\n\r\n  useContainerSize(videoSize, speakersDispatch, containerRef);\r\n\r\n  const addSpeakerHandler = () => {\r\n    speakersDispatch({ type: 'setShouldAddSpeaker', data: true });\r\n  };\r\n\r\n  const removeSpeakerHandler = () => {\r\n    speakersDispatch({ type: 'setShouldRemoveSpeaker', data: true });\r\n  };\r\n\r\n  const confirmHandler = () => {\r\n    if (boxArr.length > 0) {\r\n      let arr = [];\r\n      for (let i = 0; i < boxArr.length; i++) {\r\n        let box = boxArr[i];\r\n        let w = box.width * box.scaleX;\r\n        let h = box.height * box.scaleY;\r\n        let x = box.lineCoords.tl.x / canvas.getZoom();\r\n        let y = box.lineCoords.tr.y / canvas.getZoom();\r\n        arr.push({ x, y, w, h });\r\n      }\r\n      setSpeakers(arr);\r\n    } else {\r\n      setSpeakers([{ x: 0, y: 0, w: videoSize.width, h: videoSize.height }]);\r\n    }\r\n    history.replace(`/editor/${videoData.id}`);\r\n    // history.push('/editor/video-editor');\r\n  };\r\n\r\n  const skipHandler = () => {\r\n    setSpeakers([{ x: 0, y: 0, w: videoSize.width, h: videoSize.height }]);\r\n    history.replace(`/editor/${videoData.id}`);\r\n    // history.push('/editor/video-editor');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar videoData={videoData} />\r\n      <SpeakersContext.Provider value={{ speakersState, speakersDispatch }}>\r\n        <div className={styles.SelectSpeakers} ref={containerRef}>\r\n          <h1 className={styles.Heading}>Select area with speakers</h1>\r\n          <div className={styles.CanvasContainer}>\r\n            <SpeakersCanvas\r\n              canvas={canvas}\r\n              setCanvas={setCanvas}\r\n              canvasState={speakersState}\r\n              canvasDispatch={speakersDispatch}\r\n              videoRef={videoRef}\r\n              boxArr={boxArr}\r\n              setBoxArr={setBoxArr}\r\n              duration={videoData ? videoData.duration : null}\r\n              speakers={speakers}\r\n              setSpeakers={setSpeakers}\r\n            />\r\n          </div>\r\n          <video\r\n            src={videoData ? videoData.url : null}\r\n            width={videoSize ? videoSize.width : 0}\r\n            height={videoSize ? videoSize.height : 0}\r\n            id='video'\r\n            preload='auto'\r\n            className={styles.Video}\r\n            ref={videoRef}\r\n            onLoadedMetadata={() => getVideoSize(videoRef, setVideoSize)}\r\n          />\r\n          {canvas ? (\r\n            <div className={styles.Controls}>\r\n              <p className={styles.SelectedText}>\r\n                <span className={styles.SelectedNumber}>{boxArr.length}</span>\r\n                {` speaker${boxArr.length !== 1 ? 's' : ''} selected`}\r\n              </p>\r\n              <div className={styles.SpeakerButtons}>\r\n                <div className={styles.AddSpeakerButton}>\r\n                  <button\r\n                    className={styles.AddSpeakers}\r\n                    onClick={addSpeakerHandler}\r\n                  >\r\n                    <img src={addSpeaker} alt='add' />\r\n                  </button>\r\n                  <p className={styles.AddSpeakersText}>Add speakers</p>\r\n                </div>\r\n                <div className={styles.RemoveSpeakerButton}>\r\n                  <button\r\n                    className={styles.RemoveSpeakers}\r\n                    onClick={removeSpeakerHandler}\r\n                  >\r\n                    <img src={removeSpeaker} alt='add' />\r\n                  </button>\r\n                  <p className={styles.RemoveSpeakersText}>Remove</p>\r\n                </div>\r\n              </div>\r\n              <div className={styles.NextSteps}>\r\n                <button className={styles.Confirm} onClick={confirmHandler}>\r\n                  Confirm\r\n                </button>\r\n                <button className={styles.Skip} onClick={skipHandler}>\r\n                  Skip\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </SpeakersContext.Provider>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SelectSpeakers;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetDownloadProgress = () => {\r\n  const [isGettingProgress, setIsGettingProgress] = useState(false);\r\n  const [downloadProgress, setDownloadProgress] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetProgress = useCallback((id) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get(`/download-video-progress/${id}`)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getDownloadProgress = useCallback(async (id) => {\r\n    setIsGettingProgress(true);\r\n    try {\r\n      const res = await axiosGetProgress(id);\r\n      if (isMounted.current) {\r\n        let progress = res.data.progress;\r\n        if(progress === null) setDownloadProgress(false);\r\n        else setDownloadProgress(progress);\r\n      } \r\n      console.log(res);\r\n    } catch (uploadError) {\r\n      console.log('Error Getting Download Progress', uploadError);\r\n    } finally {\r\n      if (isMounted.current) setIsGettingProgress(false);\r\n      return;\r\n    }\r\n  }, [axiosGetProgress]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isGettingProgress,\r\n    getDownloadProgress,\r\n    downloadProgress,\r\n  };\r\n};\r\n\r\nexport default useGetDownloadProgress;\r\n","import { useEffect, useRef, useCallback } from 'react';\r\n\r\nconst useCheckDownloadProgress = (\r\n  isGettingProgress,\r\n  getDownloadProgress,\r\n  downloadProgress,\r\n  params,\r\n  isMounted\r\n) => {\r\n  const intervalRef = useRef(null);\r\n\r\n  const checkProgress = useCallback(() => {\r\n    if (intervalRef.current) clearInterval(intervalRef.current);\r\n    let interval = setInterval(() => {\r\n      if (isMounted.current && !isGettingProgress) {\r\n        getDownloadProgress(params.id);\r\n      }\r\n    }, 1500);\r\n    intervalRef.current = interval;\r\n  }, [getDownloadProgress, params, isMounted, isGettingProgress]);\r\n\r\n  useEffect(() => {\r\n    if (params && params.id) getDownloadProgress(params.id);\r\n  }, [params, getDownloadProgress]);\r\n\r\n  useEffect(() => {\r\n    if (downloadProgress !== null && downloadProgress !== 100) {\r\n      checkProgress();\r\n    } else if (intervalRef.current) clearInterval(intervalRef.current);\r\n\r\n    return () => {\r\n      if (intervalRef.current) clearInterval(intervalRef.current);\r\n    };\r\n  }, [checkProgress, downloadProgress]);\r\n};\r\n\r\nexport default useCheckDownloadProgress;\r\n","import React, { useEffect, useRef } from 'react';\r\nimport styles from './Download.module.css';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport useGetDownloadProgress from '../../hooks/useGetDownloadProgress';\r\nimport Navbar from '../../components/Navbar/Navbar';\r\nimport Progress from '../../components/Progress/Progress';\r\nimport Spinner from '../../components/Spinner2/Spinner';\r\nimport useCheckDownloadProgress from './hooks/useCheckDownloadPorgress';\r\n\r\nconst Download = () => {\r\n  const { isGettingProgress, getDownloadProgress, downloadProgress } =\r\n    useGetDownloadProgress();\r\n  const history = useHistory();\r\n  const params = useParams();\r\n  const isMounted = useRef(null);\r\n\r\n  useCheckDownloadProgress(\r\n    isGettingProgress,\r\n    getDownloadProgress,\r\n    downloadProgress,\r\n    params,\r\n    isMounted\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (downloadProgress === false) history.replace('/home');\r\n  }, [downloadProgress, history]);\r\n\r\n  useEffect(() => {\r\n    if (+downloadProgress === 100) {\r\n      setTimeout(() => {\r\n        if (isMounted.current) history.replace(`/preview/${params.id}`);\r\n      }, 1000);\r\n    }\r\n  }, [downloadProgress, history, params]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {downloadProgress === null || downloadProgress === false ? (\r\n        <Spinner style={{ width: '100px', height: '100px' }} />\r\n      ) : (\r\n        <>\r\n          <Navbar />\r\n          <div className={styles.Download}>\r\n            <Progress\r\n              progress={downloadProgress}\r\n              heading='Generating your video'\r\n            />\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Download;\r\n","import React, { useState, useRef } from 'react';\r\nimport styles from './Editor.module.css';\r\nimport Uploader from '../Uploader/Uploader';\r\nimport VideoEditor from '../VideoEditor/VideoEditor';\r\nimport { useRouteMatch, Switch, Redirect } from 'react-router-dom';\r\nimport CustomRoute from '../../components/CustomRoute/CustomRoute';\r\nimport SelectSpeakers from '../SelectSpeakers/SelectSpeakers';\r\n// import UploaderMock from '../UploaderMock/UploaderMock';\r\nimport Download from '../Download/Download';\r\n\r\nconst Editor = () => {\r\n  const [viedoForUpload, setVideoForUpload] = useState(null);\r\n  const [videoData, setVideoData] = useState(null);\r\n  const [speakers, setSpeakers] = useState([]);\r\n  const match = useRouteMatch();\r\n  const words = useRef(null);\r\n  // const [transcriptonStatus, setTranscriptionStatus] = useState({\r\n  //   timeLeft: 0,\r\n  //   startDate: '1299671538',\r\n  //   isFinished: true,\r\n  // });\r\n\r\n  return (\r\n    <div className={styles.Editor}>\r\n      <Switch>\r\n        <CustomRoute\r\n          path={`${match.path}/new`}\r\n          redirect={`${match.path}/speakers`}\r\n          /////////////////////////////////////////\r\n          // redirect={`${match.path}/video-editor`}\r\n          where='in the Editor new route'\r\n          allowed={!videoData}\r\n          component={Uploader}\r\n          // component={UploaderMock}\r\n          viedoForUpload={viedoForUpload}\r\n          setVideoForUpload={setVideoForUpload}\r\n          setVideoData={setVideoData}\r\n          wordsRef={words}\r\n        />\r\n        <CustomRoute\r\n          path={`${match.path}/progress/:id`}\r\n          redirect={`/home`}\r\n          where='in the Editor download progress route'\r\n          allowed={true}\r\n          component={Download}\r\n        />\r\n        <CustomRoute\r\n          path={`${match.path}/speakers`}\r\n          redirect={`/home`}\r\n          where='in the Editor speakers route'\r\n          allowed={!!videoData}\r\n          component={SelectSpeakers}\r\n          videoData={videoData}\r\n          setSpeakers={setSpeakers}\r\n          speakers={speakers}\r\n        />\r\n        <CustomRoute\r\n          path={`${match.path}/:id`}\r\n          redirect={`/home`}\r\n          where='in the Editor project id route'\r\n          allowed={true}\r\n          component={VideoEditor}\r\n          speakers={speakers}\r\n          setSpeakers={setSpeakers}\r\n          setVideoData={setVideoData}\r\n        />\r\n\r\n        {/* <CustomRoute\r\n          path={`${match.path}/video-editor`}\r\n          redirect={`${match.path}/new`}\r\n          where='in the Editor video-editor route'\r\n          allowed={true}\r\n          component={VideoEditor}\r\n          words={words.current}\r\n          info={videoData}\r\n          transcriptonStatus={transcriptonStatus}\r\n          setVideoData={setVideoData}\r\n          speakers={speakers}\r\n          setSpeakers={setSpeakers}\r\n        /> */}\r\n        <Redirect to={`${match.path}/new`} />\r\n      </Switch>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Editor;\r\n","export default __webpack_public_path__ + \"static/media/saly.d86e3215.png\";","export default __webpack_public_path__ + \"static/media/twiso.7870df01.svg\";","export default __webpack_public_path__ + \"static/media/google.321ceef8.svg\";","import React from 'react';\r\nimport styles from './Button.module.css';\r\n\r\nconst Button = ({ children, onClick }) => {\r\n  return (\r\n    <button onClick={onClick} className={styles.Button}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import React from 'react';\r\nimport styles from './Or.module.css';\r\n\r\nconst Or = () => {\r\n  return (\r\n    <div className={styles.Or}>\r\n      <div className={styles.Line}></div>\r\n      <span className={styles.Text}>or</span>\r\n      <div className={styles.Line}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Or;\r\n","import React from 'react';\r\nimport styles from './Input.module.css';\r\n\r\nconst Input = ({\r\n  placeholder,\r\n  type,\r\n  invalid,\r\n  setValue,\r\n  value,\r\n  errorMessage,\r\n}) => {\r\n  const blurHandler = () => {\r\n    let isEmpty = value.trim() === '';\r\n    if (invalid && !isEmpty)\r\n      setValue((prevState) => ({ ...prevState, invalid: false }));\r\n  };\r\n  \r\n  const focusHandler = () => {\r\n    if (invalid) setValue((prevState) => ({ ...prevState, value: '' }));\r\n  };\r\n\r\n  return (\r\n    <div className={styles.InputContainer}>\r\n      <input\r\n        className={[styles.Input, invalid ? styles.Invalid : null].join(' ')}\r\n        placeholder={placeholder}\r\n        type={type}\r\n        value={value}\r\n        onBlur={blurHandler}\r\n        onFocus={focusHandler}\r\n        onChange={(e) =>\r\n          setValue((prevState) => ({ ...prevState, value: e.target.value }))\r\n        }\r\n      ></input>\r\n      {invalid ? (\r\n        <div className={styles.ErrorMessage}>{errorMessage}</div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n","export default __webpack_public_path__ + \"static/media/mail.ab4abc3d.svg\";","import React from // useContext\r\n'react';\r\nimport styles from './CheckMail.module.css';\r\n// import UserContext from '../../../contexts/UserContext';\r\nimport mail from '../../../assets/auth/mail.svg';\r\n\r\nconst CheckMail = () => {\r\n  // const { userDispatch } = useContext(UserContext);\r\n  // const clickHandler = () => {\r\n  //   userDispatch({ type: 'setIsAuthenticated', data: true });\r\n  // };\r\n\r\n  return (\r\n    <div className={styles.CheckMail}>\r\n      <img src={mail} alt='mail' className={styles.Mail} />\r\n      <h2 className={styles.Heading}>Check your inbox</h2>\r\n      <p className={styles.Subheading}>\r\n        We sent you an activation link. Please be sure to check your spam folder\r\n        too.\r\n      </p>\r\n      {/* <div className={styles.EditorLink} onClick={clickHandler}>\r\n        Go to editor\r\n      </div> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckMail;\r\n","export const checkEmailValidity = (value) => {\r\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value);\r\n};","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useMagicLink = () => {\r\n  const [magickRes, setMagickRes] = useState(null);\r\n  const [magickError, setMagickError] = useState(null);\r\n  const isMounted = useRef(false);\r\n  const axiosMagicLink = useCallback((data) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .post('/send-magic-link', data, {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        })\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const magicLink = useCallback(\r\n    async (data) => {\r\n      setMagickRes(null)\r\n      setMagickError(null)\r\n      try {\r\n        const res = await axiosMagicLink(data);\r\n        console.log(res);\r\n        if (isMounted.current) {\r\n          setMagickRes(res.data);\r\n        }\r\n      } catch (err) {\r\n        setMagickError(err)\r\n        console.log('Error Authenticating with Magic Link', err);\r\n      } finally {\r\n        return;\r\n      }\r\n    },\r\n    [axiosMagicLink]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { magicLink, magickRes, magickError };\r\n};\r\n\r\nexport default useMagicLink;\r\n","import React, { useEffect, useState } from 'react';\r\nimport styles from './SignIn.module.css';\r\nimport google from '../../../assets/auth/google.svg';\r\nimport Button from '../Button/Button';\r\nimport Or from '../Or/Or';\r\nimport Input from '../Input/Input';\r\nimport CheckMail from '../CheckMail/CheckMail';\r\nimport { checkEmailValidity } from '../utils/validation';\r\nimport { Link } from 'react-router-dom';\r\nimport useMagicLink from '../../../hooks/useMagicLink';\r\nimport Spinner from '../../../components/Spinner2/Spinner';\r\n\r\nconst SignIn = ({ authUrl, isLoading, setIsLoading, checkTokenValidity }) => {\r\n  const { magicLink, magickRes, magickError } = useMagicLink();\r\n  const [isSent, setIsSent] = useState(false);\r\n  const [email, setEmail] = useState({\r\n    value: '',\r\n    invalid: false,\r\n    type: 'email',\r\n    placeholder: 'Email address',\r\n    validation: true,\r\n    errorMessage: 'Please enter your email',\r\n  });\r\n\r\n  useEffect(() => {\r\n    let token = localStorage.getItem('token');\r\n    if (token) checkTokenValidity(token);\r\n    else setIsLoading(false);\r\n  }, [checkTokenValidity, setIsLoading]);\r\n\r\n  useEffect(() => {\r\n    if (magickRes) setIsSent(true);\r\n  }, [magickRes]);\r\n\r\n  useEffect(() => {\r\n    if (magickError) {\r\n      setIsLoading(false);\r\n    }\r\n  }, [magickError, setIsLoading]);\r\n\r\n  const signInClickHandler = (e) => {\r\n    e.preventDefault();\r\n    let isValid = checkEmailValidity(email.value);\r\n    if (!isValid) setEmail((prevState) => ({ ...prevState, invalid: true }));\r\n    else {\r\n      setIsLoading(true);\r\n      let jsonData = JSON.stringify({ email: email.value });\r\n      magicLink(jsonData);\r\n    }\r\n  };\r\n\r\n  let signInContent = (\r\n    <div className={styles.SignIn}>\r\n      <h2 className={styles.Heading}>Welcome to Twiso!</h2>\r\n      <p className={styles.Subheading}>\r\n        Don't have an account?{' '}\r\n        <Link to={`${authUrl}/sign-up`} className={styles.SignUpLink}>\r\n          Sign up for free\r\n        </Link>\r\n      </p>\r\n      <div className={styles.FormContent}>\r\n        <a\r\n          className={styles.GoogleLink}\r\n          href={`${process.env.REACT_APP_API_BASE_URL_TEST}/api/v1/auth/google`}\r\n        >\r\n          <Button>\r\n            <img src={google} alt='google' className={styles.GoogleLogo} />\r\n            Continue with Google\r\n          </Button>\r\n        </a>\r\n        <Or />\r\n        <form className={styles.Form}>\r\n          <Input {...email} setValue={setEmail} />\r\n          <Button onClick={signInClickHandler}>Sign in</Button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n  if (isLoading)\r\n    signInContent = <Spinner style={{ width: '100px', height: '100px' }} />;\r\n\r\n  return !isSent ? signInContent : <CheckMail />;\r\n};\r\n\r\nexport default SignIn;\r\n","export default __webpack_public_path__ + \"static/media/downArrow.16441734.svg\";","export default __webpack_public_path__ + \"static/media/checkMark.eb440aa3.svg\";","import React, { useEffect, useCallback } from 'react';\r\nimport styles from './Dropdown.module.css';\r\nimport checkMark from '../../../../assets/auth/checkMark.svg';\r\n\r\nconst Dropdown = ({ options, value, setValue, setIsDropdown }) => {\r\n  const clickHandler = useCallback(() => setIsDropdown(false), [setIsDropdown]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', clickHandler);\r\n    return () => document.removeEventListener('click', clickHandler);\r\n  }, [clickHandler]);\r\n\r\n  return (\r\n    <ul className={styles.Dropdown}>\r\n      {options.map((option) => {\r\n        let isCurrent = value && value.id === option.id;\r\n        return (\r\n          <li\r\n            key={option.id}\r\n            id={option.id}\r\n            className={[styles.Option, isCurrent ? styles.Current : null].join(\r\n              ' '\r\n            )}\r\n            onClick={() => setValue((prevState) => ({ ...prevState, value: option }))}\r\n          >\r\n            <span className={styles.CheckMark}>\r\n              {isCurrent ? <img src={checkMark} alt='check mark' /> : null}\r\n            </span>\r\n\r\n            {option.type}\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Dropdown;\r\n","import React, { useState } from 'react';\r\nimport styles from './Select.module.css';\r\nimport downArrow from '../../../assets/auth/downArrow.svg';\r\nimport Dropdown from './Dropdown/Dropdown';\r\n\r\nconst Select = ({ options, invalid, value, setValue, errorMessage }) => {\r\n  const [isDropdown, setIsDropdown] = useState(null);\r\n\r\n  const clickHandler = () => {\r\n    if (invalid) setValue((prevState) => ({ ...prevState, invalid: false }));\r\n    setIsDropdown(true);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.SelectContainer}>\r\n      <div\r\n        className={[styles.Select, invalid ? styles.Invalid : null].join(' ')}\r\n        onClick={clickHandler}\r\n      >\r\n        <p\r\n          className={[\r\n            styles.Selected,\r\n            value.id !== 'placeholder' ? styles.Valid : null,\r\n          ].join(' ')}\r\n        >\r\n          {value.type}\r\n        </p>\r\n        <img src={downArrow} alt='arrow' />\r\n        {isDropdown ? (\r\n          <Dropdown\r\n            options={options}\r\n            value={value}\r\n            setValue={setValue}\r\n            setIsDropdown={setIsDropdown}\r\n          />\r\n        ) : null}\r\n      </div>\r\n      {invalid ? (\r\n        <div className={styles.ErrorMessage}>{errorMessage}</div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n","import React, { useState, useEffect } from 'react';\r\nimport styles from './SignUp.module.css';\r\nimport google from '../../../assets/auth/google.svg';\r\nimport Button from '../Button/Button';\r\nimport Or from '../Or/Or';\r\nimport Input from '../Input/Input';\r\nimport Select from '../Select/Select';\r\nimport CheckMail from '../CheckMail/CheckMail';\r\nimport { checkEmailValidity } from '../utils/validation';\r\nimport { Link } from 'react-router-dom';\r\nimport useMagicLink from '../../../hooks/useMagicLink';\r\nimport Spinner from '../../../components/Spinner2/Spinner';\r\n\r\nconst SignUp = ({ authUrl, isLoading, setIsLoading, checkTokenValidity }) => {\r\n  const [isSent, setIsSent] = useState(false);\r\n  const { magicLink, magickRes, magickError } = useMagicLink();\r\n  const [name, setName] = useState({\r\n    value: '',\r\n    invalid: false,\r\n    type: 'text',\r\n    placeholder: 'First name',\r\n    errorMessage: 'Please enter your name',\r\n  });\r\n\r\n  const [email, setEmail] = useState({\r\n    value: '',\r\n    invalid: false,\r\n    type: 'email',\r\n    placeholder: 'Email address',\r\n    errorMessage: 'Please enter your email',\r\n  });\r\n\r\n  const [workType, setWorkType] = useState({\r\n    value: { type: 'What kind of work do you do?', id: 'placeholder' },\r\n    options: [\r\n      { type: 'What kind of work do you do?', id: 'placeholder' },\r\n      { type: 'Marketing', id: 'marketing' },\r\n      { type: 'Design', id: 'design' },\r\n      { type: 'Influencer', id: 'influencer' },\r\n      { type: 'Public Speaker', id: 'publicSpeaker' },\r\n      { type: 'Student', id: 'student' },\r\n      { type: 'Other', id: 'other' },\r\n    ],\r\n    invalid: false,\r\n    errorMessage: 'Please fill out this field',\r\n  });\r\n\r\n  useEffect(() => {\r\n    let token = localStorage.getItem('token');\r\n    if (token) {\r\n      checkTokenValidity(token);\r\n    } else setIsLoading(false);\r\n  }, [checkTokenValidity, setIsLoading]);\r\n\r\n  useEffect(() => {\r\n    if (magickRes) setIsSent(true);\r\n  }, [magickRes]);\r\n\r\n  useEffect(() => {\r\n    if (magickError) {\r\n      setIsLoading(false);\r\n    }\r\n  }, [magickError, setIsLoading]);\r\n\r\n  const createAccountClickHandler = (e) => {\r\n    e.preventDefault();\r\n    let isEmailValid = checkEmailValidity(email.value);\r\n    let isNameValid = name.value.trim() !== '';\r\n    let isWorkTypeValid = workType.value.id !== 'placeholder';\r\n    if (!isEmailValid) {\r\n      setEmail((prevState) => ({ ...prevState, invalid: true }));\r\n    }\r\n    if (!isNameValid) setName((prevState) => ({ ...prevState, invalid: true }));\r\n    if (!isWorkTypeValid) {\r\n      setWorkType((prevState) => ({ ...prevState, invalid: true }));\r\n    }\r\n    if (isEmailValid && isNameValid && isWorkTypeValid) {\r\n      setIsLoading(true);\r\n      let jsonData = JSON.stringify({\r\n        email: email.value,\r\n        firstName: name.value,\r\n        workType: workType.value.type,\r\n      });\r\n      magicLink(jsonData);\r\n    }\r\n  };\r\n\r\n  let signUpContent = (\r\n    <div className={styles.SignUp}>\r\n      <h2 className={styles.Heading}>Create Account</h2>\r\n      <p className={styles.Subheading}>\r\n        Already have an account?{' '}\r\n        <Link to={`${authUrl}/sign-in`} className={styles.SignInLink}>\r\n          Sign in\r\n        </Link>\r\n      </p>\r\n      <div className={styles.FormContent}>\r\n        <a\r\n          className={styles.GoogleLink}\r\n          href={`${process.env.REACT_APP_API_BASE_URL_TEST}/api/v1/auth/google`}\r\n        >\r\n          <Button>\r\n            <img src={google} alt='google' className={styles.GoogleLogo} />\r\n            Sign Up with Google\r\n          </Button>\r\n        </a>\r\n        <Or />\r\n        <form className={styles.Form}>\r\n          <Input {...name} setValue={setName} />\r\n          <Input {...email} setValue={setEmail} />\r\n          <Select {...workType} setValue={setWorkType} />\r\n          <Button onClick={createAccountClickHandler}>Create Account</Button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  if (isLoading)\r\n    signUpContent = <Spinner style={{ width: '100px', height: '100px' }} />;\r\n\r\n  return !isSent ? signUpContent : <CheckMail />;\r\n};\r\n\r\nexport default SignUp;\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport styles from './Token.module.css';\r\nimport Spinner from '../../../components/Spinner2/Spinner';\r\nimport { useRouteMatch, useLocation, useHistory } from 'react-router-dom';\r\n\r\nconst Token = ({ setToken }) => {\r\n  const match = useRouteMatch();\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const getToken = useCallback(() => {\r\n    return new URLSearchParams(location.search).get('token');\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      let tokenParam = getToken();\r\n      if (tokenParam) {\r\n        localStorage.setItem('token', tokenParam);\r\n        setToken(tokenParam);\r\n      } else history.push(`${match.path}/sign-in`);\r\n    }\r\n  }, [getToken, setToken, history, match, isFirstLoad]);\r\n\r\n  return (\r\n    <div className={styles.Token}>\r\n      <Spinner style={{ width: '100px', height: '100px' }} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Token;\r\n","import instance from '../axios-instance';\r\n\r\nconst setAuthToken = (token) => {\r\n  instance.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n};\r\n\r\nexport default setAuthToken;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useRefreshToken = () => {\r\n  const [newToken, setNewToken] = useState(null);\r\n  const [refreshError, setRefreshError] = useState(null);\r\n  const isMounted = useRef(false);\r\n  const axiosRefreshToken = useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get('/refresh-token')\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const refreshToken = useCallback(async () => {\r\n    setNewToken(null)\r\n    setRefreshError(null)\r\n    try {\r\n      const res = await axiosRefreshToken();\r\n      console.log(res);\r\n      if (isMounted.current) {\r\n        setNewToken(res.data.accessToken);\r\n      }\r\n    } catch (err) {\r\n      setRefreshError(err)\r\n      console.log('Error Refreshing Token', err);\r\n    } finally {\r\n      return;\r\n    }\r\n  }, [axiosRefreshToken]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { refreshToken, newToken, refreshError };\r\n};\r\n\r\nexport default useRefreshToken;\r\n","import { createContext } from 'react';\r\n\r\nconst UserContext = createContext(null);\r\nexport default UserContext;\r\n","import React, { useCallback, useEffect, useState, useContext } from 'react';\r\nimport styles from './Auth.module.css';\r\nimport saly from '../../assets/auth/saly.png';\r\nimport twiso from '../../assets/twiso.svg';\r\nimport SignIn from './SignIn/SignIn';\r\nimport SignUp from './SignUp/SignUp';\r\nimport Token from './Token/Token';\r\nimport {\r\n  useRouteMatch,\r\n  useHistory,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from 'react-router-dom';\r\nimport setAuthToken from '../../utils/setAuthToken';\r\nimport useRefreshToken from '../../hooks/useRefreshToken';\r\nimport UserContext from '../../contexts/UserContext';\r\n\r\nconst Auth = () => {\r\n  const { userDispatch } = useContext(UserContext);\r\n  const { refreshToken, newToken, refreshError } = useRefreshToken();\r\n  const [token, setToken] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const match = useRouteMatch();\r\n  const history = useHistory();\r\n  const checkTokenValidity = useCallback(\r\n    (token) => {\r\n      setIsLoading(true);\r\n      setAuthToken(token);\r\n      refreshToken();\r\n    },\r\n    [refreshToken]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (newToken) {\r\n      localStorage.setItem('token', newToken);\r\n      setAuthToken(newToken);\r\n      userDispatch({ type: 'setIsAuthenticated', data: true });\r\n    } else if (refreshError) {\r\n      localStorage.removeItem('token');\r\n      setIsLoading(false);\r\n      history.replace(`/sign-in`);\r\n    }\r\n  }, [newToken, refreshError, userDispatch, history, match]);\r\n\r\n  useEffect(() => {\r\n    if (token) checkTokenValidity(token);\r\n  }, [token, checkTokenValidity]);\r\n\r\n  return (\r\n    <div className={styles.Auth}>\r\n      <div className={styles.Testimonial}>\r\n        <div className={styles.Background}></div>\r\n        <div className={styles.TestimonialContent}>\r\n          <img src={twiso} alt='twiso' className={styles.Twiso} />\r\n          <p className={styles.Heading}>Transcribe. Edit. Design.</p>\r\n          <p className={styles.Subheading}>All in one place.</p>\r\n          <img src={saly} alt='saly' className={styles.Mascot} />\r\n        </div>\r\n      </div>\r\n      <div className={styles.Account}>\r\n        <Switch>\r\n          <Route exact path={`${match.path}`}>\r\n            <Token setToken={setToken} />\r\n          </Route>\r\n          <Route exact path={`${match.path}/sign-in`}>\r\n            <SignIn\r\n              authUrl={match.path}\r\n              setIsLoading={setIsLoading}\r\n              isLoading={isLoading}\r\n              checkTokenValidity={checkTokenValidity}\r\n              token={token}\r\n            />\r\n          </Route>\r\n          <Route exact path={`${match.path}/sign-up`}>\r\n            <SignUp\r\n              authUrl={match.path}\r\n              setIsLoading={setIsLoading}\r\n              isLoading={isLoading}\r\n              checkTokenValidity={checkTokenValidity}\r\n              token={token}\r\n            />\r\n          </Route>\r\n          <Redirect to={`${match.path}/sign-in`} />\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n","export default __webpack_public_path__ + \"static/media/dot.2b8ec3cc.svg\";","import React from 'react';\r\nimport styles from './User.module.css';\r\nimport dot from '../../../../assets/homepage/dot.svg';\r\n\r\nconst User = () => {\r\n  return (\r\n    <div className={styles.User}>\r\n      <div className={styles.UserName}>\r\n        <div className={styles.Initials}>\r\n          <span className={styles.Letter}>D</span>\r\n        </div>\r\n        <div className={styles.Name}>Dmitry</div>\r\n      </div>\r\n      <div className={styles.Dots}>\r\n        <img src={dot} alt='dot' />\r\n        <img src={dot} alt='dot' />\r\n        <img src={dot} alt='dot' />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","export default __webpack_public_path__ + \"static/media/templates.5e558890.svg\";","export default __webpack_public_path__ + \"static/media/projects.f9bef55f.svg\";","export default __webpack_public_path__ + \"static/media/settings.54de79ee.svg\";","import React from 'react';\r\nimport { NavLink, useRouteMatch } from 'react-router-dom';\r\nimport styles from './SideDrawer.module.css';\r\nimport User from './User/User';\r\nimport templates from '../../../assets/homepage/templates.svg';\r\nimport projects from '../../../assets/homepage/projects.svg';\r\nimport settings from '../../../assets/homepage/settings.svg';\r\n\r\nconst SideDrawer = () => {\r\n  const match = useRouteMatch();\r\n\r\n  return (\r\n    <div className={styles.SideDrawer}>\r\n      <User />\r\n      <div className={styles.Links}>\r\n        <NavLink\r\n          to={`${match.path}/templates`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          <img src={templates} alt='templates' />\r\n          <span className={styles.LinkText}>Templates</span>\r\n        </NavLink>\r\n        <NavLink\r\n          to={`${match.path}/projects`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          <img src={projects} alt='templates' />\r\n          <span className={styles.LinkText}>My projects</span>\r\n        </NavLink>\r\n        <NavLink\r\n          to={`${match.path}/settings`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          <img src={settings} alt='templates' />\r\n          <span className={styles.LinkText}>Settings</span>\r\n        </NavLink>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SideDrawer;\r\n","import React from 'react';\r\nimport styles from './Navbar.module.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Navbar = () => {\r\n\r\n  return (\r\n    <header className={styles.Navbar}>\r\n      <Link className={styles.NewButton} to='/editor/new'>\r\n        <span className={styles.Plus}>+</span>New Project\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","export default __webpack_public_path__ + \"static/media/trash.15a0e3b4.svg\";","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useDeleteVideo = () => {\r\n  const [isDeletingVideo, setIsDeletingVideo] = useState(false);\r\n  const [deleteVideoResponse, setDeleteVideoResponse] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosDeleteVideo = useCallback((id) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .delete(`/videos/${id}`)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const deleteVideo = useCallback(\r\n    async (id) => {\r\n      setDeleteVideoResponse(null);\r\n      setIsDeletingVideo(true);\r\n      try {\r\n        const res = await axiosDeleteVideo(id);\r\n        if (isMounted.current) setDeleteVideoResponse('success');\r\n        console.log(res);\r\n      } catch (err) {\r\n        if (isMounted.current) {\r\n          setDeleteVideoResponse('error');\r\n          setIsDeletingVideo(false);\r\n        } \r\n        console.log('Error Deleting Video', err);\r\n      } finally {\r\n        return;\r\n      }\r\n    },\r\n    [axiosDeleteVideo]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isDeletingVideo,\r\n    deleteVideoResponse,\r\n    deleteVideo,\r\n  };\r\n};\r\n\r\nexport default useDeleteVideo;\r\n","import React, { useEffect, useState } from 'react';\r\nimport styles from './Project.module.css';\r\nimport useUpdateProject from '../../../../hooks/useUpdateProject';\r\nimport Spinner from '../../../../components/Spinner2/Spinner';\r\nimport { Link } from 'react-router-dom';\r\nimport trash from '../../../../assets/preview/trash.svg';\r\nimport useDeleteVideo from '../../../../hooks/useDeleteVideo';\r\n\r\nconst Project = ({ video, setShouldFetch }) => {\r\n  const [input, setInput] = useState(video.title || '');\r\n  const { isUpdatingProject, updateProject, updateResponse } = useUpdateProject();\r\n  const { isDeletingVideo, deleteVideoResponse, deleteVideo } =\r\n    useDeleteVideo();\r\n\r\n  const transformDate = (d) => {\r\n    let date = new Date(d);\r\n    let day = date.getDate();\r\n    let month = date.getMonth() + 1;\r\n    let year = date.getFullYear();\r\n    let dateString = `${day > 9 ? day : '0' + day}.${\r\n      month > 9 ? month : '0' + month\r\n    }.${year}`;\r\n    return dateString;\r\n  };\r\n\r\n  const blurHandler = (e) => {\r\n    let value = e.target.value.trim();\r\n    if (value.length > 0 && value !== video.title) {\r\n      updateProject({\r\n        id: video._id,\r\n        title: value,\r\n      });\r\n    } else setInput(video.title);\r\n  };\r\n\r\n  const deleteClickHandler = () => {\r\n    let box = window.confirm('Are you sure you want to delete this project?');\r\n    if (box === true) deleteVideo(video._id);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (updateResponse && typeof updateResponse !== 'string') {\r\n      video.title = updateResponse.title;\r\n    } else if (updateResponse === 'error') setInput(video.title);\r\n  }, [updateResponse, video]);\r\n\r\n  useEffect(() => {\r\n    if (deleteVideoResponse === 'success') {\r\n      setShouldFetch(true);\r\n    }\r\n  }, [deleteVideoResponse, setShouldFetch]);\r\n\r\n  return (\r\n    <div className={styles.Project}>\r\n      <Link\r\n        to={`/${!video.final_video_url ? 'editor' : 'preview'}/${video._id}`}\r\n        className={styles.Video}\r\n        style={{ backgroundImage: `url(${video.screenshot_url})` }}\r\n      ></Link>\r\n\r\n      <div className={styles.InfoContainer}>\r\n        <div className={styles.Info}>\r\n          {isUpdatingProject ? (\r\n            <Spinner\r\n              style={{ width: '20px', height: '20px', margin: 'auto 0' }}\r\n            />\r\n          ) : (\r\n            <input\r\n              className={styles.Name}\r\n              type='text'\r\n              value={input}\r\n              onBlur={blurHandler}\r\n              onChange={(e) => setInput(e.target.value)}\r\n            />\r\n          )}\r\n          <div className={styles.DateAndTrash}>\r\n            <p className={styles.Date}>{transformDate(video.created_at)}</p>\r\n            {isDeletingVideo ? (\r\n              <Spinner\r\n                style={{\r\n                  width: '25.6px',\r\n                  height: '25.6px',\r\n                  marginLeft: '0.2rem',\r\n                }}\r\n              />\r\n            ) : (\r\n              <img\r\n                className={styles.Trash}\r\n                src={trash}\r\n                alt='delete'\r\n                onClick={deleteClickHandler}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Project;\r\n","import React from 'react';\r\nimport styles from './Projects.module.css';\r\nimport { Link } from 'react-router-dom';\r\nimport Project from './Project/Project';\r\nimport Spinner from '../../../components/Spinner2/Spinner';\r\n\r\nconst Projects = ({ videos, setShouldFetch }) => {\r\n  return (\r\n    <div className={styles.Projects}>\r\n      <h2 className={styles.Heading}>My projects</h2>\r\n      <p className={styles.Subheading}>\r\n        All your video and audio files in one place.\r\n      </p>\r\n      <div className={styles.ProjectsList}>\r\n        <div className={styles.AddProject}>\r\n          <Link className={styles.AddProjectInner} to='/editor/new'>\r\n            <div className={styles.AddProjectText}>\r\n              <span>+ Add new</span>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n\r\n        {videos ? (\r\n          videos.map((video) => {\r\n            return (\r\n              <div className={styles.ProjectContainer} key={video._id}>\r\n                <Project video={video} setShouldFetch={setShouldFetch} />\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <Spinner style={{ width: '60px', height: '60px' }} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Projects;\r\n","export default __webpack_public_path__ + \"static/media/pic1.c02db87d.png\";","export default __webpack_public_path__ + \"static/media/pic2.52a36858.png\";","export default __webpack_public_path__ + \"static/media/pic3.575c1345.png\";","export default __webpack_public_path__ + \"static/media/pic4.f225bae3.png\";","export default __webpack_public_path__ + \"static/media/pic5.4c4aa83f.png\";","export default __webpack_public_path__ + \"static/media/pic6.ab8ce737.png\";","import React from 'react';\r\nimport styles from './Webinar.module.css';\r\nimport pic1 from '../../../../assets/homepage/pic1.png';\r\nimport pic2 from '../../../../assets/homepage/pic2.png';\r\nimport pic3 from '../../../../assets/homepage/pic3.png';\r\nimport pic4 from '../../../../assets/homepage/pic4.png';\r\nimport pic5 from '../../../../assets/homepage/pic5.png';\r\nimport pic6 from '../../../../assets/homepage/pic6.png';\r\n\r\nconst Webinar = () => {\r\n  return (\r\n    <div className={styles.Webinar}>\r\n      <h2 className={styles.Heading}>Webinar</h2>\r\n      <p className={styles.Subheading}>\r\n        Make your webinar branded and professional looking\r\n      </p>\r\n      <div className={styles.TemplatesList}>\r\n        <div className={styles.Template}>\r\n          <div\r\n            className={styles.TemplateInner}\r\n            style={{ backgroundImage: `url(${pic1})` }}\r\n          ></div>\r\n        </div>\r\n        <div className={styles.Template}>\r\n          <div\r\n            className={styles.TemplateInner}\r\n            style={{ backgroundImage: `url(${pic2})` }}\r\n          ></div>\r\n        </div>\r\n        <div className={styles.Template}>\r\n          <div\r\n            className={styles.TemplateInner}\r\n            style={{ backgroundImage: `url(${pic3})` }}\r\n          ></div>\r\n        </div>\r\n        <div className={styles.Template}>\r\n          <div\r\n            className={styles.TemplateInner}\r\n            style={{ backgroundImage: `url(${pic4})` }}\r\n          ></div>\r\n        </div>\r\n        <div className={styles.Template}>\r\n          <div\r\n            className={styles.TemplateInner}\r\n            style={{ backgroundImage: `url(${pic5})` }}\r\n          ></div>\r\n        </div>\r\n        <div className={styles.Template}>\r\n          <div\r\n            className={styles.TemplateInner}\r\n            style={{ backgroundImage: `url(${pic6})` }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Webinar;\r\n","import React from 'react';\r\nimport styles from './Templates.module.css';\r\nimport {\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n  useRouteMatch,\r\n  NavLink,\r\n} from 'react-router-dom';\r\nimport Webinar from './Webinar/Webinar';\r\n\r\nconst Templates = () => {\r\n  const match = useRouteMatch();\r\n  return (\r\n    <div className={styles.Templates}>\r\n      <div className={styles.NavLinks}>\r\n        <NavLink\r\n          to={`${match.path}/webinar`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          Webinar\r\n        </NavLink>\r\n        <NavLink\r\n          to={`${match.path}/podcast`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          Podcast\r\n        </NavLink>\r\n        <NavLink\r\n          to={`${match.path}/vlog`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          Vlog\r\n        </NavLink>\r\n        <NavLink\r\n          to={`${match.path}/demo-recording`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          Demo recording\r\n        </NavLink>\r\n        <NavLink\r\n          to={`${match.path}/video-testimonial`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          Video testimonial\r\n        </NavLink>\r\n        <NavLink\r\n          to={`${match.path}/training-onboarding`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          Training & onboarding\r\n        </NavLink>\r\n      </div>\r\n\r\n      <Switch>\r\n        <Route exact path={`${match.path}/webinar`}>\r\n          <Webinar />\r\n        </Route>\r\n        <Route exact path={`${match.path}/podcast`}>\r\n          <h1 className={styles.Heading}>Podcast</h1>\r\n        </Route>\r\n        <Route exact path={`${match.path}/vlog`}>\r\n          <h1 className={styles.Heading}>Vlog</h1>\r\n        </Route>\r\n        <Route exact path={`${match.path}/demo-recording`}>\r\n          <h1 className={styles.Heading}>Demo recording</h1>\r\n        </Route>\r\n        <Route exact path={`${match.path}/video-testimonial`}>\r\n          <h1 className={styles.Heading}>Video testimonial</h1>\r\n        </Route>\r\n        <Route exact path={`${match.path}/training-onboarding`}>\r\n          <h1 className={styles.Heading}>Training & onboarding</h1>\r\n        </Route>\r\n        <Redirect to={`${match.path}/webinar`} />\r\n      </Switch>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Templates;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetVideos = () => {\r\n  const [isGettingVideos, setIsGettingVideos] = useState(false);\r\n  const [videos, setVideos] = useState(false);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetVideos = useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get('/videos')\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getVideos = useCallback(async () => {\r\n    setIsGettingVideos(true);\r\n    try {\r\n      const res = await axiosGetVideos();\r\n      if (isMounted.current) setVideos(res.data);\r\n      console.log(res);\r\n    } catch (err) {\r\n      console.log('Error Getting Videos', err);\r\n    } finally {\r\n      if (isMounted.current) setIsGettingVideos(false);\r\n      return;\r\n    }\r\n  }, [axiosGetVideos]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isGettingVideos, getVideos, videos };\r\n};\r\n\r\n\r\n\r\nexport default useGetVideos;\r\n","import React, { useEffect, useState } from 'react';\r\nimport styles from './Homepage.module.css';\r\nimport SideDrawer from './SideDrawer/SideDrawer';\r\nimport Navbar from './Navbar/Navbar';\r\nimport Projects from './Projects/Projects';\r\nimport Templates from './Templates/Templates';\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom';\r\nimport useGetVideos from '../../hooks/useGetVideos';\r\n\r\nconst Homepage = () => {\r\n  const match = useRouteMatch();\r\n  const { getVideos, videos } = useGetVideos();\r\n  const [shouldFetchVideos, setShouldFetchVideos] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (shouldFetchVideos) {\r\n      setShouldFetchVideos(false);\r\n      getVideos();\r\n    }\r\n  }, [getVideos, shouldFetchVideos]);\r\n\r\n  return (\r\n    <div className={styles.Homepage}>\r\n      <SideDrawer />\r\n      <div className={styles.Main}>\r\n        <Navbar />\r\n        <Switch>\r\n          <Route path={`${match.path}/templates`}>\r\n            <Templates />\r\n          </Route>\r\n          <Route exact path={`${match.path}/projects`}>\r\n            <Projects\r\n              videos={videos}\r\n              setShouldFetch={setShouldFetchVideos}\r\n            />\r\n          </Route>\r\n          <Route exact path={`${match.path}/settings`}>\r\n            <h1>Settings</h1>\r\n          </Route>\r\n          <Redirect to={`${match.path}/projects`} />\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Homepage;\r\n","import { useReducer } from 'react';\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'setIsAuthenticated':\r\n      return { ...state, isAuthenticated: action.data };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst useUserState = () => {\r\n  const [userState, userDispatch] = useReducer(reducer, initialState);\r\n  return [userState, userDispatch];\r\n};\r\n\r\nexport default useUserState;\r\n","import { useEffect } from 'react';\r\nconst useTrackTime = (refreshToken) => {\r\n  useEffect(() => {\r\n    let interval = setInterval(() => {\r\n      refreshToken();\r\n    }, 1000 * 60 * 60 * 5); // 5 hours\r\n\r\n    return () => clearInterval(interval);\r\n  }, [refreshToken]);\r\n};\r\n\r\nexport default useTrackTime;\r\n","export default __webpack_public_path__ + \"static/media/exportArrow.a5f3dc35.svg\";","export default __webpack_public_path__ + \"static/media/copyLink.5981ccb5.svg\";","export default __webpack_public_path__ + \"static/media/play.bf489b35.svg\";","export default __webpack_public_path__ + \"static/media/pause.a3096265.svg\";","export default __webpack_public_path__ + \"static/media/fullScreen.08af1b32.svg\";","const openFullScreen = (el) => {\r\n  if (el.requestFullscreen) {\r\n    el.requestFullscreen();\r\n  } else if (el.msRequestFullscreen) {\r\n    el.msRequestFullscreen();\r\n  } else if (el.mozRequestFullScreen) {\r\n    el.mozRequestFullScreen();\r\n  } else if (el.webkitRequestFullscreen) {\r\n    el.webkitRequestFullscreen();\r\n  }\r\n};\r\n\r\nconst closeFullscreen = () => {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } else if (document.webkitExitFullscreen) {\r\n    document.webkitExitFullscreen();\r\n  } else if (document.msExitFullscreen) {\r\n    document.msExitFullscreen();\r\n  }\r\n};\r\n\r\nexport const fullScreenHanlder = (container, video, className) => {\r\n  if (!document.fullscreenElement) {\r\n    openFullScreen(container);\r\n    if (video) video.classList.add(className);\r\n  } else {\r\n    closeFullscreen();\r\n    if (video) video.classList.remove(className);\r\n  }\r\n};\r\n","export const handleInputChange = (val, min, max, ref) => {\r\n  ref.current.style.backgroundSize =\r\n    ((val - min) * 100) / (max - min) + '% 100%';\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport styles from './TimelineSlider.module.css';\r\nimport { handleInputChange } from '../../utils/slider';\r\n\r\nconst TimelineSlider = ({\r\n  min,\r\n  max,\r\n  step,\r\n  value,\r\n  setValue,\r\n  isPlaying,\r\n  video,\r\n}) => {\r\n  const inputRef = useRef(null);\r\n  const [shouldPlay, setShouldPlay] = useState(false);\r\n\r\n  useEffect(() => {\r\n    handleInputChange(value, min, max, inputRef);\r\n  }, [value, min, max]);\r\n\r\n  const mouseDownHandler = (e) => {\r\n    if (isPlaying) {\r\n      setShouldPlay(true);\r\n      video.pause();\r\n    } else {\r\n      setShouldPlay(false);\r\n    }\r\n  };\r\n\r\n  const mouseUpHandler = (e) => {\r\n    if (shouldPlay) video.play();\r\n  };\r\n\r\n  const changeHandler = (e) => {\r\n    setValue(e.target.value);\r\n    video.currentTime = e.target.value;\r\n  };\r\n\r\n  return (\r\n    <input\r\n      type='range'\r\n      ref={inputRef}\r\n      className={styles.Slider}\r\n      min={min}\r\n      max={max}\r\n      step={step}\r\n      value={value}\r\n      onChange={changeHandler}\r\n      onMouseDown={mouseDownHandler}\r\n      onMouseUp={mouseUpHandler}\r\n    />\r\n  );\r\n};\r\n\r\nexport default TimelineSlider;\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport styles from './Time.module.css';\r\nimport TimelineSlider from './TimelineSlider/TimelineSlider';\r\n\r\nconst Time = ({\r\n  duration,\r\n  time,\r\n  setTime,\r\n  isPlaying,\r\n  video\r\n}) => {\r\n  const [isMoreThanHour, setIsMoreThanHour] = useState(false);\r\n  const timeStrRef = useRef(null);\r\n  const [timeString, setTimeString] = useState('00:00');\r\n\r\n  const generateTimeString = useCallback((t) => {\r\n    let timeStr = '';\r\n    let h = Math.floor(t / 3600);\r\n    let m = Math.floor((t % 3600) / 60);\r\n    let s = Math.floor((t % 3600) % 60);\r\n    if (h > 0) {\r\n      h < 10 ? (timeStr += '0' + h + ':') : (timeStr += h + ':');\r\n      setIsMoreThanHour(true);\r\n    } else setIsMoreThanHour(false);\r\n    if (m < 10) timeStr += '0';\r\n    timeStr += m + ':';\r\n    if (s < 10) timeStr += '0';\r\n    timeStr += s;\r\n    setTimeString(timeStr);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isMoreThanHour) timeStrRef.current.style.width = '4rem';\r\n    else timeStrRef.current.style.width = '3rem';\r\n  }, [isMoreThanHour]);\r\n\r\n  useEffect(() => {\r\n    generateTimeString(time);\r\n  }, [time, generateTimeString]);\r\n\r\n  return (\r\n    <>\r\n      <p ref={timeStrRef} className={styles.Time}>\r\n        {timeString}\r\n      </p>\r\n      <div className={styles.Timeline}>\r\n        <TimelineSlider\r\n          min='0'\r\n          max={duration}\r\n          step='0.01'\r\n          value={time}\r\n          setValue={setTime}\r\n          isPlaying={isPlaying}\r\n          video={video}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Time;\r\n","export default __webpack_public_path__ + \"static/media/volume.d174078d.svg\";","import React, { useEffect, useRef } from 'react';\r\nimport styles from './VolumeSlider.module.css';\r\nimport { handleInputChange } from '../../utils/slider';\r\n\r\nconst VolumeSlider = ({ min, max, step, value, setValue }) => {\r\n  const inputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    handleInputChange(value, min, max, inputRef);\r\n  }, [value, min, max]);\r\n\r\n  return (\r\n    <input\r\n      type='range'\r\n      ref={inputRef}\r\n      className={styles.Slider}\r\n      min={min}\r\n      max={max}\r\n      step={step}\r\n      value={value}\r\n      onChange={(e) => setValue(e.target.value)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default VolumeSlider;","import React, { useEffect, useRef } from 'react';\r\nimport styles from './Volume.module.css';\r\nimport volumeSvg from '../../../../assets/preview/volume.svg';\r\nimport VolumeSlider from './VolumeSlider/VolumeSlider';\r\n\r\nconst Volume = ({ video, volume, setVolume }) => {\r\n  const volumeRef = useRef('1');\r\n\r\n  useEffect(() => {\r\n    if (+volume !== 0) volumeRef.current = volume;\r\n    video.volume = volume;\r\n  }, [video, volume]);\r\n\r\n  const volumeClickHandler = () => {\r\n    if (+volume === 0 && +volumeRef.current > 0.1) {\r\n      setVolume(volumeRef.current);\r\n    } else if (+volume === 0) {\r\n      volumeRef.current = '1';\r\n      setVolume('1');\r\n    } else {\r\n      volumeRef.current = volume;\r\n      setVolume('0');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button className={styles.Volume}>\r\n      <div className={styles.VolumeButton} onClick={volumeClickHandler}>\r\n        <img src={volumeSvg} alt='volume' />\r\n        {+volume === 0 ? <div className={styles.VolumeOff}></div> : null}\r\n      </div>\r\n      <div className={styles.VolumeBar}>\r\n        <VolumeSlider\r\n          min='0'\r\n          max='1'\r\n          step='0.1'\r\n          value={volume}\r\n          setValue={setVolume}\r\n        />\r\n      </div>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Volume;\r\n","import { useState, useEffect, useRef } from 'react';\r\n\r\nconst useSingleAndDoubleClick = (onSingleClick, onDoubleClick, ref) => {\r\n  const [clickCount, setClickCount] = useState(0);\r\n  const isMounted = useRef(false);\r\n  const timerRef = useRef(null);\r\n\r\n  const clickHandler = (e) => {\r\n    if (e.target.id === 'controls') setClickCount((prevSatate) => prevSatate + 1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (clickCount === 1) {\r\n      timerRef.current = setTimeout(() => {\r\n        if (isMounted.current) {\r\n          setClickCount(0);\r\n          onSingleClick();\r\n        }\r\n      }, 300);\r\n    } else if (clickCount > 1) {\r\n      if (timerRef.current) {\r\n        clearTimeout(timerRef.current);\r\n        timerRef.current = null;\r\n      }\r\n      setClickCount(0);\r\n      onDoubleClick();\r\n    }\r\n  }, [clickCount, onSingleClick, onDoubleClick]);\r\n\r\n  useEffect(() => {\r\n    let target = ref.current;\r\n    target.addEventListener('click', clickHandler);\r\n    return () => target.removeEventListener('click', clickHandler);\r\n  }, [ref]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n};\r\n\r\nexport default useSingleAndDoubleClick;\r\n","import { useCallback, useEffect, useRef, useState } from 'react';\r\n\r\nconst useShowHidePanel = (\r\n  isPlaying,\r\n  controlsRef,\r\n  panelRef,\r\n  visible,\r\n  hover,\r\n  shouldShowPanel,\r\n  setShouldShowPanel\r\n) => {\r\n  const [isCursorOnPanel, setIsCursorOnPanel] = useState(false);\r\n  const isMounted = useRef(false);\r\n  const hovertimerRef = useRef(null);\r\n  const visibletimerRef = useRef(null);\r\n\r\n  const startTimeout = useCallback((timerRef, ref, style) => {\r\n    if (timerRef.current) {\r\n      clearTimeout(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n    timerRef.current = setTimeout(() => {\r\n      if (isMounted.current) {\r\n        ref.current.classList.remove(style);\r\n        timerRef.current = null;\r\n      }\r\n    }, 3000);\r\n  }, []);\r\n\r\n  const mouseMoveHanlder = useCallback(() => {\r\n    controlsRef.current.classList.add(hover);\r\n    if (isPlaying && !isCursorOnPanel) {\r\n      startTimeout(hovertimerRef, controlsRef, hover);\r\n    } else if (isPlaying && isCursorOnPanel) {\r\n      if (hovertimerRef.current) {\r\n        clearTimeout(hovertimerRef.current);\r\n        hovertimerRef.current = null;\r\n      }\r\n    }\r\n  }, [isPlaying, isCursorOnPanel, controlsRef, startTimeout, hover]);\r\n\r\n  const mouseEnterHandler = useCallback(() => setIsCursorOnPanel(true), []);\r\n  const mouseLeaveHandler = useCallback(() => setIsCursorOnPanel(false), []);\r\n\r\n  useEffect(() => {\r\n    controlsRef.current.classList.add(hover);\r\n  }, [controlsRef, hover]);\r\n\r\n  useEffect(() => {\r\n    if (!isPlaying) {\r\n      controlsRef.current.classList.add(visible);\r\n      controlsRef.current.classList.add(hover);\r\n    } else {\r\n      controlsRef.current.classList.remove(visible);\r\n      if (!isCursorOnPanel) startTimeout(hovertimerRef, controlsRef, hover);\r\n    }\r\n  }, [isPlaying, controlsRef, visible, startTimeout, hover, isCursorOnPanel]);\r\n\r\n  useEffect(() => {\r\n    if (isPlaying && shouldShowPanel && !isCursorOnPanel) {\r\n      setShouldShowPanel(false);\r\n      controlsRef.current.classList.add(visible);\r\n      startTimeout(visibletimerRef, controlsRef, visible);\r\n    } else setShouldShowPanel(false);\r\n  }, [\r\n    controlsRef,\r\n    hover,\r\n    shouldShowPanel,\r\n    setShouldShowPanel,\r\n    visible,\r\n    startTimeout,\r\n    isPlaying,\r\n    isCursorOnPanel,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    let controls = controlsRef.current;\r\n    let panel = panelRef.current;\r\n    controls.addEventListener('mousemove', mouseMoveHanlder);\r\n    panel.addEventListener('mouseenter', mouseEnterHandler);\r\n    panel.addEventListener('mouseleave', mouseLeaveHandler);\r\n    return () => {\r\n      controls.removeEventListener('mousemove', mouseMoveHanlder);\r\n      panel.removeEventListener('mouseenter', mouseEnterHandler);\r\n      panel.removeEventListener('mouseleave', mouseLeaveHandler);\r\n    };\r\n  }, [\r\n    controlsRef,\r\n    panelRef,\r\n    mouseMoveHanlder,\r\n    mouseEnterHandler,\r\n    mouseLeaveHandler,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n};\r\n\r\nexport default useShowHidePanel;\r\n","import { useEffect, useCallback } from 'react';\r\n\r\nconst useKeyEvents = (video, playPause, setVolume, setShouldShowPanel) => {\r\n  const keydownHandler = useCallback(\r\n    (e) => {\r\n      if (document.activeElement.tagName === 'INPUT') e.preventDefault();\r\n      let isSpace = e.code === 'Space' || e.key === 'Space';\r\n      if (isSpace) {\r\n        e.preventDefault();\r\n        playPause();\r\n      } else if (\r\n        (e.code === 'ArrowLeft' || e.key === 'ArrowLeft') &&\r\n        !e.shiftKey\r\n      ) {\r\n        video.currentTime = video.currentTime - 5;\r\n      } else if (\r\n        (e.code === 'ArrowRight' || e.key === 'ArrowRight') &&\r\n        !e.shiftKey\r\n      ) {\r\n        video.currentTime = video.currentTime + 5;\r\n      } else if ((e.code === 'ArrowUp' || e.key === 'ArrowUp') && !e.shiftKey) {\r\n        e.preventDefault();\r\n        setVolume((prevState) => {\r\n          if (+prevState < 1)\r\n            return Math.round((+prevState + 0.1) * 100) / 100 + '';\r\n          else return prevState;\r\n        });\r\n      } else if (\r\n        (e.code === 'ArrowDown' || e.key === 'ArrowDown') &&\r\n        !e.shiftKey\r\n      ) {\r\n        e.preventDefault();\r\n        setVolume((prevState) => {\r\n          if (+prevState > 0)\r\n            return Math.round((+prevState - 0.1) * 100) / 100 + '';\r\n          else return prevState;\r\n        });\r\n      }\r\n      if (!isSpace) setShouldShowPanel(true);\r\n    },\r\n    [video, playPause, setVolume, setShouldShowPanel]\r\n  );\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', keydownHandler);\r\n    return () => window.removeEventListener('keydown', keydownHandler);\r\n  }, [keydownHandler]);\r\n};\r\n\r\nexport default useKeyEvents;\r\n","import React, { useState, useRef, useCallback } from 'react';\r\nimport styles from './Controls.module.css';\r\nimport playSvg from '../../../assets/preview/play.svg';\r\nimport pauseSvg from '../../../assets/preview/pause.svg';\r\nimport fullScreenSvg from '../../../assets/preview/fullScreen.svg';\r\nimport { fullScreenHanlder } from './utils/fullScreen';\r\nimport Time from './Time/Time';\r\nimport Volume from './Volume/Volume';\r\nimport useSingleAndDoubleClick from './hooks/useSingleAndDoubleClick';\r\nimport useShowHidePanel from './hooks/useShowHidePanel';\r\nimport useKeyEvents from './hooks/useKeyEvents';\r\n\r\nconst Controls = ({ video, container, duration, time, setTime, isPlaying }) => {\r\n  const [volume, setVolume] = useState('1');\r\n  const [shouldShowPanel, setShouldShowPanel] = useState(false);\r\n  const controlsRef = useRef(null);\r\n  const panelRef = useRef(null);\r\n  const playPause = useCallback(() => {\r\n    if (isPlaying) video.pause();\r\n    else video.play();\r\n  }, [isPlaying, video]);\r\n\r\n  const fullScreen = useCallback(() => {\r\n    fullScreenHanlder(container, video, styles.FullScreenSize);\r\n  }, [container, video]);\r\n\r\n  useKeyEvents(video, playPause, setVolume, setShouldShowPanel);\r\n  useSingleAndDoubleClick(playPause, fullScreen, controlsRef);\r\n  useShowHidePanel(\r\n    isPlaying,\r\n    controlsRef,\r\n    panelRef,\r\n    styles.Visible,\r\n    styles.Hover,\r\n    shouldShowPanel,\r\n    setShouldShowPanel\r\n  );\r\n\r\n  return (\r\n    <div id='controls' className={styles.Controls} ref={controlsRef}>\r\n      <div className={styles.ControlsPanel} ref={panelRef}>\r\n        <button className={styles.PlayPause} onClick={playPause}>\r\n          {isPlaying ? (\r\n            <img src={pauseSvg} alt='pause' />\r\n          ) : (\r\n            <img src={playSvg} alt='play' />\r\n          )}\r\n        </button>\r\n        <Time\r\n          duration={duration}\r\n          time={time}\r\n          setTime={setTime}\r\n          isPlaying={isPlaying}\r\n          video={video}\r\n        />\r\n        <Volume video={video} volume={volume} setVolume={setVolume} />\r\n        <button\r\n          className={styles.FullScreen}\r\n          onClick={fullScreen}\r\n        >\r\n          <img src={fullScreenSvg} alt='full screen' />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Controls;\r\n","import React, { useState, useRef } from 'react';\r\nimport styles from './CustomPlayer.module.css';\r\nimport Controls from './Controls/Controls';\r\n\r\nconst CustomPlayer = ({ url }) => {\r\n  const [duration, setDuration] = useState(0);\r\n  const videoRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  const [time, setTime] = useState(0);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n  const setVideoDuration = () => setDuration(videoRef.current.duration);\r\n  const handleTimeUpdate = () => setTime(videoRef.current.currentTime);\r\n  const handlePlay = () => setIsPlaying(true);\r\n  const handlePause = () => setIsPlaying(false);\r\n\r\n  return (\r\n    <div className={styles.VideoContainer} ref={containerRef}>\r\n      <video\r\n        className={styles.Video}\r\n        src={url}\r\n        preload='auto'\r\n        ref={videoRef}\r\n        onLoadedMetadata={setVideoDuration}\r\n        onTimeUpdate={handleTimeUpdate}\r\n        onPlay={handlePlay}\r\n        onPause={handlePause}\r\n      />\r\n      {duration ? (\r\n        <Controls\r\n          video={videoRef.current}\r\n          container={containerRef.current}\r\n          duration={duration}\r\n          time={time}\r\n          setTime={setTime}\r\n          isPlaying={isPlaying}\r\n        />\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomPlayer;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetPublicVideo = () => {\r\n  const [isGettingPublicVideo, setIsGettingPublicVideo] = useState(false);\r\n  const [publicInfo, setPublicInfo] = useState(null);\r\n  const [getPublicVideoError, setGetPublicVideoError] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetPublicVideo = useCallback((id) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get(`/public/videos/${id}`)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getPublicVideo = useCallback(\r\n    async (id) => {\r\n      setGetPublicVideoError(null);\r\n      setIsGettingPublicVideo(true);\r\n      try {\r\n        const res = await axiosGetPublicVideo(id);\r\n        if (isMounted.current) {\r\n          setPublicInfo({\r\n            finalUrl: res.data.final_video_url || null,\r\n            title: res.data.title,\r\n          });\r\n        }\r\n        console.log(res);\r\n      } catch (err) {\r\n        if (isMounted.current) setGetPublicVideoError(err);\r\n        console.log('Error Getting Public Video', err);\r\n      } finally {\r\n        if (isMounted.current) setIsGettingPublicVideo(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosGetPublicVideo]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isGettingPublicVideo,\r\n    getPublicVideo,\r\n    publicInfo,\r\n    getPublicVideoError,\r\n  };\r\n};\r\n\r\nexport default useGetPublicVideo;\r\n","import { useEffect, useCallback, useRef, useState } from 'react';\r\nimport setAuthToken from '../utils/setAuthToken';\r\nimport axios from '../axios-instance';\r\n\r\nconst useCheckAuth = (dispatch) => {\r\n  const [newToken, setNewToken] = useState(null);\r\n  const [isAuth, setIsAuth] = useState(false);\r\n  const [isChecking, setIsChecking] = useState(true);\r\n  const [refreshError, setRefreshError] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosRefreshToken = useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get('/refresh-token')\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const refreshToken = useCallback(async () => {\r\n    setNewToken(null);\r\n    setRefreshError(null);\r\n    try {\r\n      const res = await axiosRefreshToken();\r\n      console.log(res);\r\n      if (isMounted.current) {\r\n        setNewToken(res.data.accessToken);\r\n      }\r\n    } catch (err) {\r\n      setRefreshError(err);\r\n      console.log('Error Refreshing Token', err);\r\n    } finally {\r\n      return;\r\n    }\r\n  }, [axiosRefreshToken]);\r\n\r\n  const checkTokenValidity = useCallback(\r\n    (token) => {\r\n      setIsChecking(true);\r\n      setAuthToken(token);\r\n      refreshToken();\r\n    },\r\n    [refreshToken]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (newToken) {\r\n      localStorage.setItem('token', newToken);\r\n      setAuthToken(newToken);\r\n      setIsAuth(true);\r\n      dispatch({ type: 'setIsAuthenticated', data: true });\r\n    } else if (refreshError) {\r\n      localStorage.removeItem('token');\r\n    }\r\n    setIsChecking(false);\r\n  }, [newToken, refreshError, dispatch]);\r\n\r\n  useEffect(() => {\r\n    let token = localStorage.getItem('token');\r\n    if (token) checkTokenValidity(token);\r\n    else {\r\n      setIsChecking(false);\r\n      setIsAuth(false);\r\n    }\r\n  }, [checkTokenValidity]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isChecking, isAuth };\r\n};\r\n\r\nexport default useCheckAuth;\r\n","import React, { useEffect, useRef, useState, useContext } from 'react';\r\nimport styles from './Preview.module.css';\r\nimport Navbar from '../../components/Navbar/Navbar';\r\nimport exportArrow from '../../assets/preview/exportArrow.svg';\r\nimport copyLink from '../../assets/preview/copyLink.svg';\r\nimport { exportText } from './utils/previewUtils';\r\nimport CustomPlayer from '../CustomPlayer/CustomPlayer';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport Spinner from '../../components/Spinner2/Spinner';\r\nimport useGetVideo from '../../hooks/useGetVideo';\r\nimport useGetPublicVideo from '../../hooks/useGetPublicVideo';\r\nimport UserContext from '../../contexts/UserContext';\r\nimport useCheckAuth from '../../hooks/useCheckAuth';\r\n\r\nconst Preview = () => {\r\n  const { userDispatch } = useContext(UserContext);\r\n  const { isChecking, isAuth } = useCheckAuth(userDispatch);\r\n  const { getVideo, info, getVideoError } = useGetVideo();\r\n  const { getPublicVideo, publicInfo, getPublicVideoError } =\r\n    useGetPublicVideo();\r\n  const [videoInfo, setVideoInfo] = useState(null);\r\n  const [article, setArticle] = useState(null);\r\n  const videoDownloadRef = useRef(null);\r\n  const params = useParams();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (info && info.finalText) {\r\n      setVideoInfo({ ...info });\r\n      setArticle(info.finalText);\r\n    } else if (publicInfo && publicInfo.finalUrl) {\r\n      setVideoInfo({ ...publicInfo });\r\n    }\r\n  }, [info, publicInfo]);\r\n\r\n  useEffect(() => {\r\n    if (getVideoError || (info && !info.finalUrl)) {\r\n      let isId = params && params.id;\r\n      if (isId) getPublicVideo(params.id);\r\n    }\r\n  }, [getVideoError, info, history, params, getPublicVideo]);\r\n\r\n  useEffect(() => {\r\n    if (getPublicVideoError || (publicInfo && !publicInfo.finalUrl)) {\r\n      history.push('/home');\r\n    }\r\n  }, [publicInfo, history, getPublicVideoError]);\r\n\r\n  useEffect(() => {\r\n    let isId = params && params.id;\r\n    if (!isChecking && !isAuth && isId) getPublicVideo(params.id);\r\n    else if (!isChecking && isAuth && isId) getVideo(params.id);\r\n  }, [isChecking, isAuth, params, getPublicVideo, getVideo]);\r\n\r\n  const downloadVideoHandler = () => {\r\n    videoDownloadRef.current.click();\r\n  };\r\n\r\n  const copyLinkHandler = () => {\r\n    navigator.clipboard.writeText(window.location.href);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Preview}>\r\n      {videoInfo && videoInfo.finalUrl ? (\r\n        <>\r\n          <Navbar\r\n            videoData={videoInfo}\r\n            isPreview={true}\r\n            getVideoError={getVideoError}\r\n            isAuth={isAuth}\r\n          />\r\n          <main className={styles.Main}>\r\n            <div className={styles.MainContent}>\r\n              <div className={styles.CustomPlayer}>\r\n                <CustomPlayer url={videoInfo.finalUrl} />\r\n                <a\r\n                  ref={videoDownloadRef}\r\n                  style={{ display: 'none' }}\r\n                  href={`${process.env.REACT_APP_API_BASE_URL_TEST}/api/v1/public/videos/download/${params.id}`}\r\n                >\r\n                  Download Video\r\n                </a>\r\n              </div>\r\n              <div className={styles.VideoFooter}>\r\n                <p className={styles.Title}>{videoInfo.title}</p>\r\n                <div className={styles.DownloadAndLink}>\r\n                  <button\r\n                    className={styles.Download}\r\n                    onClick={downloadVideoHandler}\r\n                  >\r\n                    Download\r\n                  </button>\r\n                  <button className={styles.CopyLink} onClick={copyLinkHandler}>\r\n                    <img src={copyLink} alt='copy' />\r\n                    <span>Copy public link</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              {article ? (\r\n                <>\r\n                  <div className={styles.HeadlineAndExport}>\r\n                    <p className={styles.Headline}>\r\n                      Give your articale a headline!\r\n                    </p>\r\n                    <button\r\n                      className={styles.ExportButton}\r\n                      onClick={() => exportText(article, videoInfo.title)}\r\n                    >\r\n                      <span>Export text</span>\r\n                      <img src={exportArrow} alt='arrow' />\r\n                    </button>\r\n                  </div>\r\n                  <p className={styles.Text}>{article}</p>\r\n                </>\r\n              ) : null}\r\n            </div>\r\n          </main>\r\n        </>\r\n      ) : (\r\n        <Spinner style={{ width: '100px', height: '100px' }} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Preview;\r\n","export const exportText = (text, title) => {\r\n  let a = document.createElement('a');\r\n  a.setAttribute(\r\n    'href',\r\n    'data:text/plain;charset=utf-8,' + encodeURIComponent(text)\r\n  );\r\n  a.setAttribute('download', title);\r\n  a.style.display = 'none';\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\nfabric.Video = fabric.util.createClass(fabric.Image, {\r\n  type: 'video',\r\n  cropRect: null,\r\n  id: null,\r\n  cornerRadius: 0,\r\n  originalWidth: 0,\r\n  originalHeight: 0,\r\n  crossOrigin: 'Anonymous',\r\n\r\n  initialize: function (video, options) {\r\n    const defaultOpts = {\r\n      lockRotation: true,\r\n      objectCaching: true,\r\n      lockScalingFlip: true,\r\n      strokeUniform: true,\r\n      crossOrigin: 'Anonymous',\r\n      cacheProperties: ['time'],\r\n    };\r\n    options = options || {};\r\n\r\n    this.callSuper(\r\n      'initialize',\r\n      video,\r\n      Object.assign({}, defaultOpts, options)\r\n    );\r\n  },\r\n\r\n  toObject: function (options) {\r\n    return fabric.util.object.extend(this.callSuper('toObject'), {\r\n      type: this.get('type'),\r\n      cropRect: this.get('cropRect'),\r\n      id: this.get('id'),\r\n      cornerRadius: this.get('cornerRadius'),\r\n      originalWidth: this.get('originalWidth'),\r\n      originalHeight: this.get('originalHeight'),\r\n      crossOrigin: this.get('crossOrigin'),\r\n    });\r\n  },\r\n\r\n  _draw: function (video, ctx, w, h) {\r\n    const c = this.cropRect;\r\n    const d = {\r\n      x: -this.width / 2,\r\n      y: -this.height / 2,\r\n      w: this.width,\r\n      h: this.height,\r\n    };\r\n    if (c) {\r\n      ctx.drawImage(video, c.x, c.y, c.w, c.h, d.x, d.y, d.w, d.h);\r\n    } else {\r\n      ctx.drawImage(video, d.x, d.y, d.w, d.h);\r\n    }\r\n  },\r\n\r\n  // _stroke: function (ctx) {\r\n  //   if (!this.stroke || this.strokeWidth === 0) {\r\n  //     return;\r\n  //   }\r\n  //   var w = this.width / 2,\r\n  //     h = this.height / 2;\r\n  //   ctx.beginPath();\r\n  //   ctx.moveTo(-w, -h);\r\n  //   ctx.lineTo(w, -h);\r\n  //   ctx.lineTo(w, h);\r\n  //   ctx.lineTo(-w, h);\r\n  //   ctx.lineTo(-w, -h);\r\n  //   ctx.closePath();\r\n  // },\r\n\r\n  _render: function (ctx) {\r\n    this._draw(this.getElement(), ctx);\r\n    this._stroke(ctx);\r\n    this._renderPaintInOrder(ctx);\r\n  },\r\n});\r\n\r\nfabric.Video.prototype.setControlsVisibility({\r\n  tl: true,\r\n  tr: true,\r\n  bl: true,\r\n  br: true,\r\n  mtr: false,\r\n});\r\n\r\n// fabric.Video.prototype.setControlsVisibility({\r\n//   tl: true,\r\n//   tr: true,\r\n//   ml: true,\r\n//   mr: true,\r\n//   bl: true,\r\n//   br: true,\r\n//   mtr: false,\r\n// });\r\n\r\n\r\nfabric.Video.fromObject = function (object, callback) {\r\n  return fabric.Object._fromObject(\r\n    'Video',\r\n    object,\r\n    callback,\r\n    'type',\r\n    'cropRect',\r\n    'id',\r\n    'originalWidth',\r\n    'originalHeight'\r\n  );\r\n};","import { fabric } from 'fabric';\r\n\r\nfabric.SpeakerCropBox = fabric.util.createClass(fabric.Rect);\r\n\r\nfabric.SpeakerCropBox.prototype.setControlsVisibility({\r\n  mtr: false,\r\n});","import { fabric } from 'fabric';\r\n\r\nfabric.CircleCropBox = fabric.util.createClass(fabric.Circle);\r\n\r\nfabric.CircleCropBox.prototype.setControlsVisibility({\r\n  mt: false,\r\n  mb: false,\r\n  ml: false,\r\n  mr: false,\r\n  mtr: false,\r\n});\r\n\r\nfabric.CircleCropBox.prototype.render = (function (render) {\r\n  return function (ctx) {\r\n    render.apply(this, arguments);\r\n    this._renderControls(ctx);\r\n    if (!this.canvas._activeObject) this.canvas._activeObject = this;\r\n  };\r\n})(fabric.CircleCropBox.prototype.render);","export default __webpack_public_path__ + \"static/media/ctrlScale.3fdf1e45.svg\";","export default __webpack_public_path__ + \"static/media/ctrlStretch.366a4843.svg\";","export default __webpack_public_path__ + \"static/media/ctrlRotate.aba272aa.svg\";","import { fabric } from 'fabric';\r\nimport ctrlScale from '../assets/editor/ctrlScale.svg';\r\nimport ctrlStretch from '../assets/editor/ctrlStretch.svg';\r\nimport ctrlRotate from '../assets/editor/ctrlRotate.svg';\r\n// import {scalingX, scalingY} from './imageScale';\r\n\r\nfabric.Object.prototype.transparentCorners = false;\r\nfabric.Object.prototype.cornerColor = 'white';\r\nfabric.Object.prototype.borderColor = '#6F7BD0';\r\nfabric.Object.prototype.cornerStrokeColor = '#6F7BD0';\r\nfabric.Object.prototype.cornerStyle = 'circle';\r\nfabric.Object.prototype.objectCaching = false;\r\nfabric.Line.prototype.borderColor = 'transparent';\r\n\r\nconst ctrlStretchImage = new Image();\r\nctrlStretchImage.src = ctrlStretch;\r\nconst ctrlScaleImage = new Image();\r\nctrlScaleImage.src = ctrlScale;\r\nconst ctrlRotateImage = new Image();\r\nctrlRotateImage.src = ctrlRotate;\r\nconst controlsUtils = fabric.controlsUtils,\r\n  scaleSkewStyleHandler = controlsUtils.scaleSkewCursorStyleHandler,\r\n  scaleStyleHandler = controlsUtils.scaleCursorStyleHandler,\r\n  scalingEqually = controlsUtils.scalingEqually,\r\n  scalingYOrSkewingX = controlsUtils.scalingYOrSkewingX,\r\n  scalingXOrSkewingY = controlsUtils.scalingXOrSkewingY,\r\n  scaleOrSkewActionName = controlsUtils.scaleOrSkewActionName,\r\n  objectControls = fabric.Object.prototype.controls;\r\n\r\nconst renderScaleIcon = (icon) => {\r\n  return function renderIcon(ctx, left, top, styleOverride, fabricObject) {\r\n    let size = this.cornerSize;\r\n    ctx.save();\r\n    ctx.translate(left, top);\r\n    ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle));\r\n    ctx.drawImage(icon, -size / 2, -size / 2, size, size);\r\n    ctx.restore();\r\n  };\r\n};\r\n\r\nconst renderStretchIconX = (icon) => {\r\n  return function renderIcon(ctx, left, top, styleOverride, fabricObject) {\r\n    let size = this.cornerSize;\r\n    ctx.save();\r\n    ctx.translate(left, top);\r\n    ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle));\r\n    ctx.drawImage(icon, -size / 3.2, -size / 2, size / 1.6, size);\r\n    ctx.restore();\r\n  };\r\n};\r\n\r\nconst renderStretchIconY = (icon) => {\r\n  return function renderIcon(ctx, left, top, styleOverride, fabricObject) {\r\n    let size = this.cornerSize;\r\n    ctx.save();\r\n    ctx.translate(left, top);\r\n    ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle + 90));\r\n    ctx.drawImage(icon, -size / 3.2, -size / 2, size / 1.6, size);\r\n    ctx.restore();\r\n  };\r\n};\r\n\r\nobjectControls.ml = new fabric.Control({\r\n  x: -0.5,\r\n  y: 0,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingXOrSkewingY,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetY: 3,\r\n  render: renderStretchIconX(ctrlStretchImage),\r\n});\r\n\r\nobjectControls.mr = new fabric.Control({\r\n  x: 0.5,\r\n  y: 0,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingXOrSkewingY,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetY: 3,\r\n  offsetX: 1,\r\n  render: renderStretchIconX(ctrlStretchImage),\r\n});\r\n\r\nobjectControls.mt = new fabric.Control({\r\n  x: 0,\r\n  y: -0.5,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingYOrSkewingX,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetX: -3,\r\n  offsetY: -1,\r\n  render: renderStretchIconY(ctrlStretchImage),\r\n});\r\n\r\nobjectControls.mb = new fabric.Control({\r\n  x: 0,\r\n  y: 0.5,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingYOrSkewingX,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetX: -3,\r\n  offsetY: 1,\r\n  render: renderStretchIconY(ctrlStretchImage),\r\n});\r\n\r\nobjectControls.tl = new fabric.Control({\r\n  x: -0.5,\r\n  y: -0.5,\r\n  cursorStyleHandler: scaleStyleHandler,\r\n  actionHandler: scalingEqually,\r\n  cornerSize: 32,\r\n  offsetY: 3,\r\n  offsetX: 1,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\n\r\nobjectControls.tr = new fabric.Control({\r\n  x: 0.5,\r\n  y: -0.5,\r\n  cursorStyleHandler: scaleStyleHandler,\r\n  actionHandler: scalingEqually,\r\n  cornerSize: 32,\r\n  offsetY: 3,\r\n  offsetX: 1,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\n\r\nobjectControls.bl = new fabric.Control({\r\n  x: -0.5,\r\n  y: 0.5,\r\n  cursorStyleHandler: scaleStyleHandler,\r\n  actionHandler: scalingEqually,\r\n  cornerSize: 32,\r\n  offsetY: 3,\r\n  offsetX: 1,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\n\r\nobjectControls.br = new fabric.Control({\r\n  x: 0.5,\r\n  y: 0.5,\r\n  cursorStyleHandler: scaleStyleHandler,\r\n  actionHandler: scalingEqually,\r\n  cornerSize: 32,\r\n  offsetY: 3,\r\n  offsetX: 1,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\n\r\nobjectControls.mtr = new fabric.Control({\r\n  x: 0,\r\n  y: 0.5,\r\n  cornerSize: 50,\r\n  offsetY: 30,\r\n  actionHandler: controlsUtils.rotationWithSnapping,\r\n  cursorStyleHandler: controlsUtils.rotationStyleHandler,\r\n  withConnection: false,\r\n  actionName: 'rotate',\r\n  render: renderScaleIcon(ctrlRotateImage),\r\n});\r\n\r\nif (fabric.Textbox) {\r\n  let textBoxControls = (fabric.Textbox.prototype.controls = {});\r\n  textBoxControls.mtr = objectControls.mtr;\r\n  textBoxControls.mr = new fabric.Control({\r\n    x: 0.5,\r\n    y: 0,\r\n    actionHandler: controlsUtils.changeWidth,\r\n    cursorStyleHandler: scaleSkewStyleHandler,\r\n    actionName: 'resizing',\r\n    cornerSize: 42,\r\n    offsetY: 3,\r\n    render: renderStretchIconX(ctrlStretchImage),\r\n  });\r\n\r\n  textBoxControls.ml = new fabric.Control({\r\n    x: -0.5,\r\n    y: 0,\r\n    actionHandler: controlsUtils.changeWidth,\r\n    cursorStyleHandler: scaleSkewStyleHandler,\r\n    actionName: 'resizing',\r\n    cornerSize: 42,\r\n    offsetY: 3,\r\n    render: renderStretchIconX(ctrlStretchImage),\r\n  });\r\n  fabric.Textbox.prototype.setControlsVisibility({\r\n    ml: true,\r\n    mr: true,\r\n    mtr: false,\r\n  });\r\n}\r\n\r\nlet line = (fabric.Line.prototype.controls = {});\r\nline.mtr = objectControls.mtr;\r\nline.ml = new fabric.Control({\r\n  x: -0.5,\r\n  y: 0,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingXOrSkewingY,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 30,\r\n  offsetY: 3,\r\n  offsetX: 0,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\nline.mr = new fabric.Control({\r\n  x: 0.5,\r\n  y: 0,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingXOrSkewingY,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 30,\r\n  offsetY: 3,\r\n  offsetX: 0,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\n\r\nfabric.Rect.prototype.setControlsVisibility({\r\n  tl: true,\r\n  mt: true,\r\n  tr: true,\r\n  ml: true,\r\n  mr: true,\r\n  bl: true,\r\n  mb: true,\r\n  br: true,\r\n  mtr: true,\r\n});\r\nfabric.Circle.prototype.setControlsVisibility({\r\n  tl: true,\r\n  mt: true,\r\n  tr: true,\r\n  ml: true,\r\n  mr: true,\r\n  bl: true,\r\n  mb: true,\r\n  br: true,\r\n  mtr: true,\r\n});\r\nfabric.Triangle.prototype.setControlsVisibility({\r\n  tl: true,\r\n  mt: true,\r\n  tr: true,\r\n  ml: true,\r\n  mr: true,\r\n  bl: true,\r\n  mb: true,\r\n  br: true,\r\n  mtr: true,\r\n});\r\nfabric.Line.prototype.setControlsVisibility({\r\n  ml: true,\r\n  mr: true,\r\n  mtr: true,\r\n});\r\n\r\nlet image = (fabric.Image.prototype.controls = {});\r\nimage.mtr = objectControls.mtr;\r\nimage.tr = objectControls.tr;\r\nimage.br = objectControls.br;\r\nimage.tl = objectControls.tl;\r\nimage.bl = objectControls.bl;\r\nfabric.Image.prototype.setControlsVisibility({\r\n  tl: true,\r\n  tr: true,\r\n  bl: true,\r\n  br: true,\r\n  mtr: true,\r\n});\r\nlet activeSelection = (fabric.ActiveSelection.prototype.controls = {});\r\nactiveSelection.mtr = objectControls.mtr;\r\nactiveSelection.tr = objectControls.tr;\r\nactiveSelection.br = objectControls.br;\r\nactiveSelection.tl = objectControls.tl;\r\nactiveSelection.bl = objectControls.bl;\r\n\r\n\r\n\r\n// image.ml = new fabric.Control({\r\n//   x: -0.5,\r\n//   y: 0,\r\n//   cursorStyleHandler: scaleSkewStyleHandler,\r\n//   actionHandler: scalingX,\r\n//   getActionName: scaleOrSkewActionName,\r\n//   cornerSize: 42,\r\n//   offsetY: 3,\r\n//   render: renderStretchIconX(ctrlStretchImage),\r\n// });\r\n\r\n// image.mr = new fabric.Control({\r\n//   x: 0.5,\r\n//   y: 0,\r\n//   cursorStyleHandler: scaleSkewStyleHandler,\r\n//   actionHandler: scalingX,\r\n//   getActionName: scaleOrSkewActionName,\r\n//   cornerSize: 42,\r\n//   offsetY: 3,\r\n//   offsetX: 1,\r\n//   render: renderStretchIconX(ctrlStretchImage),\r\n// });\r\n\r\n// image.mt = new fabric.Control({\r\n//   x: 0,\r\n//   y: -0.5,\r\n//   cursorStyleHandler: scaleSkewStyleHandler,\r\n//   actionHandler: scalingY,\r\n//   getActionName: scaleOrSkewActionName,\r\n//   cornerSize: 42,\r\n//   offsetX: -3,\r\n//   offsetY: -1,\r\n//   render: renderStretchIconY(ctrlStretchImage),\r\n// });\r\n\r\n// image.mb = new fabric.Control({\r\n//   x: 0,\r\n//   y: 0.5,\r\n//   cursorStyleHandler: scaleSkewStyleHandler,\r\n//   actionHandler: scalingY,\r\n//   getActionName: scaleOrSkewActionName,\r\n//   cornerSize: 42,\r\n//   offsetX: -3,\r\n//   offsetY: 1,\r\n//   render: renderStretchIconY(ctrlStretchImage),\r\n// });\r\n","import { fabric } from 'fabric';\r\n\r\nfabric.CustomTextbox = fabric.util.createClass(fabric.Textbox, {\r\n  type: 'customTextbox',\r\n  paddingX: 0,\r\n  paddingY: 0,\r\n\r\n  _getNonTransformedDimensions() {\r\n    // Object dimensions\r\n    return new fabric.Point(\r\n      this.width + this.paddingX,\r\n      this.height + this.paddingY\r\n    );\r\n  },\r\n\r\n  _calculateCurrentDimensions() {\r\n    // Controls dimensions\r\n    return fabric.util.transformPoint(\r\n      this._getTransformedDimensions(),\r\n      this.getViewportTransform(),\r\n      true\r\n    );\r\n  },\r\n\r\n  toObject: function (options) {\r\n    return fabric.util.object.extend(this.callSuper('toObject'), {\r\n      type: this.get('type'),\r\n      paddingX: this.get('paddingX'),\r\n      paddingY: this.get('paddingY'),\r\n    });\r\n  },\r\n});\r\n\r\nfabric.CustomTextbox.fromObject = function(object, callback) {\r\n  return fabric.Object._fromObject('CustomTextbox', object, callback, 'customTextbox');\r\n}\r\n\r\n","import { fabric } from 'fabric';\r\n\r\n// Subtitles renreding padding and border radius\r\n// CanvasRenderingContext2D.prototype.roundRect = function (x, y, w, h, r) {\r\n//   if (w < 2 * r) r = w / 2;\r\n//   if (h < 2 * r) r = h / 2;\r\n//   this.beginPath();\r\n//   this.moveTo(x + r, y);\r\n//   this.arcTo(x + w, y, x + w, y + h, r);\r\n//   this.arcTo(x + w, y + h, x, y + h, r);\r\n//   this.arcTo(x, y + h, x, y, r);\r\n//   this.arcTo(x, y, x + w, y, r);\r\n//   this.closePath();\r\n//   return this;\r\n// };\r\n// fabric.Subtitle = fabric.util.createClass(fabric.IText, {\r\n//   type: 'subtitle',\r\n\r\n//   _getNonTransformedDimensions() {\r\n//     // Object dimensions\r\n//     return new fabric.Point(\r\n//       this.width + this.paddingX,\r\n//       this.height + this.paddingY\r\n//     );\r\n//   },\r\n\r\n//   _calculateCurrentDimensions() {\r\n//     // Controls dimensions\r\n//     return fabric.util.transformPoint(\r\n//       this._getTransformedDimensions(),\r\n//       this.getViewportTransform(),\r\n//       true\r\n//     );\r\n//   },\r\n\r\n//   // _renderBackground(ctx) {\r\n//   //   if (!this.backgroundColor) {\r\n//   //     return;\r\n//   //   }\r\n//   //   var dim = this._getNonTransformedDimensions();\r\n//   //   ctx.fillStyle = this.backgroundColor;\r\n\r\n//   //   if (!this.bgCornerRadius) {\r\n//   //     ctx.fillRect(-dim.x / 2, -dim.y / 2, dim.x, dim.y);\r\n//   //   } else {\r\n//   //     ctx\r\n//   //       .roundRect(-dim.x / 2, -dim.y / 2, dim.x, dim.y, this.bgCornerRadius)\r\n//   //       .fill();\r\n//   //   }\r\n//   //   // if there is background color no other shadows\r\n//   //   // should be casted\r\n//   //   this._removeShadow(ctx);\r\n//   // },\r\n// });\r\n\r\n// fabric.Subtitle.prototype.controls = {};\r\n\r\nfabric.Subtitle = fabric.util.createClass(fabric.Textbox, {\r\n  type: 'subtitle',\r\n  id: 'subtitle',\r\n  paddingX: 0,\r\n  paddingY: 0,\r\n\r\n  _getNonTransformedDimensions() {\r\n    // Object dimensions\r\n    return new fabric.Point(\r\n      this.width + this.paddingX,\r\n      this.height + this.paddingY\r\n    );\r\n  },\r\n\r\n  _calculateCurrentDimensions() {\r\n    // Controls dimensions\r\n    return fabric.util.transformPoint(\r\n      this._getTransformedDimensions(),\r\n      this.getViewportTransform(),\r\n      true\r\n    );\r\n  },\r\n\r\n  toObject: function (options) {\r\n    return fabric.util.object.extend(this.callSuper('toObject'), {\r\n      type: this.get('type'),\r\n      id: this.get('id'),\r\n      paddingX: this.get('paddingX'),\r\n      paddingY: this.get('paddingY'),\r\n      editable: this.get('editable'),\r\n      breakWords: this.get('breakWords'),\r\n    });\r\n  },\r\n});\r\n\r\nfabric.Subtitle.fromObject = function (object, callback) {\r\n  return fabric.Object._fromObject('Subtitle', object, callback, 'subtitle');\r\n};\r\n\r\nfabric.Subtitle.prototype._wrapLine = function (\r\n  _line,\r\n  lineIndex,\r\n  desiredWidth,\r\n  reservedSpace\r\n) {\r\n  var lineWidth = 0,\r\n    splitByGrapheme = this.splitByGrapheme,\r\n    graphemeLines = [],\r\n    line = [],\r\n    // spaces in different languges?\r\n    words = splitByGrapheme\r\n      ? fabric.util.string.graphemeSplit(_line)\r\n      : _line.split(this._wordJoiners),\r\n    word = '',\r\n    offset = 0,\r\n    infix = splitByGrapheme ? '' : ' ',\r\n    wordWidth = 0,\r\n    infixWidth = 0,\r\n    largestWordWidth = 0,\r\n    lineJustStarted = true,\r\n    additionalSpace = splitByGrapheme ? 0 : this._getWidthOfCharSpacing();\r\n\r\n  reservedSpace = reservedSpace || 0;\r\n  desiredWidth -= reservedSpace;\r\n\r\n  if (words.length === 0) words.push([]);\r\n\r\n  for (var i = 0; i < words.length; i++) {\r\n    word = splitByGrapheme\r\n      ? words[i]\r\n      : fabric.util.string.graphemeSplit(words[i]);\r\n    wordWidth = this._measureWord(word, lineIndex, offset);\r\n    offset += word.length;\r\n\r\n    // Break the line if a word is wider than the set width\r\n    if (this.breakWords && wordWidth >= desiredWidth) {\r\n      if (!lineJustStarted) {\r\n        line.push(infix);\r\n        lineJustStarted = true;\r\n      }\r\n\r\n      // Loop through each character in word\r\n      for (var w = 0; w < word.length; w++) {\r\n        var letter = word[w];\r\n        var letterWidth =\r\n          (this.getMeasuringContext().measureText(letter).width *\r\n            this.fontSize) /\r\n          this.CACHE_FONT_SIZE;\r\n        if (lineWidth + letterWidth > desiredWidth) {\r\n          graphemeLines.push(line);\r\n          line = [];\r\n          line.push(letter);\r\n          lineWidth = letterWidth;\r\n        } else {\r\n          line.push(letter);\r\n          lineWidth += letterWidth;\r\n        }\r\n      }\r\n      word = [];\r\n    } else {\r\n      lineWidth += infixWidth + wordWidth - additionalSpace;\r\n    }\r\n\r\n    if (lineWidth >= desiredWidth && !lineJustStarted) {\r\n      graphemeLines.push(line);\r\n      line = [];\r\n      lineWidth = wordWidth;\r\n      lineJustStarted = true;\r\n    } else {\r\n      lineWidth += additionalSpace;\r\n    }\r\n\r\n    if (!lineJustStarted && !splitByGrapheme) {\r\n      line.push(infix);\r\n    }\r\n    line = line.concat(word);\r\n\r\n    infixWidth = splitByGrapheme\r\n      ? 0\r\n      : this._measureWord([infix], lineIndex, offset);\r\n    offset++;\r\n    lineJustStarted = false;\r\n    // keep track of largest word\r\n    if (wordWidth > largestWordWidth && !this.breakWords) {\r\n      largestWordWidth = wordWidth;\r\n    }\r\n  }\r\n\r\n  i && graphemeLines.push(line);\r\n\r\n  if (largestWordWidth + reservedSpace > this.dynamicMinWidth) {\r\n    this.dynamicMinWidth = largestWordWidth - additionalSpace + reservedSpace;\r\n  }\r\n  return graphemeLines;\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\nfabric.CustomImage = fabric.util.createClass(fabric.Image, {\r\n  type: 'customImage',\r\n  cropRect: null,\r\n  id: null,\r\n  cornerRadius: 0,\r\n  originalWidth: 0,\r\n  originalHeight: 0,\r\n  crossOrigin: 'Anonymous',\r\n\r\n  initialize: function (customImage, options) {\r\n    const defaultOpts = {\r\n      objectCaching: true,\r\n      lockScalingFlip: true,\r\n      crossOrigin: 'Anonymous',\r\n    };\r\n    options = options || {};\r\n\r\n    this.callSuper(\r\n      'initialize',\r\n      customImage,\r\n      Object.assign({}, defaultOpts, options)\r\n    );\r\n  },\r\n\r\n  toObject: function (options) {\r\n    return fabric.util.object.extend(this.callSuper('toObject'), {\r\n      type: this.get('type'),\r\n      cropRect: this.get('cropRect'),\r\n      id: this.get('id'),\r\n      cornerRadius: this.get('cornerRadius'),\r\n      originalWidth: this.get('originalWidth'),\r\n      originalHeight: this.get('originalHeight'),\r\n      crossOrigin: this.get('crossOrigin'),\r\n    });\r\n  },\r\n\r\n  _draw: function (customImage, ctx, w, h) {\r\n    const c = this.cropRect;\r\n    const d = {\r\n      x: -this.width / 2,\r\n      y: -this.height / 2,\r\n      w: this.width,\r\n      h: this.height,\r\n    };\r\n    if (c) {\r\n      ctx.drawImage(customImage, c.x, c.y, c.w, c.h, d.x, d.y, d.w, d.h);\r\n    } else {\r\n      ctx.drawImage(customImage, d.x, d.y, d.w, d.h);\r\n    }\r\n  },\r\n\r\n  _render: function (ctx) {\r\n    this._draw(this.getElement(), ctx);\r\n  },\r\n});\r\n\r\nfabric.CustomImage.fromURL = function (url, callback, imgOptions) {\r\n  fabric.util.loadImage(\r\n    url,\r\n    function (img, isError) {\r\n      callback && callback(new fabric.CustomImage(img, imgOptions), isError);\r\n    },\r\n    null,\r\n    imgOptions && imgOptions.crossOrigin\r\n  );\r\n};\r\n\r\nfabric.CustomImage.fromObject = function (_object, callback) {\r\n  var object = fabric.util.object.clone(_object);\r\n  fabric.util.loadImage(\r\n    object.src,\r\n    function (img, isError) {\r\n      if (isError) {\r\n        callback && callback(null, true);\r\n        return;\r\n      }\r\n      fabric.CustomImage.prototype._initFilters.call(\r\n        object,\r\n        object.filters,\r\n        function (filters) {\r\n          object.filters = filters || [];\r\n          fabric.CustomImage.prototype._initFilters.call(\r\n            object,\r\n            [object.resizeFilter],\r\n            function (resizeFilters) {\r\n              object.resizeFilter = resizeFilters[0];\r\n              fabric.util.enlivenObjects(\r\n                [object.clipPath],\r\n                function (enlivedProps) {\r\n                  object.clipPath = enlivedProps[0];\r\n                  var image = new fabric.CustomImage(img, object);\r\n                  callback(image, false);\r\n                }\r\n              );\r\n            }\r\n          );\r\n        }\r\n      );\r\n    },\r\n    null,\r\n    object.crossOrigin\r\n  );\r\n};\r\n\r\nfabric.CustomImageCrop = fabric.util.createClass(fabric.CustomImage);\r\n\r\nfabric.CustomImageCrop.prototype.render = (function (render) {\r\n  return function (ctx) {\r\n    render.apply(this, arguments);\r\n    this._renderControls(ctx);\r\n    if (!this.canvas._activeObject) this.canvas._activeObject = this;\r\n  };\r\n})(fabric.CustomImageCrop.prototype.render);\r\n","import React, { useEffect } from 'react';\r\nimport './App.css';\r\nimport Editor from './containers/Editor/Editor';\r\nimport Auth from './containers/Auth/Auth';\r\nimport Homepage from './containers/Homepage/Homepage';\r\nimport UserContext from './contexts/UserContext';\r\nimport useUserState from './hooks/useUserState';\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  Switch,\r\n  Redirect,\r\n} from 'react-router-dom';\r\nimport CustomRoute from './components/CustomRoute/CustomRoute';\r\nimport useTrackTime from './hooks/useTrackTime';\r\nimport useRefreshToken from './hooks/useRefreshToken';\r\nimport setAuthToken from './utils/setAuthToken';\r\nimport Preview from './containers/Preview/Preview';\r\nimport './fabricConfig/fabricConfig';\r\n\r\nconst App = () => {\r\n  const [userState, userDispatch] = useUserState();\r\n  const { refreshToken, newToken, refreshError } = useRefreshToken();\r\n  useTrackTime(refreshToken);\r\n  useEffect(() => {\r\n    if (newToken) {\r\n      localStorage.setItem('token', newToken);\r\n      setAuthToken(newToken);\r\n    } else if (refreshError) {\r\n      localStorage.removeItem('token');\r\n      userDispatch({ type: 'setIsAuthenticated', data: false });\r\n    }\r\n  }, [newToken, refreshError, userDispatch]);\r\n\r\n  return (\r\n    <div className='App'>\r\n      <UserContext.Provider value={{ userState, userDispatch }}>\r\n        <Router basename='/'>\r\n          <Switch>\r\n            <CustomRoute\r\n              path='/auth'\r\n              redirect='/home'\r\n              where='in the App auth route'\r\n              allowed={!userState.isAuthenticated}\r\n              component={Auth}\r\n            />\r\n            <CustomRoute\r\n              path='/home'\r\n              redirect='/auth'\r\n              where='in the App home route'\r\n              allowed={userState.isAuthenticated}\r\n              component={Homepage}\r\n            />\r\n            <CustomRoute\r\n              path='/editor'\r\n              redirect='/auth'\r\n              where='in the App editor route'\r\n              allowed={userState.isAuthenticated}\r\n              component={Editor}\r\n            />\r\n            <CustomRoute\r\n              path='/preview/:id'\r\n              redirect='/auth'\r\n              where='in the App preview route'\r\n              allowed={true}\r\n              component={Preview}\r\n            />\r\n            <Route path='/'>\r\n              <Redirect to='/home' />\r\n            </Route>\r\n          </Switch>\r\n        </Router>\r\n      </UserContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"WordContainer\":\"Words_WordContainer__2MxYw\",\"Word\":\"Words_Word__3b2m1\",\"Pause\":\"Words_Pause__33kzp\",\"Deleted\":\"Words_Deleted__3CMYk\",\"DeletedText\":\"Words_DeletedText__1n8km\",\"WordInput\":\"Words_WordInput__3lLIb\",\"CurrentWord\":\"Words_CurrentWord__3w6qS\",\"Highlight\":\"Words_Highlight__cba72\",\"DeletedImgContainer\":\"Words_DeletedImgContainer__2Mj9-\",\"DeletedImg\":\"Words_DeletedImg__2JxpA\",\"InSelection\":\"Words_InSelection__33LHP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dropdown\":\"ImageDropdown_Dropdown__2eYxV\",\"UplaodButtonContainer\":\"ImageDropdown_UplaodButtonContainer__1lY8g\",\"UploadButton\":\"ImageDropdown_UploadButton__1lQXO\",\"FileInput\":\"ImageDropdown_FileInput__2Rzkx\",\"Images\":\"ImageDropdown_Images__LZdgK\",\"Column\":\"ImageDropdown_Column__27Nmx\",\"ImageContainer\":\"ImageDropdown_ImageContainer__1YX4Q\",\"Image\":\"ImageDropdown_Image__2oCLN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SideDrawer\":\"SideDrawer_SideDrawer__1Hp4L\",\"Links\":\"SideDrawer_Links__3agJG\",\"Link\":\"SideDrawer_Link__26bLH\",\"LinkText\":\"SideDrawer_LinkText__37vsx\",\"Active\":\"SideDrawer_Active__3v6LT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dropdown\":\"ShapeDropdown_Dropdown__3aeLl\",\"ShapeContainer\":\"ShapeDropdown_ShapeContainer__21oDr\",\"LineShapeContainer\":\"ShapeDropdown_LineShapeContainer__1eEMT\",\"Shape\":\"ShapeDropdown_Shape__3ZdgP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FontSizeDropdown\":\"FontSizeDropdown_FontSizeDropdown__3vQgK\",\"FontSizeOption\":\"FontSizeDropdown_FontSizeOption__5LIdC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dropdown\":\"SubtitlesDropdown_Dropdown__3CPKs\",\"Text\":\"SubtitlesDropdown_Text__mqlQv\",\"Buttons\":\"SubtitlesDropdown_Buttons__1LolQ\",\"Button\":\"SubtitlesDropdown_Button__rnGL5\",\"ButtonText\":\"SubtitlesDropdown_ButtonText__3zZ2n\",\"Active\":\"SubtitlesDropdown_Active__1vfsr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Auth\":\"Auth_Auth__2-Tih\",\"Testimonial\":\"Auth_Testimonial__Gdo6e\",\"Background\":\"Auth_Background__Sn6Rs\",\"TestimonialContent\":\"Auth_TestimonialContent__1xfBA\",\"Twiso\":\"Auth_Twiso__1yuUr\",\"Heading\":\"Auth_Heading__219Co\",\"Subheading\":\"Auth_Subheading__3iXme\",\"Mascot\":\"Auth_Mascot__1P0gq\",\"Account\":\"Auth_Account__FNRoH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FontsDropdown\":\"FontsDropdown_FontsDropdown__2cMmK\",\"SearchContainer\":\"FontsDropdown_SearchContainer__2xV2U\",\"SearchSvg\":\"FontsDropdown_SearchSvg__2fL_Y\",\"SearchInput\":\"FontsDropdown_SearchInput__1YJKM\",\"FontOptionsContainer\":\"FontsDropdown_FontOptionsContainer__3NL_l\",\"FontOption\":\"FontsDropdown_FontOption__YA26x\",\"UploadFontContainer\":\"FontsDropdown_UploadFontContainer__BN5oN\",\"UploadFontButton\":\"FontsDropdown_UploadFontButton__2fdT4\",\"UploadFontFile\":\"FontsDropdown_UploadFontFile__17exH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageToolbar\":\"ImageToolbar_ImageToolbar__1bSOG\",\"BorderDiv\":\"ImageToolbar_BorderDiv__2L57I\",\"ReaplaceContainer\":\"ImageToolbar_ReaplaceContainer__Bvs6n\",\"RadiusContainer\":\"ImageToolbar_RadiusContainer__1809i\",\"CropContainer\":\"ImageToolbar_CropContainer__3a9ik\",\"DoneContainer\":\"ImageToolbar_DoneContainer__1sU7m\",\"RadiusInput\":\"ImageToolbar_RadiusInput__3neeS\",\"StrokeWidthArrowContainer\":\"ImageToolbar_StrokeWidthArrowContainer__2ZaEx\",\"BorderStyle\":\"ImageToolbar_BorderStyle__2Np8t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Menu\":\"ContextMenu_Menu__3Crct\",\"Option\":\"ContextMenu_Option__2sY3r\",\"Border\":\"ContextMenu_Border__2fUH-\",\"Overlay\":\"ContextMenu_Overlay__1PFYP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SignIn\":\"SignIn_SignIn__2rDwX\",\"Heading\":\"SignIn_Heading__3_D8_\",\"Subheading\":\"SignIn_Subheading__25WFn\",\"SignUpLink\":\"SignIn_SignUpLink__19pi6\",\"FormContent\":\"SignIn_FormContent__2RCot\",\"Form\":\"SignIn_Form__Qj1Re\",\"GoogleLogo\":\"SignIn_GoogleLogo__2dqJk\",\"GoogleLink\":\"SignIn_GoogleLink__1TqQV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SignUp\":\"SignUp_SignUp__FrU6o\",\"Heading\":\"SignUp_Heading__3VK7d\",\"Subheading\":\"SignUp_Subheading__3Fzc1\",\"SignInLink\":\"SignUp_SignInLink__2n2-H\",\"FormContent\":\"SignUp_FormContent__2PhXm\",\"Form\":\"SignUp_Form__2HSyr\",\"GoogleLogo\":\"SignUp_GoogleLogo__veA94\",\"GoogleLink\":\"SignUp_GoogleLink__300gn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Projects\":\"Projects_Projects__Ml6Tj\",\"Heading\":\"Projects_Heading__1sNm8\",\"Subheading\":\"Projects_Subheading__jSsjo\",\"ProjectsList\":\"Projects_ProjectsList__3ZhTK\",\"AddProject\":\"Projects_AddProject__3o80h\",\"ProjectContainer\":\"Projects_ProjectContainer__dr8O4\",\"AddProjectInner\":\"Projects_AddProjectInner__1q9TS\",\"AddProjectText\":\"Projects_AddProjectText__2pD9X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Project\":\"Project_Project__2FloU\",\"Video\":\"Project_Video__2kLKG\",\"InfoContainer\":\"Project_InfoContainer__7VfXZ\",\"Info\":\"Project_Info__cXMOT\",\"Name\":\"Project_Name__1iMCC\",\"DateAndTrash\":\"Project_DateAndTrash__2VZAd\",\"Date\":\"Project_Date__1IAn8\",\"Trash\":\"Project_Trash__DQ8tF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Transcription\":\"Transcription_Transcription__13teg\",\"TextControls\":\"Transcription_TextControls__1U4fb\",\"CutContainer\":\"Transcription_CutContainer__3Pv4S\",\"SearchContainer\":\"Transcription_SearchContainer__3q-zR\",\"SearchInput\":\"Transcription_SearchInput__3ojca\",\"Text\":\"Transcription_Text__3pvrU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Controls\":\"Controls_Controls__mbKVi\",\"Visible\":\"Controls_Visible__2XX72\",\"Hover\":\"Controls_Hover__3aOvs\",\"ControlsPanel\":\"Controls_ControlsPanel__1Y7Ve\",\"PlayPause\":\"Controls_PlayPause__1XJpi\",\"FullScreen\":\"Controls_FullScreen__3oqLE\",\"FullScreenSize\":\"Controls_FullScreenSize__68-bJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Progress\":\"Progress_Progress__2E6Dv\",\"Percentage\":\"Progress_Percentage__jnSdL\",\"Heading\":\"Progress_Heading__10Jj_\",\"ProgressBar\":\"Progress_ProgressBar__cCNmS\",\"ProgressBarInner\":\"Progress_ProgressBarInner__FR8v1\",\"Subheading\":\"Progress_Subheading__2ySJW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dropdown\":\"ResizeDropdown_Dropdown__1YZKt\",\"SizeOptions\":\"ResizeDropdown_SizeOptions__2PmX4\",\"SizeOption\":\"ResizeDropdown_SizeOption__3MBs1\",\"SizeOptionText\":\"ResizeDropdown_SizeOptionText__2Yf6i\",\"SizeOptionBox\":\"ResizeDropdown_SizeOptionBox__13My-\",\"Current\":\"ResizeDropdown_Current__2rsB4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SelectContainer\":\"Select_SelectContainer__1RMVl\",\"Select\":\"Select_Select__1aFjD\",\"Selected\":\"Select_Selected__w1Ai2\",\"Valid\":\"Select_Valid__2h_nP\",\"Invalid\":\"Select_Invalid__2e9oA\",\"ErrorMessage\":\"Select_ErrorMessage__1bWOP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"User\":\"User_User__1OH6i\",\"UserName\":\"User_UserName__34wjX\",\"Initials\":\"User_Initials__2M7AZ\",\"Letter\":\"User_Letter__12cie\",\"Name\":\"User_Name__xOAh7\",\"Dots\":\"User_Dots__1mxvn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TranscriptionProgress\":\"TranscriptionProgress_TranscriptionProgress__3bzyV\",\"Heading\":\"TranscriptionProgress_Heading__RtL03\",\"Percentage\":\"TranscriptionProgress_Percentage__2n-2I\",\"Box\":\"TranscriptionProgress_Box__2KSuP\",\"Line\":\"TranscriptionProgress_Line__1WZ3f\",\"placeholderShimmer\":\"TranscriptionProgress_placeholderShimmer__18VTb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FontsDropdown\":\"TextDropdowns_FontsDropdown__lZ_Yz\",\"FontSizeDropdown\":\"TextDropdowns_FontSizeDropdown__zNPWy\",\"SketchPickerContainer\":\"TextDropdowns_SketchPickerContainer__1ap0H\",\"TextAlignDropdown\":\"TextDropdowns_TextAlignDropdown___lslt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Player\":\"Player_Player__29WZA\",\"PlayerContent\":\"Player_PlayerContent__GS7Av\",\"PlayerControls\":\"Player_PlayerControls__1cImT\",\"PlayButton\":\"Player_PlayButton__1jzX7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Or\":\"Or_Or__3D8lV\",\"Line\":\"Or_Line__3NIcd\",\"Text\":\"Or_Text__3K4vP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"InputContainer\":\"Input_InputContainer__FRPf0\",\"Input\":\"Input_Input__2JU04\",\"Inpit\":\"Input_Inpit__B7DHg\",\"Invalid\":\"Input_Invalid__2bXHj\",\"ErrorMessage\":\"Input_ErrorMessage__NGuQM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CheckMail\":\"CheckMail_CheckMail__2juXE\",\"Heading\":\"CheckMail_Heading__2JEwf\",\"Subheading\":\"CheckMail_Subheading__3AHm5\",\"EditorLink\":\"CheckMail_EditorLink__IbMoD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dropdown\":\"Dropdown_Dropdown__3ndzl\",\"Option\":\"Dropdown_Option__2rSF0\",\"Current\":\"Dropdown_Current__1ur6I\",\"CheckMark\":\"Dropdown_CheckMark__-dXeR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Volume\":\"Volume_Volume__VAO_J\",\"VolumeButton\":\"Volume_VolumeButton__MQ56Q\",\"VolumeOff\":\"Volume_VolumeOff__1ZLBn\",\"VolumeBar\":\"Volume_VolumeBar__2Lv3T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FillDropdownContainer\":\"ShapeDropdowns_FillDropdownContainer__XKdBu\",\"StrokeDropdownContainer\":\"ShapeDropdowns_StrokeDropdownContainer__2g9Q8\",\"StrokeWidthDropdownContainer\":\"ShapeDropdowns_StrokeWidthDropdownContainer__3J5zz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Navigation\":\"Navigation_Navigation__1vpyv\",\"DownloadButton\":\"Navigation_DownloadButton__2FuTK\",\"DownloadDropdown\":\"Navigation_DownloadDropdown__2IsbQ\",\"DownloadLink\":\"Navigation_DownloadLink__3PFN5\",\"UploadVideo\":\"Navigation_UploadVideo__3uZ5a\",\"DownloadVideoContainer\":\"Navigation_DownloadVideoContainer__3mjYd\",\"DownloadVideo\":\"Navigation_DownloadVideo__1Kc0Z\",\"Close\":\"Navigation_Close__12UHs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Navbar\":\"Navbar_Navbar__3oWEF\",\"NewButton\":\"Navbar_NewButton__38UcV\",\"Plus\":\"Navbar_Plus__3mZZD\"};"],"sourceRoot":""}