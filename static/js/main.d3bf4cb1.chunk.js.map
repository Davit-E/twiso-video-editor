{"version":3,"sources":["containers/Navigation/DesignControls/DesignControls.module.css","containers/VideoEditor/VideoEditor.module.css","containers/Canvas/PlayerCanvas/PlayerCanvas.module.css","containers/Toolbar/VideoToolbar/VideoDropdowns/VideoDropdowns.module.css","containers/Canvas/CropCanvas/CropCanvas.module.css","containers/Auth/Auth.module.css","containers/Homepage/Homepage.module.css","containers/CustomPlayer/CustomPlayer.module.css","containers/CustomPlayer/Controls/Time/Time.module.css","containers/Toolbar/TextToolbar/TextToolbar.module.css","containers/Toolbar/StrokeWidthDropdown/StrokeWidthDropdown.module.css","containers/Editor/Editor.module.css","containers/Uploader/Uploader.module.css","components/Navbar/Navbar.module.css","containers/Toolbar/Toolbar.module.css","components/Backdrop/Backdrop.module.css","containers/VideoEditor/Video/Video.module.css","containers/Canvas/SpeakersCanvas/SpeakersCanvas.module.css","containers/Download/Download.module.css","containers/Player/CanvasToolbar/CanvasToolbar.module.css","containers/Auth/Button/Button.module.css","containers/Auth/Token/Token.module.css","containers/CustomPlayer/Controls/Time/TimelineSlider/TimelineSlider.module.css","containers/CustomPlayer/Controls/Volume/VolumeSlider/VolumeSlider.module.css","containers/Toolbar/VideoToolbar/VideoToolbar.module.css","containers/SelectSpeakers/SelectSpeakers.module.css","containers/Toolbar/TextDropdowns/TextAlignDropdown/TextAlignDropdown.module.css","containers/Toolbar/ShapeToolbar/ShapeToolbar.module.css","containers/Player/CanvasToolbar/TemplatesDropdown/TemplatesDropdown.module.css","containers/Homepage/Projects/Project/Project.module.css","containers/Preview/Preview.module.css","containers/Uploader/DragDrop/DragDrop.module.css","containers/Homepage/Settings/Settings.module.css","assets/editor/templates.svg","assets/editor/upload.svg","containers/Uploader/DragDrop/DragDrop.js","components/Progress/Progress.js","axios-instance.js","hooks/useUploadVideo.js","assets/editor/backArrow.svg","assets/preview/twiso.svg","contexts/UserContext.js","components/Navbar/Navbar.js","assets/home.png","containers/Uploader/Uploader.js","assets/editor/cut.svg","assets/editor/search.svg","assets/editor/undo.svg","utils/updateTextAndCuts.js","assets/editor/restoreText.svg","contexts/EditorContext.js","utils/updateSubtitlesText.js","containers/Transcription/Words/Words.js","utils/findIndex.js","containers/Transcription/TranscriptionProgress/TranscriptionProgress.js","containers/Transcription/Transcription.js","containers/Transcription/utils/selection.js","containers/Canvas/utils/addObject.js","containers/Canvas/hooks/useAddObject.js","contexts/EventContext.js","containers/Canvas/utils/updateObject.js","utils/checkOffScreen.js","containers/Canvas/utils/onCanvasEvents.js","containers/Canvas/hooks/useSelectionObserver.js","containers/Canvas/utils/aligningGuidelines.js","containers/Canvas/utils/centeringGuidelines.js","containers/Canvas/hooks/useGuidelines.js","containers/Canvas/hooks/useUpdateObject.js","containers/Canvas/utils/updateCanvas.js","containers/Canvas/hooks/useUpdateCanvas.js","containers/Canvas/hooks/useAddCanvas.js","containers/Canvas/hooks/useAddSpeakers.js","containers/Canvas/hooks/useClickListener.js","assets/editor/downArrow.svg","assets/editor/bold.svg","assets/editor/subBackground.svg","assets/editor/italic.svg","assets/editor/textLeft.svg","assets/editor/textRight.svg","assets/editor/textCenter.svg","assets/editor/textJustify.svg","containers/Toolbar/TextDropdowns/FontsDropdown/fontsData.js","containers/Toolbar/TextDropdowns/FontsDropdown/FontsDropdown.js","containers/Toolbar/TextDropdowns/FontSizeDropdown/FontSizeDropdown.js","containers/Toolbar/TextDropdowns/TextAlignDropdown/TextAlignDropdown.js","containers/Toolbar/TextDropdowns/TextDropdowns.js","containers/Toolbar/TextToolbar/utils/handlers.js","containers/Toolbar/TextToolbar/TextToolbar.js","assets/editor/cornerRadius.svg","containers/Toolbar/StrokeWidthDropdown/StrokeWidthDropdown.js","containers/Toolbar/ShapeDropdowns/ShapeDropdowns.js","containers/Toolbar/ShapeToolbar/utils/handlers.js","containers/Toolbar/ShapeToolbar/ShapeToolbar.js","assets/editor/replaceImage.svg","assets/editor/cropImage.svg","containers/Toolbar/ImageToolbar/ImageToolbar.js","containers/Toolbar/VideoToolbar/utils/handlers.js","containers/Toolbar/VideoToolbar/VideoDropdowns/VideoDropdowns.js","containers/Toolbar/VideoToolbar/VideoToolbar.js","containers/Toolbar/Toolbar.js","containers/Toolbar/utils/toolbarPosition.js","utils/pasteObject.js","containers/Canvas/ContextMenu/ContextMenu.js","containers/Canvas/hooks/useAnimate.js","containers/Canvas/utils/box.js","containers/Canvas/utils/mediaCrop.js","containers/Canvas/utils/restrict.js","containers/Canvas/hooks/useCropMedia.js","containers/Canvas/CropCanvas/hooks/useAddCanvas.js","containers/Canvas/CropCanvas/hooks/useUpdateCanvas.js","containers/Canvas/CropCanvas/CropCanvas.js","utils/cacheAssets.js","utils/canvasUtils.js","containers/Canvas/utils/template.js","containers/Canvas/hooks/useLoadTemplate.js","containers/Canvas/PlayerCanvas/PlayerCanvas.js","hooks/useEventsState.js","containers/Player/CanvasToolbar/ResizeDropdown/ResizeDropdown.js","hooks/useDeleteTemplate.js","components/Spinner/Spinner.js","containers/Player/CanvasToolbar/TemplatesDropdown/TemplatesDropdown.js","components/Backdrop/Backdrop.js","assets/editor/resize.svg","webpack:///./src/assets/editor/cropImage.svg?0773","assets/editor/addText.svg","hooks/useGetTemplates.js","hooks/useCreateTemplate.js","containers/Player/CanvasToolbar/hooks/useSaveTemplate.js","containers/Player/CanvasToolbar/CanvasToolbar.js","assets/editor/play.svg","assets/editor/pause.svg","containers/Player/hooks/useContainerSize.js","containers/Player/utils/getSize.js","containers/Player/hooks/usePlayerTime.js","containers/Player/utils/linkedList.js","containers/Player/hooks/useSubtitles.js","containers/Player/utils/subtitle.js","containers/Player/utils/generateSubtitles.js","containers/Player/Player.js","containers/VideoEditor/Video/Video.js","containers/VideoEditor/Video/utils/videoEvents.js","containers/Navigation/utils/prepareCanvas.js","utils/generateRandomUUID.js","containers/Navigation/utils/rgbaToHex.js","containers/Navigation/utils/prepareBreaksAndSubs.js","hooks/useUploadAsset.js","containers/Navigation/ImageDropdown/ImageDropdown.js","assets/editor/square.svg","assets/editor/circle.svg","assets/editor/triangle.svg","assets/editor/line.svg","containers/Navigation/ShapeDropdown/ShapeDropdown.js","assets/editor/addImage.svg","assets/editor/addShape.svg","assets/editor/subtitles.svg","assets/homepage/templates.svg","containers/Navigation/DesignControls/DesignControls.js","hooks/useGetAssets.js","containers/Navigation/Navigation.js","hooks/useEditorState.js","hooks/useGetVideo.js","hooks/useUpdateProject.js","hooks/useDownloadVideo.js","containers/VideoEditor/hooks/useCanvasUpdate.js","containers/VideoEditor/hooks/useWordsUpdate.js","containers/VideoEditor/hooks/useCheckTranscription.js","containers/VideoEditor/utils/keyEvents.js","containers/VideoEditor/hooks/useKeyEvents.js","containers/VideoEditor/utils/undoText.js","containers/VideoEditor/hooks/useUndo.js","containers/VideoEditor/VideoEditor.js","components/CustomRoute/CustomRoute.js","assets/editor/addSpeaker.svg","assets/editor/removeSpeaker.svg","containers/Canvas/SpeakersCanvas/hooks/useAddCanvas.js","containers/Canvas/SpeakersCanvas/hooks/useAddVideo.js","containers/Canvas/SpeakersCanvas/hooks/useUpdateCanvas.js","containers/Canvas/SpeakersCanvas/utils/updateCanvas.js","containers/Canvas/utils/speakerCrop.js","contexts/SpeakersContext.js","containers/Canvas/hooks/useCropSpeakers.js","containers/Canvas/SpeakersCanvas/SpeakersCanvas.js","hooks/useSpeakersState.js","containers/SelectSpeakers/hooks/useContainerSize.js","containers/SelectSpeakers/utils/getSize.js","containers/SelectSpeakers/SelectSpeakers.js","hooks/useGetDownloadProgress.js","containers/Download/hooks/useCheckDownloadPorgress.js","containers/Download/Download.js","containers/Editor/Editor.js","assets/auth/google.svg","containers/Auth/Button/Button.js","containers/Auth/Or/Or.js","containers/Auth/Input/Input.js","assets/auth/mail.svg","containers/Auth/CheckMail/CheckMail.js","utils/validation.js","hooks/useMagicLink.js","containers/Auth/SignIn/SignIn.js","assets/auth/downArrow.svg","assets/auth/checkMark.svg","containers/Auth/Select/Dropdown/Dropdown.js","containers/Auth/Select/Select.js","containers/Auth/SignUp/SignUp.js","containers/Auth/Token/Token.js","utils/setAuthToken.js","hooks/useRefreshToken.js","containers/Auth/Auth.js","assets/homepage/dot.svg","containers/Homepage/SideDrawer/User/User.js","assets/homepage/projects.svg","assets/homepage/settings.svg","fabricConfig/rectCropBox.js","containers/Homepage/SideDrawer/SideDrawer.js","containers/Homepage/Navbar/Navbar.js","hooks/useDeleteVideo.js","assets/homepage/whiteDot.svg","containers/Homepage/Projects/Project/Project.js","containers/Homepage/Projects/Projects.js","containers/Homepage/Templates/TemplateList/Template/Template.js","containers/Homepage/Templates/TemplateList/TemplateList.js","containers/Homepage/Templates/Templates.js","containers/Homepage/Settings/Input/Input.js","hooks/useUpdateUserInfo.js","containers/Homepage/Settings/Settings.js","hooks/useGetVideos.js","hooks/useGetUserInfo.js","containers/Homepage/Homepage.js","hooks/useUserState.js","hooks/useTrackTime.js","assets/preview/exportArrow.svg","assets/preview/copyLink.svg","assets/preview/play.svg","assets/preview/pause.svg","assets/preview/fullScreen.svg","containers/CustomPlayer/Controls/utils/fullScreen.js","containers/CustomPlayer/Controls/utils/slider.js","containers/CustomPlayer/Controls/Time/TimelineSlider/TimelineSlider.js","containers/CustomPlayer/Controls/Time/Time.js","assets/preview/volume.svg","containers/CustomPlayer/Controls/Volume/VolumeSlider/VolumeSlider.js","containers/CustomPlayer/Controls/Volume/Volume.js","containers/CustomPlayer/Controls/hooks/useSingleAndDoubleClick.js","containers/CustomPlayer/Controls/hooks/useShowHidePanel.js","containers/CustomPlayer/Controls/hooks/useKeyEvents.js","containers/CustomPlayer/Controls/Controls.js","containers/CustomPlayer/CustomPlayer.js","hooks/useGetPublicVideo.js","hooks/useCheckAuth.js","containers/Preview/Preview.js","containers/Preview/utils/previewUtils.js","fabricConfig/video.js","fabricConfig/speakerCropBox.js","fabricConfig/circleCropBox.js","fabricConfig/customTextbox.js","fabricConfig/subtitles.js","fabricConfig/customImage.js","assets/editor/ctrlScale.svg","assets/editor/ctrlStretch.svg","assets/editor/ctrlRotate.svg","fabricConfig/imageScale.js","fabricConfig/controls.js","App.js","reportWebVitals.js","index.js","containers/Transcription/Words/Words.module.css","containers/Navigation/ImageDropdown/ImageDropdown.module.css","containers/Homepage/SideDrawer/SideDrawer.module.css","containers/Navigation/ShapeDropdown/ShapeDropdown.module.css","containers/Toolbar/TextDropdowns/FontSizeDropdown/FontSizeDropdown.module.css","containers/Homepage/SideDrawer/User/User.module.css","containers/Homepage/Projects/Projects.module.css","containers/Transcription/Transcription.module.css","containers/Toolbar/TextDropdowns/FontsDropdown/FontsDropdown.module.css","containers/Toolbar/ImageToolbar/ImageToolbar.module.css","containers/Canvas/ContextMenu/ContextMenu.module.css","containers/Auth/SignIn/SignIn.module.css","containers/Auth/SignUp/SignUp.module.css","containers/Homepage/Templates/Templates.module.css","containers/CustomPlayer/Controls/Controls.module.css","components/Progress/Progress.module.css","containers/Player/CanvasToolbar/ResizeDropdown/ResizeDropdown.module.css","containers/Auth/Select/Select.module.css","containers/Transcription/TranscriptionProgress/TranscriptionProgress.module.css","containers/Toolbar/TextDropdowns/TextDropdowns.module.css","containers/Player/Player.module.css","containers/Auth/Or/Or.module.css","containers/Auth/Input/Input.module.css","containers/Auth/CheckMail/CheckMail.module.css","containers/Auth/Select/Dropdown/Dropdown.module.css","containers/Homepage/Templates/TemplateList/TemplateList.module.css","containers/Homepage/Templates/TemplateList/Template/Template.module.css","containers/Homepage/Settings/Input/Input.module.css","containers/CustomPlayer/Controls/Volume/Volume.module.css","containers/Toolbar/ShapeDropdowns/ShapeDropdowns.module.css","containers/Navigation/Navigation.module.css","containers/Homepage/Navbar/Navbar.module.css"],"names":["module","exports","_path","_path2","_path3","_path4","DragDrop","setVideoForUpload","uploadRef","useRef","dropAreaRef","handleDragOver","useCallback","e","preventDefault","dataTransfer","dropEffect","current","classList","add","styles","Active","handleDragEnter","stopPropagation","handleDragLeave","remove","validateFile","file","type","video","document","createElement","preload","onloadedmetadata","duration","src","URL","createObjectURL","handleDrop","files","useEffect","area","addEventListener","removeEventListener","className","UploadText","ref","DropArea","onClick","click","DropAreaContent","upload","alt","DropAreaText","DropAreaHeading","DropAreaSubheading","DropAreaBrowse","accept","style","display","onChange","Progress","progress","heading","Percentage","Heading","ProgressBar","ProgressBarInner","maxWidth","Subheading","instance","axios","create","baseURL","process","useUploadVideo","useState","isUploading","setIsUploading","info","setInfo","uploadProgress","setUploadProgress","words","isMounted","onUploadProgress","currentProgress","Math","round","loaded","total","axiosUploadVideo","formData","Promise","resolve","reject","post","headers","Accept","then","res","catch","err","uploadVideo","a","console","log","data","subtitles","captions","id","_id","url","original_video_url","title","UserContext","createContext","Navbar","children","videoData","isPreview","getVideoError","isAuth","userState","useContext","history","useHistory","getName","isName","name","length","email","toUpperCase","slice","BackFileInfoContainer","BackButton","goBack","BackArrow","backArrow","HomeLinkContainer","HomeLink","to","Home","BorderLine","Twiso","twiso","FileInfoContainer","FileName","Creater","replace","EditVideo","UserInfoContainer","LogInLink","SignUpLink","UserName","Initials","Letter","Uploader","viedoForUpload","setVideoData","selectedTemplate","FormData","append","handleVideoCuts","wordsArr","setCuts","setPlayerTime","wordIndex","restoreStart","arr","isLastDeleted","cutStart","cutStartIndex","cutEndIndex","cutEnd","i","word","active","next","push","start","end","handleDeletedCuts","prevState","newState","cut","handleRestoredCuts","findCurrentWordIndex","deletedIndex","currentIndex","EditorContext","updateSubText","text","isSilence","setShouldRerenderSub","currentSub","val","isWhitespace","indexOf","silence","handleNoSilenceAndText","isFirst","isNoWhitespace","handleSilenceAndText","silenceCount","handleNoText","Words","currentWordIndex","searchInput","wordClickHandler","inputIndex","setInputIndex","currentSelection","fabricSub","updateUndoHistory","editorDispatch","input","setInput","inputRef","saveChange","index","newText","change","value","action","target","blurHandler","parentNode","inputVal","trim","shouldShow","isSelectionMode","isSelectionEnd","focus","map","isCurrent","isHighlight","toLowerCase","includes","isInput","innerContent","WordInput","onBlur","Pause","Word","content","Deleted","DeletedImgContainer","DeletedImg","restoreText","DeletedText","containerStyle","width","marginRight","WordContainer","CurrentWord","Highlight","InSelection","join","findSubWithWordIndex","subList","subNode","head","sub","j","subWord","findWordIndexWithId","findPrevNotDeletedWord","findNextNotDeletedWord","TranscriptionProgress","status","setIsFinished","setProgress","intervalRef","isFirstLoad","setIsFirstLoad","isFinished","interval","clearInterval","progressInterval","intervalTime","setInterval","progressHandler","timeLeft","Date","startDate","now","secondsElapsed","floor","finishedPercentage","timeout","setTimeout","clearTimeout","Box","Array","x","Line","Transcription","setCurrentWordIndex","videoRef","setCurrentSelection","shouldCut","setShouldCut","isNextWord","setIsNextWord","isPrevWord","setIsPrevWord","dispatch","setSearchInput","cutHandler","pause","setWordIndex","deleteWord","deletedStartIndex","deleteEndIndex","deletedIndexArr","deleteSelection","getSelection","removeAllRanges","handleNexOrPrevWord","setState","callback","mouseUpHandler","selection","detail","anchorNode","focusNode","isAnchorNode","tagName","isFocusNode","position","compareDocumentPosition","isCollapsed","lastChild","firstChild","indexStart","indexEnd","handleSelection","TextControls","OptionContainer","undo","SearchContainer","SearchInput","placeholder","SearchSvg","search","Text","isDeleted","currentTarget","resotreIndexArr","restoreDeleted","matchReplacedImage","img","imgAsset","cropRect","originalWidth","y","height","originalHeight","w","h","scale","scaleX","scaleY","replaceImage","imageSrc","canvas","isSvg","setUserAssets","getActiveObject","fabric","CustomImage","top","left","cornerRadius","angle","crossOrigin","setActiveObject","requestRenderAll","replaceWithCachedImage","imgEl","Image","excludeFromExport","opacity","onload","loadAndReplaceImage","addImage","updateId","addCachedImage","loadAndAddImage","addNewImage","state","userAssets","imageToAdd","filter","asset","shouldReplaceImage","addNewShape","obj","shapeToAdd","Rect","noScaleCache","strokeUniform","fill","stroke","strokeWidth","rx","ry","Circle","radius","Triangle","useAddObject","shouldAddText","CustomTextbox","splitByGrapheme","textState","addNewText","EventContext","loadedFonts","roundedCorners","media","finalRad","setFont","font","set","fontFamily","loadAndUse","WebFont","load","google","families","fontactive","familyName","fvd","checkOffScreen","isOnScreen","zoom","getZoom","canvasWidth","getWidth","canvasHeight","getHeight","objHeight","objWidth","paddingY","setCoords","checkResizeOffScreen","object","isSub","isTextObject","isVertical","resize","shouldResize","fontSize","textPropertyArr","shapePropertyArr","imagePropertyArr","videoPropertyArr","handleObject","propertyArr","forEach","property","handleSelected","lineCoords","onModifying","setIsModifying","useSelectionObserver","eventState","eventDispatch","isModifying","currentId","addListeners","c","on","hiddenTextarea","renderAll","onTextEnter","onTextExit","onCreated","onUpdated","onModified","bringToFront","onAdded","onRemoved","deselected","onCleared","off","isMoving","currentCoords","isCropMode","currentObject","drawLine","x1","y1","x2","y2","ctx","aligningLineWidth","aligningLineColor","viewportTransform","save","lineWidth","strokeStyle","beginPath","moveTo","lineTo","restore","isInRange","value1","value2","aligningLineMargin","len","drawVerticalLine","coords","drawHorizontalLine","showCenterLine","centerLineColor","centerLineWidth","useGuidelines","isPlayer","isSaving","setCtx","setViewportTransform","verticalLines","setVerticalLines","horizontalLines","setHorizontalLines","setZoom","setCanvasWidth","setCanvasHeight","canvasWidthCenterMap","setCanvasWidthCenterMap","canvasHeightCenterMap","setCanvasHeightCenterMap","isInVerticalCenter","setIsInVerticalCenter","isInHorizontalCenter","setIsInHorizontalCenter","handleMouseDown","handleBeforeRender","clearContext","contextTop","handleMoving","aligningLineOffset","activeObject","canvasObjects","getObjects","activeObjectCenter","getCenterPoint","activeObjectLeft","activeObjectTop","activeObjectBoundingRect","getBoundingRect","activeObjectHeight","activeObjectWidth","horizontalInTheRange","verticalInTheRange","_currentTransform","objectCenter","objectLeft","objectTop","objectBoundingRect","objectHeight","objectWidth","setPositionByOrigin","Point","objectMovingObserver","isInVertical","isInHorizontal","objectMovingCenterObserver","handleAfterRender","canvasWidthCenter","showVerticalCenterLine","canvasHeightCenter","showHorizontalCenterLine","handleMouseUp","initGuidelines","getSelectionContext","widthMap","heightMap","removelistneres","removeRenderlistneres","shouldUpdateCanvasSize","button","shapeArr","useUpdateObject","shouldUpdateSubtitles","subtitlesState","_clearCache","Object","entries","key","showToolbar","updateSubtitlesStyle","shouldUpdateText","updateTextStyle","shouldUpdateShape","shape","shapeState","updateShapeStyle","shouldUpdateImage","image","imageState","clipPath","updateImageStyle","shouldUpdateVideo","videoState","updateVideoStyle","setSize","ratio","min","videoWidth","videoHeight","setDimensions","useUpdateCanvas","shouldUpdateCanvas","backgroundColor","updateCanvasStyle","discardActiveObject","isResize","objects","updateCanvasSize","addCanvas","shouldLoad","setCanvas","setSpeakerVideos","setObjectIdCount","setFabricSub","Canvas","preserveObjectStacking","fireRightClick","stopContextMenu","uniScaleKey","altActionKey","canvasInfo","clear","videos","lastId","loadFromJSON","fontStyle","fontWeight","loadCanvas","useAddCanvas","editorState","setIsCanvasData","speakers","isCanvas","newVideo","speaker","Video","useAddSpeakers","objectIdCount","isCanvasData","isFirtLoad","setIsFirtLoad","speakerVideo","useClickListener","clickHandler","shouldCropMedia","path","fonts","FontsDropdown","setIsDropDown","options","FontOption","FontOptionsContainer","textContent","UploadFontContainer","UploadFontButton","FontSizeDropdown","FontSizeOption","TextAlignDropdown","childNodes","TextAlignOption","Current","TextAlignImage","textLeft","TextAlignText","textCenter","textRight","textJustify","TextDropdowns","isFontFamilyDropdown","isFontSizeDropdown","isColorDropdown","isTextAlignDropDown","setIsFontFamilyDropdown","setIsFontSizeDropdown","colorChangeCompleteHandler","setIsTextAlignDropDown","setColor","color","colorPickerRef","isBgColorDropdown","setBgColor","bgColor","bgColorPickerRef","dropDownStyle","setDropdownStyle","coordY","canvasState","bottom","right","SketchPickerContainer","rgb","onChangeComplete","textAlign","isBg","colorString","r","g","b","background","TextToolbar","fontSizeInput","setFontSizeInput","setIsColorDropdown","setIsBgColorDropdown","boldStlyes","FontWeightBoldContainer","italicStyles","FontStyleItalicContainer","isBold","isItalic","textAlignSrc","dropdownHandlers","fontSizeArrow","colorPicker","styleHandlers","bold","weight","italic","handler","handleClick","split","FontsContainer","DownArrow","downArrow","BorderDiv","FontSizeContainer","FontSizeInputContainer","FontSizeInput","fontSizeChangeHandler","FontSizeArrowContainer","ColorPickerContainer","ColorPickerBorder","ColorPicker","Bold","Italic","BgColorContainer","BgColor","subBackground","TextAlignContainer","TextAlign","StrokeWidthDropdown","isSmallRange","includesZero","optionsClickHandler","LineDropdown","StrokeOption","ShapeDropdown","ShapeDropdowns","shapeToolbar","isStrokeWidthDropdown","isFillDropdown","isStrokeDropdown","setFill","fillChangeCompleteHandler","fillRef","setStroke","strokeChangeCompleteHandler","strokeRef","setIsStrokeWidthDropdown","isLine","isRect","strokeWidthDropDownStyle","setStrokeWidthDropDownStyle","handleDropdownPosition","toolbarWidth","offsetWidth","coordX","keys","FillDropdownContainer","StrokeDropdownContainer","StrokeWidthDropdownContainer","ShapeToolbar","setIsFillDropdown","setIsStrokeDropdown","strokeWidthInput","setStrokeWidthInput","radiusInput","setRadiusInput","shapeToolbarRef","strokeContainerRef","clicked","borderTopLeftRadius","borderBottomLeftRadius","initialLoadHandler","FillContainer","StrokeContainer","StrokeWidthContainer","StrokeWidthInputContainer","StrokeWidthInput","strokeWidthChangeHandler","borderTopRightRadius","borderBottomRightRadius","StrokeWidthArrowContainer","RadiusContainer","RadiusInput","ImageToolbar","dbClickEvent","ReaplaceContainer","BorderStyle","CropContainer","cropImage","VideoDropdowns","videoToolbar","VideoToolbar","videoToolbarRef","CircleCropContainer","CircleCropCircle","Toolbar","toolbarRef","setTransform","transform","toolbar","toolbarOffset","toolbarPadding","toolbarHeight","offsetHeight","isBottomCloser","tl","bl","offset","tr","br","tempCoordY","max","calcPosition","isCroppingImage","pasteObject","clone","cloned","handlePaste","clipboard","objId","setClipboard","videosArr","objArr","_objects","ActiveSelection","ContextMenu","setIsMounted","activeObj","setActiveObj","canOnlyPaste","setCanOnlyPaste","menuRef","isMountedRef","pointer","overlayClickHandler","deleteVideo","el","optionClickHandler","sendToBack","rightClickEvent","Overlay","onContextMenu","Menu","Option","Border","useAnimate","speakerVideos","currentTime","frameRef","cancelAnimation","util","cancelAnimFrame","animate","requestAnimFrame","render","dirty","getSpeakerBox","boxSize","boxId","SpeakerCropBox","borderColor","getMediaCircleCropBox","minSize","size","getCircleCropBoxSize","CircleCropBox","originX","originY","strokeDashArray","selectable","globalCompositeOperation","lockMovementY","lockMovementX","setCropElements","box","holeBox","cropCanvas","setMedia","setCropbox","setHoleBox","visible","setControlsVisibility","mtr","ml","mr","mt","mb","reverseMedia","prepareMediaForCrop","cropType","assets","canvasRef","isVideo","isRectCrop","getBoundingClientRect","getCropBoxSize","RectCropBox","getMediaRectCropBox","getCircleHoleBox","mediaAsset","_element","hoverCursor","getOverlayBox","getBounds","boundHeight","boundWidth","topBound","bottomBound","leftBound","rightBound","setHoleBoxPosition","restrictBox","useCropMedia","activeInfo","setActiveInfo","activeEl","setAcitveEl","cropbox","croppedMedia","setCroppedMedia","clearState","setCropped","ratioX","ratioY","newTop","newLeft","cropMedia","cropFinishHandler","offsetX","absolutePointer","offsetY","setCropCanvas","fabricCanvas","coordsRef","objs","prevTop","prevLeft","windowWidth","window","innerWidth","windowHeight","innerHeight","newZoom","newWidth","newHeight","updateSize","setOffset","getOffset","cropCanvasRef","handleResize","CropCanvas","Backdrop","cacheAsset","onerror","cacheAssets","setAssets","filtered","Set","promises","allSettled","assetArr","getCanvasObject","jsonCanvas","toJSON","getResizeValues","initialWidth","initialHeight","option","positionObject","templateEl","currentEl","heightRatio","widthRatio","template","isSubtitles","finishHandler","useLoadTemplate","templateToLoad","setTemplateToLoad","PlayerCanvas","updatetObjectId","shouldSaveTemplate","CanvasComponent","initialState","reducer","useEventState","useReducer","boxStyle","ResizeDropdown","Dropdown","SizeOptions","SizeOption","SizeOptionText","SizeOptionBox","useDeleteTemplate","isDeletingTemplate","setIsDeletingTemplate","deleteTemplateRes","setDeleteTemplateRes","axiosDeleteTemplate","delete","deleteTemplate","spinner","TemplatesDropdown","isCreatingTemplate","templates","setShouldGetTemplates","currentOption","setCurrentOption","isGettingTemplates","templateTypeOption","templatesRef","handleScroll","scrollLeft","deltaY","container","templateOptionClickHanlder","TemplateOptions","TemplateOption","Templates","Template","SaveTemplate","SaveImg","uploadSvg","SaveText","DeleteContainer","confirm","XLine1","XLine2","image_url","TemplateImg","props","actionType","isImageDropdown","isShapeDropdown","isSubtitlesDropdown","isResizeDropdown","isCanvasBgColorDropdown","isTemplatesDropdown","isZoomDropdown","shouldAddCanvasBgImage","isDownloadDropdown","_excluded","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgTemplates","_ref","svgRef","titleId","viewBox","xmlns","d","strokeLinecap","strokeLinejoin","ForwardRef","SvgResize","SvgCropImage","fillRule","clipRule","useGetTemplates","setIsGettingTemplates","setTemplates","axiosGetTemplates","get","getTemplates","useCreateTemplate","setIsCreatingTemplate","createdTemplate","setCreatedTemplate","axiosCreateTemplate","createTemplate","useSaveTemplate","canvasImage","setCanvasImage","canvasObject","templateData","setImage","newCanvas","JSON","stringify","toDataURL","format","quality","getCanvasImage","CanvasToolbar","setSpeakers","shouldGetTemplates","backgroundColorRef","resizeDropdownRef","currentTemplateOption","setCurrentTemplateOption","isLoadingTemplate","commonTemplate","userTemplate","TemplatesContainer","OptionText","ResizeContainer","ColorContainer","TemplatesDropdownContainer","ColorDropdownContainer","useContainerSize","containerRef","getSizeInfo","maxHeight","containerWidth","getCanvasSize","paddingTop","containerPadding","offsetLeft","containerHeight","getContainerSize","shouldCalculateCanvasSize","usePlayerTime","videoCuts","isPlaying","nextCutIndex","setNextCutIndex","setCurrentSub","time","moreThanStart","lessThanEnd","isShortTime","handleCurrentWord","nextWord","handleCurrentSub","nextSub","Node","LinkedList","tail","newNode","newTail","temp","idx","unshift","shift","pop","pre","nextNode","reverse","useSubtitles","setSubList","shouldRerenderSub","displaySub","setSubs","list","firstDeletedIndex","checkForPrevDeleted","which","isLast","wordTimeLength","strLength","containsMark","match","isRoomForWord","generateSubtitles","subtitle","Subtitle","paddingX","breakWords","editable","newSubtitle","Player","transcriptonStatus","userDispatch","zIndex","margin","Provider","PlayerContent","PlayerControls","PlayButton","play","pauseSvg","playSvg","setIsPlaying","setCurrentTime","videoUrl","intervalId","setIntervalId","isFirstLoadRef","controls","onPause","handlePause","onPlay","handlePlay","onEnded","handleEnd","onLoadedMetadata","getVideoInfo","z","crop","generateLayer","exportCanvas","handleLayers","setElements","setVideoInfo","elementsArr","isAdded","coordinates","prepareCanvas","randomUUID","random","toString","substring","rgbaTohex","alpha","hex","prepareSubs","subState","config","xCoordinate","yCoordinate","fontColor","rgbaToHex","padding","getSubConfig","deleteStart","deleteEnd","generateUUID","useUploadAsset","isUploadingAsset","setIsUploadingAsset","uploadResponse","setUploadResponse","axiosUploadAsset","uploadAsset","ImageDropdown","fileInput","imageType","splitSrc","oddArr","_","evenArr","assetsContent","Images","Column","ImageContainer","UplaodButtonContainer","UploadButton","FileInput","contains","ShapeContainer","Shape","square","circle","triangle","line","SvgAddText","SvgAddImage","_circle","SvgAddShape","cx","cy","SvgSubtitles","DesignControls","isWords","ControlsContainer","AddTextContainer","AddIcon","HoverContent","HoverTriangle","HoverText","DesignControl","AddImageContainer","ActiveDesignControl","AddShapeContainer","useGetAssets","isGettingAssets","setIsGettingAssets","axiosGetAssets","getAssets","Navigation","setPreviewUrl","isUpdatingProject","isDownloading","downloadVideo","isDownloadDataUploaded","setIsDownloadDataUploaded","shouldFetchAssets","setShouldFetchAssets","downloadData","setDownloadData","elements","videoInfo","breaks","setBreaks","subs","resizeInfo","setResizeInfo","downloadRef","prepareData","breaksData","subsData","jsonData","DownloadButton","cuts","endTime","videoBreaks","prev","prepareBreaks","DownloadLink","href","shouldTriggerCanvasUpdate","shouldTriggerWordsUpdate","isModifyingObject","shouldUndo","showCanvasToolbar","useEditorState","useGetVideo","isGettingVideo","setIsGettingVideo","setVideoUrl","setTranscriptionStatus","setGetVideoError","axiosGetVideo","getVideo","transcription","transcriptionTime","transcription_start","frame_rate_video_url","finalUrl","final_video_url","finalText","final_full_text","useUpdateProject","setIsUpdatingProject","updateResponse","setUpdateResponse","axiosUpdateProject","put","updateProject","useDownloadVideo","setIsDownloading","axiosDownloadVideo","useCanvasUpdate","timerRef","canUpdateRef","triggerCanvasUpdate","useWordsUpdate","shouldUpdate","wordsUpdateTimerRef","triggerWordsUpdate","useCheckTranscription","params","checkTranscription","setVideos","keyDownHandler","setIsPasting","setIsCopying","setIsCutting","setIsBringToFront","setIsSendToBack","setIsCut","setIsPlayPause","setIsUndo","canvasInput","isEditing","activeElement","ctrl","ctrlKey","metaKey","code","deleteHandler","fire","useKeyEvents","isPasting","isCopying","isCutting","isBringToFront","isSendToBack","isCut","isUndo","isPlayPause","shouldRun","setShouldRun","handleEvents","onKeyDown","onKeyUp","keyUpHandler","finishUndo","undoHistory","lastAction","useUndo","setVideoCuts","handleTextUndo","undoDeletedText","undoRestoredText","undoChangedText","VideoEditor","useParams","cutIndex","Main","CustomRoute","Component","component","allowed","where","redirect","rest","useAddVideo","setVideo","fabricVideo","evented","addSpeaker","boxArr","setBoxArr","updateBoxId","last","SpeakersContext","useCropSpeakers","speakersState","speakersDispatch","boxes","handleFirstLoadSpeakers","shouldAddSpeaker","shouldRemoveSpeaker","SpeakersCanvas","canvasDispatch","setBoxId","useSpeakersState","videoSize","containerSize","setContainerSize","handleSize","SelectSpeakers","setVideoSize","CanvasContainer","getVideoSize","Controls","SelectedText","SelectedNumber","SpeakerButtons","AddSpeakerButton","AddSpeakers","AddSpeakersText","RemoveSpeakerButton","RemoveSpeakers","removeSpeaker","RemoveSpeakersText","NextSteps","Confirm","Skip","useGetDownloadProgress","isGettingProgress","setIsGettingProgress","downloadProgress","setDownloadProgress","axiosGetProgress","getDownloadProgress","useCheckDownloadProgress","checkProgress","Download","Editor","useRouteMatch","wordsRef","Button","Or","Input","invalid","setValue","errorMessage","InputContainer","Invalid","isEmpty","onFocus","ErrorMessage","CheckMail","mail","Mail","checkEmailValidity","test","useMagicLink","magickRes","setMagickRes","magickError","setMagickError","axiosMagicLink","magicLink","SignIn","authUrl","isLoading","setIsLoading","checkTokenValidity","isSent","setIsSent","validation","setEmail","token","localStorage","getItem","signInContent","FormContent","GoogleLink","GoogleLogo","Form","onSubmit","setIsDropdown","CheckMark","checkMark","Select","isDropdown","SelectContainer","Selected","Valid","SignUp","setName","workType","setWorkType","signUpContent","SignInLink","isEmailValid","isNameValid","isWorkTypeValid","firstName","Token","setToken","location","useLocation","getToken","URLSearchParams","tokenParam","setItem","setAuthToken","defaults","common","useRefreshToken","newToken","setNewToken","refreshError","setRefreshError","axiosRefreshToken","refreshToken","accessToken","Auth","removeItem","Account","exact","User","Name","DropdownContainer","Dots","dot","SignOut","SvgProjects","SvgSettings","SideDrawer","Links","Link","activeClassName","pathname","LinkText","NewButton","Plus","useDeleteVideo","isDeletingVideo","setIsDeletingVideo","deleteVideoResponse","setDeleteVideoResponse","axiosDeleteVideo","Project","setShouldFetch","disabled","backgroundImage","screenshot_url","InfoContainer","Info","DateAndName","date","day","getDate","month","getMonth","year","getFullYear","transformDate","created_at","OptionsContainer","Options","whiteDot","DropdownOption","Projects","ProjectsList","AddProject","AddProjectInner","AddProjectText","AddProjectInfo","ProjectContainer","TemplateInner","TemplateImgContainer","TemplateList","templateClickHandler","List","setCurrent","TemplateTypes","TemplateType","marginTop","useGetUserInfo","isUpdatingUserInfo","setIsUpdatingUserInfo","updatedUserInfo","setUpdatedUserInfo","axiosUpdateUserInfo","updateUserInfo","Settings","useUpdateUserInfo","Label","htmlFor","ButtonSpinnerContainer","UpdateButton","Billing","SubHeading","Plan","Renewal","CancelButton","useGetVideos","isGettingVideos","setIsGettingVideos","axiosGetVideos","getVideos","isGettingUserInfo","setIsGettingUserInfo","userInfo","setUserInfo","axiosGetUserInfo","getUserInfo","Homepage","shouldFetchVideos","setShouldFetchVideos","shouldFetchUserInfo","setShouldFetchUserInfo","googleInfo","given_name","isAuthenticated","useUserState","useTrackTime","fullScreenHanlder","fullscreenElement","exitFullscreen","webkitExitFullscreen","msExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","handleInputChange","backgroundSize","TimelineSlider","step","shouldPlay","setShouldPlay","Slider","onMouseDown","onMouseUp","Time","setTime","isMoreThanHour","setIsMoreThanHour","timeStrRef","timeString","setTimeString","generateTimeString","t","timeStr","m","s","Timeline","VolumeSlider","Volume","volume","setVolume","volumeRef","VolumeButton","volumeSvg","VolumeOff","VolumeBar","useSingleAndDoubleClick","onSingleClick","onDoubleClick","clickCount","setClickCount","prevSatate","useShowHidePanel","controlsRef","panelRef","hover","shouldShowPanel","setShouldShowPanel","isCursorOnPanel","setIsCursorOnPanel","hovertimerRef","visibletimerRef","startTimeout","mouseMoveHanlder","mouseEnterHandler","mouseLeaveHandler","panel","playPause","keydownHandler","isSpace","shiftKey","fullScreen","exitHandler","webkitIsFullScreen","mozFullScreen","msFullscreenElement","FullScreenSize","Visible","Hover","ControlsPanel","PlayPause","FullScreen","fullScreenSvg","CustomPlayer","setDuration","VideoContainer","onTimeUpdate","useGetPublicVideo","isGettingPublicVideo","setIsGettingPublicVideo","publicInfo","setPublicInfo","getPublicVideoError","setGetPublicVideoError","axiosGetPublicVideo","getPublicVideo","useCheckAuth","setIsAuth","isChecking","setIsChecking","Preview","article","setArticle","videoDownloadRef","isId","MainContent","VideoFooter","Title","DownloadAndLink","CopyLink","navigator","writeText","copyLink","HeadlineAndExport","Headline","ExportButton","setAttribute","encodeURIComponent","body","appendChild","removeChild","exportText","exportArrow","createClass","initialize","callSuper","lockRotation","objectCaching","cacheProperties","toObject","extend","_draw","drawImage","_render","getElement","_stroke","_renderPaintInOrder","fromObject","_fromObject","_renderControls","_activeObject","Textbox","cursorWidth","_getNonTransformedDimensions","_calculateCurrentDimensions","transformPoint","_getTransformedDimensions","getViewportTransform","_wrapLine","_line","lineIndex","desiredWidth","reservedSpace","graphemeLines","string","graphemeSplit","_wordJoiners","infix","wordWidth","infixWidth","largestWordWidth","lineJustStarted","additionalSpace","_getWidthOfCharSpacing","_measureWord","letter","letterWidth","getMeasuringContext","measureText","CACHE_FONT_SIZE","concat","dynamicMinWidth","customImage","fromURL","imgOptions","loadImage","isError","_object","_initFilters","filters","resizeFilter","resizeFilters","enlivenObjects","enlivedProps","wrapWithFixedAnchor","controlsUtils","wrapWithFireEvent","getLocalPoint","_finalizeCurrentTransform","eventName","_scaling","actionPerformed","stateful","hasStateChanged","_addEventOptions","_fire","scaleCrop","sign","handleXCrop","distance","isLeft","shouldSetScaleCrop","handleXScaleCrop","newPoint","abs","leftover","oldHeight","oldCropHeight","newY","handleXScale","handleYCrop","isTop","handleYScaleCrop","oldWidth","oldCropWidth","newX","handleYScale","scaleObject","eventData","by","signX","signY","lockScalingFlip","oldW","oldH","oldScale","scaleChanged","sizeChanged","didChange","scalingX","scalingY","transparentCorners","cornerColor","cornerStrokeColor","cornerStyle","borderDashArray","_groupSelectedObjects","_drawSelection","ctrlStretchImage","ctrlStretch","ctrlScaleImage","ctrlScale","ctrlRotateImage","ctrlRotate","scaleSkewStyleHandler","scaleSkewCursorStyleHandler","scaleStyleHandler","scaleCursorStyleHandler","scalingEqually","scalingYOrSkewingX","scalingXOrSkewingY","scaleOrSkewActionName","objectControls","renderScaleIcon","icon","styleOverride","fabricObject","cornerSize","translate","rotate","degreesToRadians","renderStretchIconX","renderStretchIconY","Control","cursorStyleHandler","actionHandler","getActionName","rotationWithSnapping","rotationStyleHandler","withConnection","actionName","textBoxControls","changeWidth","App","basename","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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Q,EAAOzc,KAAK4d,GAEd9B,EAAiBW,GACjBV,EAAiBW,MAElB,CACDe,EACAD,EACAzB,EACArlB,EACAiV,EACA+R,EACAR,EACApB,KCxCW+B,GAxBU,SAAClS,EAAQyB,GAChC,IAAM0Q,EAAeroB,uBACnB,SAACC,GACC,GACEiW,IACCyB,EAAMkG,aACNlG,EAAM2Q,kBACN3Q,EAAMK,mBACP,CACA,IAAK,IAAI7N,EAAI,EAAGA,EAAIlK,EAAEsoB,KAAKjhB,OAAQ6C,IACjC,GAAqB,oBAAjBlK,EAAEsoB,KAAKpe,GAAGjE,GAA0B,OAE1CgQ,EAAO4P,sBAAsBhP,sBAGjC,CAACZ,EAAQyB,EAAMkG,WAAYlG,EAAM2Q,gBAAiB3Q,EAAMK,qBAG1DpW,qBAAU,WAER,OADAV,SAASY,iBAAiB,QAASumB,GAC5B,kBAAMnnB,SAASa,oBAAoB,QAASsmB,MAClD,CAACnS,EAAQmS,K,yCCvBC,OAA0B,sCCA1B,OAA0B,iCCA1B,OAA0B,0CCA1B,OAA0B,mCCA1B,OAA0B,qCCA1B,OAA0B,sCCA1B,OAA0B,uCCA1B,OAA0B,wC,oBC2hC1BG,GA3hCA,CACb,UACA,OACA,eACA,gBACA,WACA,OACA,QACA,UACA,aACA,kBACA,iBACA,mBACA,UACA,SACA,QACA,SACA,UACA,OACA,WACA,cACA,gBACA,mBACA,OACA,aACA,gBACA,QACA,QACA,gBACA,QACA,UACA,kBACA,SACA,UACA,WACA,mBACA,cACA,WACA,WACA,YACA,YACA,QACA,QACA,QACA,UACA,SACA,SACA,mBACA,SACA,2BACA,gBACA,QACA,eACA,aACA,QACA,SACA,UACA,eACA,sBACA,UACA,gBACA,iBACA,aACA,gBACA,QACA,WACA,SACA,UACA,WACA,OACA,OACA,OACA,iBACA,OACA,QACA,YACA,UACA,OACA,SACA,OACA,aACA,SACA,YACA,aACA,UACA,eACA,sBACA,eACA,oBACA,qBACA,OACA,YACA,aACA,UACA,YACA,eACA,SACA,UACA,eACA,iBACA,kBACA,aACA,gBACA,gBACA,kBACA,iBACA,gBACA,YACA,UACA,SACA,mBACA,wBACA,aACA,SACA,QACA,eACA,aACA,UACA,QACA,aACA,aACA,WACA,YACA,UACA,UACA,eACA,YACA,QACA,UACA,kBACA,aACA,QACA,wBACA,+BACA,4BACA,gCACA,6BACA,qBACA,gBACA,cACA,QACA,mBACA,WACA,oBACA,UACA,SACA,0BACA,iBACA,gBACA,UACA,cACA,QACA,SACA,WACA,aACA,gBACA,UACA,aACA,eACA,iBACA,cACA,OACA,UACA,SACA,kBACA,gBACA,iBACA,eACA,aACA,iBACA,QACA,kBACA,eACA,kBACA,aACA,QACA,UACA,YACA,iBACA,SACA,QACA,SACA,YACA,cACA,cACA,WACA,QACA,QACA,iBACA,oBACA,aACA,UACA,YACA,SACA,SACA,eACA,qBACA,cACA,eACA,SACA,aACA,SACA,QACA,aACA,WACA,qBACA,YACA,iBACA,SACA,oBACA,eACA,QACA,SACA,WACA,QACA,WACA,SACA,oBACA,iBACA,OACA,eACA,WACA,QACA,QACA,YACA,aACA,cACA,eACA,cACA,YACA,UACA,eACA,cACA,SACA,QACA,SACA,YACA,qBACA,mBACA,eACA,oBACA,oBACA,YACA,gBACA,UACA,WACA,wBACA,eACA,YACA,cACA,cACA,eACA,gBACA,UACA,SACA,YACA,SACA,cACA,UACA,UACA,mBACA,gBACA,SACA,iBACA,UACA,mBACA,cACA,uBACA,WACA,QACA,kBACA,SACA,oBACA,iBACA,gBACA,WACA,aACA,WACA,gBACA,YACA,eACA,WACA,QACA,SACA,cACA,aACA,QACA,QACA,cACA,cACA,YACA,YACA,cACA,aACA,iBACA,QACA,YACA,QACA,aACA,cACA,QACA,mBACA,cACA,eACA,cACA,wBACA,uBACA,6BACA,4BACA,aACA,YACA,YACA,WACA,YACA,UACA,kBACA,QACA,MACA,QACA,gBACA,WACA,eACA,QACA,SACA,YACA,mBACA,aACA,WACA,YACA,WACA,WACA,SACA,SACA,QACA,eACA,YACA,YACA,YACA,sBACA,4BACA,aACA,YACA,WACA,UACA,aACA,mBACA,QACA,eACA,mBACA,WACA,eACA,uBACA,cACA,WACA,SACA,UACA,UACA,YACA,YACA,kBACA,WACA,QACA,SACA,SACA,WACA,UACA,eACA,WACA,UACA,gBACA,qBACA,MACA,UACA,eACA,eACA,SACA,gBACA,WACA,iBACA,gBACA,SACA,oBACA,aACA,aACA,UACA,WACA,YACA,OACA,wBACA,WACA,cACA,eACA,eACA,cACA,SACA,iBACA,SACA,SACA,QACA,OACA,SACA,WACA,SACA,iBACA,SACA,kBACA,UACA,eACA,UACA,UACA,eACA,YACA,eACA,QACA,cACA,aACA,uBACA,YACA,OACA,cACA,eACA,gBACA,gBACA,kBACA,iBACA,WACA,gBACA,gBACA,0BACA,iBACA,kBACA,qBACA,sBACA,yBACA,kBACA,qBACA,uBACA,0BACA,uBACA,0BACA,mBACA,UACA,UACA,QACA,UACA,cACA,QACA,eACA,QACA,iBACA,aACA,cACA,QACA,eACA,YACA,WACA,YACA,OACA,mBACA,0BACA,QACA,iBACA,iBACA,aACA,eACA,WACA,YACA,eACA,eACA,OACA,WACA,MACA,SACA,QACA,kBACA,QACA,OACA,oBACA,0BACA,MACA,QACA,QACA,UACA,QACA,YACA,QACA,QACA,UACA,iBACA,YACA,SACA,aACA,aACA,aACA,QACA,QACA,QACA,QACA,iBACA,WACA,YACA,UACA,OACA,YACA,SACA,cACA,YACA,SACA,SACA,QACA,SACA,YACA,OACA,QACA,aACA,YACA,oBACA,aACA,SACA,kBACA,UACA,QACA,cACA,UACA,WACA,SACA,SACA,OACA,gBACA,eACA,SACA,SACA,QACA,WACA,SACA,cACA,aACA,cACA,cACA,cACA,cACA,eACA,oBACA,yBACA,mBACA,4BACA,iCACA,wBACA,2BACA,oBACA,uBACA,oBACA,iBACA,cACA,aACA,kBACA,YACA,cACA,WACA,mBACA,SACA,UACA,cACA,mBACA,kBACA,kBACA,iBACA,YACA,OACA,wBACA,oBACA,iBACA,eACA,WACA,UACA,YACA,oBACA,gBACA,UACA,qBACA,OACA,QACA,gBACA,UACA,qBACA,OACA,OACA,WACA,UACA,UACA,UACA,WACA,UACA,YACA,eACA,eACA,YACA,eACA,YACA,WACA,SACA,cACA,SACA,OACA,UACA,YACA,UACA,SACA,gBACA,aACA,eACA,SACA,cACA,WACA,eACA,eACA,oBACA,QACA,cACA,eACA,cACA,WACA,UACA,YACA,mBACA,OACA,UACA,eACA,QACA,iBACA,OACA,QACA,iBACA,QACA,UACA,QACA,QACA,WACA,UACA,uBACA,UACA,SACA,aACA,wBACA,uBACA,OACA,WACA,yBACA,gBACA,aACA,WACA,iBACA,sBACA,gBACA,QACA,cACA,cACA,cACA,SACA,eACA,gBACA,MACA,qBACA,eACA,sBACA,iBACA,mBACA,YACA,SACA,SACA,aACA,cACA,aACA,aACA,UACA,UACA,YACA,SACA,SACA,UACA,UACA,UACA,uBACA,eACA,YACA,eACA,eACA,eACA,eACA,eACA,aACA,gBACA,gBACA,gBACA,gBACA,WACA,YACA,YACA,YACA,aACA,cACA,YACA,cACA,SACA,SACA,cACA,cACA,iBACA,UACA,KACA,kBACA,YACA,cACA,yBACA,YACA,sBACA,cACA,WACA,UACA,UACA,kBACA,SACA,mBACA,WACA,cACA,WACA,gBACA,MACA,UACA,SACA,cACA,UACA,UACA,kBACA,iBACA,WACA,mBACA,WACA,SACA,YACA,iBACA,WACA,UACA,aACA,cACA,cACA,qBACA,eACA,kBACA,UACA,YACA,UACA,cACA,UACA,UACA,mBACA,sBACA,UACA,cACA,YACA,SACA,gBACA,aACA,UACA,OACA,WACA,mBACA,sBACA,UACA,aACA,aACA,OACA,WACA,eACA,aACA,UACA,mBACA,mBACA,YACA,iBACA,QACA,cACA,iBACA,QACA,iBACA,WACA,SACA,aACA,cACA,cACA,UACA,eACA,SACA,WACA,eACA,oBACA,YACA,YACA,iBACA,UACA,kBACA,SACA,WACA,SACA,UACA,eACA,aACA,WACA,SACA,eACA,WACA,SACA,QACA,OACA,YACA,eACA,YACA,kBACA,eACA,WACA,YACA,YACA,gBACA,aACA,UACA,gBACA,SACA,gBACA,YACA,SACA,SACA,mBACA,cACA,cACA,YACA,YACA,gBACA,UACA,YACA,YACA,UACA,WACA,eACA,UACA,YACA,QACA,iBACA,OACA,SACA,cACA,SACA,aACA,iBACA,YACA,SACA,MACA,aACA,UACA,OACA,QACA,kBACA,wBACA,uBACA,oBACA,QACA,UACA,WACA,UACA,kBACA,UACA,SACA,SACA,WACA,UACA,kBACA,kBACA,QACA,eACA,aACA,YACA,iBACA,cACA,eACA,uBACA,MACA,YACA,cACA,qBACA,yBACA,SACA,QACA,aACA,kBACA,kBACA,qBACA,YACA,cACA,YACA,WACA,aACA,UACA,mBACA,YACA,aACA,UACA,gBACA,WACA,UACA,aACA,aACA,UACA,SACA,SACA,UACA,UACA,gBACA,aACA,QACA,SACA,aACA,aACA,OACA,mBACA,kBACA,kBACA,mBACA,gBACA,aACA,UACA,gBACA,WACA,cACA,aACA,YACA,SACA,aACA,uBACA,WACA,WACA,cACA,YACA,gBACA,kBACA,QACA,wBACA,uBACA,QACA,SACA,UACA,sBACA,WACA,gBACA,SACA,YACA,YACA,mBACA,OACA,UACA,YACA,cACA,qBACA,YACA,OACA,YACA,eACA,UACA,YACA,SACA,QACA,UACA,OACA,QACA,qBACA,aACA,cACA,YACA,YACA,qBACA,SACA,UACA,UACA,QACA,YACA,gBACA,WACA,cACA,YACA,UACA,WACA,UACA,UACA,aACA,UACA,aACA,cACA,SACA,mBACA,cACA,QACA,iBACA,WACA,YACA,iBACA,qBACA,UACA,SACA,OACA,QACA,cACA,SACA,eACA,QACA,cACA,eACA,eACA,QACA,QACA,WACA,OACA,QACA,UA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1R,QAAQyqC,QACbuM,GACTI,GAAa,GACbvlC,GAAa,IACJolC,IACTG,GAAa,GACbllC,EAAS,CAACvR,KAAM,gBAAiB+E,MAAM,OAG1C,CACDmQ,EACA8gC,EACAC,EACAE,EACAC,EACAC,EACAE,EACAD,EACArjB,EACAC,EACAF,EACAzc,EACA9K,EACA8F,EACAL,EACAyF,EAAMouB,kBACNpuB,EAAMkG,WACN9L,EACAu1B,EACA4P,EACA7wB,IAGFzkB,qBAAU,WACJ41C,GAAWE,MACd,CACDF,EACAE,EACAV,EACAC,EACAC,EACAC,EACAC,EACAC,EACAE,IAGF,IAAMI,EAAY33C,uBAChB,SAACC,GACC41C,GACE51C,EACAiW,EACA4/B,EACAC,EACAC,EACAC,EACAC,EACA3jC,EACA4jC,EACAC,EACA9jC,EACAF,EACAiU,EACAgwB,KAGJ,CAACngC,EAAQ3D,EAAUD,EAAeF,EAAeiU,IAG7CuxB,GAAU53C,uBACd,SAACC,ID5CuB,SAC1B61C,EACAC,EACAC,EACAC,EACAC,EACAC,EACAsB,EACArB,EACA9jC,EACAF,EACAikC,GAEAN,GAAa,GACbD,GAAa,GACbE,GAAa,GACbC,GAAkB,GAClBC,GAAgB,GAChBC,GAAS,GACTC,GAAe,GACf9jC,GAAc,GACdF,GAAc,GACdikC,GAAU,GACVoB,GAAa,GCsBTI,CACE/B,EACAC,EACAC,EACAC,EACAC,EACAC,EACAsB,EACArB,EACA9jC,EACAF,EACAikC,KAGJ,CAAC/jC,EAAeF,IAGlBxQ,qBAAU,WAIR,OAHAV,SAASY,iBAAiB,UAAW61C,GACrCz2C,SAASY,iBAAiB,QAAS81C,IAE5B,WACL12C,SAASa,oBAAoB,UAAW41C,GACxCz2C,SAASa,oBAAoB,QAAS61C,OAEvC,CAACD,EAAWC,MCzKXE,GAAa,SACjBtuC,EACAC,EACAC,EACAsD,EACA2F,EACAX,GAEAzI,EAAgB,SAAUC,EAAUC,EAASC,EAAesD,GAC5DgF,EAAoB,MACJ9Q,SAAS+R,eACfC,kBACVP,EAAa3F,ICZT+qC,GAAc,GACdrrC,GAAoB,SAACsr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","file":"static/js/main.d3bf4cb1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ControlsContainer\":\"DesignControls_ControlsContainer__2Nypq\",\"DesignControl\":\"DesignControls_DesignControl__1FKA0\",\"AddTextContainer\":\"DesignControls_AddTextContainer__2kzlD\",\"ActiveDesignControl\":\"DesignControls_ActiveDesignControl__11UHN\",\"AddImageContainer\":\"DesignControls_AddImageContainer__1-kZJ\",\"AddShapeContainer\":\"DesignControls_AddShapeContainer__2l0qj\",\"HoverContent\":\"DesignControls_HoverContent__RaV8d\",\"HoverTriangle\":\"DesignControls_HoverTriangle__uOTqR\",\"HoverText\":\"DesignControls_HoverText__3mdpQ\",\"ShapeDropdown\":\"DesignControls_ShapeDropdown__3m4QA\",\"ImageDropdown\":\"DesignControls_ImageDropdown__1kbq4\",\"SubtitlesDropdown\":\"DesignControls_SubtitlesDropdown__1E3X-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DownloadCanvas\":\"VideoEditor_DownloadCanvas__3rCEz\",\"Main\":\"VideoEditor_Main__RsHdg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CanvasComponent\":\"PlayerCanvas_CanvasComponent__2ZNRl\",\"Canvas\":\"PlayerCanvas_Canvas__3KakF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"StrokeDropdownContainer\":\"VideoDropdowns_StrokeDropdownContainer__1cB9e\",\"StrokeWidthDropdownContainer\":\"VideoDropdowns_StrokeWidthDropdownContainer__1VFYT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CropCanvas\":\"CropCanvas_CropCanvas__2QUHd\",\"Backdrop\":\"CropCanvas_Backdrop__15lRv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Auth\":\"Auth_Auth__2-Tih\",\"Account\":\"Auth_Account__FNRoH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Homepage\":\"Homepage_Homepage__3OyFd\",\"Main\":\"Homepage_Main__1n7s2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"VideoContainer\":\"CustomPlayer_VideoContainer__3sLMV\",\"Video\":\"CustomPlayer_Video__3yEBQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Time\":\"Time_Time__2bwh7\",\"Timeline\":\"Time_Timeline__2XAL4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TextToolbar\":\"TextToolbar_TextToolbar__30rxF\",\"BorderDiv\":\"TextToolbar_BorderDiv__XlYMr\",\"DownArrow\":\"TextToolbar_DownArrow__3bu3E\",\"TextAlign\":\"TextToolbar_TextAlign__2KX5Y\",\"Bold\":\"TextToolbar_Bold__38wPs\",\"Italic\":\"TextToolbar_Italic__I_P46\",\"FontsContainer\":\"TextToolbar_FontsContainer__2NtOu\",\"FontSizeContainer\":\"TextToolbar_FontSizeContainer__1QFbt\",\"ColorPickerContainer\":\"TextToolbar_ColorPickerContainer__1EnTr\",\"FontWeightBoldContainer\":\"TextToolbar_FontWeightBoldContainer__2-Bfx\",\"FontStyleItalicContainer\":\"TextToolbar_FontStyleItalicContainer__6Diha\",\"TextAlignContainer\":\"TextToolbar_TextAlignContainer__HLDJn\",\"BgColorContainer\":\"TextToolbar_BgColorContainer__3QNkE\",\"FontSizeInputContainer\":\"TextToolbar_FontSizeInputContainer__p2Uno\",\"FontSizeInput\":\"TextToolbar_FontSizeInput__3nD-x\",\"FontSizeArrowContainer\":\"TextToolbar_FontSizeArrowContainer__1N8MA\",\"ColorPickerBorder\":\"TextToolbar_ColorPickerBorder__EGOSu\",\"ColorPicker\":\"TextToolbar_ColorPicker__2Mme4\",\"Active\":\"TextToolbar_Active__2gO17\",\"BgColor\":\"TextToolbar_BgColor__19qDO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LineDropdown\":\"StrokeWidthDropdown_LineDropdown__2P8_5\",\"ShapeDropdown\":\"StrokeWidthDropdown_ShapeDropdown__1sirw\",\"StrokeOption\":\"StrokeWidthDropdown_StrokeOption__2JfPD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Editor\":\"Editor_Editor__3ckPM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Uploader\":\"Uploader_Uploader__lgMfw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Navbar\":\"Navbar_Navbar__3RMWK\",\"BackFileInfoContainer\":\"Navbar_BackFileInfoContainer__3ky9K\",\"BackButton\":\"Navbar_BackButton__1R1aO\",\"HomeLinkContainer\":\"Navbar_HomeLinkContainer__1Dv9V\",\"HomeLink\":\"Navbar_HomeLink__GI7Bo\",\"BorderLine\":\"Navbar_BorderLine__3Xq1w\",\"FileName\":\"Navbar_FileName__23abe\",\"Creater\":\"Navbar_Creater__j3mKP\",\"EditVideo\":\"Navbar_EditVideo__1kNxg\",\"UserInfoContainer\":\"Navbar_UserInfoContainer__w_iEs\",\"UserName\":\"Navbar_UserName__3B7D3\",\"Initials\":\"Navbar_Initials__1Dx3n\",\"Letter\":\"Navbar_Letter__1FlLa\",\"LogInLink\":\"Navbar_LogInLink__BnnPz\",\"SignUpLink\":\"Navbar_SignUpLink__33Ovn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Toolbar\":\"Toolbar_Toolbar__1YXGU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Backdrop\":\"Backdrop_Backdrop__ko406\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Video\":\"Video_Video__1FtcR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Canvas\":\"SpeakersCanvas_Canvas__1_qgr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Download\":\"Download_Download__oDnCR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CanvasToolbar\":\"CanvasToolbar_CanvasToolbar__O2HUb\",\"BorderDiv\":\"CanvasToolbar_BorderDiv__MTa7N\",\"DownArrow\":\"CanvasToolbar_DownArrow__1dYUL\",\"TemplatesContainer\":\"CanvasToolbar_TemplatesContainer__1VVpG\",\"ResizeContainer\":\"CanvasToolbar_ResizeContainer__Hqy4C\",\"CropContainer\":\"CanvasToolbar_CropContainer__3JUnP\",\"ColorContainer\":\"CanvasToolbar_ColorContainer__1zr54\",\"Active\":\"CanvasToolbar_Active__FkhLj\",\"OptionText\":\"CanvasToolbar_OptionText__t_-zi\",\"ResizeDropdown\":\"CanvasToolbar_ResizeDropdown__BY9u_\",\"ColorPickerBorder\":\"CanvasToolbar_ColorPickerBorder__Uj88y\",\"ColorPicker\":\"CanvasToolbar_ColorPicker__3vZ8h\",\"ColorDropdownContainer\":\"CanvasToolbar_ColorDropdownContainer__3Hg_w\",\"TemplatesDropdownContainer\":\"CanvasToolbar_TemplatesDropdownContainer__3ilbY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__364Yd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Token\":\"Token_Token__dZAfL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Slider\":\"TimelineSlider_Slider__3FZvE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Slider\":\"VolumeSlider_Slider__3Dz_-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"VideoToolbar\":\"VideoToolbar_VideoToolbar__23h3P\",\"BorderDiv\":\"VideoToolbar_BorderDiv__2wSCo\",\"StrokeContainer\":\"VideoToolbar_StrokeContainer__32EUg\",\"StrokeWidthContainer\":\"VideoToolbar_StrokeWidthContainer__20qdy\",\"CircleCropContainer\":\"VideoToolbar_CircleCropContainer__1fOak\",\"RadiusContainer\":\"VideoToolbar_RadiusContainer__ZqwJN\",\"CropContainer\":\"VideoToolbar_CropContainer__2Dxpf\",\"DoneContainer\":\"VideoToolbar_DoneContainer__2gT_8\",\"StrokeWidthInput\":\"VideoToolbar_StrokeWidthInput__Ss4Xq\",\"RadiusInput\":\"VideoToolbar_RadiusInput__1kwS5\",\"StrokeWidthArrowContainer\":\"VideoToolbar_StrokeWidthArrowContainer__1aF3z\",\"CircleCropCircle\":\"VideoToolbar_CircleCropCircle__3uHh9\",\"BorderStyle\":\"VideoToolbar_BorderStyle__392SW\",\"DownArrow\":\"VideoToolbar_DownArrow__1TUzs\",\"ColorPickerBorder\":\"VideoToolbar_ColorPickerBorder__21hnf\",\"ColorPicker\":\"VideoToolbar_ColorPicker__2H6CG\",\"StrokeWidthInputContainer\":\"VideoToolbar_StrokeWidthInputContainer__3iFYS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SelectSpeakers\":\"SelectSpeakers_SelectSpeakers__1sJES\",\"Heading\":\"SelectSpeakers_Heading__8zH9K\",\"Subheading\":\"SelectSpeakers_Subheading__1CSDR\",\"Video\":\"SelectSpeakers_Video__3v4_Z\",\"CanvasContainer\":\"SelectSpeakers_CanvasContainer__yI3pN\",\"Controls\":\"SelectSpeakers_Controls__m__i7\",\"SelectedText\":\"SelectSpeakers_SelectedText__29VjD\",\"SelectedNumber\":\"SelectSpeakers_SelectedNumber__u1ZaC\",\"SpeakerButtons\":\"SelectSpeakers_SpeakerButtons__2E6zY\",\"AddSpeakerButton\":\"SelectSpeakers_AddSpeakerButton__2jPJf\",\"RemoveSpeakerButton\":\"SelectSpeakers_RemoveSpeakerButton__3EhX6\",\"AddSpeakers\":\"SelectSpeakers_AddSpeakers__yU4j4\",\"RemoveSpeakers\":\"SelectSpeakers_RemoveSpeakers__1IG3b\",\"AddSpeakersText\":\"SelectSpeakers_AddSpeakersText__bYScV\",\"RemoveSpeakersText\":\"SelectSpeakers_RemoveSpeakersText__2jvXO\",\"Confirm\":\"SelectSpeakers_Confirm__29WEc\",\"Skip\":\"SelectSpeakers_Skip__10Iwh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TextAlignDropdown\":\"TextAlignDropdown_TextAlignDropdown__PkoUd\",\"TextAlignOption\":\"TextAlignDropdown_TextAlignOption__2NPzu\",\"Current\":\"TextAlignDropdown_Current__2vk5u\",\"TextAlignImage\":\"TextAlignDropdown_TextAlignImage__wtSLz\",\"TextAlignText\":\"TextAlignDropdown_TextAlignText__nuEMl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ShapeToolbar\":\"ShapeToolbar_ShapeToolbar__3ltKA\",\"BorderDiv\":\"ShapeToolbar_BorderDiv__1MpYU\",\"DownArrow\":\"ShapeToolbar_DownArrow__MgRL3\",\"FillContainer\":\"ShapeToolbar_FillContainer__dFbZJ\",\"StrokeContainer\":\"ShapeToolbar_StrokeContainer__21-kB\",\"StrokeWidthContainer\":\"ShapeToolbar_StrokeWidthContainer__1IzFk\",\"RadiusContainer\":\"ShapeToolbar_RadiusContainer__3GI8W\",\"ColorPickerBorder\":\"ShapeToolbar_ColorPickerBorder__qXCuh\",\"ColorPicker\":\"ShapeToolbar_ColorPicker__2vzHo\",\"StrokeWidthInputContainer\":\"ShapeToolbar_StrokeWidthInputContainer__1ISoG\",\"StrokeWidthInput\":\"ShapeToolbar_StrokeWidthInput__239HS\",\"StrokeWidthArrowContainer\":\"ShapeToolbar_StrokeWidthArrowContainer__2MBk5\",\"RadiusInput\":\"ShapeToolbar_RadiusInput__19zGn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dropdown\":\"TemplatesDropdown_Dropdown__MdBoq\",\"TemplateOptions\":\"TemplatesDropdown_TemplateOptions__350Ik\",\"TemplateOption\":\"TemplatesDropdown_TemplateOption__299cX\",\"Current\":\"TemplatesDropdown_Current__1sj0v\",\"Templates\":\"TemplatesDropdown_Templates__1RED3\",\"Template\":\"TemplatesDropdown_Template__2E35x\",\"TemplateImg\":\"TemplatesDropdown_TemplateImg__13jCN\",\"SaveTemplate\":\"TemplatesDropdown_SaveTemplate__38HgZ\",\"SaveImg\":\"TemplatesDropdown_SaveImg__3-wgo\",\"SaveText\":\"TemplatesDropdown_SaveText__3BE5c\",\"DeleteContainer\":\"TemplatesDropdown_DeleteContainer__1E3G3\",\"XLine1\":\"TemplatesDropdown_XLine1__26-ee\",\"XLine2\":\"TemplatesDropdown_XLine2__303a-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Project\":\"Project_Project__2FloU\",\"Video\":\"Project_Video__2kLKG\",\"InfoContainer\":\"Project_InfoContainer__7VfXZ\",\"Info\":\"Project_Info__cXMOT\",\"DateAndName\":\"Project_DateAndName__36dEs\",\"Name\":\"Project_Name__1iMCC\",\"Date\":\"Project_Date__1IAn8\",\"OptionsContainer\":\"Project_OptionsContainer__2o0s8\",\"Options\":\"Project_Options__2JtAe\",\"Dots\":\"Project_Dots__2XgEw\",\"Dot\":\"Project_Dot__3S_-i\",\"Dropdown\":\"Project_Dropdown__2of2b\",\"DropdownOption\":\"Project_DropdownOption__26e-S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Preview\":\"Preview_Preview__17wzV\",\"Main\":\"Preview_Main__1ts9X\",\"MainContent\":\"Preview_MainContent__3yphW\",\"CustomPlayer\":\"Preview_CustomPlayer__2cIUh\",\"VideoFooter\":\"Preview_VideoFooter__14BqQ\",\"Title\":\"Preview_Title__1FDCi\",\"DownloadAndLink\":\"Preview_DownloadAndLink__2b3Hg\",\"Download\":\"Preview_Download__1l2FY\",\"CopyLink\":\"Preview_CopyLink__g0mcY\",\"HeadlineAndExport\":\"Preview_HeadlineAndExport__3vxHH\",\"Headline\":\"Preview_Headline__2yd8P\",\"ExportButton\":\"Preview_ExportButton__3t5_Z\",\"Text\":\"Preview_Text__3m3nn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DragDrop\":\"DragDrop_DragDrop__69U1q\",\"UploadText\":\"DragDrop_UploadText__3BF2H\",\"DropArea\":\"DragDrop_DropArea__3Ck_W\",\"DropAreaContent\":\"DragDrop_DropAreaContent__2FbMw\",\"DropAreaText\":\"DragDrop_DropAreaText__3Nk_9\",\"DropAreaHeading\":\"DragDrop_DropAreaHeading__3SZMc\",\"DropAreaSubheading\":\"DragDrop_DropAreaSubheading__37y0F\",\"DropAreaBrowse\":\"DragDrop_DropAreaBrowse__1ku5G\",\"Active\":\"DragDrop_Active__2Le0T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Settings\":\"Settings_Settings__oINJ2\",\"Heading\":\"Settings_Heading__2aIcU\",\"Form\":\"Settings_Form__3r9zh\",\"Label\":\"Settings_Label__1qq6Z\",\"ButtonSpinnerContainer\":\"Settings_ButtonSpinnerContainer__2xdqg\",\"UpdateButton\":\"Settings_UpdateButton__h93wd\",\"Billing\":\"Settings_Billing__1-bxN\",\"SubHeading\":\"Settings_SubHeading__bsETM\",\"Plan\":\"Settings_Plan___kEo6\",\"Renewal\":\"Settings_Renewal__34Bs9\",\"CancelButton\":\"Settings_CancelButton__1JpZ_\"};","var _path, _path2, _path3, _path4;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTemplates(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6 2H2.66667C2.29848 2 2 2.29848 2 2.66667V6C2 6.36819 2.29848 6.66667 2.66667 6.66667H6C6.36819 6.66667 6.66667 6.36819 6.66667 6V2.66667C6.66667 2.29848 6.36819 2 6 2Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6 9.33331H2.66667C2.29848 9.33331 2 9.63179 2 9.99998V13.3333C2 13.7015 2.29848 14 2.66667 14H6C6.36819 14 6.66667 13.7015 6.66667 13.3333V9.99998C6.66667 9.63179 6.36819 9.33331 6 9.33331Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.3333 2H10C9.63182 2 9.33334 2.29848 9.33334 2.66667V6C9.33334 6.36819 9.63182 6.66667 10 6.66667H13.3333C13.7015 6.66667 14 6.36819 14 6V2.66667C14 2.29848 13.7015 2 13.3333 2Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.3333 9.33331H10C9.63182 9.33331 9.33334 9.63179 9.33334 9.99998V13.3333C9.33334 13.7015 9.63182 14 10 14H13.3333C13.7015 14 14 13.7015 14 13.3333V9.99998C14 9.63179 13.7015 9.33331 13.3333 9.33331Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTemplates);\nexport default __webpack_public_path__ + \"static/media/templates.f516086a.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/upload.e681cc4b.svg\";","import React, { useEffect, useRef, useCallback } from 'react';\r\nimport styles from './DragDrop.module.css';\r\nimport upload from '../../../assets/editor/upload.svg';\r\n\r\nconst DragDrop = ({ setVideoForUpload }) => {\r\n  const uploadRef = useRef(null);\r\n  const dropAreaRef = useRef(null);\r\n\r\n  const handleDragOver = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = 'copy';\r\n    dropAreaRef.current.classList.add(styles.Active);\r\n    return false;\r\n  }, []);\r\n\r\n  const handleDragEnter = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dropAreaRef.current.classList.add(styles.Active);\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dropAreaRef.current.classList.remove(styles.Active);\r\n  }, []);\r\n\r\n  const validateFile = useCallback(\r\n    (file) => {\r\n      if (file.type === 'video/mp4') {\r\n        let video = document.createElement('video');\r\n        video.preload = 'metadata';\r\n        video.onloadedmetadata = () => {\r\n          if (video.duration > 1) {\r\n            setVideoForUpload(file);\r\n          }\r\n          return;\r\n        };\r\n        video.src = URL.createObjectURL(file);\r\n      }\r\n    },\r\n    [setVideoForUpload]\r\n  );\r\n\r\n  const handleDrop = useCallback(\r\n    (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      dropAreaRef.current.classList.remove(styles.Active);\r\n      let file = e.dataTransfer.files[0];\r\n      validateFile(file);\r\n      return false;\r\n    },\r\n    [validateFile]\r\n  );\r\n\r\n  useEffect(() => {\r\n    let area = dropAreaRef.current;\r\n    area.addEventListener('dragover', handleDragOver, false);\r\n    area.addEventListener('dragenter', handleDragEnter, false);\r\n    area.addEventListener('dragleave', handleDragLeave, false);\r\n    area.addEventListener('drop', handleDrop, false);\r\n\r\n    return () => {\r\n      area.removeEventListener('dragover', handleDragOver, false);\r\n      area.removeEventListener('dragenter', handleDragEnter, false);\r\n      area.removeEventListener('dragleave', handleDragLeave, false);\r\n      area.removeEventListener('drop', handleDrop, false);\r\n    };\r\n  }, [handleDragOver, handleDrop, handleDragEnter, handleDragLeave]);\r\n\r\n  return (\r\n    <div className={styles.DragDrop}>\r\n      <p className={styles.UploadText}>Upload a video or audio file</p>\r\n      <div\r\n        ref={dropAreaRef}\r\n        className={styles.DropArea}\r\n        onClick={() => uploadRef.current.click()}\r\n      >\r\n        <div className={styles.DropAreaContent}>\r\n          <img src={upload} alt='upload' />\r\n          <div className={styles.DropAreaText}>\r\n            <p className={styles.DropAreaHeading}>Drag & drop your file here</p>\r\n            <p className={styles.DropAreaSubheading}>\r\n              or click to <span className={styles.DropAreaBrowse}>browse</span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <input\r\n        ref={uploadRef}\r\n        type='file'\r\n        accept='video/mp4'\r\n        style={{ display: 'none' }}\r\n        onChange={() => validateFile(uploadRef.current.files[0])}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DragDrop;\r\n","import React from 'react';\r\nimport styles from './Progress.module.css';\r\n\r\nconst Progress = ({ progress, heading }) => {\r\n  return (\r\n    <div className={styles.Progress}>\r\n      <p className={styles.Percentage}>{progress}%</p>\r\n      <p className={styles.Heading}>{heading}</p>\r\n      <div className={styles.ProgressBar}>\r\n        <div\r\n          className={styles.ProgressBarInner}\r\n          style={{\r\n            maxWidth: progress + '%',\r\n          }}\r\n        ></div>\r\n      </div>\r\n      <p className={styles.Subheading}>\r\n        Please be patient. It may take several minutes.\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Progress;\r\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n  baseURL: `${process.env.REACT_APP_API_BASE_URL}/api/v1`,\r\n});\r\n\r\nexport default instance;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useUploadVideo = () => {\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [info, setInfo] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const words = useRef(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const onUploadProgress = (e) => {\r\n    const currentProgress = Math.round((e.loaded * 100) / e.total);\r\n    if (isMounted.current && currentProgress !== 100) {\r\n      setUploadProgress(currentProgress);\r\n    }\r\n  };\r\n\r\n  const axiosUploadVideo = useCallback((formData) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .post('/videos', formData, {\r\n          // params: { framerate: 50 },\r\n          onUploadProgress,\r\n          headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'multipart/form-data',\r\n          },\r\n        })\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const uploadVideo = useCallback(\r\n    async (formData) => {\r\n      setUploadProgress(0);\r\n      setIsUploading(true);\r\n      try {\r\n        const res = await axiosUploadVideo(formData);\r\n        console.log(res);\r\n        if (isMounted.current) {\r\n          setUploadProgress(100);\r\n          words.current = res.data.subtitles.captions;\r\n          setInfo({\r\n            id: res.data._id,\r\n            duration: res.data.duration,\r\n            url: res.data.original_video_url,\r\n            title: res.data.title,\r\n          });\r\n        }\r\n      } catch (err) {\r\n        console.log('Error Uploading Video', err);\r\n      } finally {\r\n        if (isMounted.current) setIsUploading(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosUploadVideo]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isUploading,\r\n    uploadVideo,\r\n    words: words.current,\r\n    info,\r\n    uploadProgress,\r\n  };\r\n};\r\n\r\nexport default useUploadVideo;\r\n","export default __webpack_public_path__ + \"static/media/backArrow.1051c99a.svg\";","export default __webpack_public_path__ + \"static/media/twiso.8864782d.svg\";","import { createContext } from 'react';\r\n\r\nconst UserContext = createContext(null);\r\nexport default UserContext;\r\n","import React, { useContext } from 'react';\r\nimport styles from './Navbar.module.css';\r\nimport backArrow from '../../assets/editor/backArrow.svg';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport twiso from '../../assets/preview/twiso.svg';\r\nimport home from '../../assets/home.png';\r\nimport UserContext from '../../contexts/UserContext';\r\n\r\nconst Navbar = ({ children, videoData, isPreview, getVideoError, isAuth }) => {\r\n  const { userState } = useContext(UserContext);\r\n  const history = useHistory();\r\n  const backHandler = () => history.goBack();\r\n\r\n  const getName = () => {\r\n    let isName = userState.name.length > 0;\r\n    let name = isName ? userState.name : userState.email;\r\n    return isName ? name[0].toUpperCase() + name.slice(1) : name;\r\n  };\r\n\r\n  return (\r\n    <header className={styles.Navbar}>\r\n      <div className={styles.BackFileInfoContainer}>\r\n        {!isPreview ? (\r\n          <div className={styles.BackButton} onClick={backHandler}>\r\n            <img className={styles.BackArrow} src={backArrow} alt='back' />\r\n          </div>\r\n        ) : null}\r\n\r\n        {isAuth && isPreview ? (\r\n          <div className={styles.HomeLinkContainer}>\r\n            <Link className={styles.HomeLink} to='/home'>\r\n              <img className={styles.Home} src={home} alt='back' />\r\n            </Link>\r\n            <div className={styles.BorderLine}></div>\r\n          </div>\r\n        ) : null}\r\n\r\n        {!isAuth && isPreview ? (\r\n          <img className={styles.Twiso} src={twiso} alt='twiso' />\r\n        ) : null}\r\n\r\n        {videoData && !isPreview ? (\r\n          <div className={styles.FileInfoContainer}>\r\n            <p className={styles.FileName}>{videoData.title}</p>\r\n            <p className={styles.Creater}>{getName()}</p>\r\n          </div>\r\n        ) : null}\r\n\r\n        {isPreview && isAuth && !getVideoError ? (\r\n          <Link\r\n            replace\r\n            to={`/editor/${videoData.id}`}\r\n            className={styles.EditVideo}\r\n          >\r\n            Edit video\r\n          </Link>\r\n        ) : null}\r\n      </div>\r\n\r\n      {children}\r\n\r\n      {!isAuth && isPreview ? (\r\n        <div className={styles.UserInfoContainer}>\r\n          <Link to={'/auth/sign-in'} className={styles.LogInLink}>\r\n            Log in\r\n          </Link>\r\n          <Link to={'/auth/sign-up'} className={styles.SignUpLink}>\r\n            Get Twiso for free\r\n          </Link>\r\n        </div>\r\n      ) : null}\r\n      \r\n      {isAuth || !isPreview ? (\r\n        <div className={styles.UserInfoContainer}>\r\n          {userState.email.length > 0 ? (\r\n            <div className={styles.UserName}>\r\n              <div className={styles.Initials}>\r\n                <span className={styles.Letter}>{getName()[0]}</span>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      ) : null}\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEUSURBVHgBpZK9agJBEIB3DwvTHSmTIgby12kX0iQ+QgobfxrxAfQJ9FG0sLeyFEsrUey00Uc4tBEszm9kD2TZPfwZ+LjZnZ+dmRulUiSO41DdKgTnYQZryF0TK8FNWMCnBMMSWi7fwAoMYYj6Cr9a6yVs0L/hDVsXXnyvFk3JZeWvrAFT+LINbZhc0qtpSebSObWAMub7SKk/ptxUER+QFjWxI8lYgHffkDxV1E0lHwHZ5tw9Q95ykhcq8O/I8Qc5YleZlIf6sIUHktRwLrmcMp4SZQOfCKqas/ydLOe97Rsot9grHEHW5ehLcLHcnSCZwQ6KZidEpIXozO8AA+zJuQA9UXRy49jCiKFFxhYqay7J0h0BgtiuWLa/pFkAAAAASUVORK5CYII=\"","import React, { useEffect, useContext } from 'react';\r\nimport styles from './Uploader.module.css';\r\nimport DragDrop from './DragDrop/DragDrop';\r\nimport Progress from '../../components/Progress/Progress';\r\nimport useUploadVideo from '../../hooks/useUploadVideo';\r\nimport Navbar from '../../components/Navbar/Navbar';\r\nimport UserContext from '../../contexts/UserContext';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst Uploader = ({ viedoForUpload, setVideoForUpload, setVideoData }) => {\r\n  const { userState } = useContext(UserContext);\r\n  const { uploadVideo, info, uploadProgress } = useUploadVideo();\r\n  const history = useHistory();\r\n  \r\n  useEffect(() => {\r\n    if (info && userState.selectedTemplate) {\r\n      history.replace(`/editor/${info.id}`);\r\n    } else if (info) setVideoData(info);\r\n  }, [history, info, setVideoData, userState.selectedTemplate]);\r\n\r\n  useEffect(() => {\r\n    if (viedoForUpload) {\r\n      const formData = new FormData();\r\n      formData.append('video', viedoForUpload);\r\n      uploadVideo(formData);\r\n    }\r\n  }, [viedoForUpload, uploadVideo]);\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className={styles.Uploader}>\r\n        {!viedoForUpload ? (\r\n          <DragDrop setVideoForUpload={setVideoForUpload} />\r\n        ) : (\r\n          <Progress progress={uploadProgress} heading='Uploading your video' />\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Uploader;\r\n","export default __webpack_public_path__ + \"static/media/cut.70605b4d.svg\";","export default __webpack_public_path__ + \"static/media/search.243833c0.svg\";","export default __webpack_public_path__ + \"static/media/undo.e9b7eaa5.svg\";","const handleDeletedCuts = (\r\n  wordsArr,\r\n  setCuts,\r\n  setPlayerTime,\r\n  wordIndex\r\n) => {\r\n  let arr = [];\r\n  let isLastDeleted = false;\r\n  let cutStart = 0;\r\n  let cutStartIndex = 0;\r\n  let cutEndIndex = 0;\r\n  let cutEnd = 0;\r\n  for (let i = 0; i < wordsArr.length; i++) {\r\n    let word = wordsArr[i];\r\n    if (word.active && isLastDeleted) {\r\n      isLastDeleted = false;\r\n      wordsArr[cutStartIndex].next = i;\r\n      arr.push({ start: cutStart, end: cutEnd });\r\n    } else if (!word.active && !isLastDeleted) {\r\n      isLastDeleted = true;\r\n      cutStart = word.start;\r\n      cutStartIndex = i;\r\n      cutEnd = word.end;\r\n    } else if (!word.active && isLastDeleted) {\r\n      cutEnd = word.end;\r\n      cutEndIndex = i;\r\n    }\r\n  }\r\n\r\n  if (isLastDeleted) arr.push({ start: cutStart, end: cutEnd });\r\n\r\n  if (isLastDeleted && cutStartIndex !== wordsArr.length - 1) {\r\n    wordsArr[cutStartIndex].next = cutEndIndex;\r\n  } else if (isLastDeleted) {\r\n    wordsArr[cutStartIndex].next = wordsArr.length - 1;\r\n  }\r\n  if (wordIndex !== null) setPlayerTime(wordIndex, arr);\r\n  setCuts([...arr]);\r\n};\r\n\r\nconst handleRestoredCuts = (\r\n  setCuts,\r\n  setPlayerTime,\r\n  wordIndex,\r\n  restoreStart\r\n) => {\r\n  setCuts((prevState) => {\r\n    let newState = [];\r\n    for (let i = 0; i < prevState.length; i++) {\r\n      let cut = prevState[i];\r\n      if (cut.start !== restoreStart) newState.push(cut);\r\n    }\r\n    setPlayerTime(wordIndex);\r\n    return [...newState];\r\n  });\r\n};\r\n\r\nexport const handleVideoCuts = (\r\n  type,\r\n  wordsArr,\r\n  setCuts,\r\n  setPlayerTime,\r\n  wordIndex,\r\n  restoreStart\r\n) => {\r\n  if (type === 'delete') {\r\n    handleDeletedCuts(wordsArr, setCuts, setPlayerTime, wordIndex);\r\n  } else if (type === 'restore')\r\n    handleRestoredCuts(setCuts, setPlayerTime, wordIndex, restoreStart);\r\n};\r\n\r\nexport const findCurrentWordIndex = (deletedIndex, wordsArr) => {\r\n  let currentIndex = null;\r\n  for (let i = deletedIndex; i >= 0; i--) {\r\n    let word = wordsArr[i];\r\n    if (word.active) {\r\n      currentIndex = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (currentIndex === null) {\r\n    for (let i = deletedIndex; i < wordsArr.length; i++) {\r\n      let word = wordsArr[i];\r\n      if (word.active) {\r\n        currentIndex = i;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return currentIndex;\r\n};\r\n\r\nexport const deleteWord = (\r\n  wordsArr,\r\n  wordIndex,\r\n  setWordIndex,\r\n  setCuts,\r\n  setPlayerTime,\r\n  updateUndoHistory\r\n) => {\r\n  let word = wordsArr[wordIndex];\r\n  word.active = false;\r\n  updateUndoHistory({\r\n    type: 'transcription',\r\n    action: 'delete',\r\n    target: [wordIndex],\r\n  });\r\n  let currentIndex = findCurrentWordIndex(wordIndex, wordsArr);\r\n  setWordIndex(currentIndex);\r\n  handleVideoCuts('delete', wordsArr, setCuts, setPlayerTime, currentIndex);\r\n};\r\n\r\nexport const deleteSelection = (\r\n  wordsArr,\r\n  setWordIndex,\r\n  currentSelection,\r\n  setCurrentSelection,\r\n  setCuts,\r\n  setPlayerTime,\r\n  updateUndoHistory\r\n) => {\r\n  let deletedStartIndex = currentSelection.start;\r\n  let deleteEndIndex = currentSelection.end;\r\n  let deletedIndexArr = [];\r\n\r\n  for (let i = deletedStartIndex; i < wordsArr.length; i++) {\r\n    let word = wordsArr[i];\r\n    if (word.active) deletedIndexArr.push(i);\r\n    word.active = false;\r\n    if (i === deleteEndIndex) break;\r\n  }\r\n\r\n  updateUndoHistory({\r\n    type: 'transcription',\r\n    action: 'delete',\r\n    target: [...deletedIndexArr],\r\n  });\r\n\r\n  let currentIndex = findCurrentWordIndex(deletedStartIndex, wordsArr);\r\n  setWordIndex(currentIndex);\r\n  handleVideoCuts('delete', wordsArr, setCuts, setPlayerTime, currentIndex);\r\n  setCurrentSelection(null);\r\n};\r\n\r\nexport const restoreDeleted = (\r\n  wordsArr,\r\n  wordIndex,\r\n  setWordIndex,\r\n  setCurrentSelection,\r\n  setCuts,\r\n  setPlayerTime,\r\n  updateUndoHistory\r\n) => {\r\n  let resotreIndexArr = [];\r\n  for (let i = wordIndex; i < wordsArr.length; i++) {\r\n    let word = wordsArr[i];\r\n    if (!word.active) {\r\n      word.active = true;\r\n      resotreIndexArr.push(i);\r\n      if (word.next !== null) word.next = null;\r\n    } else break;\r\n  }\r\n  updateUndoHistory({\r\n    type: 'transcription',\r\n    action: 'restore',\r\n    target: [...resotreIndexArr],\r\n  });\r\n\r\n  let restoreStart = wordsArr[wordIndex].start;\r\n  handleVideoCuts(\r\n    'restore',\r\n    null,\r\n    setCuts,\r\n    setPlayerTime,\r\n    wordIndex,\r\n    restoreStart\r\n  );\r\n  setCurrentSelection(null);\r\n  let selection = document.getSelection();\r\n  selection.removeAllRanges();\r\n  setWordIndex(wordIndex);\r\n};\r\n","export default __webpack_public_path__ + \"static/media/restoreText.cd3d0599.svg\";","import {createContext} from 'react';\r\n\r\nconst EditorContext = createContext(null);\r\nexport default EditorContext;","const handleNoSilenceAndText = (id, text, currentSub) => {\r\n  let words = currentSub.val.words;\r\n  for (let i = 0; i < words.length; i++) {\r\n    let word = words[i];\r\n    if (word._id === id) {\r\n      let isWhitespace = word.text.indexOf(' ') === 0;\r\n      word.text = isWhitespace ? ' ' + text : text;\r\n      if (word.silence) word.silence = false;\r\n      break;\r\n    }\r\n  }\r\n};\r\n\r\nconst handleSilenceAndText = (id, text, currentSub) => {\r\n  let words = currentSub.val.words;\r\n  if (words) {\r\n    for (let i = 0; i < words.length; i++) {\r\n      let word = words[i];\r\n      if (word._id === id) {\r\n        let isFirst = i === 0;\r\n        text = isFirst ? text + ' ' : text;\r\n        let isNoWhitespace = word.text.indexOf(' ') !== 0;\r\n        word.text = isNoWhitespace && !isFirst ? ' ' + text : text;\r\n        if (word.silence) word.silence = false;\r\n        break;\r\n      }\r\n    }\r\n  } else {\r\n    currentSub.val.silence = false;\r\n    currentSub.val.words = [{ ...currentSub.val, text }];\r\n  }\r\n};\r\n\r\nconst handleNoText = (id, currentSub) => {\r\n  let words = currentSub.val.words;\r\n  let silenceCount = 0;\r\n  for (let i = 0; i < words.length; i++) {\r\n    let word = words[i];\r\n    if (word._id === id) {\r\n      word.text = '';\r\n      word.silence = true;\r\n    }\r\n    if (word.silence) silenceCount++;\r\n  }\r\n  if (silenceCount === words.length) {\r\n    currentSub.val.silence = true;\r\n    currentSub.val.words = null;\r\n  }\r\n};\r\n\r\nexport const updateSubText = (\r\n  id,\r\n  text,\r\n  isSilence,\r\n  setShouldRerenderSub,\r\n  currentSub\r\n) => {\r\n  if (!isSilence && text && id) handleNoSilenceAndText(id, text, currentSub);\r\n  else if (text && isSilence) handleSilenceAndText(id, text, currentSub);\r\n  else if (id) handleNoText(id, currentSub);\r\n  setShouldRerenderSub(true);\r\n};\r\n","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport styles from './Words.module.css';\r\nimport restoreText from '../../../assets/editor/restoreText.svg';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport { updateSubText } from '../../../utils/updateSubtitlesText';\r\n\r\nconst Words = ({\r\n  wordsArr,\r\n  currentWordIndex,\r\n  searchInput,\r\n  wordClickHandler,\r\n  inputIndex,\r\n  setInputIndex,\r\n  currentSelection,\r\n  fabricSub,\r\n  currentSub,\r\n  setShouldRerenderSub,\r\n  updateUndoHistory,\r\n}) => {\r\n  const { editorDispatch } = useContext(EditorContext);\r\n  const [input, setInput] = useState('');\r\n  const inputRef = useRef(null);\r\n\r\n  const saveChange = (type, arr, index, newText) => {\r\n    let change = null;\r\n    let word = arr[index];\r\n    if (type === 'textToText' && word.text !== newText) {\r\n      change = { silence: false, value: word.text };\r\n    } else if (type === 'silenceToText') {\r\n      change = { silence: true, value: '' };\r\n    } else if (type === 'textToSilence' && !word.silence) {\r\n      change = { silence: false, value: word.text };\r\n    }\r\n    if (change) {\r\n      updateUndoHistory({\r\n        type: 'transcription',\r\n        action: 'textChange',\r\n        target: index,\r\n        change,\r\n      });\r\n    }\r\n  };\r\n\r\n  const blurHandler = (e) => {\r\n    let id = e.target.parentNode.id;\r\n    let inputVal = input.trim().length > 0 ? input.trim() : null;\r\n    if (wordsArr[inputIndex]) {\r\n      if (inputVal && !wordsArr[inputIndex].silence) {\r\n        saveChange('textToText', wordsArr, inputIndex, inputVal);\r\n        wordsArr[inputIndex].text = inputVal;\r\n        if (fabricSub) {\r\n          updateSubText(id, inputVal, false, setShouldRerenderSub, currentSub);\r\n        }\r\n      } else if (inputVal) {\r\n        saveChange('silenceToText', wordsArr, inputIndex, inputVal);\r\n        wordsArr[inputIndex].text = inputVal;\r\n        wordsArr[inputIndex].silence = false;\r\n        if (fabricSub) {\r\n          updateSubText(id, inputVal, true, setShouldRerenderSub, currentSub);\r\n        }\r\n      } else {\r\n        saveChange('textToSilence', wordsArr, inputIndex, inputVal);\r\n        if (fabricSub && !wordsArr[inputIndex].silence) {\r\n          updateSubText(id, inputVal, false, setShouldRerenderSub, currentSub);\r\n        }\r\n        wordsArr[inputIndex].silence = true;\r\n      }\r\n    }\r\n    setInput('');\r\n    setInputIndex(null);\r\n    editorDispatch({ type: 'setShouldTriggerWordsUpdate', data: true });\r\n  };\r\n\r\n  let isLastDeleted = false;\r\n  let shouldShow = true;\r\n  let isSelectionMode = false;\r\n  let isSelectionEnd = false;\r\n\r\n  useEffect(() => {\r\n    if (inputIndex !== null) {\r\n      inputRef.current.focus();\r\n      if (wordsArr[inputIndex] && !wordsArr[inputIndex].silence) {\r\n        setInput(wordsArr[inputIndex].text);\r\n      }\r\n    }\r\n  }, [inputIndex, wordsArr]);\r\n\r\n  return wordsArr.map((word, i) => {\r\n    if (isLastDeleted && !word.active) shouldShow = false;\r\n    else shouldShow = true;\r\n    let isCurrent = i === currentWordIndex && !currentSelection && word.active;\r\n    let isHighlight =\r\n      !word.silence &&\r\n      word.active &&\r\n      searchInput.trim().length > 1 &&\r\n      word.text.trim().toLowerCase().includes(searchInput.trim().toLowerCase());\r\n\r\n    if (!isLastDeleted && !word.active) isLastDeleted = true;\r\n    if (isLastDeleted && word.active) isLastDeleted = false;\r\n\r\n    if (currentSelection && currentSelection.start === i) {\r\n      isSelectionMode = true;\r\n    } else if (currentSelection && currentSelection.end === i) {\r\n      isSelectionEnd = true;\r\n    } else if (isSelectionEnd) {\r\n      isSelectionMode = false;\r\n      isSelectionEnd = false;\r\n    }\r\n\r\n    let isInput = inputIndex !== null && isCurrent;\r\n    let innerContent = isInput ? (\r\n      <input\r\n        ref={inputRef}\r\n        className={styles.WordInput}\r\n        type='text'\r\n        value={input}\r\n        onBlur={blurHandler}\r\n        onChange={(e) => setInput(e.target.value)}\r\n      />\r\n    ) : (\r\n      <span className={!word.silence ? styles.Word : styles.Pause}>\r\n        {!word.silence ? word.text + ' ' : ' '}\r\n      </span>\r\n    );\r\n\r\n    let content = !word.active ? (\r\n      <span className={styles.Deleted}>\r\n        <span className={styles.DeletedImgContainer}>\r\n          <img\r\n            className={styles.DeletedImg}\r\n            src={restoreText}\r\n            alt='restore text'\r\n          />\r\n        </span>\r\n        <span className={styles.DeletedText}>[...] </span>\r\n      </span>\r\n    ) : (\r\n      innerContent\r\n    );\r\n\r\n    let containerStyle = { width: 'auto' };\r\n    if (isInput) {\r\n      containerStyle.width = !word.silence\r\n        ? word.text.length * 1.5 + 'ch'\r\n        : '70px';\r\n      containerStyle.marginRight = '0.4rem';\r\n    }\r\n\r\n    return shouldShow ? (\r\n      <span\r\n        style={containerStyle}\r\n        id={word._id}\r\n        key={word._id}\r\n        className={[\r\n          styles.WordContainer,\r\n          isCurrent ? styles.CurrentWord : null,\r\n          isHighlight ? styles.Highlight : null,\r\n          isSelectionMode ? styles.InSelection : null,\r\n        ].join(' ')}\r\n        onClick={(e) => wordClickHandler(e, !word.active)}\r\n      >\r\n        {content}\r\n      </span>\r\n    ) : null;\r\n  });\r\n};\r\n\r\nexport default Words;\r\n","// export const findSubWithWordIndex2 = (wordIndex, words, subList) => {\r\n//   let word = words[wordIndex];\r\n//   if (subList && word) {\r\n//     for (let i = 0; i < subList.length; i++) {\r\n//       let sub = subList[i];\r\n//       if (sub.words && +sub.end >= +word.start) {\r\n//         for (let j = 0; j < sub.words.length; j++) {\r\n//           let subWord = sub.words[j];\r\n//           if (subWord && subWord._id === word._id) return i;\r\n//         }\r\n//       } else if (sub.silence && word._id === sub._id) return i;\r\n//     }\r\n//     return null;\r\n//   } else return null;\r\n// };\r\n\r\n// Linked List Search\r\nexport const findSubWithWordIndex = (wordIndex, words, subList) => {\r\n  let word = words[wordIndex];\r\n  if (subList && word) {\r\n    let subNode = subList.head;\r\n    for (let i = 0; i < subList.length; i++) {\r\n      let sub = subNode.val;\r\n      if (sub.words && +sub.end >= +word.start) {\r\n        for (let j = 0; j < sub.words.length; j++) {\r\n          let subWord = sub.words[j];\r\n          if (subWord && subWord._id === word._id) return subNode;\r\n        }\r\n      } else if (sub.silence && word._id === sub._id) return subNode;\r\n      // console.log(sub);\r\n      subNode = subNode.next;\r\n    }\r\n    return null;\r\n  } else return null;\r\n};\r\n\r\nexport const findWordIndexWithId = (id, words) => {\r\n  for (let i = 0; i < words.length; i++) {\r\n    let word = words[i];\r\n    if (word._id === id) return i;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const findPrevNotDeletedWord = (index, words) => {\r\n  for (let i = index - 1; i >= 0; i--) {\r\n    let word = words[i];\r\n    if (word.active) return i;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const findNextNotDeletedWord = (index, words) => {\r\n  for (let i = index + 1; i < words.length; i++) {\r\n    let word = words[i];\r\n    if (word.active) return i;\r\n  }\r\n  return null;\r\n};\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport styles from './TranscriptionProgress.module.css';\r\n\r\nconst TranscriptionProgress = ({ status, words, setIsFinished }) => {\r\n  const [progress, setProgress] = useState(0);\r\n  const isMounted = useRef(false);\r\n  const intervalRef = useRef(null);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      if (status.isFinished) setIsFinished(true);\r\n      setIsFirstLoad(false);\r\n    }\r\n  }, [isFirstLoad, status, setIsFinished]);\r\n\r\n  useEffect(() => {\r\n    let interval = intervalRef.current;\r\n    return () => {\r\n      if (interval) clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  const progressInterval = useCallback((intervalTime) => {\r\n    let interval = setInterval(() => {\r\n      if (isMounted.current) {\r\n        setProgress((prevState) => {\r\n          if (prevState >= 99) {\r\n            clearInterval(interval);\r\n            return 99;\r\n          } else return prevState + 1;\r\n        });\r\n      }\r\n    }, intervalTime);\r\n    intervalRef.current = interval;\r\n  }, []);\r\n\r\n  const progressHandler = useCallback(\r\n    (status) => {\r\n      if (status.timeLeft && status.timeLeft > 1) {\r\n        if (intervalRef.current) clearInterval(intervalRef.current);\r\n        let start = new Date(+status.startDate * 1000);\r\n        let now = new Date();\r\n        let secondsElapsed = Math.floor((now - start) / 1000);\r\n        let estimatedTime = secondsElapsed + status.timeLeft;\r\n        let finishedPercentage = (secondsElapsed * 100) / estimatedTime;\r\n        setProgress(finishedPercentage);\r\n        let intervalTime =\r\n          (status.timeLeft * 1000) / (100 - finishedPercentage);\r\n        setProgress(finishedPercentage);\r\n        progressInterval(intervalTime);\r\n      } else setProgress(99);\r\n    },\r\n    [progressInterval]\r\n  );\r\n\r\n  useEffect(() => {\r\n    let interval = null;\r\n    if (!isFirstLoad && status.isFinished) {\r\n      clearInterval(intervalRef.current);\r\n      let interval = setInterval(() => {\r\n        if (isMounted.current) {\r\n          setProgress((prevState) => {\r\n            if (prevState >= 100) {\r\n              clearInterval(interval);\r\n              return 100;\r\n            } else return prevState + 1;\r\n          });\r\n        }\r\n      }, 100);\r\n    } else progressHandler(status);\r\n\r\n    return () => {\r\n      if (interval !== null) clearInterval(interval);\r\n    };\r\n  }, [isFirstLoad, status, progressHandler]);\r\n\r\n  useEffect(() => {\r\n    let timeout = null;\r\n    if (progress === 100 && words) {\r\n      timeout = setTimeout(() => {\r\n        if (isMounted.current) setIsFinished(true);\r\n      }, 500);\r\n    }\r\n\r\n    return () => {\r\n      if (timeout !== null) clearTimeout(timeout);\r\n    };\r\n  }, [progress, words, setIsFinished]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.TranscriptionProgress}>\r\n      {!isFirstLoad ? (\r\n        <>\r\n          <p className={styles.Heading}>\r\n            We are transcribing your video, this process may take several\r\n            minutes. Once it's finished, you can edit your video by editing\r\n            text.\r\n          </p>\r\n          <p className={styles.Percentage}>{Math.floor(progress)}%</p>\r\n          <div className={styles.Box}>\r\n            {[...Array(20)].map((x, i) => (\r\n              <div className={styles.Line} key={i}></div>\r\n            ))}\r\n          </div>\r\n        </>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TranscriptionProgress;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport styles from './Transcription.module.css';\r\nimport cut from '../../assets/editor/cut.svg';\r\nimport search from '../../assets/editor/search.svg';\r\nimport undo from '../../assets/editor/undo.svg';\r\nimport {\r\n  deleteWord,\r\n  restoreDeleted,\r\n  deleteSelection,\r\n  findCurrentWordIndex,\r\n  handleVideoCuts,\r\n} from '../../utils/updateTextAndCuts';\r\nimport Words from './Words/Words';\r\nimport {\r\n  findWordIndexWithId,\r\n  findPrevNotDeletedWord,\r\n  findNextNotDeletedWord,\r\n} from '../../utils/findIndex';\r\nimport { handleSelection } from './utils/selection';\r\nimport TranscriptionProgress from './TranscriptionProgress/TranscriptionProgress';\r\n\r\nconst Transcription = ({\r\n  words,\r\n  currentWordIndex,\r\n  setCurrentWordIndex,\r\n  videoRef,\r\n  setCuts,\r\n  currentSelection,\r\n  setCurrentSelection,\r\n  currentSub,\r\n  fabricSub,\r\n  setShouldRerenderSub,\r\n  status,\r\n  shouldCut,\r\n  setShouldCut,\r\n  isNextWord,\r\n  setIsNextWord,\r\n  isPrevWord,\r\n  setIsPrevWord,\r\n  dispatch,\r\n  updateUndoHistory,\r\n  setPlayerTime,\r\n}) => {\r\n  const [searchInput, setSearchInput] = useState('');\r\n  const [inputIndex, setInputIndex] = useState(null);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [isFinished, setIsFinished] = useState(false);\r\n\r\n  const undoHandler = () => dispatch({ type: 'setShouldUndo', data: true });\r\n\r\n  const cutHandler = useCallback(() => {\r\n    if (words) {\r\n      if (videoRef.current) videoRef.current.pause();\r\n      if (!currentSelection && currentWordIndex !== null && words) {\r\n        deleteWord(\r\n          words,\r\n          currentWordIndex,\r\n          setCurrentWordIndex,\r\n          setCuts,\r\n          setPlayerTime,\r\n          updateUndoHistory\r\n        );\r\n      } else if (currentSelection && words) {\r\n        deleteSelection(\r\n          words,\r\n          setCurrentWordIndex,\r\n          currentSelection,\r\n          setCurrentSelection,\r\n          setCuts,\r\n          setPlayerTime,\r\n          updateUndoHistory\r\n        );\r\n      }\r\n      let selection = document.getSelection();\r\n      selection.removeAllRanges();\r\n    }\r\n  }, [\r\n    currentSelection,\r\n    currentWordIndex,\r\n    setCurrentSelection,\r\n    setCurrentWordIndex,\r\n    setCuts,\r\n    setPlayerTime,\r\n    videoRef,\r\n    words,\r\n    updateUndoHistory,\r\n  ]);\r\n\r\n  const handleNexOrPrevWord = useCallback(\r\n    (setState, callback) => {\r\n      setState(false);\r\n      if (videoRef.current) videoRef.current.pause();\r\n      let index = callback(currentWordIndex, words);\r\n      if (index !== null) {\r\n        let selection = document.getSelection();\r\n        selection.removeAllRanges();\r\n        setCurrentSelection(null);\r\n        setPlayerTime(index);\r\n        setCurrentWordIndex(index);\r\n      }\r\n    },\r\n    [\r\n      currentWordIndex,\r\n      setCurrentWordIndex,\r\n      words,\r\n      videoRef,\r\n      setPlayerTime,\r\n      setCurrentSelection,\r\n    ]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (shouldCut) {\r\n      setShouldCut(false);\r\n      cutHandler();\r\n    } else if (isNextWord && words) {\r\n      handleNexOrPrevWord(setIsNextWord, findNextNotDeletedWord);\r\n    } else if (isPrevWord && words) {\r\n      handleNexOrPrevWord(setIsPrevWord, findPrevNotDeletedWord);\r\n    }\r\n  }, [\r\n    shouldCut,\r\n    setShouldCut,\r\n    cutHandler,\r\n    isNextWord,\r\n    setIsNextWord,\r\n    isPrevWord,\r\n    setIsPrevWord,\r\n    words,\r\n    handleNexOrPrevWord,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad && words) {\r\n      setIsFirstLoad(null);\r\n      let currentIndex = findCurrentWordIndex(0, words);\r\n      setCurrentWordIndex(currentIndex);\r\n      handleVideoCuts('delete', words, setCuts, setPlayerTime, currentIndex);\r\n    }\r\n  }, [isFirstLoad, words, setCuts, setPlayerTime, setCurrentWordIndex]);\r\n\r\n  const wordClickHandler = (e, isDeleted) => {\r\n    let id = e.currentTarget.id;\r\n    let wordIndex = findWordIndexWithId(id, words);\r\n    if (videoRef.current) videoRef.current.pause();\r\n    if (e.detail > 1 && inputIndex === null) setInputIndex(wordIndex);\r\n    if (!isDeleted && inputIndex === null && wordIndex !== null) {\r\n      setCurrentSelection(null);\r\n      setPlayerTime(wordIndex);\r\n      setCurrentWordIndex(wordIndex);\r\n    } else if (inputIndex === null) {\r\n      restoreDeleted(\r\n        words,\r\n        wordIndex,\r\n        setCurrentWordIndex,\r\n        setCurrentSelection,\r\n        setCuts,\r\n        setPlayerTime,\r\n        updateUndoHistory\r\n      );\r\n    }\r\n  };\r\n\r\n  const mouseUpHandler = useCallback(\r\n    (e) => {\r\n      let selection = document.getSelection();\r\n      if (e.detail < 2 && selection.anchorNode && selection.focusNode) {\r\n        let anchorNode = selection.anchorNode.parentNode;\r\n        let focusNode = selection.focusNode.parentNode;\r\n        let isAnchorNode = anchorNode.tagName === 'SPAN';\r\n        let isFocusNode = focusNode.tagName === 'SPAN';\r\n        let position = selection.anchorNode.compareDocumentPosition(\r\n          selection.focusNode\r\n        );\r\n        if ((isAnchorNode || isFocusNode) && !selection.isCollapsed) {\r\n          if (videoRef.current) videoRef.current.pause();\r\n          handleSelection(\r\n            selection,\r\n            anchorNode,\r\n            focusNode,\r\n            isAnchorNode,\r\n            isFocusNode,\r\n            position,\r\n            setCurrentWordIndex,\r\n            setCurrentSelection,\r\n            setPlayerTime,\r\n            words\r\n          );\r\n        }\r\n      }\r\n    },\r\n    [videoRef, setCurrentWordIndex, setCurrentSelection, setPlayerTime, words]\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('mouseup', mouseUpHandler);\r\n    return () => document.removeEventListener('mouseup', mouseUpHandler);\r\n  }, [mouseUpHandler]);\r\n\r\n  return (\r\n    <div className={styles.Transcription}>\r\n      <div className={styles.TextControls}>\r\n        <div className={styles.OptionContainer} onClick={cutHandler}>\r\n          <img src={cut} alt='cut' />\r\n          <p>Cut</p>\r\n        </div>\r\n        <div className={styles.OptionContainer} onClick={undoHandler}>\r\n          <img src={undo} alt='cut' />\r\n          <p>Undo</p>\r\n        </div>\r\n        <div className={styles.SearchContainer}>\r\n          <input\r\n            value={searchInput}\r\n            onChange={(e) => setSearchInput(e.target.value)}\r\n            className={styles.SearchInput}\r\n            placeholder='Search'\r\n            type='text'\r\n          />\r\n          <img className={styles.SearchSvg} src={search} alt='search' />\r\n        </div>\r\n      </div>\r\n      <div id='textbox' className={styles.Text}>\r\n        {isFinished ? (\r\n          <Words\r\n            wordsArr={words}\r\n            currentWordIndex={currentWordIndex}\r\n            searchInput={searchInput}\r\n            wordClickHandler={wordClickHandler}\r\n            inputIndex={inputIndex}\r\n            setInputIndex={setInputIndex}\r\n            currentSelection={currentSelection}\r\n            fabricSub={fabricSub}\r\n            currentSub={currentSub}\r\n            setShouldRerenderSub={setShouldRerenderSub}\r\n            updateUndoHistory={updateUndoHistory}\r\n          />\r\n        ) : (\r\n          <TranscriptionProgress\r\n            status={status}\r\n            words={words}\r\n            setIsFinished={setIsFinished}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Transcription;\r\n","import { findWordIndexWithId } from \"../../../utils/findIndex\";\r\n\r\nexport const handleSelection = (\r\n  selection,\r\n  anchorNode,\r\n  focusNode,\r\n  isAnchorNode,\r\n  isFocusNode,\r\n  position,\r\n  setCurrentWordIndex,\r\n  setCurrentSelection,\r\n  setPlayerTime,\r\n  words\r\n) => {\r\n  let start = '';\r\n  let end = '';\r\n  if (anchorNode.parentNode.id === focusNode.parentNode.id) {\r\n    let wordIndex = findWordIndexWithId(anchorNode.parentNode.id, words);\r\n    if (anchorNode.parentNode.id && wordIndex !== null) {\r\n      setPlayerTime(wordIndex);\r\n      setCurrentWordIndex(wordIndex);\r\n    }\r\n    selection.removeAllRanges();\r\n    setCurrentSelection(null);\r\n  } else if (isAnchorNode && isFocusNode) {\r\n    if (position === 4) {\r\n      start = anchorNode.parentNode.id;\r\n      end = focusNode.parentNode.id;\r\n    } else if (position === 2) {\r\n      start = focusNode.parentNode.id;\r\n      end = anchorNode.parentNode.id;\r\n    }\r\n  } else if (isAnchorNode) {\r\n    if (position === 4) {\r\n      start = anchorNode.parentNode.id;\r\n      end = anchorNode.parentNode.parentNode.lastChild.id;\r\n    } else if (position === 2) {\r\n      start = anchorNode.parentNode.parentNode.firstChild.id;\r\n      end = anchorNode.parentNode.id;\r\n    }\r\n  } else if (isFocusNode) {\r\n    if (position === 4) {\r\n      start = anchorNode.parentNode.parentNode.firstChild.parentNode.id;\r\n      end = focusNode.id;\r\n    } else if (position === 2) {\r\n      start = focusNode.id;\r\n      end = anchorNode.parentNode.parentNode.lastChild.parentNode.id;\r\n    }\r\n  }\r\n\r\n  if (start !== '' && end !== '') {\r\n    let indexStart = findWordIndexWithId(start, words);\r\n    let indexEnd = findWordIndexWithId(end, words);\r\n    if (indexStart !== null && indexEnd !== null) {\r\n      setCurrentSelection({ start: indexStart, end: indexEnd });\r\n      setPlayerTime(indexStart);\r\n      setCurrentWordIndex(indexStart);\r\n    }\r\n  }\r\n  // selection.removeAllRanges();\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\nconst addCachedImage = (imgAsset, imageSrc, canvas, isSvg, id, updateId) => {\r\n  let img = new fabric.CustomImage(imgAsset, {\r\n    originalWidth: imgAsset.width,\r\n    originalHeight: imgAsset.height,\r\n    width: imgAsset.width,\r\n    height: imgAsset.height,\r\n    src: imageSrc,\r\n    scaleX: 256 / imgAsset.width,\r\n    scaleY: 256 / imgAsset.width,\r\n    left: 100,\r\n    top: 100,\r\n    id: id,\r\n    cornerRadius: 0,\r\n    isSvg,\r\n    crossOrigin: 'Anonymous',\r\n  });\r\n  canvas.add(img).setActiveObject(img);\r\n  canvas.requestRenderAll();\r\n  updateId();\r\n};\r\n\r\nconst loadAndAddImage = (\r\n  imageSrc,\r\n  isSvg,\r\n  canvas,\r\n  isMounted,\r\n  setUserAssets,\r\n  id,\r\n  updateId,\r\n  dispatch\r\n) => {\r\n  let imgEl = new Image();\r\n  imgEl.crossOrigin = 'Anonymous';\r\n  imgEl.src = imageSrc;\r\n  let width = imgEl.width;\r\n  let height = imgEl.height;\r\n  if (width === 0 || height === 0) {\r\n    width = 256;\r\n    height = 320;\r\n  }\r\n  let scale = 256 / width;\r\n  let img = new fabric.CustomImage(imgEl, {\r\n    originalWidth: 0,\r\n    originalHeight: 0,\r\n    width,\r\n    height,\r\n    src: imageSrc,\r\n    scaleX: scale,\r\n    scaleY: scale,\r\n    left: 100,\r\n    top: 100,\r\n    id: id,\r\n    cornerRadius: 0,\r\n    isSvg,\r\n    crossOrigin: 'Anonymous',\r\n    excludeFromExport: true,\r\n  });\r\n  canvas.add(img).setActiveObject(img);\r\n  canvas.requestRenderAll();\r\n  updateId();\r\n  imgEl.onload = () => {\r\n    if (isMounted.current) {\r\n      img.originalWidth = imgEl.width;\r\n      img.originalHeight = imgEl.height;\r\n      img.width = imgEl.width;\r\n      img.height = imgEl.height;\r\n      img.scaleX = 256 / imgEl.width;\r\n      img.scaleY = 256 / imgEl.width;\r\n      img.excludeFromExport = false;\r\n      canvas.requestRenderAll();\r\n      setUserAssets((prevState) => [...prevState, imgEl]);\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n    }\r\n  };\r\n};\r\n\r\nconst matchReplacedImage = (active, img, imgAsset) => {\r\n  if (active.cropRect) {\r\n    img.cropRect = {\r\n      x: (active.cropRect.x * imgAsset.width) / active.originalWidth,\r\n      y: (active.cropRect.y * imgAsset.height) / active.originalHeight,\r\n      w: (active.cropRect.w * imgAsset.width) / active.originalWidth,\r\n      h: (active.cropRect.h * imgAsset.height) / active.originalHeight,\r\n    };\r\n    img.width = img.cropRect.w;\r\n    img.height = img.cropRect.h;\r\n  }\r\n  let scale = 1;\r\n  if (img.width * active.scaleX > img.height * active.scaleY) {\r\n    scale = (active.width * active.scaleX) / img.width;\r\n  } else scale = (active.height * active.scaleY) / img.height;\r\n  img.scaleX = scale;\r\n  img.scaleY = scale;\r\n};\r\n\r\nconst replaceWithCachedImage = (imgAsset, imageSrc, canvas, isSvg, active) => {\r\n  let img = new fabric.CustomImage(imgAsset, {\r\n    originalWidth: imgAsset.width,\r\n    originalHeight: imgAsset.height,\r\n    width: imgAsset.width,\r\n    height: imgAsset.height,\r\n    src: imageSrc,\r\n    top: active.top,\r\n    left: active.left,\r\n    id: active.id,\r\n    cornerRadius: isSvg ? 0 : active.cornerRadius,\r\n    angle: active.angle,\r\n    isSvg,\r\n    crossOrigin: 'Anonymous',\r\n  });\r\n  matchReplacedImage(active, img, imgAsset);\r\n  canvas.remove(active);\r\n  canvas.add(img).setActiveObject(img);\r\n  canvas.requestRenderAll();\r\n};\r\n\r\nconst loadAndReplaceImage = (\r\n  imageSrc,\r\n  active,\r\n  isSvg,\r\n  canvas,\r\n  isMounted,\r\n  setUserAssets,\r\n  dispatch\r\n) => {\r\n  let imgEl = new Image();\r\n  imgEl.crossOrigin = 'Anonymous';\r\n  imgEl.src = imageSrc;\r\n  let img = new fabric.CustomImage(imgEl, {\r\n    originalWidth: 0,\r\n    originalHeight: 0,\r\n    width: active.width,\r\n    height: active.height,\r\n    src: imageSrc,\r\n    scaleX: active.scaleX,\r\n    scaleY: active.scaleY,\r\n    top: active.top,\r\n    left: active.left,\r\n    id: active.id,\r\n    cornerRadius: isSvg ? 0 : active.cornerRadius,\r\n    angle: active.angle,\r\n    isSvg,\r\n    crossOrigin: 'Anonymous',\r\n    excludeFromExport: true,\r\n    opacity: 0,\r\n  });\r\n\r\n  canvas.remove(active);\r\n  canvas.add(img).setActiveObject(img);\r\n  canvas.requestRenderAll();\r\n  imgEl.onload = () => {\r\n    if (isMounted.current) {\r\n      img.originalWidth = imgEl.width;\r\n      img.originalHeight = imgEl.height;\r\n      img.width = imgEl.width;\r\n      img.height = imgEl.height;\r\n      matchReplacedImage(active, img, imgEl);\r\n      img.excludeFromExport = false;\r\n      img.opacity = 1;\r\n      canvas.requestRenderAll();\r\n      setUserAssets((prevState) => [...prevState, imgEl]);\r\n      dispatch({ type: 'setShouldUpdateImage', data: true });\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n    }\r\n  };\r\n};\r\n\r\nconst replaceImage = (\r\n  imgAsset,\r\n  imageSrc,\r\n  canvas,\r\n  isSvg,\r\n  isMounted,\r\n  setUserAssets,\r\n  dispatch\r\n) => {\r\n  let active = canvas.getActiveObject();\r\n  if (imgAsset) {\r\n    replaceWithCachedImage(imgAsset, imageSrc, canvas, isSvg, active);\r\n    dispatch({ type: 'setShouldUpdateImage', data: true });\r\n  } else {\r\n    loadAndReplaceImage(\r\n      imageSrc,\r\n      active,\r\n      isSvg,\r\n      canvas,\r\n      isMounted,\r\n      setUserAssets,\r\n      dispatch\r\n    );\r\n  }\r\n  dispatch({ type: 'setShouldReplaceImage', data: false });\r\n};\r\n\r\nconst addImage = (\r\n  imgAsset,\r\n  imageSrc,\r\n  canvas,\r\n  isSvg,\r\n  isMounted,\r\n  setUserAssets,\r\n  dispatch,\r\n  id,\r\n  updateId\r\n) => {\r\n  if (imgAsset) {\r\n    addCachedImage(imgAsset, imageSrc, canvas, isSvg, id, updateId);\r\n  } else {\r\n    loadAndAddImage(\r\n      imageSrc,\r\n      isSvg,\r\n      canvas,\r\n      isMounted,\r\n      setUserAssets,\r\n      id,\r\n      updateId,\r\n      dispatch\r\n    );\r\n  }\r\n};\r\n\r\nexport const addNewImage = async (\r\n  state,\r\n  canvas,\r\n  dispatch,\r\n  id,\r\n  updateId,\r\n  userAssets,\r\n  setUserAssets,\r\n  isMounted\r\n) => {\r\n  let imageSrc = state.imageToAdd.src;\r\n  let imgAsset = userAssets.filter((asset) => asset.src === imageSrc)[0];\r\n  let isSvg = state.imageToAdd.type === 'svg';\r\n  if (state.shouldReplaceImage) {\r\n    replaceImage(\r\n      imgAsset,\r\n      imageSrc,\r\n      canvas,\r\n      isSvg,\r\n      isMounted,\r\n      setUserAssets,\r\n      dispatch\r\n    );\r\n  } else {\r\n    addImage(\r\n      imgAsset,\r\n      imageSrc,\r\n      canvas,\r\n      isSvg,\r\n      isMounted,\r\n      setUserAssets,\r\n      dispatch,\r\n      id,\r\n      updateId\r\n    );\r\n  }\r\n  dispatch({ type: 'setImageToAdd', data: null });\r\n};\r\n\r\nexport const addNewText = (canvas, state, dispatch, id, updateId) => {\r\n  dispatch({ type: 'setShouldAddText', data: false });\r\n  let text = new fabric.CustomTextbox('Addtext', {\r\n    left: 100,\r\n    top: 100,\r\n    width: 130,\r\n    splitByGrapheme: true,\r\n    ...state.textState,\r\n  });\r\n  text.id = id;\r\n  canvas.add(text).setActiveObject(text);\r\n  canvas.requestRenderAll();\r\n  updateId();\r\n};\r\n\r\nconst newRect = () => {\r\n  let rect = new fabric.Rect({\r\n    left: 100,\r\n    top: 100,\r\n    width: 152,\r\n    height: 152,\r\n    noScaleCache: false,\r\n    strokeUniform: true,\r\n    fill: 'rgba(196,196,196,1)',\r\n    stroke: 'rgba(255,255,255,1)',\r\n    strokeWidth: 0,\r\n    rx: 0,\r\n    ry: 0,\r\n  });\r\n  return rect;\r\n};\r\n\r\nconst newCircle = () => {\r\n  let circle = new fabric.Circle({\r\n    left: 100,\r\n    top: 100,\r\n    radius: 76,\r\n    noScaleCache: false,\r\n    strokeUniform: true,\r\n    fill: 'rgba(196,196,196,1)',\r\n    stroke: 'rgba(255,255,255,1)',\r\n    strokeWidth: 0,\r\n    rx: 0,\r\n    ry: 0,\r\n  });\r\n  return circle;\r\n};\r\n\r\nconst newTriangle = () => {\r\n  let triangle = new fabric.Triangle({\r\n    left: 100,\r\n    top: 100,\r\n    width: 152,\r\n    height: 150,\r\n    noScaleCache: false,\r\n    strokeUniform: true,\r\n    fill: 'rgba(196,196,196,1)',\r\n    stroke: 'rgba(255,255,255,1)',\r\n    strokeWidth: 0,\r\n    rx: 0,\r\n    ry: 0,\r\n  });\r\n  return triangle;\r\n};\r\n\r\nconst newLine = () => {\r\n  let line = new fabric.Line([0, 0, 300, 0], {\r\n    left: 100,\r\n    top: 100,\r\n    stroke: 'rgba(196,196,196,1)',\r\n    strokeWidth: 2,\r\n    noScaleCache: false,\r\n    rx: 0,\r\n    ry: 0,\r\n  });\r\n  return line;\r\n};\r\n\r\nexport const addNewShape = (state, canvas, dispatch, id, updateId) => {\r\n  dispatch({ type: 'setShapeToAdd', data: null });\r\n  let obj = null;\r\n  if (state.shapeToAdd === 'square') obj = newRect();\r\n  else if (state.shapeToAdd === 'circle') obj = newCircle();\r\n  else if (state.shapeToAdd === 'triangle') obj = newTriangle();\r\n  else if (state.shapeToAdd === 'line') obj = newLine();\r\n  if (obj) {\r\n    obj.id = id;\r\n    canvas.add(obj).setActiveObject(obj);\r\n    canvas.requestRenderAll();\r\n    updateId();\r\n  }\r\n};\r\n","import { useEffect, useRef } from 'react';\r\nimport { addNewImage, addNewShape, addNewText } from '../utils/addObject';\r\n\r\nconst useAddObject = (\r\n  state,\r\n  dispatch,\r\n  canvas,\r\n  id,\r\n  updateId,\r\n  userAssets,\r\n  setUserAssets\r\n) => {\r\n  const isMounted = useRef(false);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (state.shapeToAdd) {\r\n      addNewShape(state, canvas, dispatch, id, updateId);\r\n    } else if (state.imageToAdd) {\r\n      addNewImage(\r\n        state,\r\n        canvas,\r\n        dispatch,\r\n        id,\r\n        updateId,\r\n        userAssets,\r\n        setUserAssets,\r\n        isMounted\r\n      );\r\n    } else if (state.shouldAddText) {\r\n      addNewText(canvas, state, dispatch, id, updateId);\r\n    }\r\n  }, [canvas, dispatch, state, id, updateId, userAssets, setUserAssets]);\r\n};\r\n\r\nexport default useAddObject;\r\n","import {createContext} from 'react';\r\n\r\nconst EventContext = createContext(null);\r\nexport default EventContext;","import WebFont from 'webfontloader';\r\nimport { fabric } from 'fabric';\r\n\r\nconst loadedFonts = ['Inter'];\r\n\r\nexport const roundedCorners = (media, radius) => {\r\n  let finalRad = 0;\r\n  let width = media.width;\r\n  let height = media.height;\r\n  if (media.cropRect) {\r\n    width = media.cropRect.w;\r\n    height = media.cropRect.h;\r\n  }\r\n  width += media.strokeWidth;\r\n  height += media.strokeWidth;\r\n  if (width < height) finalRad = (width * radius) / 200;\r\n  else finalRad = (height * radius) / 200;\r\n\r\n  return new fabric.Rect({\r\n    width: media.width + media.strokeWidth,\r\n    height: media.height + media.strokeWidth,\r\n    rx: finalRad,\r\n    ry: finalRad,\r\n    left: (-media.width - media.strokeWidth) / 2,\r\n    top: (-media.height - media.strokeWidth) / 2,\r\n    noScaleCache: false,\r\n  });\r\n};\r\n\r\nexport const updateVideoStyle = (state, canvas, dispatch) => {\r\n  let video = state.currentObject.object;\r\n  if (video && video.type === 'video') {\r\n    let radius = state.videoState.cornerRadius;\r\n    if (radius === 0) video.clipPath = null;\r\n    else video.set('clipPath', roundedCorners(video, radius));\r\n    for (const [key, value] of Object.entries(state.videoState)) {\r\n      video.set(key, value);\r\n    }\r\n    if (!state.showToolbar) dispatch({ type: 'setShowToolbar', data: true });\r\n    canvas.requestRenderAll();\r\n  }\r\n  dispatch({ type: 'setShouldUpdateVideo', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const updateImageStyle = (state, canvas, dispatch) => {\r\n  let image = state.currentObject.object;\r\n  if (\r\n    image &&\r\n    image.type === 'customImage' &&\r\n    image.originalWidth > 0 &&\r\n    image.originalHeight > 0\r\n  ) {\r\n    let radius = state.imageState.cornerRadius;\r\n    if (radius === 0) image.clipPath = null;\r\n    else image.set('clipPath', roundedCorners(image, radius));\r\n    image.cornerRadius = radius;\r\n    canvas.requestRenderAll();\r\n  }\r\n  dispatch({ type: 'setShouldUpdateImage', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nconst setFont = (text, font, canvas, dispatch) => {\r\n  text.set({ fontFamily: font });\r\n  canvas.requestRenderAll();\r\n  if (dispatch) {\r\n    dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n  }\r\n};\r\n\r\nexport const loadAndUse = (canvas, text, font, dispatch) => {\r\n  if (!loadedFonts.includes(font)) {\r\n    WebFont.load({\r\n      google: {\r\n        families: [font],\r\n      },\r\n      timeout: 5000,\r\n      fontactive: (familyName, fvd) => {\r\n        loadedFonts.push(font);\r\n        setFont(text, familyName, canvas, dispatch);\r\n      },\r\n    });\r\n  } else setFont(text, font, canvas, dispatch);\r\n};\r\n\r\nexport const updateTextStyle = (state, canvas, dispatch) => {\r\n  let text = state.currentObject.object;\r\n  let textState = state.textState;\r\n  if (textState && text) {\r\n    text._clearCache();\r\n    for (const [key, value] of Object.entries(textState)) {\r\n      if (key !== 'fontFamily') {\r\n        text.set(key, value);\r\n      }\r\n    }\r\n    loadAndUse(canvas, text, textState.fontFamily, dispatch);\r\n    if (!state.showToolbar) dispatch({ type: 'setShowToolbar', data: true });\r\n  }\r\n  dispatch({ type: 'setShouldUpdateText', data: false });\r\n};\r\n\r\nexport const updateSubtitlesStyle = (state, canvas, dispatch) => {\r\n  let text = state.currentObject.object;\r\n  if (text) {\r\n    let textState = state.subtitlesState;\r\n    text._clearCache();\r\n    for (const [key, value] of Object.entries(textState)) {\r\n      if (key !== 'fontFamily') {\r\n        text.set(key, value);\r\n      }\r\n    }\r\n    loadAndUse(canvas, text, textState.fontFamily, dispatch);\r\n    if (!state.showToolbar) dispatch({ type: 'setShowToolbar', data: true });\r\n  }\r\n  dispatch({ type: 'setShouldUpdateSubtitles', data: false });\r\n};\r\n\r\nexport const updateShapeStyle = (state, canvas, dispatch) => {\r\n  let shape = state.currentObject.object;\r\n  if (shape) {\r\n    // state.currentObject.object._clearCache();\r\n    for (const [key, value] of Object.entries(state.shapeState)) {\r\n      shape.set(key, value);\r\n    }\r\n    if (!state.showToolbar) dispatch({ type: 'setShowToolbar', data: true });\r\n    canvas.requestRenderAll();\r\n  }\r\n  dispatch({ type: 'setShouldUpdateShape', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n","export const checkOffScreen = (obj, canvas) => {\r\n  if (!obj.isOnScreen()) {\r\n    let zoom = canvas.getZoom();\r\n    let canvasWidth = canvas.getWidth() / zoom;\r\n    let canvasHeight = canvas.getHeight() / zoom;\r\n    let objHeight = obj.height * obj.scaleY;\r\n    let objWidth = obj.width * obj.scaleX;\r\n    if (obj.id === 'subtitle') {\r\n      obj.left = canvas.getWidth() / canvas.getZoom() / 2;\r\n      obj.top =\r\n        canvas.getHeight() / canvas.getZoom() - obj.height - obj.paddingY;\r\n    } else {\r\n      obj.angle = 0;\r\n      obj.setCoords();\r\n      if (obj.top > canvasHeight) obj.top = canvasHeight - objHeight;\r\n      else if (obj.top < 0) obj.top = 0;\r\n      if (obj.left > canvasWidth) obj.left = canvasWidth - objWidth;\r\n      else if (obj.left < 0) obj.left = 0;\r\n    }\r\n    obj.setCoords();\r\n  }\r\n};\r\n\r\nexport const checkResizeOffScreen = (object, canvas, dispatch) => {\r\n  let zoom = canvas.getZoom();\r\n  let canvasWidth = canvas.getWidth() / zoom;\r\n  let canvasHeight = canvas.getHeight() / zoom;\r\n  let objHeight = object.height * object.scaleY;\r\n  let objWidth = object.width * object.scaleX;\r\n  let isSub = object.type === 'subtitle';\r\n  let isTextObject = object.type === 'customTextbox' || isSub;\r\n  let isVertical = canvas.resize === 'vertical';\r\n  let shouldResize =\r\n    isVertical &&\r\n    (objWidth > (canvasWidth * 2) / 3 || objHeight > (canvasHeight * 2) / 3);\r\n\r\n  if (shouldResize && isTextObject) {\r\n    object.width = canvasWidth / 2;\r\n    objWidth = canvasWidth / 2;\r\n  } else if (shouldResize) {\r\n    let desiredSize = (canvasWidth * 2) / 3;\r\n    let scale = desiredSize / object.width;\r\n    object.scaleX = scale;\r\n    object.scaleY = scale;\r\n    objWidth = object.width * object.scaleX;\r\n    objHeight = object.height * object.scaleY;\r\n  }\r\n\r\n  if (isTextObject && isVertical && +object.fontSize > 30 && dispatch) {\r\n    object.fontSize = 30;\r\n    dispatch({\r\n      type: isSub ? 'setSubtitlesFontSize' : 'setFontSize',\r\n      data: 30,\r\n    });\r\n  }\r\n  if (!object.isOnScreen() && !isSub) {\r\n    object.angle = 0;\r\n    object.setCoords();\r\n    if (object.top > canvasHeight) object.top = canvasHeight - objHeight;\r\n    else if (object.top < 0) object.top = 0;\r\n    if (object.left > canvasWidth) object.left = canvasWidth - objWidth;\r\n    else if (object.left < 0) object.left = 0;\r\n  } else if (isSub) {\r\n    object.left = canvasWidth / 2;\r\n    let top = canvasHeight - object.height - object.paddingY;\r\n    object.top = top > 0 ? top : object.height / 2;\r\n    object.width = 550 < canvasWidth / 2 ? 550 : canvasWidth / 2;\r\n  }\r\n  object.setCoords();\r\n};\r\n","import { roundedCorners } from './updateObject';\r\nimport { checkOffScreen } from '../../../utils/checkOffScreen';\r\n\r\nconst textPropertyArr = [\r\n  'fontFamily',\r\n  'fontStyle',\r\n  'fontWeight',\r\n  'fontSize',\r\n  'fill',\r\n  'opacity',\r\n  'textAlign',\r\n];\r\nconst shapePropertyArr = ['fill', 'stroke', 'strokeWidth', 'rx', 'ry'];\r\nconst imagePropertyArr = ['cornerRadius', 'isSvg'];\r\nconst videoPropertyArr = ['cornerRadius', 'stroke', 'strokeWidth'];\r\n\r\nconst handleObject = (e, dispatch, type, propertyArr) => {\r\n  let newState = {};\r\n  if (e.target.type === 'video' && e.target.stroke === null) {\r\n    e.target.stroke = 'rgba(255,255,255,1)';\r\n  }\r\n  propertyArr.forEach((property) => {\r\n    newState[property] = e.target[property];\r\n  });\r\n  dispatch({ type, data: newState });\r\n};\r\n\r\nconst handleSelected = (e, dispatch) => {\r\n  let obj = { type: '', object: null };\r\n  dispatch({ type: 'setCurrentCoords', data: e.target.lineCoords });\r\n  if (e.target.type === 'activeSelection') {\r\n    obj.type = 'activeSelection';\r\n  } else if (e.target.type === 'customTextbox') {\r\n    obj.type = 'text';\r\n    handleObject(e, dispatch, 'setTextState', textPropertyArr);\r\n  } else if (e.target.type === 'customImage') {\r\n    obj.type = 'customImage';\r\n    handleObject(e, dispatch, 'setImageState', imagePropertyArr);\r\n  } else if (e.target.type === 'subtitle') obj.type = 'subtitle';\r\n  else if (e.target.type === 'video') {\r\n    obj.type = 'video';\r\n    handleObject(e, dispatch, 'setVideoState', videoPropertyArr);\r\n  } else {\r\n    obj.type = e.target.type;\r\n    handleObject(e, dispatch, 'setShapeState', shapePropertyArr);\r\n  }\r\n  obj.object = e.target;\r\n  dispatch({ type: 'setCurrentObject', data: obj });\r\n};\r\n\r\nexport const onCreated = (e, dispatch) => handleSelected(e, dispatch);\r\n\r\nexport const onCleared = (e, canvas, dispatch, currentId) => {\r\n  if (e.deselected && e.deselected.length > 1) {\r\n    for (let i = 0; i < e.deselected.length; i++) {\r\n      checkOffScreen(e.deselected[i], canvas);\r\n    }\r\n  }\r\n  currentId.current = null;\r\n  dispatch({\r\n    type: 'setCurrentObject',\r\n    data: { type: '', object: null },\r\n  });\r\n  dispatch({\r\n    type: 'setCurrentCoords',\r\n    data: null,\r\n  });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const onModified = (\r\n  e,\r\n  canvas,\r\n  dispatch,\r\n  eventDispatch,\r\n  setIsModifying\r\n) => {\r\n  if (\r\n    (e.target.type === 'customImage' || e.target.type === 'video') &&\r\n    (e.action === 'scaleX' || e.action === 'scaleY')\r\n  ) {\r\n    let radius = e.target.cornerRadius;\r\n    if (radius !== 0) {\r\n      e.target.set('clipPath', roundedCorners(e.target, radius));\r\n    }\r\n  }\r\n  handleSelected(e, dispatch);\r\n  if (e.action !== 'rotate') checkOffScreen(e.target, canvas);\r\n  if (e.action === 'drag') eventDispatch({ type: 'setIsMoving', data: false });\r\n  setIsModifying(false);\r\n  dispatch({ type: 'setIsModifyingObject', data: false });\r\n  if (e.target.type !== 'activeSelection') {\r\n    dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n  }\r\n};\r\n\r\nexport const onModifying = (setIsModifying, dispatch) => {\r\n  setIsModifying(true);\r\n  dispatch({ type: 'setIsModifyingObject', data: true });\r\n};\r\n\r\nexport const onAdded = (e, dispatch, canvas, fabricSub) => {\r\n  if (fabricSub) canvas.bringToFront(fabricSub);\r\n  if (\r\n    e.target.type === 'customImage' &&\r\n    (e.target.originalWidth === 0 || e.target.originalHeight === 0)\r\n  ) {\r\n    return;\r\n  }\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const onRemoved = (e, dispatch) => {\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const onUpdated = (e, dispatch) => {\r\n  dispatch({ type: 'setShowToolbar', data: false });\r\n  handleSelected(e, dispatch);\r\n};\r\n\r\nexport const onTextEnter = (e, c, setIsModifying, dispatch) => {\r\n  setIsModifying(true);\r\n  dispatch({ type: 'setIsModifyingObject', data: true });\r\n  if (e.target.text === 'Addtext') {\r\n    e.target.text = '';\r\n    e.target.hiddenTextarea.value = '';\r\n    e.target.setCoords();\r\n    c.renderAll();\r\n  }\r\n};\r\n\r\nexport const onTextExit = (e, c, setIsModifying, dispatch) => {\r\n  setIsModifying(false);\r\n  dispatch({ type: 'setIsModifyingObject', data: false });\r\n  if (e.target.text === '') e.target.text = 'Addtext';\r\n  e.target.setCoords();\r\n  c.renderAll();\r\n};\r\n","import { useCallback, useEffect, useState, useRef, useContext } from 'react';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport {\r\n  onCreated,\r\n  onModifying,\r\n  onModified,\r\n  onCleared,\r\n  onUpdated,\r\n  onTextEnter,\r\n  onTextExit,\r\n  onAdded,\r\n  onRemoved,\r\n} from '../utils/onCanvasEvents';\r\n\r\nconst removeListeners = (c) => {\r\n  c.off('selection:created');\r\n  c.off('selection:updated');\r\n  c.off('selection:cleared');\r\n  c.off('object:modified');\r\n  c.off('object:added');\r\n  c.off('object:removed');\r\n  c.off('object:rotating');\r\n  c.off('object:scaling');\r\n  c.off('text:editing:entered');\r\n  c.off('text:editing:exited');\r\n};\r\n\r\nconst useSelectionObserver = (canvas, state, dispatch, fabricSub) => {\r\n  const { eventState, eventDispatch } = useContext(EventContext);\r\n  const [isModifying, setIsModifying] = useState(false);\r\n  const isFirstLoad = useRef(true);\r\n  const currentId = useRef(null);\r\n\r\n  const addListeners = useCallback(\r\n    (c) => {\r\n      c.on('text:editing:entered', (e) =>\r\n        onTextEnter(e, c, setIsModifying, dispatch)\r\n      );\r\n      c.on('text:editing:exited', (e) =>\r\n        onTextExit(e, c, setIsModifying, dispatch)\r\n      );\r\n      c.on('selection:created', (e) => onCreated(e, dispatch));\r\n      c.on('selection:updated', (e) => onUpdated(e, dispatch));\r\n      c.on('object:modified', (e) =>\r\n        onModified(e, c, dispatch, eventDispatch, setIsModifying)\r\n      );\r\n      c.on('object:added', (e) => onAdded(e, dispatch, c, fabricSub));\r\n      c.on('object:removed', (e) => onRemoved(e, dispatch));\r\n      c.on('selection:cleared', (e) => onCleared(e, c, dispatch, currentId));\r\n      c.on('object:rotating', () => onModifying(setIsModifying, dispatch));\r\n      c.on('object:scaling', () => onModifying(setIsModifying, dispatch));\r\n    },\r\n    [dispatch, eventDispatch, fabricSub]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (canvas) addListeners(canvas);\r\n    return () => {\r\n      if (canvas) removeListeners(canvas);\r\n    };\r\n  }, [canvas, addListeners]);\r\n\r\n  useEffect(() => {\r\n    if (!isFirstLoad.current) {\r\n      let data = true;\r\n      if (\r\n        isModifying ||\r\n        eventState.isMoving ||\r\n        !state.currentCoords ||\r\n        state.isCropMode ||\r\n        state.currentObject.type === 'activeSelection'\r\n      ) {\r\n        data = false;\r\n      }\r\n      dispatch({ type: 'setShowToolbar', data });\r\n    }\r\n  }, [\r\n    eventState,\r\n    isModifying,\r\n    state.isCropMode,\r\n    state.currentCoords,\r\n    state.currentObject,\r\n    dispatch,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!isFirstLoad.current) {\r\n      if (\r\n        !state.currentCoords ||\r\n        state.currentObject.type === 'activeSelection'\r\n      ) {\r\n        dispatch({ type: 'setShowToolbar', data: false });\r\n      } else if (\r\n        state.currentObject.object &&\r\n        state.currentObject.object.id !== currentId.current\r\n      ) {\r\n        currentId.current = state.currentObject.object.id;\r\n        dispatch({ type: 'setShowToolbar', data: true });\r\n      }\r\n    } else isFirstLoad.current = false;\r\n  }, [state.currentCoords, state.currentObject, dispatch, state.isCropMode]);\r\n};\r\n\r\nexport default useSelectionObserver;\r\n","import { fabric } from 'fabric';\r\n\r\nconst drawLine = (\r\n  x1,\r\n  y1,\r\n  x2,\r\n  y2,\r\n  ctx,\r\n  aligningLineWidth,\r\n  aligningLineColor,\r\n  viewportTransform,\r\n  zoom\r\n) => {\r\n  ctx.save();\r\n  ctx.lineWidth = aligningLineWidth;\r\n  ctx.strokeStyle = aligningLineColor;\r\n  ctx.beginPath();\r\n  ctx.moveTo(\r\n    (x1 + viewportTransform[4]) * zoom,\r\n    (y1 + viewportTransform[5]) * zoom\r\n  );\r\n  ctx.lineTo(\r\n    (x2 + viewportTransform[4]) * zoom,\r\n    (y2 + viewportTransform[5]) * zoom\r\n  );\r\n  ctx.stroke();\r\n  ctx.restore();\r\n};\r\n\r\nconst isInRange = (value1, value2, aligningLineMargin) => {\r\n  value1 = Math.round(value1);\r\n  value2 = Math.round(value2);\r\n  for (\r\n    let i = value1 - aligningLineMargin, len = value1 + aligningLineMargin;\r\n    i <= len;\r\n    i++\r\n  ) {\r\n    if (i === value2) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const drawVerticalLine = (\r\n  coords,\r\n  ctx,\r\n  aligningLineWidth,\r\n  aligningLineColor,\r\n  viewportTransform,\r\n  zoom\r\n) => {\r\n  drawLine(\r\n    coords.x + 0.5,\r\n    coords.y1 > coords.y2 ? coords.y2 : coords.y1,\r\n    coords.x + 0.5,\r\n    coords.y2 > coords.y1 ? coords.y2 : coords.y1,\r\n    ctx,\r\n    aligningLineWidth,\r\n    aligningLineColor,\r\n    viewportTransform,\r\n    zoom\r\n  );\r\n};\r\n\r\nexport const drawHorizontalLine = (\r\n  coords,\r\n  ctx,\r\n  aligningLineWidth,\r\n  aligningLineColor,\r\n  viewportTransform,\r\n  zoom\r\n) => {\r\n  drawLine(\r\n    coords.x1 > coords.x2 ? coords.x2 : coords.x1,\r\n    coords.y + 0.5,\r\n    coords.x2 > coords.x1 ? coords.x2 : coords.x1,\r\n    coords.y + 0.5,\r\n    ctx,\r\n    aligningLineWidth,\r\n    aligningLineColor,\r\n    viewportTransform,\r\n    zoom\r\n  );\r\n};\r\n\r\nexport const objectMovingObserver = (\r\n  e,\r\n  canvas,\r\n  viewportTransform,\r\n  aligningLineOffset,\r\n  setVerticalLines,\r\n  setHorizontalLines,\r\n  aligningLineMargin\r\n) => {\r\n  let activeObject = e.target,\r\n    canvasObjects = canvas.getObjects(),\r\n    activeObjectCenter = activeObject.getCenterPoint(),\r\n    activeObjectLeft = activeObjectCenter.x,\r\n    activeObjectTop = activeObjectCenter.y,\r\n    activeObjectBoundingRect = activeObject.getBoundingRect(),\r\n    activeObjectHeight = activeObjectBoundingRect.height / viewportTransform[3],\r\n    activeObjectWidth = activeObjectBoundingRect.width / viewportTransform[0],\r\n    horizontalInTheRange = false,\r\n    verticalInTheRange = false,\r\n    transform = canvas._currentTransform;\r\n\r\n  if (!transform) return;\r\n\r\n  for (let i = canvasObjects.length; i--; ) {\r\n    if (canvasObjects[i] === activeObject) continue;\r\n\r\n    let objectCenter = canvasObjects[i].getCenterPoint(),\r\n      objectLeft = objectCenter.x,\r\n      objectTop = objectCenter.y,\r\n      objectBoundingRect = canvasObjects[i].getBoundingRect(),\r\n      objectHeight = objectBoundingRect.height / viewportTransform[3],\r\n      objectWidth = objectBoundingRect.width / viewportTransform[0];\r\n\r\n    // snap by the horizontal center line\r\n    if (isInRange(objectLeft, activeObjectLeft, aligningLineMargin)) {\r\n      verticalInTheRange = true;\r\n      setVerticalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          x: objectLeft,\r\n          y1:\r\n            objectTop < activeObjectTop\r\n              ? objectTop - objectHeight / 2 - aligningLineOffset\r\n              : objectTop + objectHeight / 2 + aligningLineOffset,\r\n          y2:\r\n            activeObjectTop > objectTop\r\n              ? activeObjectTop + activeObjectHeight / 2 + aligningLineOffset\r\n              : activeObjectTop - activeObjectHeight / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(objectLeft, activeObjectTop),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n\r\n    // snap by the left edge\r\n    if (\r\n      isInRange(\r\n        objectLeft - objectWidth / 2,\r\n        activeObjectLeft - activeObjectWidth / 2,\r\n        aligningLineMargin\r\n      )\r\n    ) {\r\n      verticalInTheRange = true;\r\n      setVerticalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          x: objectLeft - objectWidth / 2,\r\n          y1:\r\n            objectTop < activeObjectTop\r\n              ? objectTop - objectHeight / 2 - aligningLineOffset\r\n              : objectTop + objectHeight / 2 + aligningLineOffset,\r\n          y2:\r\n            activeObjectTop > objectTop\r\n              ? activeObjectTop + activeObjectHeight / 2 + aligningLineOffset\r\n              : activeObjectTop - activeObjectHeight / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(\r\n          objectLeft - objectWidth / 2 + activeObjectWidth / 2,\r\n          activeObjectTop\r\n        ),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n\r\n    // snap by the right edge\r\n    if (\r\n      isInRange(\r\n        objectLeft + objectWidth / 2,\r\n        activeObjectLeft + activeObjectWidth / 2,\r\n        aligningLineMargin\r\n      )\r\n    ) {\r\n      verticalInTheRange = true;\r\n      setVerticalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          x: objectLeft + objectWidth / 2,\r\n          y1:\r\n            objectTop < activeObjectTop\r\n              ? objectTop - objectHeight / 2 - aligningLineOffset\r\n              : objectTop + objectHeight / 2 + aligningLineOffset,\r\n          y2:\r\n            activeObjectTop > objectTop\r\n              ? activeObjectTop + activeObjectHeight / 2 + aligningLineOffset\r\n              : activeObjectTop - activeObjectHeight / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(\r\n          objectLeft + objectWidth / 2 - activeObjectWidth / 2,\r\n          activeObjectTop\r\n        ),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n\r\n    // snap by the vertical center line\r\n    if (isInRange(objectTop, activeObjectTop, aligningLineMargin)) {\r\n      horizontalInTheRange = true;\r\n      setHorizontalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          y: objectTop,\r\n          x1:\r\n            objectLeft < activeObjectLeft\r\n              ? objectLeft - objectWidth / 2 - aligningLineOffset\r\n              : objectLeft + objectWidth / 2 + aligningLineOffset,\r\n          x2:\r\n            activeObjectLeft > objectLeft\r\n              ? activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset\r\n              : activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(activeObjectLeft, objectTop),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n\r\n    // snap by the top edge\r\n    if (\r\n      isInRange(\r\n        objectTop - objectHeight / 2,\r\n        activeObjectTop - activeObjectHeight / 2,\r\n        aligningLineMargin\r\n      )\r\n    ) {\r\n      horizontalInTheRange = true;\r\n      setHorizontalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          y: objectTop - objectHeight / 2,\r\n          x1:\r\n            objectLeft < activeObjectLeft\r\n              ? objectLeft - objectWidth / 2 - aligningLineOffset\r\n              : objectLeft + objectWidth / 2 + aligningLineOffset,\r\n          x2:\r\n            activeObjectLeft > objectLeft\r\n              ? activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset\r\n              : activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(\r\n          activeObjectLeft,\r\n          objectTop - objectHeight / 2 + activeObjectHeight / 2\r\n        ),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n\r\n    // snap by the bottom edge\r\n    if (\r\n      isInRange(\r\n        objectTop + objectHeight / 2,\r\n        activeObjectTop + activeObjectHeight / 2,\r\n        aligningLineMargin\r\n      )\r\n    ) {\r\n      horizontalInTheRange = true;\r\n      setHorizontalLines((prevState) => [\r\n        ...prevState,\r\n        {\r\n          y: objectTop + objectHeight / 2,\r\n          x1:\r\n            objectLeft < activeObjectLeft\r\n              ? objectLeft - objectWidth / 2 - aligningLineOffset\r\n              : objectLeft + objectWidth / 2 + aligningLineOffset,\r\n          x2:\r\n            activeObjectLeft > objectLeft\r\n              ? activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset\r\n              : activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset,\r\n        },\r\n      ]);\r\n\r\n      activeObject.setPositionByOrigin(\r\n        new fabric.Point(\r\n          activeObjectLeft,\r\n          objectTop + objectHeight / 2 - activeObjectHeight / 2\r\n        ),\r\n        'center',\r\n        'center'\r\n      );\r\n    }\r\n  }\r\n\r\n  if (!horizontalInTheRange) setHorizontalLines([]);\r\n  if (!verticalInTheRange) setVerticalLines([]);\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\nconst showCenterLine = (\r\n  x1,\r\n  y1,\r\n  x2,\r\n  y2,\r\n  ctx,\r\n  centerLineColor,\r\n  centerLineWidth,\r\n  viewportTransform\r\n) => {\r\n  ctx.save();\r\n  ctx.strokeStyle = centerLineColor;\r\n  ctx.lineWidth = centerLineWidth;\r\n  ctx.beginPath();\r\n  ctx.moveTo(x1 * viewportTransform[0], y1 * viewportTransform[3]);\r\n  ctx.lineTo(x2 * viewportTransform[0], y2 * viewportTransform[3]);\r\n  ctx.stroke();\r\n  ctx.restore();\r\n};\r\n\r\nexport const showVerticalCenterLine = (\r\n  canvasWidthCenter,\r\n  canvasHeight,\r\n  ctx,\r\n  centerLineColor,\r\n  centerLineWidth,\r\n  viewportTransform\r\n) => {\r\n  showCenterLine(\r\n    canvasWidthCenter + 0.5,\r\n    0,\r\n    canvasWidthCenter + 0.5,\r\n    canvasHeight,\r\n    ctx,\r\n    centerLineColor,\r\n    centerLineWidth,\r\n    viewportTransform\r\n  );\r\n};\r\n\r\nexport const showHorizontalCenterLine = (\r\n  canvasHeightCenter,\r\n  canvasWidth,\r\n  ctx,\r\n  centerLineColor,\r\n  centerLineWidth,\r\n  viewportTransform\r\n) => {\r\n  showCenterLine(\r\n    0,\r\n    canvasHeightCenter + 0.5,\r\n    canvasWidth,\r\n    canvasHeightCenter + 0.5,\r\n    ctx,\r\n    centerLineColor,\r\n    centerLineWidth,\r\n    viewportTransform\r\n  );\r\n};\r\n\r\nexport const objectMovingCenterObserver = (\r\n  e,\r\n  canvas,\r\n  setIsInVerticalCenter,\r\n  setIsInHorizontalCenter,\r\n  canvasWidthCenterMap,\r\n  canvasHeightCenterMap,\r\n  canvasWidth,\r\n  canvasHeight\r\n) => {\r\n  let object = e.target,\r\n    objectCenter = object.getCenterPoint(),\r\n    transform = canvas._currentTransform;\r\n\r\n  if (!transform) return;\r\n  let isInVertical = Math.round(objectCenter.x) in canvasWidthCenterMap;\r\n  let isInHorizontal = Math.round(objectCenter.y) in canvasHeightCenterMap;\r\n  setIsInVerticalCenter(isInVertical);\r\n  setIsInHorizontalCenter(isInHorizontal);\r\n\r\n  if (isInVertical || isInHorizontal) {\r\n    object.setPositionByOrigin(\r\n      new fabric.Point(\r\n        isInVertical ? canvasWidth / 2 : objectCenter.x,\r\n        isInHorizontal ? canvasHeight / 2 : objectCenter.y\r\n      ),\r\n      'center',\r\n      'center'\r\n    );\r\n  }\r\n};\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n  drawVerticalLine,\r\n  drawHorizontalLine,\r\n  objectMovingObserver,\r\n} from '../utils/aligningGuidelines';\r\nimport {\r\n  showVerticalCenterLine,\r\n  showHorizontalCenterLine,\r\n  objectMovingCenterObserver,\r\n} from '../utils/centeringGuidelines';\r\n\r\nconst useGuidelines = (\r\n  isPlayer,\r\n  state,\r\n  canvas,\r\n  eventState,\r\n  eventDispatch,\r\n  dispatch,\r\n  isSaving,\r\n) => {\r\n  const [ctx, setCtx] = useState(null);\r\n  const [viewportTransform, setViewportTransform] = useState(null);\r\n  const [verticalLines, setVerticalLines] = useState([]);\r\n  const [horizontalLines, setHorizontalLines] = useState([]);\r\n  const [zoom, setZoom] = useState(1);\r\n\r\n  const [canvasWidth, setCanvasWidth] = useState(null);\r\n  const [canvasHeight, setCanvasHeight] = useState(null);\r\n  const [canvasWidthCenterMap, setCanvasWidthCenterMap] = useState({});\r\n  const [canvasHeightCenterMap, setCanvasHeightCenterMap] = useState({});\r\n  const [isInVerticalCenter, setIsInVerticalCenter] = useState(null);\r\n  const [isInHorizontalCenter, setIsInHorizontalCenter] = useState(null);\r\n\r\n  const aligningLineOffset = 5;\r\n  const aligningLineWidth = 1;\r\n  const aligningLineMargin = 4;\r\n  const centerLineMargin = 4;\r\n  const aligningLineColor = 'rgb(111, 123, 208)';\r\n  const centerLineWidth = 1;\r\n  const centerLineColor = 'rgb(111, 123, 208)';\r\n\r\n  const handleMouseDown = useCallback(() => {\r\n    setViewportTransform(canvas.viewportTransform);\r\n    setZoom(canvas.getZoom());\r\n  }, [canvas]);\r\n\r\n  const handleBeforeRender = useCallback(() => {\r\n    canvas.clearContext(canvas.contextTop);\r\n  }, [canvas]);\r\n\r\n  const handleMoving = useCallback(\r\n    (e) => {\r\n      objectMovingObserver(\r\n        e,\r\n        canvas,\r\n        viewportTransform,\r\n        aligningLineOffset,\r\n        setVerticalLines,\r\n        setHorizontalLines,\r\n        aligningLineMargin\r\n      );\r\n      objectMovingCenterObserver(\r\n        e,\r\n        canvas,\r\n        setIsInVerticalCenter,\r\n        setIsInHorizontalCenter,\r\n        canvasWidthCenterMap,\r\n        canvasHeightCenterMap,\r\n        canvasWidth,\r\n        canvasHeight\r\n      );\r\n    },\r\n    [\r\n      canvas,\r\n      viewportTransform,\r\n      canvasHeight,\r\n      canvasHeightCenterMap,\r\n      canvasWidth,\r\n      canvasWidthCenterMap,\r\n    ]\r\n  );\r\n\r\n  const handleAfterRender = useCallback(() => {\r\n    for (let i = verticalLines.length; i--; ) {\r\n      drawVerticalLine(\r\n        verticalLines[i],\r\n        ctx,\r\n        aligningLineWidth,\r\n        aligningLineColor,\r\n        viewportTransform,\r\n        zoom\r\n      );\r\n    }\r\n    for (let i = horizontalLines.length; i--; ) {\r\n      drawHorizontalLine(\r\n        horizontalLines[i],\r\n        ctx,\r\n        aligningLineWidth,\r\n        aligningLineColor,\r\n        viewportTransform,\r\n        zoom\r\n      );\r\n    }\r\n    if (isInVerticalCenter) {\r\n      showVerticalCenterLine(\r\n        canvasWidth / 2,\r\n        canvasHeight,\r\n        ctx,\r\n        centerLineColor,\r\n        centerLineWidth,\r\n        viewportTransform\r\n      );\r\n    }\r\n    if (isInHorizontalCenter) {\r\n      showHorizontalCenterLine(\r\n        canvasHeight / 2,\r\n        canvasWidth,\r\n        ctx,\r\n        centerLineColor,\r\n        centerLineWidth,\r\n        viewportTransform\r\n      );\r\n    }\r\n  }, [\r\n    ctx,\r\n    viewportTransform,\r\n    horizontalLines,\r\n    verticalLines,\r\n    zoom,\r\n    canvasHeight,\r\n    canvasWidth,\r\n    isInHorizontalCenter,\r\n    isInVerticalCenter,\r\n  ]);\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    setVerticalLines([]);\r\n    setHorizontalLines([]);\r\n    setIsInVerticalCenter(null);\r\n    setIsInHorizontalCenter(null);\r\n    canvas.requestRenderAll();\r\n  }, [canvas]);\r\n\r\n  const initGuidelines = useCallback(() => {\r\n    setCtx(canvas.getSelectionContext());\r\n    setCanvasWidth(canvas.getWidth() / canvas.getZoom());\r\n    setCanvasHeight(canvas.getHeight() / canvas.getZoom());\r\n    let widthMap = {};\r\n    let heightMap = {};\r\n    for (\r\n      let i = canvasWidth / 2 - centerLineMargin,\r\n        len = canvasWidth / 2 + centerLineMargin;\r\n      i <= len;\r\n      i++\r\n    ) {\r\n      widthMap[Math.round(i)] = true;\r\n    }\r\n    for (\r\n      let i = canvasHeight / 2 - centerLineMargin,\r\n        len = canvasHeight / 2 + centerLineMargin;\r\n      i <= len;\r\n      i++\r\n    ) {\r\n      heightMap[Math.round(i)] = true;\r\n    }\r\n    setCanvasWidthCenterMap(widthMap);\r\n    setCanvasHeightCenterMap(heightMap);\r\n  }, [canvasHeight, canvasWidth, canvas]);\r\n\r\n  const removelistneres = useCallback((canvas) => {\r\n    canvas.off('mouse:down');\r\n    canvas.off('object:moving');\r\n    canvas.off('mouse:up');\r\n    canvas.off('mouse:dblclick');\r\n    canvas.off('mouse:down:before');\r\n  }, []);\r\n\r\n  const removeRenderlistneres = useCallback((canvas) => {\r\n    canvas.off('before:render');\r\n    canvas.off('after:render');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (canvas) initGuidelines();\r\n  }, [state.shouldUpdateCanvasSize, canvas, initGuidelines]);\r\n\r\n  useEffect(() => {\r\n    if (canvas && ctx) {\r\n      canvas.on('mouse:down', handleMouseDown);\r\n      canvas.on('object:moving', (e) => {\r\n        if (isPlayer && !eventState.isMoving) {\r\n          eventDispatch({ type: 'setIsMoving', data: true });\r\n          dispatch({ type: 'setIsModifyingObject', data: true });\r\n        }\r\n        handleMoving(e);\r\n      });\r\n      canvas.on('mouse:up', (e) => {\r\n        if (isPlayer && e.button === 3) {\r\n          eventDispatch({ type: 'setRightClickEvent', data: e });\r\n          e.e.preventDefault();\r\n        }\r\n        handleMouseUp(e);\r\n      });\r\n      canvas.on('mouse:dblclick', (e) => {\r\n        if (\r\n          isPlayer &&\r\n          e.target &&\r\n          (e.target.type === 'customImage' || e.target.type === 'video')\r\n        ) {\r\n          eventDispatch({ type: 'setDbClickEvent', data: e });\r\n        }\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (canvas && ctx) removelistneres(canvas);\r\n    };\r\n  }, [\r\n    isPlayer,\r\n    eventState,\r\n    eventDispatch,\r\n    dispatch,\r\n    state.shouldUpdateCanvasSize,\r\n    removelistneres,\r\n    canvas,\r\n    ctx,\r\n    handleMouseUp,\r\n    handleMoving,\r\n    handleMouseDown,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (canvas && ctx && !isSaving) {\r\n      canvas.on('before:render', handleBeforeRender);\r\n      canvas.on('after:render', handleAfterRender);\r\n    } else if (isSaving) removeRenderlistneres(canvas);\r\n\r\n    return () => {\r\n      if (canvas && ctx) removeRenderlistneres(canvas);\r\n    };\r\n  }, [\r\n    state.shouldUpdateCanvasSize,\r\n    isSaving,\r\n    removeRenderlistneres,\r\n    canvas,\r\n    ctx,\r\n    handleAfterRender,\r\n    handleBeforeRender,\r\n  ]);\r\n};\r\n\r\nexport default useGuidelines;\r\n","import { useEffect } from 'react';\r\nimport {\r\n  updateImageStyle,\r\n  updateTextStyle,\r\n  updateShapeStyle,\r\n  updateSubtitlesStyle,\r\n  updateVideoStyle\r\n} from '../utils/updateObject';\r\n\r\nconst shapeArr = ['rect', 'circle', 'triangle', 'line'];\r\n\r\nconst useUpdateObject = (state, dispatch, canvas) => {\r\n  useEffect(() => {\r\n    if (state.shouldUpdateSubtitles) {\r\n      updateSubtitlesStyle(state, canvas, dispatch);\r\n    }\r\n    if (state.shouldUpdateText) {\r\n      updateTextStyle(state, canvas, dispatch);\r\n    }\r\n    if (\r\n      state.shouldUpdateShape &&\r\n      shapeArr.includes(state.currentObject.type)\r\n    ) {\r\n      updateShapeStyle(state, canvas, dispatch);\r\n    }\r\n    if (state.shouldUpdateImage && state.currentObject.type === 'customImage') {\r\n      updateImageStyle(state, canvas, dispatch);\r\n    }\r\n    if (state.shouldUpdateVideo) {\r\n      updateVideoStyle(state, canvas, dispatch);\r\n    }\r\n  }, [state, dispatch, canvas]);\r\n};\r\n\r\nexport default useUpdateObject;\r\n","import { checkResizeOffScreen } from \"../../../utils/checkOffScreen\";\r\n\r\nexport const updateCanvasStyle = (state, canvas, dispatch) => {\r\n  canvas.backgroundColor = state.backgroundColor;\r\n  canvas.requestRenderAll();\r\n  dispatch({ type: 'setShouldUpdateCanvas', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const setSize = (state, canvas) => {\r\n  let ratio = Math.min(\r\n    state.width / state.videoWidth,\r\n    state.height / state.videoHeight\r\n  );\r\n  canvas.setZoom(ratio);\r\n  canvas.setDimensions({\r\n    width: state.width,\r\n    height: state.height,\r\n  });\r\n  canvas.renderAll();\r\n};\r\n\r\nexport const updateCanvasSize = (state, canvas, dispatch) => {\r\n  dispatch({ type: 'setShouldUpdateCanvasSize', data: false });\r\n  if (canvas) {\r\n    canvas.discardActiveObject();\r\n    let isResize = canvas.resize !== state.resize;\r\n    canvas.resize = state.resize;\r\n    setSize(state, canvas);\r\n    if (isResize) {\r\n      let objects = canvas.getObjects();\r\n      for (let i = 0; i < objects.length; i++) {\r\n        let object = objects[i];\r\n        checkResizeOffScreen(object, canvas, dispatch);\r\n      }\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n    }\r\n    canvas.renderAll();\r\n  }\r\n};\r\n","import { useEffect } from 'react';\r\nimport { updateCanvasSize, updateCanvasStyle } from '../utils/updateCanvas';\r\n\r\nconst useUpdateCanvas = (state, dispatch, canvas) => {\r\n  useEffect(() => {\r\n    if (state.shouldUpdateCanvas) updateCanvasStyle(state, canvas, dispatch);\r\n    if (state.shouldUpdateCanvasSize) updateCanvasSize(state, canvas, dispatch);\r\n  }, [state, dispatch, canvas]);\r\n};\r\n\r\nexport default useUpdateCanvas;\r\n","import { useState, useEffect, useRef } from 'react';\r\nimport { fabric } from 'fabric';\r\nimport { setSize } from '../utils/updateCanvas';\r\nimport { loadAndUse } from '../utils/updateObject';\r\n\r\nconst loadCanvas = (\r\n  canvas,\r\n  canvasInfo,\r\n  shouldLoad,\r\n  isMounted,\r\n  state,\r\n  setCanvas,\r\n  setSpeakerVideos,\r\n  setObjectIdCount,\r\n  setFabricSub,\r\n  dispatch\r\n) => {\r\n  canvas.clear();\r\n  let videos = [];\r\n  let lastId = 1;\r\n  canvas.loadFromJSON(canvasInfo, () => {\r\n    if (isMounted.current) {\r\n      let objects = canvas.getObjects();\r\n      for (let i = 0; i < objects.length; i++) {\r\n        let obj = objects[i];\r\n        if (!shouldLoad && obj.type === 'video') canvas.remove(obj);\r\n        else if (obj.id === 'subtitle') {\r\n          setFabricSub(obj);\r\n          dispatch({ type: 'setIsSubtitles', data: true });\r\n          dispatch({\r\n            type: 'setSubtitlesState',\r\n            data: {\r\n              fontFamily: obj.fontFamily,\r\n              fontStyle: obj.fontStyle,\r\n              fontWeight: obj.fontWeight,\r\n              fontSize: obj.fontSize,\r\n              fill: obj.fill,\r\n              backgroundColor: obj.backgroundColor,\r\n            },\r\n          });\r\n          loadAndUse(canvas, obj, obj.fontFamily);\r\n        } else {\r\n          obj.id = lastId;\r\n          lastId++;\r\n          if (obj.type === 'customTextbox') {\r\n            loadAndUse(canvas, obj, obj.fontFamily);\r\n          } else if (obj.type === 'video') videos.push(obj);\r\n        }\r\n      }\r\n\r\n      setSize(state, canvas);\r\n      setObjectIdCount(lastId);\r\n      setCanvas(canvas);\r\n      if (shouldLoad) setSpeakerVideos(videos);\r\n    }\r\n  });\r\n};\r\n\r\nconst addCanvas = (\r\n  state,\r\n  info,\r\n  shouldLoad,\r\n  setCanvas,\r\n  isMounted,\r\n  setSpeakerVideos,\r\n  setObjectIdCount,\r\n  setFabricSub,\r\n  dispatch\r\n) => {\r\n  let canvas = new fabric.Canvas('canvas', {\r\n    width: state.videoWidth,\r\n    height: state.videoHeight,\r\n    resize: state.resize,\r\n    backgroundColor: 'rgba(255,255,255,1)',\r\n    preserveObjectStacking: true,\r\n    fireRightClick: true,\r\n    stopContextMenu: true,\r\n    uniScaleKey: null,\r\n    altActionKey: null,\r\n  });\r\n\r\n  if (info.canvas) {\r\n    loadCanvas(\r\n      canvas,\r\n      info.canvas,\r\n      shouldLoad,\r\n      isMounted,\r\n      state,\r\n      setCanvas,\r\n      setSpeakerVideos,\r\n      setObjectIdCount,\r\n      setFabricSub,\r\n      dispatch\r\n    );\r\n  } else {\r\n    setSize(state, canvas);\r\n    setCanvas(canvas);\r\n  }\r\n};\r\n\r\nconst useAddCanvas = (\r\n  editorState,\r\n  setCanvas,\r\n  info,\r\n  setIsCanvasData,\r\n  speakers,\r\n  setObjectIdCount,\r\n  setSpeakerVideos,\r\n  userAssets,\r\n  setFabricSub,\r\n  dispatch\r\n) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const isMounted = useRef(false);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad && editorState.width > 0 && userAssets) {\r\n      let isCanvas = info && info.canvas;\r\n      let shouldLoad = speakers.length === 0 && isCanvas;\r\n      if (shouldLoad) setIsCanvasData(true);\r\n      addCanvas(\r\n        editorState,\r\n        info,\r\n        shouldLoad,\r\n        setCanvas,\r\n        isMounted,\r\n        setSpeakerVideos,\r\n        setObjectIdCount,\r\n        setFabricSub,\r\n        dispatch\r\n      );\r\n      setIsFirstLoad(false);\r\n    }\r\n  }, [\r\n    speakers,\r\n    setCanvas,\r\n    editorState,\r\n    isFirstLoad,\r\n    info,\r\n    setIsCanvasData,\r\n    setObjectIdCount,\r\n    setSpeakerVideos,\r\n    userAssets,\r\n    setFabricSub,\r\n    dispatch,\r\n  ]);\r\n};\r\n\r\nexport default useAddCanvas;\r\n","import { useEffect, useState } from 'react';\r\nimport { fabric } from 'fabric';\r\nimport { checkResizeOffScreen } from '../../../utils/checkOffScreen';\r\n\r\nconst newVideo = (video, speaker, id) => {\r\n  return new fabric.Video(video, {\r\n    id,\r\n    src: video.src,\r\n    originalWidth: video.videoWidth,\r\n    originalHeight: video.videoHeight,\r\n    left: speaker.x,\r\n    top: speaker.y,\r\n    width: speaker.w,\r\n    height: speaker.h,\r\n    stroke: 'rgba(255,255,255,1)',\r\n    cropRect: { ...speaker },\r\n  });\r\n}\r\n\r\nconst useAddSpeakers = (\r\n  video,\r\n  canvas,\r\n  speakers,\r\n  objectIdCount,\r\n  setObjectIdCount,\r\n  isCanvasData,\r\n  setSpeakerVideos\r\n) => {\r\n  const [isFirtLoad, setIsFirtLoad] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (isFirtLoad && !isCanvasData && video && canvas) {\r\n      setIsFirtLoad(false);\r\n      let videos = [];\r\n      let lastId = objectIdCount;\r\n      if (speakers.length > 0) {\r\n        for (let i = 0; i < speakers.length; i++) {\r\n          let speaker = speakers[i];\r\n          let speakerVideo = newVideo(video, speaker, lastId);\r\n          canvas.add(speakerVideo);\r\n          lastId++;\r\n          checkResizeOffScreen(speakerVideo, canvas, null);\r\n          videos.push(speakerVideo);\r\n        }\r\n      } else {\r\n        let speakerVideo = newVideo(\r\n          video,\r\n          { w: video.videoWidth, h: video.videoHeight, x: 0, y: 0 },\r\n          lastId\r\n        );\r\n        canvas.add(speakerVideo);\r\n        lastId++;\r\n        checkResizeOffScreen(speakerVideo, canvas, null);\r\n        videos.push(speakerVideo);\r\n      }\r\n      setSpeakerVideos(videos);\r\n      setObjectIdCount(lastId);\r\n    }\r\n  }, [\r\n    isCanvasData,\r\n    objectIdCount,\r\n    setObjectIdCount,\r\n    video,\r\n    canvas,\r\n    isFirtLoad,\r\n    speakers,\r\n    setSpeakerVideos,\r\n  ]);\r\n};\r\n\r\nexport default useAddSpeakers;\r\n","import { useEffect, useCallback } from 'react';\r\n\r\nconst useClickListener = (canvas, state) => {\r\n  const clickHandler = useCallback(\r\n    (e) => {\r\n      if (\r\n        canvas &&\r\n        !state.isCropMode &&\r\n        !state.shouldCropMedia &&\r\n        !state.shouldReplaceImage\r\n      ) {\r\n        for (let i = 0; i < e.path.length; i++) {\r\n          if (e.path[i].id === 'canvasComponent') return;\r\n        }\r\n        canvas.discardActiveObject().requestRenderAll();\r\n      }\r\n    },\r\n    [canvas, state.isCropMode, state.shouldCropMedia, state.shouldReplaceImage]\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', clickHandler);\r\n    return () => document.removeEventListener('click', clickHandler);\r\n  }, [canvas, clickHandler]);\r\n};\r\n\r\nexport default useClickListener;\r\n","export default __webpack_public_path__ + \"static/media/downArrow.400d75ac.svg\";","export default __webpack_public_path__ + \"static/media/bold.d705790f.svg\";","export default __webpack_public_path__ + \"static/media/subBackground.dce1ffb0.svg\";","export default __webpack_public_path__ + \"static/media/italic.ee8b3de6.svg\";","export default __webpack_public_path__ + \"static/media/textLeft.37f6ba9c.svg\";","export default __webpack_public_path__ + \"static/media/textRight.67805ee0.svg\";","export default __webpack_public_path__ + \"static/media/textCenter.357cd59c.svg\";","export default __webpack_public_path__ + \"static/media/textJustify.3d19e46c.svg\";","const fonts =  [\r\n  'ABeeZee',\r\n  'Abel',\r\n  'Abhaya Libre',\r\n  'Abril Fatface',\r\n  'Aclonica',\r\n  'Acme',\r\n  'Actor',\r\n  'Adamina',\r\n  'Advent Pro',\r\n  'Aguafina Script',\r\n  'Akaya Kanadaka',\r\n  'Akaya Telivigala',\r\n  'Akronim',\r\n  'Aladin',\r\n  'Alata',\r\n  'Alatsi',\r\n  'Aldrich',\r\n  'Alef',\r\n  'Alegreya',\r\n  'Alegreya SC',\r\n  'Alegreya Sans',\r\n  'Alegreya Sans SC',\r\n  'Aleo',\r\n  'Alex Brush',\r\n  'Alfa Slab One',\r\n  'Alice',\r\n  'Alike',\r\n  'Alike Angular',\r\n  'Allan',\r\n  'Allerta',\r\n  'Allerta Stencil',\r\n  'Allura',\r\n  'Almarai',\r\n  'Almendra',\r\n  'Almendra Display',\r\n  'Almendra SC',\r\n  'Amarante',\r\n  'Amaranth',\r\n  'Amatic SC',\r\n  'Amethysta',\r\n  'Amiko',\r\n  'Amiri',\r\n  'Amita',\r\n  'Anaheim',\r\n  'Andada',\r\n  'Andika',\r\n  'Andika New Basic',\r\n  'Angkor',\r\n  'Annie Use Your Telescope',\r\n  'Anonymous Pro',\r\n  'Antic',\r\n  'Antic Didone',\r\n  'Antic Slab',\r\n  'Anton',\r\n  'Arapey',\r\n  'Arbutus',\r\n  'Arbutus Slab',\r\n  'Architects Daughter',\r\n  'Archivo',\r\n  'Archivo Black',\r\n  'Archivo Narrow',\r\n  'Aref Ruqaa',\r\n  'Arima Madurai',\r\n  'Arimo',\r\n  'Arizonia',\r\n  'Armata',\r\n  'Arsenal',\r\n  'Artifika',\r\n  'Arvo',\r\n  'Arya',\r\n  'Asap',\r\n  'Asap Condensed',\r\n  'Asar',\r\n  'Asset',\r\n  'Assistant',\r\n  'Astloch',\r\n  'Asul',\r\n  'Athiti',\r\n  'Atma',\r\n  'Atomic Age',\r\n  'Aubrey',\r\n  'Audiowide',\r\n  'Autour One',\r\n  'Average',\r\n  'Average Sans',\r\n  'Averia Gruesa Libre',\r\n  'Averia Libre',\r\n  'Averia Sans Libre',\r\n  'Averia Serif Libre',\r\n  'B612',\r\n  'B612 Mono',\r\n  'Bad Script',\r\n  'Bahiana',\r\n  'Bahianita',\r\n  'Bai Jamjuree',\r\n  'Ballet',\r\n  'Baloo 2',\r\n  'Baloo Bhai 2',\r\n  'Baloo Bhaina 2',\r\n  'Baloo Chettan 2',\r\n  'Baloo Da 2',\r\n  'Baloo Paaji 2',\r\n  'Baloo Tamma 2',\r\n  'Baloo Tammudu 2',\r\n  'Baloo Thambi 2',\r\n  'Balsamiq Sans',\r\n  'Balthazar',\r\n  'Bangers',\r\n  'Barlow',\r\n  'Barlow Condensed',\r\n  'Barlow Semi Condensed',\r\n  'Barriecito',\r\n  'Barrio',\r\n  'Basic',\r\n  'Baskervville',\r\n  'Battambang',\r\n  'Baumans',\r\n  'Bayon',\r\n  'Be Vietnam',\r\n  'Bebas Neue',\r\n  'Belgrano',\r\n  'Bellefair',\r\n  'Belleza',\r\n  'Bellota',\r\n  'Bellota Text',\r\n  'BenchNine',\r\n  'Benne',\r\n  'Bentham',\r\n  'Berkshire Swash',\r\n  'Beth Ellen',\r\n  'Bevan',\r\n  'Big Shoulders Display',\r\n  'Big Shoulders Inline Display',\r\n  'Big Shoulders Inline Text',\r\n  'Big Shoulders Stencil Display',\r\n  'Big Shoulders Stencil Text',\r\n  'Big Shoulders Text',\r\n  'Bigelow Rules',\r\n  'Bigshot One',\r\n  'Bilbo',\r\n  'Bilbo Swash Caps',\r\n  'BioRhyme',\r\n  'BioRhyme Expanded',\r\n  'Biryani',\r\n  'Bitter',\r\n  'Black And White Picture',\r\n  'Black Han Sans',\r\n  'Black Ops One',\r\n  'Blinker',\r\n  'Bodoni Moda',\r\n  'Bokor',\r\n  'Bonbon',\r\n  'Boogaloo',\r\n  'Bowlby One',\r\n  'Bowlby One SC',\r\n  'Brawler',\r\n  'Bree Serif',\r\n  'Brygada 1918',\r\n  'Bubblegum Sans',\r\n  'Bubbler One',\r\n  'Buda',\r\n  'Buenard',\r\n  'Bungee',\r\n  'Bungee Hairline',\r\n  'Bungee Inline',\r\n  'Bungee Outline',\r\n  'Bungee Shade',\r\n  'Butcherman',\r\n  'Butterfly Kids',\r\n  'Cabin',\r\n  'Cabin Condensed',\r\n  'Cabin Sketch',\r\n  'Caesar Dressing',\r\n  'Cagliostro',\r\n  'Cairo',\r\n  'Caladea',\r\n  'Calistoga',\r\n  'Calligraffitti',\r\n  'Cambay',\r\n  'Cambo',\r\n  'Candal',\r\n  'Cantarell',\r\n  'Cantata One',\r\n  'Cantora One',\r\n  'Capriola',\r\n  'Cardo',\r\n  'Carme',\r\n  'Carrois Gothic',\r\n  'Carrois Gothic SC',\r\n  'Carter One',\r\n  'Castoro',\r\n  'Catamaran',\r\n  'Caudex',\r\n  'Caveat',\r\n  'Caveat Brush',\r\n  'Cedarville Cursive',\r\n  'Ceviche One',\r\n  'Chakra Petch',\r\n  'Changa',\r\n  'Changa One',\r\n  'Chango',\r\n  'Charm',\r\n  'Charmonman',\r\n  'Chathura',\r\n  'Chau Philomene One',\r\n  'Chela One',\r\n  'Chelsea Market',\r\n  'Chenla',\r\n  'Cherry Cream Soda',\r\n  'Cherry Swash',\r\n  'Chewy',\r\n  'Chicle',\r\n  'Chilanka',\r\n  'Chivo',\r\n  'Chonburi',\r\n  'Cinzel',\r\n  'Cinzel Decorative',\r\n  'Clicker Script',\r\n  'Coda',\r\n  'Coda Caption',\r\n  'Codystar',\r\n  'Coiny',\r\n  'Combo',\r\n  'Comfortaa',\r\n  'Comic Neue',\r\n  'Coming Soon',\r\n  'Commissioner',\r\n  'Concert One',\r\n  'Condiment',\r\n  'Content',\r\n  'Contrail One',\r\n  'Convergence',\r\n  'Cookie',\r\n  'Copse',\r\n  'Corben',\r\n  'Cormorant',\r\n  'Cormorant Garamond',\r\n  'Cormorant Infant',\r\n  'Cormorant SC',\r\n  'Cormorant Unicase',\r\n  'Cormorant Upright',\r\n  'Courgette',\r\n  'Courier Prime',\r\n  'Cousine',\r\n  'Coustard',\r\n  'Covered By Your Grace',\r\n  'Crafty Girls',\r\n  'Creepster',\r\n  'Crete Round',\r\n  'Crimson Pro',\r\n  'Crimson Text',\r\n  'Croissant One',\r\n  'Crushed',\r\n  'Cuprum',\r\n  'Cute Font',\r\n  'Cutive',\r\n  'Cutive Mono',\r\n  'DM Mono',\r\n  'DM Sans',\r\n  'DM Serif Display',\r\n  'DM Serif Text',\r\n  'Damion',\r\n  'Dancing Script',\r\n  'Dangrek',\r\n  'Darker Grotesque',\r\n  'David Libre',\r\n  'Dawning of a New Day',\r\n  'Days One',\r\n  'Dekko',\r\n  'Dela Gothic One',\r\n  'Delius',\r\n  'Delius Swash Caps',\r\n  'Delius Unicase',\r\n  'Della Respira',\r\n  'Denk One',\r\n  'Devonshire',\r\n  'Dhurjati',\r\n  'Didact Gothic',\r\n  'Diplomata',\r\n  'Diplomata SC',\r\n  'Do Hyeon',\r\n  'Dokdo',\r\n  'Domine',\r\n  'Donegal One',\r\n  'Doppio One',\r\n  'Dorsa',\r\n  'Dosis',\r\n  'DotGothic16',\r\n  'Dr Sugiyama',\r\n  'Duru Sans',\r\n  'Dynalight',\r\n  'EB Garamond',\r\n  'Eagle Lake',\r\n  'East Sea Dokdo',\r\n  'Eater',\r\n  'Economica',\r\n  'Eczar',\r\n  'El Messiri',\r\n  'Electrolize',\r\n  'Elsie',\r\n  'Elsie Swash Caps',\r\n  'Emblema One',\r\n  'Emilys Candy',\r\n  'Encode Sans',\r\n  'Encode Sans Condensed',\r\n  'Encode Sans Expanded',\r\n  'Encode Sans Semi Condensed',\r\n  'Encode Sans Semi Expanded',\r\n  'Engagement',\r\n  'Englebert',\r\n  'Enriqueta',\r\n  'Epilogue',\r\n  'Erica One',\r\n  'Esteban',\r\n  'Euphoria Script',\r\n  'Ewert',\r\n  'Exo',\r\n  'Exo 2',\r\n  'Expletus Sans',\r\n  'Fahkwang',\r\n  'Fanwood Text',\r\n  'Farro',\r\n  'Farsan',\r\n  'Fascinate',\r\n  'Fascinate Inline',\r\n  'Faster One',\r\n  'Fasthand',\r\n  'Fauna One',\r\n  'Faustina',\r\n  'Federant',\r\n  'Federo',\r\n  'Felipa',\r\n  'Fenix',\r\n  'Finger Paint',\r\n  'Fira Code',\r\n  'Fira Mono',\r\n  'Fira Sans',\r\n  'Fira Sans Condensed',\r\n  'Fira Sans Extra Condensed',\r\n  'Fjalla One',\r\n  'Fjord One',\r\n  'Flamenco',\r\n  'Flavors',\r\n  'Fondamento',\r\n  'Fontdiner Swanky',\r\n  'Forum',\r\n  'Francois One',\r\n  'Frank Ruhl Libre',\r\n  'Fraunces',\r\n  'Freckle Face',\r\n  'Fredericka the Great',\r\n  'Fredoka One',\r\n  'Freehand',\r\n  'Fresca',\r\n  'Frijole',\r\n  'Fruktur',\r\n  'Fugaz One',\r\n  'GFS Didot',\r\n  'GFS Neohellenic',\r\n  'Gabriela',\r\n  'Gaegu',\r\n  'Gafata',\r\n  'Galada',\r\n  'Galdeano',\r\n  'Galindo',\r\n  'Gamja Flower',\r\n  'Gayathri',\r\n  'Gelasio',\r\n  'Gentium Basic',\r\n  'Gentium Book Basic',\r\n  'Geo',\r\n  'Geostar',\r\n  'Geostar Fill',\r\n  'Germania One',\r\n  'Gidugu',\r\n  'Gilda Display',\r\n  'Girassol',\r\n  'Give You Glory',\r\n  'Glass Antiqua',\r\n  'Glegoo',\r\n  'Gloria Hallelujah',\r\n  'Goblin One',\r\n  'Gochi Hand',\r\n  'Goldman',\r\n  'Gorditas',\r\n  'Gothic A1',\r\n  'Gotu',\r\n  'Goudy Bookletter 1911',\r\n  'Graduate',\r\n  'Grand Hotel',\r\n  'Grandstander',\r\n  'Gravitas One',\r\n  'Great Vibes',\r\n  'Grenze',\r\n  'Grenze Gotisch',\r\n  'Griffy',\r\n  'Gruppo',\r\n  'Gudea',\r\n  'Gugi',\r\n  'Gupter',\r\n  'Gurajada',\r\n  'Habibi',\r\n  'Hachi Maru Pop',\r\n  'Halant',\r\n  'Hammersmith One',\r\n  'Hanalei',\r\n  'Hanalei Fill',\r\n  'Handlee',\r\n  'Hanuman',\r\n  'Happy Monkey',\r\n  'Harmattan',\r\n  'Headland One',\r\n  'Heebo',\r\n  'Henny Penny',\r\n  'Hepta Slab',\r\n  'Herr Von Muellerhoff',\r\n  'Hi Melody',\r\n  'Hind',\r\n  'Hind Guntur',\r\n  'Hind Madurai',\r\n  'Hind Siliguri',\r\n  'Hind Vadodara',\r\n  'Holtwood One SC',\r\n  'Homemade Apple',\r\n  'Homenaje',\r\n  'IBM Plex Mono',\r\n  'IBM Plex Sans',\r\n  'IBM Plex Sans Condensed',\r\n  'IBM Plex Serif',\r\n  'IM Fell DW Pica',\r\n  'IM Fell DW Pica SC',\r\n  'IM Fell Double Pica',\r\n  'IM Fell Double Pica SC',\r\n  'IM Fell English',\r\n  'IM Fell English SC',\r\n  'IM Fell French Canon',\r\n  'IM Fell French Canon SC',\r\n  'IM Fell Great Primer',\r\n  'IM Fell Great Primer SC',\r\n  'Ibarra Real Nova',\r\n  'Iceberg',\r\n  'Iceland',\r\n  'Imbue',\r\n  'Imprima',\r\n  'Inconsolata',\r\n  'Inder',\r\n  'Indie Flower',\r\n  'Inika',\r\n  'Inknut Antiqua',\r\n  'Inria Sans',\r\n  'Inria Serif',\r\n  'Inter',\r\n  'Irish Grover',\r\n  'Istok Web',\r\n  'Italiana',\r\n  'Italianno',\r\n  'Itim',\r\n  'Jacques Francois',\r\n  'Jacques Francois Shadow',\r\n  'Jaldi',\r\n  'JetBrains Mono',\r\n  'Jim Nightshade',\r\n  'Jockey One',\r\n  'Jolly Lodger',\r\n  'Jomhuria',\r\n  'Jomolhari',\r\n  'Josefin Sans',\r\n  'Josefin Slab',\r\n  'Jost',\r\n  'Joti One',\r\n  'Jua',\r\n  'Judson',\r\n  'Julee',\r\n  'Julius Sans One',\r\n  'Junge',\r\n  'Jura',\r\n  'Just Another Hand',\r\n  'Just Me Again Down Here',\r\n  'K2D',\r\n  'Kadwa',\r\n  'Kalam',\r\n  'Kameron',\r\n  'Kanit',\r\n  'Kantumruy',\r\n  'Karla',\r\n  'Karma',\r\n  'Katibeh',\r\n  'Kaushan Script',\r\n  'Kavivanar',\r\n  'Kavoon',\r\n  'Kdam Thmor',\r\n  'Keania One',\r\n  'Kelly Slab',\r\n  'Kenia',\r\n  'Khand',\r\n  'Khmer',\r\n  'Khula',\r\n  'Kirang Haerang',\r\n  'Kite One',\r\n  'Kiwi Maru',\r\n  'Knewave',\r\n  'KoHo',\r\n  'Kodchasan',\r\n  'Kosugi',\r\n  'Kosugi Maru',\r\n  'Kotta One',\r\n  'Koulen',\r\n  'Kranky',\r\n  'Kreon',\r\n  'Kristi',\r\n  'Krona One',\r\n  'Krub',\r\n  'Kufam',\r\n  'Kulim Park',\r\n  'Kumar One',\r\n  'Kumar One Outline',\r\n  'Kumbh Sans',\r\n  'Kurale',\r\n  'La Belle Aurore',\r\n  'Lacquer',\r\n  'Laila',\r\n  'Lakki Reddy',\r\n  'Lalezar',\r\n  'Lancelot',\r\n  'Langar',\r\n  'Lateef',\r\n  'Lato',\r\n  'League Script',\r\n  'Leckerli One',\r\n  'Ledger',\r\n  'Lekton',\r\n  'Lemon',\r\n  'Lemonada',\r\n  'Lexend',\r\n  'Lexend Deca',\r\n  'Lexend Exa',\r\n  'Lexend Giga',\r\n  'Lexend Mega',\r\n  'Lexend Peta',\r\n  'Lexend Tera',\r\n  'Lexend Zetta',\r\n  'Libre Barcode 128',\r\n  'Libre Barcode 128 Text',\r\n  'Libre Barcode 39',\r\n  'Libre Barcode 39 Extended',\r\n  'Libre Barcode 39 Extended Text',\r\n  'Libre Barcode 39 Text',\r\n  'Libre Barcode EAN13 Text',\r\n  'Libre Baskerville',\r\n  'Libre Caslon Display',\r\n  'Libre Caslon Text',\r\n  'Libre Franklin',\r\n  'Life Savers',\r\n  'Lilita One',\r\n  'Lily Script One',\r\n  'Limelight',\r\n  'Linden Hill',\r\n  'Literata',\r\n  'Liu Jian Mao Cao',\r\n  'Livvic',\r\n  'Lobster',\r\n  'Lobster Two',\r\n  'Londrina Outline',\r\n  'Londrina Shadow',\r\n  'Londrina Sketch',\r\n  'Londrina Solid',\r\n  'Long Cang',\r\n  'Lora',\r\n  'Love Ya Like A Sister',\r\n  'Loved by the King',\r\n  'Lovers Quarrel',\r\n  'Luckiest Guy',\r\n  'Lusitana',\r\n  'Lustria',\r\n  'M PLUS 1p',\r\n  'M PLUS Rounded 1c',\r\n  'Ma Shan Zheng',\r\n  'Macondo',\r\n  'Macondo Swash Caps',\r\n  'Mada',\r\n  'Magra',\r\n  'Maiden Orange',\r\n  'Maitree',\r\n  'Major Mono Display',\r\n  'Mako',\r\n  'Mali',\r\n  'Mallanna',\r\n  'Mandali',\r\n  'Manjari',\r\n  'Manrope',\r\n  'Mansalva',\r\n  'Manuale',\r\n  'Marcellus',\r\n  'Marcellus SC',\r\n  'Marck Script',\r\n  'Margarine',\r\n  'Markazi Text',\r\n  'Marko One',\r\n  'Marmelad',\r\n  'Martel',\r\n  'Martel Sans',\r\n  'Marvel',\r\n  'Mate',\r\n  'Mate SC',\r\n  'Maven Pro',\r\n  'McLaren',\r\n  'Meddon',\r\n  'MedievalSharp',\r\n  'Medula One',\r\n  'Meera Inimai',\r\n  'Megrim',\r\n  'Meie Script',\r\n  'Merienda',\r\n  'Merienda One',\r\n  'Merriweather',\r\n  'Merriweather Sans',\r\n  'Metal',\r\n  'Metal Mania',\r\n  'Metamorphous',\r\n  'Metrophobic',\r\n  'Michroma',\r\n  'Milonga',\r\n  'Miltonian',\r\n  'Miltonian Tattoo',\r\n  'Mina',\r\n  'Miniver',\r\n  'Miriam Libre',\r\n  'Mirza',\r\n  'Miss Fajardose',\r\n  'Mitr',\r\n  'Modak',\r\n  'Modern Antiqua',\r\n  'Mogra',\r\n  'Molengo',\r\n  'Molle',\r\n  'Monda',\r\n  'Monofett',\r\n  'Monoton',\r\n  'Monsieur La Doulaise',\r\n  'Montaga',\r\n  'Montez',\r\n  'Montserrat',\r\n  'Montserrat Alternates',\r\n  'Montserrat Subrayada',\r\n  'Moul',\r\n  'Moulpali',\r\n  'Mountains of Christmas',\r\n  'Mouse Memoirs',\r\n  'Mr Bedfort',\r\n  'Mr Dafoe',\r\n  'Mr De Haviland',\r\n  'Mrs Saint Delafield',\r\n  'Mrs Sheppards',\r\n  'Mukta',\r\n  'Mukta Mahee',\r\n  'Mukta Malar',\r\n  'Mukta Vaani',\r\n  'Mulish',\r\n  'MuseoModerno',\r\n  'Mystery Quest',\r\n  'NTR',\r\n  'Nanum Brush Script',\r\n  'Nanum Gothic',\r\n  'Nanum Gothic Coding',\r\n  'Nanum Myeongjo',\r\n  'Nanum Pen Script',\r\n  'Nerko One',\r\n  'Neucha',\r\n  'Neuton',\r\n  'New Rocker',\r\n  'New Tegomin',\r\n  'News Cycle',\r\n  'Newsreader',\r\n  'Niconne',\r\n  'Niramit',\r\n  'Nixie One',\r\n  'Nobile',\r\n  'Nokora',\r\n  'Norican',\r\n  'Nosifer',\r\n  'Notable',\r\n  'Nothing You Could Do',\r\n  'Noticia Text',\r\n  'Noto Sans',\r\n  'Noto Sans HK',\r\n  'Noto Sans JP',\r\n  'Noto Sans KR',\r\n  'Noto Sans SC',\r\n  'Noto Sans TC',\r\n  'Noto Serif',\r\n  'Noto Serif JP',\r\n  'Noto Serif KR',\r\n  'Noto Serif SC',\r\n  'Noto Serif TC',\r\n  'Nova Cut',\r\n  'Nova Flat',\r\n  'Nova Mono',\r\n  'Nova Oval',\r\n  'Nova Round',\r\n  'Nova Script',\r\n  'Nova Slim',\r\n  'Nova Square',\r\n  'Numans',\r\n  'Nunito',\r\n  'Nunito Sans',\r\n  'Odibee Sans',\r\n  'Odor Mean Chey',\r\n  'Offside',\r\n  'Oi',\r\n  'Old Standard TT',\r\n  'Oldenburg',\r\n  'Oleo Script',\r\n  'Oleo Script Swash Caps',\r\n  'Open Sans',\r\n  'Open Sans Condensed',\r\n  'Oranienbaum',\r\n  'Orbitron',\r\n  'Oregano',\r\n  'Orienta',\r\n  'Original Surfer',\r\n  'Oswald',\r\n  'Over the Rainbow',\r\n  'Overlock',\r\n  'Overlock SC',\r\n  'Overpass',\r\n  'Overpass Mono',\r\n  'Ovo',\r\n  'Oxanium',\r\n  'Oxygen',\r\n  'Oxygen Mono',\r\n  'PT Mono',\r\n  'PT Sans',\r\n  'PT Sans Caption',\r\n  'PT Sans Narrow',\r\n  'PT Serif',\r\n  'PT Serif Caption',\r\n  'Pacifico',\r\n  'Padauk',\r\n  'Palanquin',\r\n  'Palanquin Dark',\r\n  'Pangolin',\r\n  'Paprika',\r\n  'Parisienne',\r\n  'Passero One',\r\n  'Passion One',\r\n  'Pathway Gothic One',\r\n  'Patrick Hand',\r\n  'Patrick Hand SC',\r\n  'Pattaya',\r\n  'Patua One',\r\n  'Pavanam',\r\n  'Paytone One',\r\n  'Peddana',\r\n  'Peralta',\r\n  'Permanent Marker',\r\n  'Petit Formal Script',\r\n  'Petrona',\r\n  'Philosopher',\r\n  'Piazzolla',\r\n  'Piedra',\r\n  'Pinyon Script',\r\n  'Pirata One',\r\n  'Plaster',\r\n  'Play',\r\n  'Playball',\r\n  'Playfair Display',\r\n  'Playfair Display SC',\r\n  'Podkova',\r\n  'Poiret One',\r\n  'Poller One',\r\n  'Poly',\r\n  'Pompiere',\r\n  'Pontano Sans',\r\n  'Poor Story',\r\n  'Poppins',\r\n  'Port Lligat Sans',\r\n  'Port Lligat Slab',\r\n  'Potta One',\r\n  'Pragati Narrow',\r\n  'Prata',\r\n  'Preahvihear',\r\n  'Press Start 2P',\r\n  'Pridi',\r\n  'Princess Sofia',\r\n  'Prociono',\r\n  'Prompt',\r\n  'Prosto One',\r\n  'Proza Libre',\r\n  'Public Sans',\r\n  'Puritan',\r\n  'Purple Purse',\r\n  'Quando',\r\n  'Quantico',\r\n  'Quattrocento',\r\n  'Quattrocento Sans',\r\n  'Questrial',\r\n  'Quicksand',\r\n  'Quintessential',\r\n  'Qwigley',\r\n  'Racing Sans One',\r\n  'Radley',\r\n  'Rajdhani',\r\n  'Rakkas',\r\n  'Raleway',\r\n  'Raleway Dots',\r\n  'Ramabhadra',\r\n  'Ramaraja',\r\n  'Rambla',\r\n  'Rammetto One',\r\n  'Ranchers',\r\n  'Rancho',\r\n  'Ranga',\r\n  'Rasa',\r\n  'Rationale',\r\n  'Ravi Prakash',\r\n  'Recursive',\r\n  'Red Hat Display',\r\n  'Red Hat Text',\r\n  'Red Rose',\r\n  'Redressed',\r\n  'Reem Kufi',\r\n  'Reenie Beanie',\r\n  'Reggae One',\r\n  'Revalia',\r\n  'Rhodium Libre',\r\n  'Ribeye',\r\n  'Ribeye Marrow',\r\n  'Righteous',\r\n  'Risque',\r\n  'Roboto',\r\n  'Roboto Condensed',\r\n  'Roboto Mono',\r\n  'Roboto Slab',\r\n  'Rochester',\r\n  'Rock Salt',\r\n  'RocknRoll One',\r\n  'Rokkitt',\r\n  'Romanesco',\r\n  'Ropa Sans',\r\n  'Rosario',\r\n  'Rosarivo',\r\n  'Rouge Script',\r\n  'Rowdies',\r\n  'Rozha One',\r\n  'Rubik',\r\n  'Rubik Mono One',\r\n  'Ruda',\r\n  'Rufina',\r\n  'Ruge Boogie',\r\n  'Ruluko',\r\n  'Rum Raisin',\r\n  'Ruslan Display',\r\n  'Russo One',\r\n  'Ruthie',\r\n  'Rye',\r\n  'Sacramento',\r\n  'Sahitya',\r\n  'Sail',\r\n  'Saira',\r\n  'Saira Condensed',\r\n  'Saira Extra Condensed',\r\n  'Saira Semi Condensed',\r\n  'Saira Stencil One',\r\n  'Salsa',\r\n  'Sanchez',\r\n  'Sancreek',\r\n  'Sansita',\r\n  'Sansita Swashed',\r\n  'Sarabun',\r\n  'Sarala',\r\n  'Sarina',\r\n  'Sarpanch',\r\n  'Satisfy',\r\n  'Sawarabi Gothic',\r\n  'Sawarabi Mincho',\r\n  'Scada',\r\n  'Scheherazade',\r\n  'Schoolbell',\r\n  'Scope One',\r\n  'Seaweed Script',\r\n  'Secular One',\r\n  'Sedgwick Ave',\r\n  'Sedgwick Ave Display',\r\n  'Sen',\r\n  'Sevillana',\r\n  'Seymour One',\r\n  'Shadows Into Light',\r\n  'Shadows Into Light Two',\r\n  'Shanti',\r\n  'Share',\r\n  'Share Tech',\r\n  'Share Tech Mono',\r\n  'Shippori Mincho',\r\n  'Shippori Mincho B1',\r\n  'Shojumaru',\r\n  'Short Stack',\r\n  'Shrikhand',\r\n  'Siemreap',\r\n  'Sigmar One',\r\n  'Signika',\r\n  'Signika Negative',\r\n  'Simonetta',\r\n  'Single Day',\r\n  'Sintony',\r\n  'Sirin Stencil',\r\n  'Six Caps',\r\n  'Skranji',\r\n  'Slabo 13px',\r\n  'Slabo 27px',\r\n  'Slackey',\r\n  'Smokum',\r\n  'Smythe',\r\n  'Sniglet',\r\n  'Snippet',\r\n  'Snowburst One',\r\n  'Sofadi One',\r\n  'Sofia',\r\n  'Solway',\r\n  'Song Myung',\r\n  'Sonsie One',\r\n  'Sora',\r\n  'Sorts Mill Goudy',\r\n  'Source Code Pro',\r\n  'Source Sans Pro',\r\n  'Source Serif Pro',\r\n  'Space Grotesk',\r\n  'Space Mono',\r\n  'Spartan',\r\n  'Special Elite',\r\n  'Spectral',\r\n  'Spectral SC',\r\n  'Spicy Rice',\r\n  'Spinnaker',\r\n  'Spirax',\r\n  'Squada One',\r\n  'Sree Krushnadevaraya',\r\n  'Sriracha',\r\n  'Srisakdi',\r\n  'Staatliches',\r\n  'Stalemate',\r\n  'Stalinist One',\r\n  'Stardos Stencil',\r\n  'Stick',\r\n  'Stint Ultra Condensed',\r\n  'Stint Ultra Expanded',\r\n  'Stoke',\r\n  'Strait',\r\n  'Stylish',\r\n  'Sue Ellen Francisco',\r\n  'Suez One',\r\n  'Sulphur Point',\r\n  'Sumana',\r\n  'Sunflower',\r\n  'Sunshiney',\r\n  'Supermercado One',\r\n  'Sura',\r\n  'Suranna',\r\n  'Suravaram',\r\n  'Suwannaphum',\r\n  'Swanky and Moo Moo',\r\n  'Syncopate',\r\n  'Syne',\r\n  'Syne Mono',\r\n  'Syne Tactile',\r\n  'Tajawal',\r\n  'Tangerine',\r\n  'Taprom',\r\n  'Tauri',\r\n  'Taviraj',\r\n  'Teko',\r\n  'Telex',\r\n  'Tenali Ramakrishna',\r\n  'Tenor Sans',\r\n  'Text Me One',\r\n  'Texturina',\r\n  'Thasadith',\r\n  'The Girl Next Door',\r\n  'Tienne',\r\n  'Tillana',\r\n  'Timmana',\r\n  'Tinos',\r\n  'Titan One',\r\n  'Titillium Web',\r\n  'Tomorrow',\r\n  'Trade Winds',\r\n  'Train One',\r\n  'Trirong',\r\n  'Trispace',\r\n  'Trocchi',\r\n  'Trochut',\r\n  'Truculenta',\r\n  'Trykker',\r\n  'Tulpen One',\r\n  'Turret Road',\r\n  'Ubuntu',\r\n  'Ubuntu Condensed',\r\n  'Ubuntu Mono',\r\n  'Ultra',\r\n  'Uncial Antiqua',\r\n  'Underdog',\r\n  'Unica One',\r\n  'UnifrakturCook',\r\n  'UnifrakturMaguntia',\r\n  'Unkempt',\r\n  'Unlock',\r\n  'Unna',\r\n  'VT323',\r\n  'Vampiro One',\r\n  'Varela',\r\n  'Varela Round',\r\n  'Varta',\r\n  'Vast Shadow',\r\n  'Vesper Libre',\r\n  'Viaoda Libre',\r\n  'Vibes',\r\n  'Vibur',\r\n  'Vidaloka',\r\n  'Viga',\r\n  'Voces',\r\n  'Volkhov',\r\n  'Vollkorn',\r\n  'Vollkorn SC',\r\n  'Voltaire',\r\n  'Waiting for the Sunrise',\r\n  'Wallpoet',\r\n  'Walter Turncoat',\r\n  'Warnes',\r\n  'Wellfleet',\r\n  'Wendy One',\r\n  'Wire One',\r\n  'Work Sans',\r\n  'Xanh Mono',\r\n  'Yanone Kaffeesatz',\r\n  'Yantramanav',\r\n  'Yatra One',\r\n  'Yellowtail',\r\n  'Yeon Sung',\r\n  'Yeseva One',\r\n  'Yesteryear',\r\n  'Yrsa',\r\n  'Yusei Magic',\r\n  'ZCOOL KuaiLe',\r\n  'ZCOOL QingKe HuangYou',\r\n  'ZCOOL XiaoWei',\r\n  'Zeyada',\r\n  'Zhi Mang Xing',\r\n  'Zilla Slab',\r\n  'Zilla Slab Highlight'\r\n];\r\n\r\nexport default fonts;","import React, { useState } from 'react';\r\nimport styles from './FontsDropdown.module.css';\r\nimport search from '../../../../assets/editor/search.svg';\r\nimport fonts from './fontsData';\r\n\r\nconst FontsDropdown = ({ setIsDropDown, dispatch, isSub }) => {\r\n  const [input, setInput] = useState('');\r\n  const optionsClickHandler = (e) => {\r\n    if (e.target.tagName === 'LI') {\r\n      let type = isSub ? 'setSubtitlesFontFamily' : 'setFontFamily';\r\n      dispatch({ type, data: e.target.textContent });\r\n      dispatch({ type: 'setShowToolbar', data: false });\r\n      setIsDropDown(false);\r\n    }\r\n  };\r\n  \r\n  const options = fonts\r\n    .filter((font) => {\r\n      return font.toLowerCase().includes(input.toLowerCase());\r\n    })\r\n    .map((font) => {\r\n      return (\r\n        <li className={styles.FontOption} key={font}>\r\n          {font}\r\n        </li>\r\n      );\r\n    });\r\n\r\n  return (\r\n    <div className={styles.FontsDropdown}>\r\n      <div className={styles.SearchContainer}>\r\n        <img className={styles.SearchSvg} src={search} alt='search' />\r\n        <input\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          className={styles.SearchInput}\r\n          placeholder='Search'\r\n          type='text'\r\n        />\r\n      </div>\r\n      <ul className={styles.FontOptionsContainer} onClick={optionsClickHandler}>\r\n        {options}\r\n      </ul>\r\n      <div className={styles.UploadFontContainer}>\r\n        <button className={styles.UploadFontButton}>Upload font</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FontsDropdown;\r\n","import React from 'react';\r\nimport styles from './FontSizeDropdown.module.css';\r\n\r\nconst FontSizeDropdown = ({ setIsDropDown, dispatch, isSub }) => {\r\n  const optionsClickHandler = (e) => {\r\n    if (e.target.tagName === 'LI') {\r\n      let type = isSub ? 'setSubtitlesFontSize' : 'setFontSize';\r\n      dispatch({ type, data: e.target.textContent });\r\n      dispatch({ type: 'setShowToolbar', data: false });\r\n      setIsDropDown(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ul className={styles.FontSizeDropdown} onClick={optionsClickHandler}>\r\n      <li className={styles.FontSizeOption}>14</li>\r\n      <li className={styles.FontSizeOption}>24</li>\r\n      <li className={styles.FontSizeOption}>30</li>\r\n      <li className={styles.FontSizeOption}>36</li>\r\n      <li className={styles.FontSizeOption}>48</li>\r\n      <li className={styles.FontSizeOption}>60</li>\r\n      <li className={styles.FontSizeOption}>72</li>\r\n      <li className={styles.FontSizeOption}>96</li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default FontSizeDropdown;\r\n","import React from 'react';\r\nimport styles from './TextAlignDropdown.module.css';\r\nimport textLeft from '../../../../assets/editor/textLeft.svg';\r\nimport textRight from '../../../../assets/editor/textRight.svg';\r\nimport textCenter from '../../../../assets/editor/textCenter.svg';\r\nimport textJustify from '../../../../assets/editor/textJustify.svg';\r\n\r\nconst TextAlignDropdown = ({ setIsDropDown, dispatch, current }) => {\r\n  const optionsClickHandler = (e) => {\r\n    let data = null;\r\n    if (e.target.tagName === 'LI') data = e.target.childNodes[0].alt;\r\n    else if (e.target.tagName === 'P') data = e.target.textContent;\r\n    else if (e.target.tagName === 'IMG') data = e.target.alt;\r\n    if (data) {\r\n      dispatch({ type: 'setTextAlign', data: data.toLowerCase() });\r\n      setIsDropDown(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ul className={styles.TextAlignDropdown} onClick={optionsClickHandler}>\r\n      <li\r\n        className={[\r\n          styles.TextAlignOption,\r\n          current === 'left' ? styles.Current : null,\r\n        ].join(' ')}\r\n      >\r\n        <img className={styles.TextAlignImage} src={textLeft} alt='left' />\r\n        <p className={styles.TextAlignText}>Left</p>\r\n      </li>\r\n      <li\r\n        className={[\r\n          styles.TextAlignOption,\r\n          current === 'center' ? styles.Current : null,\r\n        ].join(' ')}\r\n      >\r\n        <img className={styles.TextAlignImage} src={textCenter} alt='center' />\r\n        <p className={styles.TextAlignText}>Center</p>\r\n      </li>\r\n      <li\r\n        className={[\r\n          styles.TextAlignOption,\r\n          current === 'right' ? styles.Current : null,\r\n        ].join(' ')}\r\n      >\r\n        <img className={styles.TextAlignImage} src={textRight} alt='right' />\r\n        <p className={styles.TextAlignText}>Right</p>\r\n      </li>\r\n      <li\r\n        className={[\r\n          styles.TextAlignOption,\r\n          current === 'justify' ? styles.Current : null,\r\n        ].join(' ')}\r\n      >\r\n        <img\r\n          className={styles.TextAlignImage}\r\n          src={textJustify}\r\n          alt='justify'\r\n        />\r\n        <p className={styles.TextAlignText}>Justify</p>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default TextAlignDropdown;\r\n","import React, { useState, useEffect } from 'react';\r\nimport FontsDropdown from './FontsDropdown/FontsDropdown';\r\nimport FontSizeDropdown from './FontSizeDropdown/FontSizeDropdown';\r\nimport TextAlignDropdown from './TextAlignDropdown/TextAlignDropdown';\r\nimport { SketchPicker } from 'react-color';\r\nimport styles from './TextDropdowns.module.css';\r\n\r\nconst TextDropdowns = ({\r\n  state,\r\n  dispatch,\r\n  coords,\r\n  isFontFamilyDropdown,\r\n  isFontSizeDropdown,\r\n  isColorDropdown,\r\n  isTextAlignDropDown,\r\n  setIsFontFamilyDropdown,\r\n  setIsFontSizeDropdown,\r\n  colorChangeCompleteHandler,\r\n  setIsTextAlignDropDown,\r\n  setColor,\r\n  color,\r\n  colorPickerRef,\r\n  isSub,\r\n  isBgColorDropdown,\r\n  setBgColor,\r\n  bgColor,\r\n  bgColorPickerRef,\r\n}) => {\r\n  const [dropDownStyle, setDropdownStyle] = useState({ top: 41 });\r\n  const maxDropdownHeight = 301;\r\n  const DropdownOffset = 41;\r\n  const DropdownPadding = 20;\r\n\r\n  useEffect(() => {\r\n    if (\r\n      coords &&\r\n      coords.coordY + maxDropdownHeight + DropdownOffset + DropdownPadding >\r\n        state.canvasState.height\r\n    ) {\r\n      setDropdownStyle({ bottom: 41 });\r\n    }\r\n  }, [state.canvasState, coords]);\r\n\r\n  return (\r\n    <>\r\n      {isFontFamilyDropdown ? (\r\n        <div className={styles.FontsDropdown} style={dropDownStyle}>\r\n          <FontsDropdown\r\n            setIsDropDown={setIsFontFamilyDropdown}\r\n            dispatch={dispatch}\r\n            isSub={isSub}\r\n          />\r\n        </div>\r\n      ) : null}\r\n      {isFontSizeDropdown ? (\r\n        <div\r\n          className={styles.FontSizeDropdown}\r\n          style={{ ...dropDownStyle, right: isSub ? '223px' : '151px' }}\r\n        >\r\n          <FontSizeDropdown\r\n            setIsDropDown={setIsFontSizeDropdown}\r\n            dispatch={dispatch}\r\n            isSub={isSub}\r\n          />\r\n        </div>\r\n      ) : null}\r\n      {isColorDropdown ? (\r\n        <div className={styles.SketchPickerContainer} style={dropDownStyle}>\r\n          <SketchPicker\r\n            color={color}\r\n            onChange={(c) => setColor(c.rgb)}\r\n            onChangeComplete={(c) =>\r\n              colorChangeCompleteHandler(\r\n                c,\r\n                colorPickerRef,\r\n                dispatch,\r\n                isSub,\r\n                isBgColorDropdown\r\n              )\r\n            }\r\n          />\r\n        </div>\r\n      ) : null}\r\n      {isTextAlignDropDown ? (\r\n        <div className={styles.TextAlignDropdown} style={dropDownStyle}>\r\n          <TextAlignDropdown\r\n            setIsDropDown={setIsTextAlignDropDown}\r\n            dispatch={dispatch}\r\n            current={state.textState.textAlign}\r\n          />\r\n        </div>\r\n      ) : null}\r\n\r\n      {isBgColorDropdown ? (\r\n        <div className={styles.SketchPickerContainer} style={dropDownStyle}>\r\n          <SketchPicker\r\n            color={bgColor}\r\n            onChange={(c) => setBgColor(c.rgb)}\r\n            onChangeComplete={(c) =>\r\n              colorChangeCompleteHandler(\r\n                c,\r\n                bgColorPickerRef,\r\n                dispatch,\r\n                isSub,\r\n                isBgColorDropdown\r\n              )\r\n            }\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TextDropdowns;\r\n","export const colorChangeCompleteHandler = (c, ref, dispatch, isSub, isBg) => {\r\n  let colorString = `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`;\r\n  if (isBg && ref.current) {\r\n    ref.current.style.background = colorString;\r\n    dispatch({ type: 'setSubtitlesbackgroundColor', data: colorString });\r\n  } else if (ref.current) {\r\n    let type = isSub ? 'setSubtitlesTextFill' : 'setTextFill';\r\n    ref.current.style.background = colorString;\r\n    dispatch({ type, data: colorString });\r\n  }\r\n};\r\n\r\nexport const handleClick = (e, dropdownHandlers, styleHandlers) => {\r\n  if (e.currentTarget.id === 'bold' || e.currentTarget.id === 'italic') {\r\n    styleHandlers[e.currentTarget.id]();\r\n  }\r\n  for (let [id, handler] of Object.entries(dropdownHandlers)) {\r\n    if (id === e.currentTarget.id) handler((prevState) => !prevState);\r\n    else handler(false);\r\n  }\r\n};\r\n\r\nexport const fontSizeChangeHandler = (e, setFontSizeInput, dispatch, isSub) => {\r\n  setFontSizeInput(e.target.value);\r\n  let data = +e.target.value;\r\n  if (data <= 0) data = 1;\r\n  else if (data > 1080) data = 1080;\r\n  let type = isSub ? 'setSubtitlesFontSize' : 'setFontSize';\r\n  dispatch({ type, data });\r\n};\r\n","import React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport styles from './TextToolbar.module.css';\r\nimport downArrow from '../../../assets/editor/downArrow.svg';\r\nimport bold from '../../../assets/editor/bold.svg';\r\nimport subBackground from '../../../assets/editor/subBackground.svg';\r\nimport italic from '../../../assets/editor/italic.svg';\r\nimport textLeft from '../../../assets/editor/textLeft.svg';\r\nimport textRight from '../../../assets/editor/textRight.svg';\r\nimport textCenter from '../../../assets/editor/textCenter.svg';\r\nimport textJustify from '../../../assets/editor/textJustify.svg';\r\nimport TextDropdowns from '../TextDropdowns/TextDropdowns';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport {\r\n  handleClick,\r\n  fontSizeChangeHandler,\r\n  colorChangeCompleteHandler,\r\n} from './utils/handlers';\r\n\r\nconst TextToolbar = ({ coords, isSub }) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const [fontSizeInput, setFontSizeInput] = useState(0);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [isFontFamilyDropdown, setIsFontFamilyDropdown] = useState(false);\r\n  const [isFontSizeDropdown, setIsFontSizeDropdown] = useState(false);\r\n  const [isColorDropdown, setIsColorDropdown] = useState(false);\r\n  const [isTextAlignDropDown, setIsTextAlignDropDown] = useState(false);\r\n  const [isBgColorDropdown, setIsBgColorDropdown] = useState(false);\r\n  const [color, setColor] = useState({\r\n    r: 0,\r\n    g: 0,\r\n    b: 0,\r\n    a: 1,\r\n  });\r\n  const [bgColor, setBgColor] = useState({\r\n    r: 0,\r\n    g: 0,\r\n    b: 0,\r\n    a: 1,\r\n  });\r\n\r\n  const colorPickerRef = useRef(null);\r\n  const bgColorPickerRef = useRef(null);\r\n\r\n  // Active styles\r\n  const boldStlyes = [styles.FontWeightBoldContainer];\r\n  const italicStyles = [styles.FontStyleItalicContainer];\r\n  const state = isSub ? editorState.subtitlesState : editorState.textState;\r\n  const isBold = state.fontWeight === 'Bold';\r\n  const isItalic = state.fontStyle === 'Italic';\r\n  if (isBold) boldStlyes.push(styles.Active);\r\n  if (isItalic) italicStyles.push(styles.Active);\r\n\r\n  // Text Align SVG\r\n  let textAlignSrc = textLeft;\r\n  if (editorState.textState.textAlign === 'center') {\r\n    textAlignSrc = textCenter;\r\n  } else if (editorState.textState.textAlign === 'right') {\r\n    textAlignSrc = textRight;\r\n  } else if (editorState.textState.textAlign === 'justify') {\r\n    textAlignSrc = textJustify;\r\n  }\r\n\r\n  const boldHandler = () => {\r\n    let weight = 'Bold';\r\n    if (isBold) weight = 'Normal';\r\n    let type = isSub ? 'setSubtitlesFontWeight' : 'setFontWeight';\r\n    editorDispatch({ type, data: weight });\r\n  };\r\n\r\n  const italicHandler = () => {\r\n    let style = 'Italic';\r\n    if (isItalic) style = 'Normal';\r\n    let type = isSub ? 'setSubtitlesFontStyle' : 'setFontStyle';\r\n    editorDispatch({ type, data: style });\r\n  };\r\n\r\n  const dropdownHandlers = {\r\n    fontFamily: setIsFontFamilyDropdown,\r\n    fontSizeArrow: setIsFontSizeDropdown,\r\n    colorPicker: setIsColorDropdown,\r\n    textAlign: setIsTextAlignDropDown,\r\n    bgColor: setIsBgColorDropdown,\r\n  };\r\n\r\n  const styleHandlers = {\r\n    bold: boldHandler,\r\n    italic: italicHandler,\r\n  };\r\n\r\n  const clickHandler = (e) => handleClick(e, dropdownHandlers, styleHandlers);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      setFontSizeInput(state.fontSize);\r\n      let [r, g, b, a] = state.fill.split('(')[1].split(')')[0].split(',');\r\n      setColor({ r, g, b, a });\r\n      colorPickerRef.current.style.background = state.fill;\r\n      if (isSub) {\r\n        [r, g, b, a] = state.backgroundColor\r\n          .split('(')[1]\r\n          .split(')')[0]\r\n          .split(',');\r\n        setBgColor({ r, g, b, a });\r\n        bgColorPickerRef.current.style.background = state.backgroundColor;\r\n      }\r\n    }\r\n  }, [state, isFirstLoad, isSub]);\r\n\r\n  return (\r\n    <div className={styles.TextToolbar}>\r\n      <div\r\n        className={styles.FontsContainer}\r\n        id='fontFamily'\r\n        onClick={clickHandler}\r\n      >\r\n        <p>{state.fontFamily}</p>\r\n        <img className={styles.DownArrow} src={downArrow} alt='arrow' />\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div className={styles.FontSizeContainer}>\r\n        <div className={styles.FontSizeInputContainer}>\r\n          <input\r\n            className={styles.FontSizeInput}\r\n            type='number'\r\n            value={fontSizeInput}\r\n            onChange={(e) =>\r\n              fontSizeChangeHandler(e, setFontSizeInput, editorDispatch, isSub)\r\n            }\r\n          />\r\n        </div>\r\n        <div\r\n          className={styles.FontSizeArrowContainer}\r\n          id='fontSizeArrow'\r\n          onClick={clickHandler}\r\n        >\r\n          <img className={styles.DownArrow} src={downArrow} alt='arrow' />\r\n        </div>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n\r\n      <div\r\n        className={styles.ColorPickerContainer}\r\n        id='colorPicker'\r\n        onClick={clickHandler}\r\n      >\r\n        <div className={styles.ColorPickerBorder}>\r\n          <div ref={colorPickerRef} className={styles.ColorPicker}></div>\r\n        </div>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n\r\n      <div className={boldStlyes.join(' ')} id='bold' onClick={clickHandler}>\r\n        <img className={styles.Bold} src={bold} alt='bold' />\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div\r\n        className={italicStyles.join(' ')}\r\n        id='italic'\r\n        onClick={clickHandler}\r\n      >\r\n        <img className={styles.Italic} src={italic} alt='italic' />\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      {!isSub ? (\r\n        <>\r\n          <div\r\n            className={styles.TextAlignContainer}\r\n            id='textAlign'\r\n            onClick={clickHandler}\r\n          >\r\n            <img\r\n              className={styles.TextAlign}\r\n              src={textAlignSrc}\r\n              alt='textAlign'\r\n            />\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div\r\n          className={styles.BgColorContainer}\r\n          id='bgColor'\r\n          onClick={clickHandler}\r\n        >\r\n          <div className={styles.BgColor} ref={bgColorPickerRef}></div>\r\n          <img src={subBackground} alt='italic' />\r\n          <p>Background</p>\r\n        </div>\r\n      )}\r\n\r\n      <TextDropdowns\r\n        state={editorState}\r\n        dispatch={editorDispatch}\r\n        coords={coords}\r\n        isFontFamilyDropdown={isFontFamilyDropdown}\r\n        isFontSizeDropdown={isFontSizeDropdown}\r\n        isColorDropdown={isColorDropdown}\r\n        isTextAlignDropDown={isTextAlignDropDown}\r\n        setIsFontFamilyDropdown={setIsFontFamilyDropdown}\r\n        setIsFontSizeDropdown={setIsFontSizeDropdown}\r\n        colorChangeCompleteHandler={colorChangeCompleteHandler}\r\n        setIsTextAlignDropDown={setIsTextAlignDropDown}\r\n        setColor={setColor}\r\n        setBgColor={setBgColor}\r\n        color={color}\r\n        bgColor={bgColor}\r\n        colorPickerRef={colorPickerRef}\r\n        bgColorPickerRef={bgColorPickerRef}\r\n        isSub={isSub}\r\n        isBgColorDropdown={isBgColorDropdown}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextToolbar;\r\n","export default __webpack_public_path__ + \"static/media/cornerRadius.edfa6868.svg\";","import React from 'react';\r\nimport styles from './StrokeWidthDropdown.module.css';\r\n\r\nconst StrokeWidthDropdown = ({\r\n  setIsDropDown,\r\n  dispatch,\r\n  type,\r\n  isSmallRange,\r\n  includesZero,\r\n}) => {\r\n  const optionsClickHandler = (e) => {\r\n    if (e.target.tagName === 'LI') {\r\n      dispatch({ type, data: +e.target.textContent });\r\n      dispatch({ type: 'setShowToolbar', data: false });\r\n      setIsDropDown(false);\r\n    }\r\n  };\r\n  let list = null;\r\n  if (isSmallRange) {\r\n    list = (\r\n      <ul className={styles.LineDropdown} onClick={optionsClickHandler}>\r\n        {includesZero ? (\r\n          <li className={styles.StrokeOption}>0</li>\r\n        ) : (\r\n          <li className={styles.StrokeOption}>1</li>\r\n        )}\r\n        <li className={styles.StrokeOption}>5</li>\r\n        <li className={styles.StrokeOption}>10</li>\r\n        <li className={styles.StrokeOption}>15</li>\r\n        <li className={styles.StrokeOption}>20</li>\r\n        <li className={styles.StrokeOption}>25</li>\r\n        <li className={styles.StrokeOption}>30</li>\r\n        <li className={styles.StrokeOption}>35</li>\r\n        <li className={styles.StrokeOption}>40</li>\r\n        <li className={styles.StrokeOption}>45</li>\r\n        <li className={styles.StrokeOption}>50</li>\r\n      </ul>\r\n    );\r\n  } else {\r\n    list = (\r\n      <ul className={styles.ShapeDropdown} onClick={optionsClickHandler}>\r\n        <li className={styles.StrokeOption}>0</li>\r\n        <li className={styles.StrokeOption}>4</li>\r\n        <li className={styles.StrokeOption}>8</li>\r\n        <li className={styles.StrokeOption}>12</li>\r\n        <li className={styles.StrokeOption}>24</li>\r\n        <li className={styles.StrokeOption}>48</li>\r\n        <li className={styles.StrokeOption}>96</li>\r\n        <li className={styles.StrokeOption}>120</li>\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  return list;\r\n};\r\n\r\nexport default StrokeWidthDropdown;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { SketchPicker } from 'react-color';\r\nimport styles from './ShapeDropdowns.module.css';\r\nimport StrokeWidthDropdown from '../StrokeWidthDropdown/StrokeWidthDropdown';\r\n\r\nconst ShapeDropdowns = ({\r\n  state,\r\n  dispatch,\r\n  coords,\r\n  shapeToolbar,\r\n  isStrokeWidthDropdown,\r\n  isFillDropdown,\r\n  isStrokeDropdown,\r\n  fill,\r\n  setFill,\r\n  fillChangeCompleteHandler,\r\n  fillRef,\r\n  stroke,\r\n  setStroke,\r\n  strokeChangeCompleteHandler,\r\n  strokeRef,\r\n  setIsStrokeWidthDropdown,\r\n  isLine,\r\n  isRect,\r\n}) => {\r\n  const [dropDownStyle, setDropdownStyle] = useState({ top: 41 });\r\n  const [strokeWidthDropDownStyle, setStrokeWidthDropDownStyle] = useState({\r\n    top: 41,\r\n  });\r\n  const maxDropdownHeight = 301;\r\n  const maxDropdownWidth = 220;\r\n  const DropdownOffset = 41;\r\n  const DropdownPadding = 20;\r\n\r\n  const handleDropdownPosition = useCallback(\r\n    (coords, shapeToolbar, canvasHeight) => {\r\n      let toolbarWidth = shapeToolbar.offsetWidth;\r\n      let style = {};\r\n      if (\r\n        coords.coordY + maxDropdownHeight + DropdownOffset + DropdownPadding >\r\n        canvasHeight\r\n      ) {\r\n        style.bottom = 41;\r\n        setStrokeWidthDropDownStyle({ bottom: 41, right: !isRect ? 0 : 66 });\r\n      }\r\n\r\n      if (coords.coordX + toolbarWidth - maxDropdownWidth < 0) {\r\n        style.left = 0;\r\n        if (!style.bottom) style.top = 41;\r\n      }\r\n      if (Object.keys(style).length !== 0) setDropdownStyle(style);\r\n    },\r\n    [isRect]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (coords && shapeToolbar) {\r\n      handleDropdownPosition(coords, shapeToolbar, state.canvasState.height);\r\n    }\r\n  }, [handleDropdownPosition, shapeToolbar, state.canvasState, coords]);\r\n\r\n  return (\r\n    <>\r\n      {isFillDropdown ? (\r\n        <div className={styles.FillDropdownContainer} style={dropDownStyle}>\r\n          <SketchPicker\r\n            color={fill}\r\n            onChange={(c) => setFill(c.rgb)}\r\n            onChangeComplete={(c) =>\r\n              fillChangeCompleteHandler(c, dispatch, fillRef)\r\n            }\r\n          />\r\n        </div>\r\n      ) : null}\r\n\r\n      {isStrokeDropdown ? (\r\n        <div className={styles.StrokeDropdownContainer} style={dropDownStyle}>\r\n          <SketchPicker\r\n            color={stroke}\r\n            onChange={(c) => setStroke(c.rgb)}\r\n            onChangeComplete={(c) =>\r\n              strokeChangeCompleteHandler(c, dispatch, strokeRef)\r\n            }\r\n          />\r\n        </div>\r\n      ) : null}\r\n\r\n      {isStrokeWidthDropdown ? (\r\n        <div\r\n          className={styles.StrokeWidthDropdownContainer}\r\n          style={strokeWidthDropDownStyle}\r\n        >\r\n          <StrokeWidthDropdown\r\n            setIsDropDown={setIsStrokeWidthDropdown}\r\n            isSmallRange={isLine}\r\n            includesZero={false}\r\n            dispatch={dispatch}\r\n            type={'setShapeStrokeWidth'}\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ShapeDropdowns;\r\n","export const initialLoadHandler = (\r\n  isLine,\r\n  shapeState,\r\n  setIsFirstLoad,\r\n  setFill,\r\n  fillRef,\r\n  strokeContainerRef,\r\n  setStroke,\r\n  strokeRef\r\n) => {\r\n  setIsFirstLoad(false);\r\n  if (!isLine) {\r\n    let [r, g, b, a] = shapeState.fill.split('(')[1].split(')')[0].split(',');\r\n    setFill({ r, g, b, a });\r\n    fillRef.current.style.background = shapeState.fill;\r\n  } else {\r\n    strokeContainerRef.current.style.borderTopLeftRadius = '15px';\r\n    strokeContainerRef.current.style.borderBottomLeftRadius = '15px';\r\n  }\r\n  let [r, g, b, a] = shapeState.stroke.split('(')[1].split(')')[0].split(',');\r\n  setStroke({ r, g, b, a });\r\n  strokeRef.current.style.background = shapeState.stroke;\r\n};\r\n\r\nexport const fillChangeCompleteHandler = (c, dispatch, fillRef) => {\r\n  if (fillRef.current) {\r\n    let colorString = `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`;\r\n    dispatch({ type: 'setShapeFill', data: colorString });\r\n    fillRef.current.style.background = colorString;\r\n  }\r\n};\r\n\r\nexport const strokeChangeCompleteHandler = (c, dispatch, strokeRef) => {\r\n  if (strokeRef.current) {\r\n    let colorString = `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`;\r\n    dispatch({ type: 'setShapeStroke', data: colorString });\r\n    strokeRef.current.style.background = colorString;\r\n  }\r\n};\r\n\r\nexport const strokeWidthChangeHandler = (\r\n  e,\r\n  dispatch,\r\n  setStrokeWidthInput,\r\n  isLine\r\n) => {\r\n  setStrokeWidthInput(e.target.value);\r\n  let data = +e.target.value;\r\n  if (isLine && data <= 0) data = 1;\r\n  else if (isLine && data > 50) data = 50;\r\n  else if (!isLine && data > 120) data = 120;\r\n  else if (!isLine && data < 0) data = 0;\r\n  dispatch({ type: 'setShapeStrokeWidth', data });\r\n};\r\n\r\nexport const handleClick = (\r\n  e,\r\n  setIsFillDropdown,\r\n  setIsStrokeDropdown,\r\n  setIsStrokeWidthDropdown\r\n) => {\r\n  let clicked = e.currentTarget.id;\r\n  if (clicked === 'fill') {\r\n    setIsFillDropdown((prevState) => !prevState);\r\n    setIsStrokeDropdown(false);\r\n    setIsStrokeWidthDropdown(false);\r\n  } else if (clicked === 'stroke') {\r\n    setIsStrokeDropdown((prevState) => !prevState);\r\n    setIsFillDropdown(false);\r\n    setIsStrokeWidthDropdown(false);\r\n  } else if (clicked === 'strokeWidth') {\r\n    setIsStrokeWidthDropdown((prevState) => !prevState);\r\n    setIsFillDropdown(false);\r\n    setIsStrokeDropdown(false);\r\n  } else {\r\n    setIsStrokeWidthDropdown(false);\r\n    setIsFillDropdown(false);\r\n    setIsStrokeDropdown(false);\r\n  }\r\n};\r\n","import React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport styles from './ShapeToolbar.module.css';\r\nimport downArrow from '../../../assets/editor/downArrow.svg';\r\nimport cornerRadius from '../../../assets/editor/cornerRadius.svg';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport ShapeDropdowns from '../ShapeDropdowns/ShapeDropdowns';\r\nimport {\r\n  initialLoadHandler,\r\n  handleClick,\r\n  fillChangeCompleteHandler,\r\n  strokeChangeCompleteHandler,\r\n  strokeWidthChangeHandler,\r\n} from './utils/handlers';\r\n\r\nconst ShapeToolbar = ({ coords }) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [fill, setFill] = useState('rgba(196,196,196,1)');\r\n  const [stroke, setStroke] = useState('rgba(255,255,255,1)');\r\n  const [isFillDropdown, setIsFillDropdown] = useState(false);\r\n  const [isStrokeDropdown, setIsStrokeDropdown] = useState(false);\r\n  const [isStrokeWidthDropdown, setIsStrokeWidthDropdown] = useState(false);\r\n  const [strokeWidthInput, setStrokeWidthInput] = useState(\r\n    editorState.shapeState.strokeWidth\r\n  );\r\n  const [radiusInput, setRadiusInput] = useState(editorState.shapeState.rx);\r\n  const shapeToolbarRef = useRef(null);\r\n  const fillRef = useRef(null);\r\n  const strokeRef = useRef(null);\r\n  const strokeContainerRef = useRef(null);\r\n  const isLine = editorState.currentObject.type === 'line';\r\n  const isRect = editorState.currentObject.type === 'rect';\r\n\r\n  const radiusChangeHandler = (e) => {\r\n    setRadiusInput(e.target.value);\r\n    let val = +e.target.value;\r\n    if (val < 0) val = 0;\r\n    if (val > 100) val = 100;\r\n    editorDispatch({ type: 'setShapeRadius', data: val });\r\n  };\r\n\r\n  const clickHandler = (e) =>\r\n    handleClick(\r\n      e,\r\n      setIsFillDropdown,\r\n      setIsStrokeDropdown,\r\n      setIsStrokeWidthDropdown\r\n    );\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      initialLoadHandler(\r\n        isLine,\r\n        editorState.shapeState,\r\n        setIsFirstLoad,\r\n        setFill,\r\n        fillRef,\r\n        strokeContainerRef,\r\n        setStroke,\r\n        strokeRef\r\n      );\r\n    }\r\n  }, [isLine, editorState.shapeState, isFirstLoad]);\r\n\r\n  return (\r\n    <div ref={shapeToolbarRef} className={styles.ShapeToolbar}>\r\n      {!isLine ? (\r\n        <>\r\n          <div\r\n            className={styles.FillContainer}\r\n            id='fill'\r\n            onClick={clickHandler}\r\n          >\r\n            <div className={styles.ColorPickerBorder}>\r\n              <div ref={fillRef} className={styles.ColorPicker}></div>\r\n            </div>\r\n            <p>Fill</p>\r\n          </div>\r\n          <div className={styles.BorderDiv}></div>\r\n        </>\r\n      ) : null}\r\n\r\n      <div\r\n        ref={strokeContainerRef}\r\n        className={styles.StrokeContainer}\r\n        id='stroke'\r\n        onClick={clickHandler}\r\n      >\r\n        <div className={styles.ColorPickerBorder}>\r\n          <div ref={strokeRef} className={styles.ColorPicker}></div>\r\n        </div>\r\n        <p>Stroke</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div className={styles.StrokeWidthContainer}>\r\n        <div className={styles.StrokeWidthInputContainer}>\r\n          <input\r\n            className={styles.StrokeWidthInput}\r\n            type='number'\r\n            value={strokeWidthInput}\r\n            onChange={(e) =>\r\n              strokeWidthChangeHandler(\r\n                e,\r\n                editorDispatch,\r\n                setStrokeWidthInput,\r\n                isLine\r\n              )\r\n            }\r\n          />\r\n        </div>\r\n        <div\r\n          style={{\r\n            borderTopRightRadius: isRect ? '0' : '15px',\r\n            borderBottomRightRadius: isRect ? '0' : '15px',\r\n          }}\r\n          className={styles.StrokeWidthArrowContainer}\r\n          id='strokeWidth'\r\n          onClick={clickHandler}\r\n        >\r\n          <img className={styles.DownArrow} src={downArrow} alt='arrow' />\r\n        </div>\r\n      </div>\r\n\r\n      {isRect ? (\r\n        <>\r\n          <div className={styles.BorderDiv}></div>\r\n          <div\r\n            className={styles.RadiusContainer}\r\n            id='radius'\r\n            onClick={clickHandler}\r\n          >\r\n            <img src={cornerRadius} alt='radius' />\r\n            <input\r\n              className={styles.RadiusInput}\r\n              type='number'\r\n              value={radiusInput}\r\n              onChange={radiusChangeHandler}\r\n            />\r\n          </div>\r\n        </>\r\n      ) : null}\r\n      <ShapeDropdowns\r\n        state={editorState}\r\n        dispatch={editorDispatch}\r\n        coords={coords}\r\n        shapeToolbar={shapeToolbarRef.current}\r\n        isStrokeWidthDropdown={isStrokeWidthDropdown}\r\n        setIsStrokeWidthDropdown={setIsStrokeWidthDropdown}\r\n        isStrokeDropdown={isStrokeDropdown}\r\n        isFillDropdown={isFillDropdown}\r\n        fill={fill}\r\n        setFill={setFill}\r\n        fillChangeCompleteHandler={fillChangeCompleteHandler}\r\n        fillRef={fillRef}\r\n        stroke={stroke}\r\n        setStroke={setStroke}\r\n        strokeChangeCompleteHandler={strokeChangeCompleteHandler}\r\n        strokeRef={strokeRef}\r\n        isLine={isLine}\r\n        isRect={isRect}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShapeToolbar;\r\n","export default __webpack_public_path__ + \"static/media/replaceImage.24b71204.svg\";","export default __webpack_public_path__ + \"static/media/cropImage.165e69b6.svg\";","import React, { useState, useContext, useEffect } from 'react';\r\nimport styles from './ImageToolbar.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport replaceImage from '../../../assets/editor/replaceImage.svg';\r\nimport cornerRadius from '../../../assets/editor/cornerRadius.svg';\r\nimport cropImage from '../../../assets/editor/cropImage.svg';\r\n\r\nconst ImageToolbar = () => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { eventState } = useContext(EventContext);\r\n  const [radiusInput, setRadiusInput] = useState(\r\n    editorState.imageState.cornerRadius\r\n  );\r\n\r\n  const clickHandler = (e) => {\r\n    if (e.currentTarget.id === 'replace') {\r\n      editorDispatch({ type: 'setShouldReplaceImage', data: true });\r\n    } else if (e.currentTarget.id === 'crop') {\r\n      editorDispatch({ type: 'setCropType', data: 'rect' });\r\n    }\r\n  };\r\n\r\n  const radiusChangeHandler = (e) => {\r\n    setRadiusInput(e.target.value);\r\n    let val = +e.target.value;\r\n    if (val < 0) val = 0;\r\n    if (val > 100) val = 100;\r\n    editorDispatch({ type: 'setImageCornerRadius', data: val });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (eventState.dbClickEvent) {\r\n      editorDispatch({ type: 'setCropType', data: 'rect' });\r\n    }\r\n  }, [eventState, editorDispatch]);\r\n\r\n  // const cropDoneHandler = () => {\r\n  //   editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n  //   editorDispatch({ type: 'setShowToolbar', data: false });\r\n  // };\r\n\r\n  const content = (\r\n    <>\r\n      <div\r\n        className={[\r\n          styles.ReaplaceContainer,\r\n          editorState.imageState.isSvg ? styles.BorderStyle : null,\r\n        ].join(' ')}\r\n        id='replace'\r\n        onClick={clickHandler}\r\n      >\r\n        <img src={replaceImage} alt='replace' />\r\n        <p>Replace</p>\r\n      </div>\r\n\r\n      {!editorState.imageState.isSvg ? (\r\n        <>\r\n          <div className={styles.BorderDiv}></div>\r\n          <div\r\n            className={styles.RadiusContainer}\r\n            id='radius'\r\n            onClick={clickHandler}\r\n          >\r\n            <img src={cornerRadius} alt='radius' />\r\n            <input\r\n              className={styles.RadiusInput}\r\n              type='number'\r\n              value={radiusInput}\r\n              onChange={radiusChangeHandler}\r\n            />\r\n          </div>\r\n          <div className={styles.BorderDiv}></div>\r\n          <div\r\n            className={styles.CropContainer}\r\n            id='crop'\r\n            onClick={clickHandler}\r\n          >\r\n            <img src={cropImage} alt='crop' />\r\n            <p>Crop</p>\r\n          </div>\r\n        </>\r\n      ) : null}\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <div className={styles.ImageToolbar}>\r\n      {content}\r\n      {/* {!editorState.isCropMode ? (\r\n        content\r\n      ) : (\r\n        <div className={styles.DoneContainer} onClick={cropDoneHandler}>\r\n          Done\r\n        </div>\r\n      )} */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageToolbar;\r\n","export const initialLoadHandler = (videoState, setStroke, strokeRef) => {\r\n  if (strokeRef.current && videoState.stroke !== null) {\r\n    let [r, g, b, a] = videoState.stroke.split('(')[1].split(')')[0].split(',');\r\n    setStroke({ r, g, b, a });\r\n    strokeRef.current.style.background = videoState.stroke;\r\n  }\r\n};\r\n\r\nexport const strokeChangeCompleteHandler = (c, dispatch, strokeRef) => {\r\n  if (strokeRef.current) {\r\n    let colorString = `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`;\r\n    dispatch({ type: 'setVideoStroke', data: colorString });\r\n    strokeRef.current.style.background = colorString;\r\n  }\r\n};\r\n\r\nexport const strokeWidthChangeHandler = (e, dispatch, setStrokeWidthInput) => {\r\n  setStrokeWidthInput(e.target.value);\r\n  let data = +e.target.value;\r\n  if (data > 50) data = 50;\r\n  else if (data < 0) data = 0;\r\n  dispatch({ type: 'setVideoStrokeWidth', data });\r\n};\r\n\r\nexport const handleClick = (\r\n  clicked,\r\n  setIsStrokeDropdown,\r\n  setIsStrokeWidthDropdown\r\n) => {\r\n  if (clicked === 'stroke') {\r\n    setIsStrokeDropdown((prevState) => !prevState);\r\n    setIsStrokeWidthDropdown(false);\r\n  } else if (clicked === 'strokeWidth') {\r\n    setIsStrokeWidthDropdown((prevState) => !prevState);\r\n    setIsStrokeDropdown(false);\r\n  } else {\r\n    setIsStrokeWidthDropdown(false);\r\n    setIsStrokeDropdown(false);\r\n  }\r\n};\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { SketchPicker } from 'react-color';\r\nimport styles from './VideoDropdowns.module.css';\r\nimport StrokeWidthDropdown from '../../StrokeWidthDropdown/StrokeWidthDropdown';\r\n\r\nconst VideoDropdowns = ({\r\n  state,\r\n  dispatch,\r\n  coords,\r\n  videoToolbar,\r\n  isStrokeWidthDropdown,\r\n  setIsStrokeWidthDropdown,\r\n  isStrokeDropdown,\r\n  stroke,\r\n  setStroke,\r\n  strokeChangeCompleteHandler,\r\n  strokeRef,\r\n}) => {\r\n  const [dropDownStyle, setDropdownStyle] = useState({ top: 41 });\r\n  const maxDropdownHeight = 301;\r\n  const maxDropdownWidth = 220;\r\n  const DropdownOffset = 41;\r\n  const DropdownPadding = 20;\r\n\r\n  const handleDropdownPosition = useCallback(\r\n    (coords, shapeToolbar, canvasHeight) => {\r\n      let toolbarWidth = shapeToolbar.offsetWidth;\r\n      let style = {};\r\n      if (\r\n        coords.coordY + maxDropdownHeight + DropdownOffset + DropdownPadding >\r\n        canvasHeight\r\n      ) {\r\n        style.bottom = 41;\r\n      }\r\n\r\n      if (coords.coordX + toolbarWidth - maxDropdownWidth < 0) {\r\n        style.left = 0;\r\n        if (!style.bottom) style.top = 41;\r\n      }\r\n      if (Object.keys(style).length !== 0) setDropdownStyle(style);\r\n    },\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (coords && videoToolbar) {\r\n      handleDropdownPosition(coords, videoToolbar, state.canvasState.height);\r\n    }\r\n  }, [handleDropdownPosition, videoToolbar, state.canvasState, coords]);\r\n\r\n  return (\r\n    <>\r\n      {isStrokeDropdown ? (\r\n        <div className={styles.StrokeDropdownContainer} style={dropDownStyle}>\r\n          <SketchPicker\r\n            color={stroke}\r\n            onChange={(c) => setStroke(c.rgb)}\r\n            onChangeComplete={(c) =>\r\n              strokeChangeCompleteHandler(c, dispatch, strokeRef)\r\n            }\r\n          />\r\n        </div>\r\n      ) : null}\r\n\r\n      {isStrokeWidthDropdown ? (\r\n        <div\r\n          className={styles.StrokeWidthDropdownContainer}\r\n          style={dropDownStyle}\r\n        >\r\n          <StrokeWidthDropdown\r\n            type={'setVideoStrokeWidth'}\r\n            setIsDropDown={setIsStrokeWidthDropdown}\r\n            isSmallRange={true}\r\n            includesZero={true}\r\n            dispatch={dispatch}\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default VideoDropdowns;\r\n","import React, { useState, useContext, useRef, useEffect } from 'react';\r\nimport styles from './VideoToolbar.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport cornerRadius from '../../../assets/editor/cornerRadius.svg';\r\nimport cropImage from '../../../assets/editor/cropImage.svg';\r\nimport downArrow from '../../../assets/editor/downArrow.svg';\r\nimport {\r\n  strokeWidthChangeHandler,\r\n  handleClick,\r\n  initialLoadHandler,\r\n  strokeChangeCompleteHandler\r\n} from './utils/handlers';\r\nimport VideoDropdowns from './VideoDropdowns/VideoDropdowns';\r\n\r\nconst VideoToolbar = ({ coords }) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { eventState } = useContext(EventContext);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [radiusInput, setRadiusInput] = useState(\r\n    editorState.videoState.cornerRadius\r\n  );\r\n  const [stroke, setStroke] = useState('rgba(255,255,255,1)');\r\n  const [isStrokeDropdown, setIsStrokeDropdown] = useState(false);\r\n  const [isStrokeWidthDropdown, setIsStrokeWidthDropdown] = useState(false);\r\n  const [strokeWidthInput, setStrokeWidthInput] = useState(\r\n    editorState.videoState.strokeWidth\r\n  );\r\n  const strokeRef = useRef(null);\r\n  const strokeContainerRef = useRef(null);\r\n  const videoToolbarRef = useRef(null);\r\n\r\n  const clickHandler = (e) => {\r\n    let id = e.currentTarget.id;\r\n    if (id === 'crop') editorDispatch({ type: 'setCropType', data: 'rect' });\r\n    else if (id === 'circleCrop') {\r\n      editorDispatch({ type: 'setCropType', data: 'circle' });\r\n    }\r\n    handleClick(id, setIsStrokeDropdown, setIsStrokeWidthDropdown);\r\n  };\r\n\r\n  const radiusChangeHandler = (e) => {\r\n    setRadiusInput(e.target.value);\r\n    let val = +e.target.value;\r\n    if (val < 0) val = 0;\r\n    if (val > 100) val = 100;\r\n    editorDispatch({ type: 'setVideoCornerRadius', data: val });\r\n  };\r\n\r\n  // const cropDoneHandler = () => {\r\n  //   editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n  //   editorDispatch({ type: 'setShowToolbar', data: false });\r\n  // };\r\n\r\n  useEffect(() => {\r\n    if(eventState.dbClickEvent) {\r\n      editorDispatch({ type: 'setCropType', data: 'rect' });\r\n    }\r\n  }, [eventState, editorDispatch])\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      initialLoadHandler(editorState.videoState, setStroke, strokeRef);\r\n    }\r\n  }, [editorState.videoState, isFirstLoad]);\r\n\r\n  const content = (\r\n    <>\r\n      <div className={styles.CropContainer} id='crop' onClick={clickHandler}>\r\n        <img src={cropImage} alt='replace' />\r\n        <p>Crop</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div\r\n        className={styles.CircleCropContainer}\r\n        id='circleCrop'\r\n        onClick={clickHandler}\r\n      >\r\n        <div className={styles.CircleCropCircle}></div>\r\n        <p>Circle crop</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n\r\n      <div\r\n        ref={strokeContainerRef}\r\n        className={styles.StrokeContainer}\r\n        id='stroke'\r\n        onClick={clickHandler}\r\n      >\r\n        <div className={styles.ColorPickerBorder}>\r\n          <div ref={strokeRef} className={styles.ColorPicker}></div>\r\n        </div>\r\n        <p>Stroke</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div className={styles.StrokeWidthContainer}>\r\n        <div className={styles.StrokeWidthInputContainer}>\r\n          <input\r\n            className={styles.StrokeWidthInput}\r\n            type='number'\r\n            value={strokeWidthInput}\r\n            onChange={(e) =>\r\n              strokeWidthChangeHandler(e, editorDispatch, setStrokeWidthInput)\r\n            }\r\n          />\r\n        </div>\r\n        <div\r\n          className={styles.StrokeWidthArrowContainer}\r\n          id='strokeWidth'\r\n          onClick={clickHandler}\r\n        >\r\n          <img className={styles.DownArrow} src={downArrow} alt='arrow' />\r\n        </div>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n\r\n      <div\r\n        className={styles.RadiusContainer}\r\n        id='radius'\r\n        onClick={clickHandler}\r\n      >\r\n        <img src={cornerRadius} alt='radius' />\r\n        <input\r\n          className={styles.RadiusInput}\r\n          type='number'\r\n          value={radiusInput}\r\n          onChange={radiusChangeHandler}\r\n        />\r\n      </div>\r\n\r\n      <VideoDropdowns\r\n        state={editorState}\r\n        dispatch={editorDispatch}\r\n        coords={coords}\r\n        videoToolbar={videoToolbarRef.current}\r\n        isStrokeWidthDropdown={isStrokeWidthDropdown}\r\n        setIsStrokeWidthDropdown={setIsStrokeWidthDropdown}\r\n        isStrokeDropdown={isStrokeDropdown}\r\n        stroke={stroke}\r\n        setStroke={setStroke}\r\n        strokeChangeCompleteHandler={strokeChangeCompleteHandler}\r\n        strokeRef={strokeRef}\r\n      />\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <div className={styles.VideoToolbar} ref={videoToolbarRef}>\r\n      {content}\r\n      {/* {!editorState.isCropMode ? (\r\n        content\r\n      ) : (\r\n        <div className={styles.DoneContainer} onClick={cropDoneHandler}>\r\n          Done\r\n        </div>\r\n      )} */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoToolbar;\r\n","import React, {\r\n  useContext,\r\n  useRef,\r\n  useEffect,\r\n  useCallback,\r\n  useState,\r\n} from 'react';\r\nimport EditorContext from '../../contexts/EditorContext';\r\nimport styles from './Toolbar.module.css';\r\nimport { calcPosition } from './utils/toolbarPosition';\r\nimport TextToolbar from './TextToolbar/TextToolbar';\r\nimport ShapeToolbar from './ShapeToolbar/ShapeToolbar';\r\nimport ImageToolbar from './ImageToolbar/ImageToolbar';\r\nimport VideoToolbar from './VideoToolbar/VideoToolbar';\r\n\r\nconst shapeArr = ['rect', 'circle', 'triangle', 'line'];\r\n\r\nconst Toolbar = ({ canvas, type }) => {\r\n  const [coords, setCoords] = useState(null);\r\n  const { editorState } = useContext(EditorContext);\r\n  const toolbarRef = useRef(null);\r\n  const toolbarOffset = 28;\r\n  const toolbarPadding = 10;\r\n  const setTransform = useCallback((c) => {\r\n    toolbarRef.current.style.transform = `translate(${c.coordX}px, ${c.coordY}px)`;\r\n    toolbarRef.current.style.opacity = 1;\r\n    setCoords(c);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (editorState.currentCoords) {\r\n      setTransform(\r\n        calcPosition(\r\n          editorState.currentCoords,\r\n          canvas.getWidth(),\r\n          canvas.getHeight(),\r\n          toolbarRef.current,\r\n          toolbarOffset,\r\n          toolbarPadding\r\n        )\r\n      );\r\n    }\r\n  }, [\r\n    canvas,\r\n    setTransform,\r\n    editorState.currentCoords,\r\n    editorState.currentObject,\r\n    editorState.isCroppingImage,\r\n  ]);\r\n\r\n  return (\r\n    <div ref={toolbarRef} className={styles.Toolbar}>\r\n      {type === 'text' ? <TextToolbar coords={coords} isSub={false} /> : null}\r\n      {type === 'subtitle' ? (\r\n        <TextToolbar coords={coords} isSub={true} />\r\n      ) : null}\r\n      {shapeArr.includes(type) ? <ShapeToolbar coords={coords} /> : null}\r\n      {type === 'customImage' ? <ImageToolbar /> : null}\r\n      {type === 'video' ? <VideoToolbar coords={coords} /> : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Toolbar;\r\n","export const calcPosition = (\r\n  currentCoords,\r\n  canvasWidth,\r\n  canvasHeight,\r\n  toolbar,\r\n  toolbarOffset,\r\n  toolbarPadding,\r\n) => {\r\n  let toolbarWidth = toolbar.offsetWidth;\r\n  let toolbarHeight = toolbar.offsetHeight;\r\n\r\n  let isBottomCloser = currentCoords.tl.y > currentCoords.bl.y;\r\n  let offset = isBottomCloser ? toolbarOffset + toolbarHeight : toolbarOffset;\r\n\r\n  // Coord Y\r\n  let coordY =\r\n    Math.min(\r\n      currentCoords.tl.y,\r\n      currentCoords.tr.y,\r\n      currentCoords.br.y,\r\n      currentCoords.bl.y\r\n    ) -\r\n    toolbarHeight -\r\n    offset;\r\n  if (coordY - toolbarPadding < 0) {\r\n    let tempCoordY =\r\n      Math.max(\r\n        currentCoords.tl.y,\r\n        currentCoords.tr.y,\r\n        currentCoords.br.y,\r\n        currentCoords.bl.y\r\n      ) +\r\n      toolbarOffset +\r\n      (!isBottomCloser ? toolbarHeight : 0);\r\n    if (tempCoordY + toolbarPadding + toolbarHeight < canvasHeight)\r\n      coordY = tempCoordY;\r\n    else coordY = canvasHeight - toolbarHeight - toolbarOffset;\r\n  }\r\n\r\n  // Coord X\r\n  let coordX = Math.min(\r\n    currentCoords.tl.x,\r\n    currentCoords.tr.x,\r\n    currentCoords.br.x,\r\n    currentCoords.bl.x\r\n  );\r\n  if (coordX + toolbarWidth > canvasWidth) coordX = canvasWidth - toolbarWidth;\r\n  else if (coordX < 0) coordX = 0;\r\n  return { coordX, coordY };\r\n};\r\n","import { fabric } from 'fabric';\r\nimport { checkOffScreen } from './checkOffScreen';\r\nconst pasteObject = (obj, id, top, left) => {\r\n  return new Promise((resolve, reject) => {\r\n    obj.clone((cloned) => {\r\n      cloned.id = id;\r\n      cloned.top = top;\r\n      cloned.left = left;\r\n      resolve(cloned);\r\n    });\r\n  });\r\n};\r\n\r\nexport const handlePaste = async (\r\n  canvas,\r\n  clipboard,\r\n  objId,\r\n  updateId,\r\n  setClipboard,\r\n  dispatch,\r\n  fabricSub,\r\n  setSpeakerVideos\r\n) => {\r\n  canvas.discardActiveObject();\r\n  let top = clipboard.coords.top + 15;\r\n  let left = clipboard.coords.left + 15;\r\n  let type = clipboard.object.type;\r\n  let videosArr = [];\r\n  if (type === 'activeSelection') {\r\n    let objArr = [];\r\n    for (let i = 0; i < clipboard.object._objects.length; i++) {\r\n      let obj = clipboard.object._objects[i];\r\n      if (obj.type !== 'subtitle') {\r\n        let cloned = await pasteObject(\r\n          obj,\r\n          objId + i,\r\n          obj.top + top - clipboard.object.top,\r\n          obj.left + left - clipboard.object.left\r\n        );\r\n        objArr.push(cloned);\r\n        updateId();\r\n      }\r\n    }\r\n    for (let i = 0; i < objArr.length; i++) {\r\n      let obj = objArr[i];\r\n      if (obj.type === 'video') videosArr.push(obj);\r\n      canvas.add(obj);\r\n      canvas.renderAll();\r\n      checkOffScreen(obj, canvas);\r\n    }\r\n    let selection = new fabric.ActiveSelection(objArr, { canvas });\r\n    canvas.setActiveObject(selection);\r\n  } else {\r\n    let cloned = await pasteObject(clipboard.object, objId, top, left);\r\n    if (type === 'video') videosArr.push(cloned);\r\n    updateId();\r\n    canvas.add(cloned).setActiveObject(cloned);\r\n    checkOffScreen(cloned, canvas);\r\n  }\r\n  if (videosArr.length > 0) {\r\n    setSpeakerVideos((prevState) => [...prevState, ...videosArr]);\r\n  }\r\n  if (fabricSub) canvas.bringToFront(fabricSub);\r\n  canvas.requestRenderAll();\r\n  if (dispatch) dispatch({ type: 'setRightClickEvent', data: null });\r\n  setClipboard({\r\n    object: clipboard.object,\r\n    coords: { top, left },\r\n  });\r\n};\r\n","import React, {\r\n  useEffect,\r\n  useCallback,\r\n  useContext,\r\n  useRef,\r\n  useState,\r\n} from 'react';\r\nimport styles from './ContextMenu.module.css';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport { handlePaste } from '../../../utils/pasteObject';\r\n\r\nconst ContextMenu = ({\r\n  canvas,\r\n  objId,\r\n  updateId,\r\n  clipboard,\r\n  setClipboard,\r\n  fabricSub,\r\n  dispatch,\r\n  setSpeakerVideos,\r\n}) => {\r\n  const { eventState, eventDispatch } = useContext(EventContext);\r\n  const [isMounted, setIsMounted] = useState(false);\r\n  const [activeObj, setActiveObj] = useState(false);\r\n  const [canOnlyPaste, setCanOnlyPaste] = useState(false);\r\n  const menuRef = useRef(null);\r\n  const isMountedRef = useRef(true);\r\n  useEffect(() => () => (isMountedRef.current = false), []);\r\n\r\n  const handleClick = useCallback(\r\n    (e) => {\r\n      if ((e.currentTarget && e.currentTarget.id !== 'subtitle') || clipboard) {\r\n        if (e.currentTarget && e.currentTarget.id !== 'subtitle') {\r\n          let active = canvas.getActiveObject();\r\n          if (!active || active.id !== e.currentTarget.id) {\r\n            canvas.setActiveObject(e.currentTarget);\r\n          }\r\n          setActiveObj(e.currentTarget);\r\n          setCanOnlyPaste(false);\r\n        } else setCanOnlyPaste(true);\r\n        if (e.pointer.x + menuRef.current.offsetWidth > canvas.getWidth()) {\r\n          menuRef.current.style.left =\r\n            e.pointer.x - menuRef.current.offsetWidth + 'px';\r\n        } else menuRef.current.style.left = e.pointer.x + 'px';\r\n        menuRef.current.style.top = e.pointer.y + 'px';\r\n      } else eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    },\r\n    [canvas, eventDispatch, clipboard]\r\n  );\r\n\r\n  const overlayClickHandler = (e) => {\r\n    e.preventDefault();\r\n    if (isMounted) {\r\n      setIsMounted(false);\r\n      eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    }\r\n  };\r\n\r\n  const deleteVideo = (obj) => {\r\n    let moreThanOne =\r\n      canvas.getObjects().filter((el) => el.type === 'video').length > 1;\r\n    if (moreThanOne) {\r\n      setSpeakerVideos((prevState) =>\r\n        prevState.filter((video) => video.id !== obj.id)\r\n      );\r\n      canvas.remove(obj);\r\n    }\r\n  };\r\n\r\n  const optionClickHandler = (e) => {\r\n    let id = e.currentTarget.id;\r\n    if (id === 'delete') {\r\n      if (activeObj.id === 'subtitle') {\r\n        dispatch({ type: 'setIsSubtitles', data: false });\r\n      } else if (activeObj.type === 'video') deleteVideo(activeObj);\r\n      else if (activeObj.type === 'activeSelection') {\r\n        for (let i = 0; i < activeObj._objects.length; i++) {\r\n          let obj = activeObj._objects[i];\r\n          console.log(obj);\r\n          if (obj.type === 'video') deleteVideo(obj);\r\n          else if (obj.id === 'subtitle') {\r\n            dispatch({ type: 'setIsSubtitles', data: false });\r\n          } else canvas.remove(obj);\r\n        }\r\n      } else canvas.remove(activeObj);\r\n      canvas.discardActiveObject().requestRenderAll();\r\n      eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    } else if (id === 'bringToFront') {\r\n      canvas.bringToFront(activeObj);\r\n      if (fabricSub) canvas.bringToFront(fabricSub);\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n      eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    } else if (id === 'sendToBack') {\r\n      canvas.sendToBack(activeObj);\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n      eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    } else if (id === 'copy') {\r\n      setClipboard({\r\n        object: activeObj,\r\n        coords: { top: activeObj.top, left: activeObj.left },\r\n      });\r\n      eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    } else if (id === 'paste') {\r\n      if (clipboard) {\r\n        handlePaste(\r\n          canvas,\r\n          clipboard,\r\n          objId,\r\n          updateId,\r\n          setClipboard,\r\n          eventDispatch,\r\n          fabricSub,\r\n          setSpeakerVideos\r\n        );\r\n      } else eventDispatch({ type: 'setRightClickEvent', data: null });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (canvas && eventState.rightClickEvent) {\r\n      handleClick(eventState.rightClickEvent);\r\n      setTimeout(() => {\r\n        if (isMountedRef.current) setIsMounted(true);\r\n      }, 400);\r\n    }\r\n    return () => {\r\n      if (isMountedRef.current) setIsMounted(false);\r\n    };\r\n  }, [canvas, eventState.rightClickEvent, handleClick]);\r\n  let content = (\r\n    <>\r\n      <div\r\n        className={styles.Overlay}\r\n        onContextMenu={overlayClickHandler}\r\n        onClick={overlayClickHandler}\r\n      ></div>\r\n      <ul\r\n        onContextMenu={(e) => e.preventDefault()}\r\n        ref={menuRef}\r\n        className={styles.Menu}\r\n        id='contextMenu'\r\n      >\r\n        {!canOnlyPaste ? (\r\n          <li className={styles.Option} id='copy' onClick={optionClickHandler}>\r\n            <p>Copy</p>\r\n            <p>C</p>\r\n          </li>\r\n        ) : null}\r\n\r\n        <li className={styles.Option} id='paste' onClick={optionClickHandler}>\r\n          <p>Paste</p>\r\n          <p>V</p>\r\n        </li>\r\n\r\n        {!canOnlyPaste ? (\r\n          <li\r\n            className={styles.Option}\r\n            id='delete'\r\n            onClick={optionClickHandler}\r\n          >\r\n            <p>Delete</p>\r\n            <p>DEL</p>\r\n          </li>\r\n        ) : null}\r\n        {!canOnlyPaste ? <li className={styles.Border}></li> : null}\r\n        {!canOnlyPaste ? (\r\n          <>\r\n            <li\r\n              className={styles.Option}\r\n              id='bringToFront'\r\n              onClick={optionClickHandler}\r\n            >\r\n              <p>Bring to front</p>\r\n              <p>{']'}</p>\r\n            </li>\r\n            <li\r\n              className={styles.Option}\r\n              id='sendToBack'\r\n              onClick={optionClickHandler}\r\n            >\r\n              <p>Send to back</p>\r\n              <p>{'['}</p>\r\n            </li>\r\n          </>\r\n        ) : null}\r\n      </ul>\r\n    </>\r\n  );\r\n\r\n  return eventState.rightClickEvent ? content : null;\r\n};\r\n\r\nexport default ContextMenu;\r\n","import { useEffect, useRef, useCallback, useState } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst useAnimate = (canvas, speakerVideos, video, currentTime) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(null);\r\n  const isMounted = useRef(true);\r\n  const frameRef = useRef(null);\r\n\r\n  const cancelAnimation = useCallback(() => {\r\n    if (frameRef.current) fabric.util.cancelAnimFrame(frameRef.current);\r\n    if (canvas) canvas.requestRenderAll();\r\n    frameRef.current = null;\r\n  }, [canvas]);\r\n\r\n  const animate = useCallback(\r\n    (speakers) => {\r\n      if (frameRef.current) fabric.util.cancelAnimFrame(frameRef.current);\r\n      const render = () => {\r\n        canvas.requestRenderAll();\r\n        for (let i = 0; i < speakers.length; i++) {\r\n          speakers[i].dirty = true;\r\n        }\r\n        frameRef.current = fabric.util.requestAnimFrame(render);\r\n      };\r\n      fabric.util.requestAnimFrame(render);\r\n    },\r\n    [canvas]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (canvas && speakerVideos) animate(speakerVideos);\r\n    else if (canvas) cancelAnimation();\r\n  }, [canvas, animate, cancelAnimation, speakerVideos]);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      video.currentTime = currentTime > 0 ? currentTime : 0.001;\r\n    }\r\n  }, [isFirstLoad, currentTime, video]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (frameRef.current) fabric.util.cancelAnimFrame(frameRef.current);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => () => (isMounted.current = false), []);\r\n};\r\n\r\nexport default useAnimate;\r\n","import { fabric } from 'fabric';\r\n\r\nexport const getSpeakerBox = (boxSize, boxId) => {\r\n  return new fabric.SpeakerCropBox({\r\n    ...boxSize,\r\n    fill: 'rgba(111, 122, 208, 0.4)',\r\n    top: 0,\r\n    left: 0,\r\n    borderColor: '#6F7BD0',\r\n    id: boxId,\r\n  });\r\n};\r\n\r\nexport const getOverlayBox = (canvas) => {\r\n  let zoom = canvas.getZoom();\r\n  let width = canvas.getWidth() / zoom;\r\n  let height = canvas.getHeight() / zoom;\r\n  let rect = new fabric.Rect({\r\n    left: 0,\r\n    top: 0,\r\n    width,\r\n    height,\r\n    noScaleCache: false,\r\n    fill: 'rgba(0, 0, 0, 0.5)',\r\n    strokeWidth: 0,\r\n    selectable: false,\r\n    excludeFromExport: true,\r\n    rx: 0,\r\n    ry: 0,\r\n    id: 'overlay',\r\n    globalCompositeOperation: 'source-over',\r\n    hoverCursor: \"default\",\r\n  });\r\n  return rect;\r\n};\r\n\r\nexport const getCropBoxSize = (obj) => {\r\n  let scaleX = obj.scaleX;\r\n  let scaleY = obj.scaleY;\r\n  let width = obj.width;\r\n  let height = obj.height;\r\n  let cropRect = obj.cropRect;\r\n  if (cropRect) {\r\n    scaleX *= obj.width / obj.originalWidth;\r\n    scaleY *= obj.height / obj.originalHeight;\r\n    width = obj.originalWidth;\r\n    height = obj.originalHeight;\r\n  }\r\n  return { scaleX, scaleY, width, height };\r\n};\r\n\r\nexport const getCircleCropBoxSize = (obj) => {\r\n  let scaleX = obj.scaleX;\r\n  let scaleY = obj.scaleY;\r\n  let width = obj.width;\r\n  let height = obj.height;\r\n  let cropRect = obj.cropRect;\r\n  let minSize = Math.min(width, height);\r\n  let size = minSize;\r\n  let scale = size === height ? scaleY : scaleX;\r\n  if (cropRect) {\r\n    size = Math.min(obj.originalWidth, obj.originalHeight);\r\n    scale *= minSize / size;\r\n  }\r\n  let radius = size / 2;\r\n  return { scale, radius };\r\n};\r\n\r\nexport const getMediaCircleCropBox = (obj, top, left) => {\r\n  let { scale, radius } = getCircleCropBoxSize(obj);\r\n  return new fabric.CircleCropBox({\r\n    originX: 'left',\r\n    originY: 'top',\r\n    left,\r\n    top,\r\n    strokeDashArray: [12, 12],\r\n    fill: 'rgba(255, 255, 255, 0)',\r\n    borderColor: 'rgba(0, 0, 0, 0)',\r\n    strokeWidth: 1,\r\n    strokeUniform: true,\r\n    stroke: '#dbff17',\r\n    radius: radius,\r\n    scaleX: scale,\r\n    scaleY: scale,\r\n    selectable: true,\r\n    type: 'cropbox',\r\n    excludeFromExport: true,\r\n    noScaleCache: false,\r\n    globalCompositeOperation: 'source-over',\r\n    lockMovementY: true,\r\n    lockMovementX: true,\r\n  });\r\n};\r\n\r\nexport const getMediaRectCropBox = (obj, top, left) => {\r\n  let { scaleX, scaleY, width, height } = getCropBoxSize(obj);\r\n  return new fabric.RectCropBox({\r\n    fill: 'rgba(255, 255, 255, 0)',\r\n    originX: 'left',\r\n    originY: 'top',\r\n    left,\r\n    top,\r\n    width: width,\r\n    height: height,\r\n    scaleX,\r\n    scaleY,\r\n    borderColor: 'rgba(0, 0, 0, 0)',\r\n    strokeWidth: 1,\r\n    strokeUniform: true,\r\n    strokeDashArray: [12, 12],\r\n    stroke: '#dbff17',\r\n    selectable: true,\r\n    type: 'cropbox',\r\n    noScaleCache: false,\r\n    excludeFromExport: true,\r\n    globalCompositeOperation: 'source-over',\r\n    lockMovementY: true,\r\n    lockMovementX: true,\r\n  });\r\n};\r\n\r\nexport const getCircleHoleBox = (obj) => {\r\n  return new fabric.Circle({\r\n    fill: 'rgba(255, 255, 255, 1)',\r\n    originX: 'left',\r\n    originY: 'top',\r\n    top: obj.top,\r\n    left: obj.left,\r\n    radius: obj.radius,\r\n    scaleX: obj.scaleX,\r\n    scaleY: obj.scaleY,\r\n    selectable: false,\r\n    borderColor: 'rgba(0, 0, 0, 0)',\r\n    stroke: 'rgba(0, 0, 0, 0)',\r\n    strokeWidth: 1,\r\n    strokeUniform: false,\r\n    type: 'holeBox',\r\n    excludeFromExport: true,\r\n    noScaleCache: false,\r\n    globalCompositeOperation: 'destination-out',\r\n  });\r\n};\r\n\r\nexport const getRectHoleBox = (obj) => {\r\n  return new fabric.Rect({\r\n    fill: 'rgba(255, 255, 255, 1)',\r\n    originX: 'left',\r\n    originY: 'top',\r\n    top: obj.top,\r\n    left: obj.left,\r\n    width: obj.width,\r\n    height: obj.height,\r\n    scaleX: obj.scaleX,\r\n    scaleY: obj.scaleY,\r\n    selectable: false,\r\n    borderColor: 'rgba(0, 0, 0, 0)',\r\n    stroke: 'rgba(0, 0, 0, 0)',\r\n    strokeWidth: 1,\r\n    strokeUniform: false,\r\n    type: 'holeBox',\r\n    excludeFromExport: true,\r\n    noScaleCache: false,\r\n    globalCompositeOperation: 'destination-out',\r\n  });\r\n};\r\n","import { fabric } from 'fabric';\r\nimport {\r\n  getOverlayBox,\r\n  getMediaRectCropBox,\r\n  getRectHoleBox,\r\n  getMediaCircleCropBox,\r\n  getCircleHoleBox,\r\n} from './box';\r\n\r\nexport const reverseMedia = (media) => {\r\n  let cropRect = media.cropRect;\r\n  if (cropRect) {\r\n    media.top = media.top - cropRect.y * media.scaleY;\r\n    media.left = media.left - cropRect.x * media.scaleX;\r\n    media.width = media.originalWidth;\r\n    media.height = media.originalHeight;\r\n    media.cropRect = {\r\n      x: 0,\r\n      y: 0,\r\n      w: media.width,\r\n      h: media.height,\r\n    };\r\n  }\r\n  media.setCoords();\r\n};\r\n\r\nconst setCropElements = (\r\n  media,\r\n  box,\r\n  holeBox,\r\n  cropCanvas,\r\n  setMedia,\r\n  setCropbox,\r\n  setHoleBox,\r\n  top,\r\n  left\r\n) => {\r\n  cropCanvas.add(holeBox);\r\n  media.top = top;\r\n  media.left = left;\r\n  media.excludeFromExport = true;\r\n  media.id = 'media';\r\n  media.visible = true;\r\n  media.globalCompositeOperation = 'destination-atop';\r\n  media.setControlsVisibility({\r\n    mtr: false,\r\n    ml: false,\r\n    mr: false,\r\n    mt: false,\r\n    mb: false,\r\n  });\r\n  cropCanvas.add(media);\r\n  reverseMedia(media);\r\n  cropCanvas.setActiveObject(media);\r\n  cropCanvas.add(box);\r\n  cropCanvas.requestRenderAll();\r\n  setMedia(media);\r\n  setHoleBox(holeBox);\r\n  setCropbox(box);\r\n};\r\n\r\nexport const prepareMediaForCrop = (\r\n  active,\r\n  canvas,\r\n  cropCanvas,\r\n  setMedia,\r\n  setCropbox,\r\n  setHoleBox,\r\n  cropType,\r\n  assets,\r\n  canvasRef\r\n) => {\r\n  canvas.discardActiveObject();\r\n  active.visible = false;\r\n  active.angle = 0;\r\n  active.setCoords();\r\n  active.clipPath = null;\r\n  active.strokeWidth = 0;\r\n  let isVideo = active.type === 'video';\r\n  let isRectCrop = cropType === 'rect';\r\n  let box = null;\r\n  let holeBox = null;\r\n  let coords = canvasRef.current.getBoundingClientRect();\r\n  let zoom = cropCanvas.getZoom();\r\n  let top = active.top + coords.y / zoom;\r\n  let left = active.left + coords.x / zoom;\r\n  if (isRectCrop) {\r\n    box = getMediaRectCropBox(active, top, left);\r\n    holeBox = getRectHoleBox(box);\r\n  } else {\r\n    box = getMediaCircleCropBox(active, top, left);\r\n    holeBox = getCircleHoleBox(box);\r\n  }\r\n  let mediaAsset = null;\r\n  if (!isVideo) {\r\n    mediaAsset = assets.filter((asset) => asset.src === active.src)[0];\r\n  } else mediaAsset = active._element;\r\n  cropCanvas.add(getOverlayBox(cropCanvas));\r\n\r\n  if (mediaAsset) {\r\n    let ObjectClass = isVideo ? fabric.Video : fabric.CustomImage;\r\n    let media = new ObjectClass(mediaAsset, {\r\n      originalWidth: active.originalWidth,\r\n      originalHeight: active.originalHeight,\r\n      width: active.width,\r\n      height: active.height,\r\n      scaleX: active.scaleX,\r\n      scaleY: active.scaleY,\r\n      cornerRadius: active.cornerRadius,\r\n      cropRect: active.cropRect,\r\n    });\r\n    setCropElements(\r\n      media,\r\n      box,\r\n      holeBox,\r\n      cropCanvas,\r\n      setMedia,\r\n      setCropbox,\r\n      setHoleBox,\r\n      top,\r\n      left\r\n    );\r\n  } else {\r\n    active.clone((cloned) => {\r\n      setCropElements(\r\n        cloned,\r\n        box,\r\n        holeBox,\r\n        cropCanvas,\r\n        setMedia,\r\n        setCropbox,\r\n        setHoleBox,\r\n        top,\r\n        left\r\n      );\r\n    });\r\n  }\r\n};\r\n\r\nexport const cropMedia = (\r\n  active,\r\n  box,\r\n  media,\r\n  setCropped,\r\n  canvas,\r\n  cropCanvas,\r\n  canvasRef\r\n) => {\r\n  let ratioX = box.scaleX / media.scaleX;\r\n  let ratioY = box.scaleY / media.scaleY;\r\n  let newTop = (box.top - media.top) / media.scaleY;\r\n  let newLeft = (box.left - media.left) / media.scaleX;\r\n  active.width = box.width * ratioX;\r\n  active.height = box.height * ratioY;\r\n  active.scaleX = media.scaleX;\r\n  active.scaleY = media.scaleY;\r\n  active.cropRect = {\r\n    x: newLeft,\r\n    y: newTop,\r\n    w: box.width * ratioX,\r\n    h: box.height * ratioY,\r\n  };\r\n  let coords = canvasRef.current.getBoundingClientRect();\r\n  let zoom = cropCanvas.getZoom();\r\n  active.top = box.top - coords.y / zoom;\r\n  active.left = box.left - coords.x / zoom;\r\n  active.setCoords();\r\n\r\n  if (!active.isOnScreen()) {\r\n    let zoom = canvas.getZoom();\r\n    let canvasWidth = canvas.getWidth() / zoom;\r\n    let canvasHeight = canvas.getHeight() / zoom;\r\n    if (active.top > canvasHeight) {\r\n      active.top = canvasHeight - active.height * active.scaleY;\r\n    } else if (active.top < 0) active.top = 0;\r\n    if (active.left > canvasWidth) {\r\n      active.left = canvasWidth - active.width * active.scaleX;\r\n    } else if (active.left < 0) active.left = 0;\r\n  }\r\n\r\n  setCropped(active);\r\n};\r\n\r\nexport const cropFinishHandler = (\r\n  canvas,\r\n  cropCanvas,\r\n  dispatch,\r\n  obj,\r\n  cropType,\r\n  info,\r\n  eventDispatch,\r\n  clearState\r\n) => {\r\n  obj.visible = true;\r\n  obj.angle = info.angle;\r\n  canvas.setActiveObject(obj);\r\n  let type = obj.type;\r\n  obj.setControlsVisibility({\r\n    mtr: type === 'customImage',\r\n    ml: true,\r\n    mr: true,\r\n    mt: true,\r\n    mb: true,\r\n  });\r\n  if (cropType === 'circle') obj.cornerRadius = 100;\r\n  dispatch({ type: 'setCurrentObject', data: { type, object: obj } });\r\n  if (obj.cornerRadius > 0) {\r\n    dispatch({ type: 'setVideoStrokeWidth', data: 0 });\r\n    dispatch({\r\n      type: type === 'video' ? 'setVideoCornerRadius' : 'setImageCornerRadius',\r\n      data: obj.cornerRadius,\r\n    });\r\n  } else if (type === 'video') {\r\n    dispatch({ type: 'setVideoStrokeWidth', data: info.strokeWidth });\r\n  }\r\n  obj.setCoords();\r\n  cropCanvas.clear();\r\n  clearState();\r\n  canvas.requestRenderAll();\r\n  eventDispatch({ type: 'setDbClickEvent', data: null });\r\n  dispatch({ type: 'setShouldCropMedia', data: false });\r\n  dispatch({ type: 'setIsCropMode', data: false });\r\n  dispatch({ type: 'setCurrentCoords', data: obj.lineCoords });\r\n  dispatch({ type: 'setShowToolbar', data: true });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n","const getBounds = (active, box) => {\r\n  let objectHeight = box.height * box.scaleY;\r\n  let objectWidth = box.width * box.scaleX;\r\n  let boundHeight = active.height * active.scaleY;\r\n  let boundWidth = active.width * active.scaleX;\r\n  let top = box.top;\r\n  let left = box.left;\r\n  let bottom = top + objectHeight;\r\n  let right = left + objectWidth;\r\n  let topBound = active.top;\r\n  let bottomBound = topBound + boundHeight;\r\n  let leftBound = active.left;\r\n  let rightBound = leftBound + boundWidth;\r\n  return {\r\n    top,\r\n    left,\r\n    right,\r\n    bottom,\r\n    leftBound,\r\n    topBound,\r\n    rightBound,\r\n    bottomBound,\r\n    objectWidth,\r\n    objectHeight,\r\n  };\r\n};\r\n\r\nexport const restrictActive = (active, box) => {\r\n  active.on('moving', (e) => {\r\n    let {\r\n      top,\r\n      left,\r\n      right,\r\n      bottom,\r\n      leftBound,\r\n      topBound,\r\n      rightBound,\r\n      bottomBound,\r\n      objectWidth,\r\n      objectHeight,\r\n    } = getBounds(box, active);\r\n    //left\r\n    if (left > leftBound) active.left = leftBound;\r\n    //top\r\n    if (top > topBound) active.top = topBound;\r\n    //right\r\n    if (right < rightBound) active.left = rightBound - objectWidth;\r\n    //bottom\r\n    if (bottom < bottomBound) active.top = bottomBound - objectHeight;\r\n  });\r\n\r\n  active.on('scaling', (e) => {\r\n    let {\r\n      top,\r\n      left,\r\n      right,\r\n      bottom,\r\n      leftBound,\r\n      topBound,\r\n      rightBound,\r\n      bottomBound,\r\n      objectWidth,\r\n      objectHeight,\r\n    } = getBounds(box, active);\r\n    active.left = Math.max(Math.min(left, leftBound), rightBound - objectWidth);\r\n    active.top = Math.max(Math.min(top, topBound), bottomBound - objectHeight);\r\n\r\n    if (active.scaleX < box.scaleX || active.scaleY < box.scaleY) {\r\n      active.scaleX = Math.max(box.scaleX, box.scaleY);\r\n      active.scaleY = active.scaleX;\r\n      if (left > leftBound || right < rightBound) active.left = leftBound;\r\n      if (top > topBound || bottom < bottomBound) active.top = topBound;\r\n    }\r\n  });\r\n};\r\n\r\nconst setHoleBoxPosition = (holeBox, box) => {\r\n  holeBox.left = box.left;\r\n  holeBox.top = box.top;\r\n  holeBox.scaleY = box.scaleY;\r\n  holeBox.scaleX = box.scaleX;\r\n  holeBox.setCoords();\r\n};\r\n\r\nexport const restrictBox = (active, box, holeBox) => {\r\n  box.on('moving', (e) => {\r\n    let {\r\n      top,\r\n      left,\r\n      right,\r\n      bottom,\r\n      leftBound,\r\n      topBound,\r\n      rightBound,\r\n      bottomBound,\r\n      objectWidth,\r\n      objectHeight,\r\n    } = getBounds(active, box);\r\n    //left\r\n    if (left < leftBound) box.left = leftBound;\r\n    //top\r\n    if (top < topBound) box.top = topBound;\r\n    //right\r\n    if (right > rightBound) box.left = rightBound - objectWidth;\r\n    //bottom\r\n    if (bottom > bottomBound) box.top = bottomBound - objectHeight;\r\n\r\n    if (holeBox) setHoleBoxPosition(holeBox, box);\r\n  });\r\n\r\n  box.on('scaling', (e) => {\r\n    let {\r\n      top,\r\n      left,\r\n      right,\r\n      bottom,\r\n      leftBound,\r\n      topBound,\r\n      rightBound,\r\n      bottomBound,\r\n      objectWidth,\r\n      objectHeight,\r\n    } = getBounds(active, box);\r\n    box.left = Math.min(Math.max(left, leftBound), rightBound - objectWidth);\r\n    box.top = Math.min(Math.max(top, topBound), bottomBound - objectHeight);\r\n    if (box.scaleX > active.scaleX) {\r\n      box.scaleX = active.scaleX;\r\n      if (left < leftBound || right > rightBound) box.left = leftBound;\r\n    }\r\n    if (box.scaleY > active.scaleY) {\r\n      box.scaleY = active.scaleY;\r\n      if (top < topBound || bottom > bottomBound) box.top = topBound;\r\n    }\r\n    if (holeBox) setHoleBoxPosition(holeBox, box);\r\n  });\r\n};\r\n","import { useEffect, useCallback, useState } from 'react';\r\nimport {\r\n  prepareMediaForCrop,\r\n  cropMedia,\r\n  cropFinishHandler,\r\n} from '../utils/mediaCrop';\r\nimport { restrictActive, restrictBox } from '../utils/restrict';\r\n\r\nconst useCropMedia = (\r\n  state,\r\n  dispatch,\r\n  canvas,\r\n  cropCanvas,\r\n  eventDispatch,\r\n  assets,\r\n  canvasRef\r\n) => {\r\n  const [activeInfo, setActiveInfo] = useState(null);\r\n  const [activeEl, setAcitveEl] = useState(null);\r\n  const [media, setMedia] = useState(null);\r\n  const [holeBox, setHoleBox] = useState(null);\r\n  const [cropbox, setCropbox] = useState(null);\r\n  const [croppedMedia, setCroppedMedia] = useState(null);\r\n\r\n  const clearState = useCallback(() => {\r\n    setActiveInfo(null);\r\n    setMedia(null);\r\n    setAcitveEl(null);\r\n    setCropbox(null);\r\n    setCroppedMedia(null);\r\n  }, []);\r\n\r\n  // Crop Media\r\n  useEffect(() => {\r\n    if (state.shouldCropMedia && activeEl && cropbox && media) {\r\n      cropMedia(\r\n        activeEl,\r\n        cropbox,\r\n        media,\r\n        setCroppedMedia,\r\n        canvas,\r\n        cropCanvas,\r\n        canvasRef\r\n      );\r\n    } else if (state.shouldCropMedia) setCroppedMedia(activeEl);\r\n  }, [\r\n    state.shouldCropMedia,\r\n    activeEl,\r\n    cropbox,\r\n    media,\r\n    canvas,\r\n    cropCanvas,\r\n    canvasRef,\r\n  ]);\r\n\r\n  // If Cropped Media\r\n  useEffect(() => {\r\n    if (croppedMedia && state.shouldCropMedia) {\r\n      cropFinishHandler(\r\n        canvas,\r\n        cropCanvas,\r\n        dispatch,\r\n        croppedMedia,\r\n        state.cropType,\r\n        activeInfo,\r\n        eventDispatch,\r\n        clearState\r\n      );\r\n    }\r\n  }, [\r\n    activeInfo,\r\n    croppedMedia,\r\n    state.shouldCropMedia,\r\n    state.cropType,\r\n    dispatch,\r\n    canvas,\r\n    cropCanvas,\r\n    eventDispatch,\r\n    clearState,\r\n  ]);\r\n\r\n  /// Preparation For Crop\r\n  useEffect(() => {\r\n    if (state.isCropMode) {\r\n      let active = canvas.getActiveObject();\r\n      if (active && active.originalWidth > 0 && active.originalHeight > 0) {\r\n        setAcitveEl(active);\r\n        setActiveInfo({\r\n          cornerRadius: active.cornerRadius,\r\n          width: active.width,\r\n          height: active.height,\r\n          top: active.top,\r\n          left: active.left,\r\n          angle: active.angle,\r\n          strokeWidth: active.strokeWidth,\r\n          cropRect: active.cropRect,\r\n        });\r\n        prepareMediaForCrop(\r\n          active,\r\n          canvas,\r\n          cropCanvas,\r\n          setMedia,\r\n          setCropbox,\r\n          setHoleBox,\r\n          state.cropType,\r\n          assets,\r\n          canvasRef\r\n        );\r\n      } else {\r\n        eventDispatch({ type: 'setDbClickEvent', data: null });\r\n        dispatch({ type: 'setIsCropMode', data: false });\r\n      }\r\n    }\r\n  }, [\r\n    state.isCropMode,\r\n    state.cropType,\r\n    canvas,\r\n    cropCanvas,\r\n    dispatch,\r\n    eventDispatch,\r\n    assets,\r\n    canvasRef,\r\n  ]);\r\n\r\n  /// If Cropbox and Active El start Crop\r\n  useEffect(() => {\r\n    if (cropbox && media && holeBox) {\r\n      restrictBox(media, cropbox, holeBox);\r\n      restrictActive(media, cropbox);\r\n    }\r\n    return () => {\r\n      if (media) {\r\n        media.off('moving');\r\n        media.off('scaling');\r\n      }\r\n      if (cropbox) {\r\n        cropbox.off('moving');\r\n        cropbox.off('scaling');\r\n      }\r\n    };\r\n  }, [cropbox, media, holeBox]);\r\n\r\n  // Listen to Canvas Click\r\n  useEffect(() => {\r\n    if (cropbox && state.isCropMode) {\r\n      cropCanvas.on('mouse:down', (e) => {\r\n        if (\r\n          !e.target ||\r\n          (e.target.type !== 'cropbox' && e.target.id !== 'media')\r\n        ) {\r\n          dispatch({ type: 'setShouldCropMedia', data: true });\r\n          dispatch({ type: 'setShowToolbar', data: false });\r\n        }\r\n      });\r\n      cropCanvas.on('mouse:over', (e) => {\r\n        if (\r\n          e.target &&\r\n          (e.target.type === 'cropbox' || e.target.id === 'media')\r\n        ) {\r\n          cropCanvas.setActiveObject(e.target);\r\n          cropCanvas.renderAll();\r\n        }\r\n      });\r\n      cropCanvas.on('mouse:move', (e) => {\r\n        if (\r\n          e.transform &&\r\n          e.transform.action === 'drag' &&\r\n          e.target.type === 'cropbox'\r\n        ) {\r\n          e.target = media;\r\n          e.transform.target = media;\r\n          e.transform.offsetX = e.absolutePointer.x - media.left;\r\n          e.transform.offsetY = e.absolutePointer.y - media.top;\r\n        }\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (cropCanvas) {\r\n        cropCanvas.off('mouse:over');\r\n        cropCanvas.off('mouse:down');\r\n        cropCanvas.off('mouse:move');\r\n      }\r\n    };\r\n  }, [cropbox, state.isCropMode, dispatch, cropCanvas, media]);\r\n};\r\n\r\nexport default useCropMedia;\r\n","import { useState, useEffect } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst useAddCanvas = (\r\n  canvas,\r\n  setCropCanvas\r\n) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  useEffect(() => {\r\n    if(canvas && isFirstLoad) {\r\n      setIsFirstLoad(false)\r\n      let fabricCanvas = new fabric.Canvas('cropCanvas', {\r\n        width: 0,\r\n        height: 0,\r\n        preserveObjectStacking: true,\r\n        fireRightClick: true,\r\n        stopContextMenu: true,\r\n        selection: false,\r\n        uniScaleKey: null,\r\n        altActionKey: null\r\n      });\r\n      setCropCanvas(fabricCanvas)\r\n    }\r\n  }, [canvas, isFirstLoad, setCropCanvas])\r\n};\r\n\r\nexport default useAddCanvas;","import { useEffect, useCallback, useRef } from 'react';\r\n\r\nconst setOffset = (objs, newZoom, newWidth, newHeight, offset) => {\r\n  for (let i = 0; i < objs.length; i++) {\r\n    let obj = objs[i];\r\n    if (obj.id === 'overlay') {\r\n      obj.width = newWidth / newZoom;\r\n      obj.height = newHeight / newZoom;\r\n    } else {\r\n      obj.top -= offset.top;\r\n      obj.left -= offset.left;\r\n    }\r\n  }\r\n};\r\n\r\nconst getOffset = (obj, prevTop, prevLeft, newZoom, coords) => {\r\n  let offset = { left: 0, top: 0 };\r\n  if (obj) {\r\n    let newTop = prevTop + coords.y / newZoom;\r\n    let newLeft = prevLeft + coords.x / newZoom;\r\n    offset.top = obj.top - newTop;\r\n    offset.left = obj.left - newLeft;\r\n  }\r\n  return offset;\r\n};\r\n\r\nconst updateSize = (state, cropCanvas) => {\r\n  let windowWidth = window.innerWidth;\r\n  let windowHeight = window.innerHeight;\r\n  let newZoom = Math.min(\r\n    state.width / state.videoWidth,\r\n    state.height / state.videoHeight\r\n  );\r\n  cropCanvas.setZoom(newZoom);\r\n  cropCanvas.setDimensions({\r\n    width: windowWidth,\r\n    height: windowHeight,\r\n  });\r\n  return { newWidth: windowWidth, newHeight: windowHeight, newZoom };\r\n};\r\n\r\nconst setSize = (state, cropCanvas, canvasRef, coordsRef) => {\r\n  let objs = cropCanvas.getObjects();\r\n  let obj = null;\r\n  let prevTop = null;\r\n  let prevLeft = null;\r\n  if (objs.length > 0) {\r\n    obj = objs.filter((el) => el.id === 'media')[0];\r\n    prevTop = obj.top - coordsRef.current.y / coordsRef.current.zoom;\r\n    prevLeft = obj.left - coordsRef.current.x / coordsRef.current.zoom;\r\n  }\r\n  let { newWidth, newHeight, newZoom } = updateSize(state, cropCanvas);\r\n  if (obj) {\r\n    let coords = canvasRef.current.getBoundingClientRect();\r\n    let offset = getOffset(obj, prevTop, prevLeft, newZoom, coords);\r\n    setOffset(objs, newZoom, newWidth, newHeight, offset);\r\n    coordsRef.current = { x: coords.x, y: coords.y, zoom: newZoom };\r\n  }\r\n  cropCanvas.requestRenderAll();\r\n};\r\n\r\nconst useUpdateCanvas = (\r\n  cropCanvas,\r\n  canvasState,\r\n  isCropMode,\r\n  cropCanvasRef,\r\n  canvasRef\r\n) => {\r\n  const coordsRef = useRef(null);\r\n\r\n  const handleResize = useCallback(() => {\r\n    if (cropCanvas) {\r\n      cropCanvas.resize = canvasState.resize;\r\n      setSize(canvasState, cropCanvas, canvasRef, coordsRef);\r\n    }\r\n  }, [canvasState, cropCanvas, canvasRef]);\r\n\r\n  useEffect(() => {\r\n    handleResize();\r\n  }, [handleResize]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [handleResize]);\r\n\r\n  useEffect(() => {\r\n    if (isCropMode) {\r\n      let coords = canvasRef.current.getBoundingClientRect();\r\n      let zoom = cropCanvas.getZoom();\r\n      coordsRef.current = { x: coords.x, y: coords.y, zoom };\r\n      cropCanvasRef.current.style.display = 'block';\r\n    } else {\r\n      coordsRef.current = null;\r\n      cropCanvasRef.current.style.display = 'none';\r\n    }\r\n  }, [isCropMode, cropCanvas, cropCanvasRef, canvasRef]);\r\n};\r\n\r\nexport default useUpdateCanvas;\r\n","import React, { useState, useContext, useRef } from 'react';\r\nimport styles from './CropCanvas.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport useCropMedia from '../hooks/useCropMedia';\r\nimport useAddCanvas from './hooks/useAddCanvas';\r\nimport useUpdateCanvas from './hooks/useUpdateCanvas';\r\n\r\nconst CropCanvas = ({ canvas, userAssets, canvasRef }) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { eventDispatch } = useContext(EventContext);\r\n  const [cropCanvas, setCropCanvas] = useState(null);\r\n  const cropCanvasRef = useRef(null);\r\n\r\n  useAddCanvas(canvas, setCropCanvas);\r\n  useCropMedia(\r\n    editorState,\r\n    editorDispatch,\r\n    canvas,\r\n    cropCanvas,\r\n    eventDispatch,\r\n    userAssets,\r\n    canvasRef\r\n  );\r\n  useUpdateCanvas(\r\n    cropCanvas,\r\n    editorState.canvasState,\r\n    editorState.isCropMode,\r\n    cropCanvasRef,\r\n    canvasRef,\r\n    editorDispatch\r\n  );\r\n\r\n  const backdropClickHandler = () => {\r\n    editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n    editorDispatch({ type: 'setShowToolbar', data: false });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.CropCanvas} ref={cropCanvasRef}>\r\n        <canvas id='cropCanvas' />\r\n      </div>\r\n      {editorState.isCropMode ? (\r\n        <div className={styles.Backdrop} onClick={backdropClickHandler} />\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CropCanvas;\r\n","const cacheAsset = (src) => {\r\n  return new Promise((resolve, reject) => {\r\n    let img = new Image();\r\n    img.crossOrigin = 'Anonymous';\r\n    img.onload = () => resolve(img);\r\n    img.onerror = () => reject();\r\n    img.src = src;\r\n  });\r\n};\r\n\r\nexport const cacheAssets = async (arr, setAssets, isMounted) => {\r\n  let filtered = [...new Set(arr)];\r\n  let promises = filtered.map((src) => cacheAsset(src));\r\n  let assets = await Promise.allSettled(promises);\r\n  let assetArr = assets\r\n    .filter((asset) => asset.status === 'fulfilled')\r\n    .map((asset) => asset.value);\r\n  if (isMounted.current) setAssets(assetArr);\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\nexport const getCanvasObject = (canvas) => {\r\n  let jsonCanvas = canvas.toJSON([\r\n    'id',\r\n    'rx',\r\n    'ry',\r\n    'crossOrigin',\r\n  ]);\r\n  let zoom = canvas.getZoom();\r\n  jsonCanvas.width = Math.round(canvas.getWidth() / zoom);\r\n  jsonCanvas.height = Math.round(canvas.getHeight() / zoom);\r\n  jsonCanvas.resize = canvas.resize;\r\n  return jsonCanvas;\r\n};\r\n\r\nexport const getCanvasImage = (canvas, setImage) => {\r\n  let pxRatio = 1;\r\n  let newCanvas = new fabric.Canvas();\r\n  let jsonCanvas = JSON.stringify(canvas);\r\n  let zoom = canvas.getZoom();\r\n  newCanvas.loadFromJSON(jsonCanvas, () => {\r\n    newCanvas.setZoom(pxRatio);\r\n    newCanvas.setDimensions({\r\n      width: (canvas.getWidth() / zoom) * pxRatio,\r\n      height: (canvas.getHeight() / zoom) * pxRatio,\r\n    });\r\n    let img = newCanvas.toDataURL({\r\n      format: 'image/jpg',\r\n      quality: 1,\r\n    });\r\n    setImage(img);\r\n  });\r\n};\r\n\r\nexport const getResizeValues = (initialWidth, initialHeight, option) => {\r\n  let width = initialWidth;\r\n  let height = initialHeight;\r\n  let resize = 'original';\r\n  if (option === 'landscape') {\r\n    // width = Math.round((height * 16) / 9);\r\n    // height = Math.round((width * 9) / 16);\r\n    width = 1280;\r\n    height = 720;\r\n    resize = option;\r\n  } else if (option === 'square') {\r\n    // if (height > width) width = height;\r\n    // else height = width;\r\n    width = 1280;\r\n    height = 1280;\r\n    resize = option;\r\n  } else if (option === 'vertical') {\r\n    // if (width > height) width = initialHeight;\r\n    // else width = initialWidth;\r\n    // height = Math.round((width * 16) / 9);\r\n    width = 720;\r\n    height = 1280;\r\n    resize = option;\r\n  }\r\n  return { width, height, resize };\r\n};\r\n","import { roundedCorners, loadAndUse } from './updateObject';\r\nimport { getResizeValues } from '../../../utils/canvasUtils';\r\n\r\nconst positionObject = (templateEl, currentEl) => {\r\n  let width = currentEl.width;\r\n  let height = currentEl.height;\r\n  let x = templateEl.left;\r\n  let y = templateEl.top;\r\n\r\n  if (\r\n    templateEl.width * templateEl.scaleX > currentEl.originalWidth ||\r\n    templateEl.height * templateEl.scaleY > currentEl.originalHeight\r\n  ) {\r\n    let heightRatio = templateEl.height / templateEl.originalHeight;\r\n    let widthRatio = templateEl.width / templateEl.originalWidth;\r\n    width = currentEl.originalWidth * widthRatio;\r\n    height = currentEl.originalHeight * heightRatio;\r\n\r\n    let scaleX = (templateEl.width * templateEl.scaleX) / width;\r\n    let scaleY = (templateEl.height * templateEl.scaleY) / height;\r\n    let scale = Math.min(scaleX, scaleY);\r\n    templateEl.scaleX = scale;\r\n    templateEl.scaleY = scale;\r\n  } else {\r\n    width = templateEl.width * templateEl.scaleX;\r\n    height = templateEl.height * templateEl.scaleY;\r\n    templateEl.scaleX = 1;\r\n    templateEl.scaleY = 1;\r\n  }\r\n\r\n  if (x + width > currentEl.originalWidth) {\r\n    x -= x + width - currentEl.originalWidth;\r\n  }\r\n  if (y + height > currentEl.originalHeight) {\r\n    y -= y + height - currentEl.originalHeight;\r\n  }\r\n\r\n  templateEl.originalWidth = currentEl.originalWidth;\r\n  templateEl.originalHeight = currentEl.originalHeight;\r\n  templateEl.width = width;\r\n  templateEl.height = height;\r\n  templateEl.cropRect = {\r\n    x,\r\n    y,\r\n    w: width,\r\n    h: height,\r\n  };\r\n  templateEl.src = currentEl.src;\r\n  if (templateEl.cornerRadius !== 0) {\r\n    templateEl.set(\r\n      'clipPath',\r\n      roundedCorners(templateEl, templateEl.cornerRadius)\r\n    );\r\n  }\r\n  templateEl.setCoords();\r\n};\r\n\r\nconst finishHandler = (\r\n  canvas,\r\n  lastId,\r\n  videos,\r\n  state,\r\n  template,\r\n  setSpeakerVideos,\r\n  setObjectIdCount,\r\n  dispatch,\r\n  speakerVideos\r\n) => {\r\n  let currentEl = null;\r\n  for (let i = 0; i < videos.length; i++) {\r\n    let templateEl = videos[i];\r\n    if (speakerVideos[i]) currentEl = speakerVideos[i];\r\n    if (currentEl) positionObject(templateEl, currentEl);\r\n    else canvas.remove(templateEl);\r\n  }\r\n\r\n  let { width, height, resize } = getResizeValues(\r\n    state.canvasState.initialWidth,\r\n    state.canvasState.initialHeight,\r\n    template.resize\r\n  );\r\n\r\n  dispatch({ type: 'setVideoSize', data: { width, height, resize } });\r\n  setObjectIdCount(lastId);\r\n  setSpeakerVideos(videos);\r\n  dispatch({ type: 'setIsLoadingTemplate', data: false });\r\n};\r\n\r\nexport const loadCanvas = (\r\n  canvas,\r\n  template,\r\n  isMounted,\r\n  state,\r\n  setSpeakerVideos,\r\n  setObjectIdCount,\r\n  dispatch,\r\n  speakerVideos,\r\n  setFabricSub\r\n) => {\r\n  canvas.clear();\r\n  let videos = [];\r\n  let lastId = 1;\r\n  canvas.loadFromJSON(template, () => {\r\n    if (isMounted.current) {\r\n      let objects = canvas.getObjects();\r\n      for (let i = 0; i < objects.length; i++) {\r\n        let obj = objects[i];\r\n        if (obj.id === 'subtitle') {\r\n          setFabricSub(obj);\r\n          if (!state.isSubtitles) {\r\n            dispatch({ type: 'setIsSubtitles', data: true });\r\n          }\r\n          dispatch({\r\n            type: 'setSubtitlesState',\r\n            data: {\r\n              fontFamily: obj.fontFamily,\r\n              fontStyle: obj.fontStyle,\r\n              fontWeight: obj.fontWeight,\r\n              fontSize: obj.fontSize,\r\n              fill: obj.fill,\r\n              backgroundColor: obj.backgroundColor,\r\n            },\r\n          });\r\n          loadAndUse(canvas, obj, obj.fontFamily);\r\n        } else {\r\n          obj.id = lastId;\r\n          lastId++;\r\n          if (obj.type === 'customTextbox') {\r\n            loadAndUse(canvas, obj, obj.fontFamily);\r\n          } else if (obj.type === 'video') videos.push(obj);\r\n        }\r\n      }\r\n\r\n      finishHandler(\r\n        canvas,\r\n        lastId,\r\n        videos,\r\n        state,\r\n        template,\r\n        setSpeakerVideos,\r\n        setObjectIdCount,\r\n        dispatch,\r\n        speakerVideos\r\n      );\r\n    }\r\n  });\r\n};\r\n","import { useState, useEffect, useRef } from 'react';\r\nimport { cacheAssets } from '../../../utils/cacheAssets';\r\nimport { loadCanvas } from '../utils/template';\r\n\r\nconst useLoadTemplate = (\r\n  templateToLoad,\r\n  setTemplateToLoad,\r\n  canvas,\r\n  video,\r\n  editorState,\r\n  dispatch,\r\n  setUserAssets,\r\n  setObjectIdCount,\r\n  setSpeakerVideos,\r\n  speakerVideos,\r\n  setFabricSub\r\n) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [assets, setAssets] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (assets) {\r\n      setIsFirstLoad(true);\r\n      setAssets(null);\r\n      setUserAssets(assets);\r\n      loadCanvas(\r\n        canvas,\r\n        templateToLoad,\r\n        isMounted,\r\n        editorState,\r\n        setSpeakerVideos,\r\n        setObjectIdCount,\r\n        dispatch,\r\n        speakerVideos,\r\n        setFabricSub\r\n      );\r\n      setTemplateToLoad(null);\r\n    }\r\n  }, [\r\n    templateToLoad,\r\n    canvas,\r\n    assets,\r\n    editorState,\r\n    setUserAssets,\r\n    setTemplateToLoad,\r\n    setSpeakerVideos,\r\n    setObjectIdCount,\r\n    dispatch,\r\n    speakerVideos,\r\n    setFabricSub,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (canvas && templateToLoad && isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      dispatch({ type: 'setIsSubtitles', data: false });\r\n      setFabricSub(null);\r\n      dispatch({ type: 'setIsLoadingTemplate', data: true });\r\n      video.pause();\r\n      canvas.clear();\r\n      let assets = templateToLoad.objects\r\n        .filter((obj) => obj.type === 'customImage')\r\n        .map((img) => img.src);\r\n      cacheAssets(assets, setAssets, isMounted);\r\n    }\r\n  }, [templateToLoad, canvas, dispatch, video, isFirstLoad, setFabricSub]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n};\r\n\r\nexport default useLoadTemplate;\r\n","import React, { useState, useContext } from 'react';\r\nimport styles from './PlayerCanvas.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport useAddObject from '../hooks/useAddObject';\r\nimport useSelectionObserver from '../hooks/useSelectionObserver';\r\nimport useGuidelines from '../hooks/useGuidelines';\r\nimport useUpdateObject from '../hooks/useUpdateObject';\r\nimport useUpdateCanvas from '../hooks/useUpdateCanvas';\r\nimport useAddCanvas from '../hooks/useAddCanvas';\r\nimport useAddSpeakers from '../hooks/useAddSpeakers';\r\nimport useClickListener from '../hooks/useClickListener';\r\nimport Toolbar from '../../Toolbar/Toolbar';\r\nimport ContextMenu from '../ContextMenu/ContextMenu';\r\nimport EventContext from '../../../contexts/EventContext';\r\nimport useAnimate from '../hooks/useAnimate';\r\nimport CropCanvas from '../CropCanvas/CropCanvas';\r\nimport useLoadTemplate from '../hooks/useLoadTemplate';\r\n\r\nconst PlayerCanvas = ({\r\n  canvas,\r\n  setCanvas,\r\n  video,\r\n  fabricSub,\r\n  setFabricSub,\r\n  currentTime,\r\n  speakers,\r\n  info,\r\n  userAssets,\r\n  setUserAssets,\r\n  templateToLoad,\r\n  setTemplateToLoad,\r\n  clipboard,\r\n  setClipboard,\r\n  objectIdCount,\r\n  setObjectIdCount,\r\n  updatetObjectId,\r\n  speakerVideos,\r\n  setSpeakerVideos,\r\n  canvasRef,\r\n}) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { eventState, eventDispatch } = useContext(EventContext);\r\n  const [isCanvasData, setIsCanvasData] = useState(false);\r\n\r\n  useLoadTemplate(\r\n    templateToLoad,\r\n    setTemplateToLoad,\r\n    canvas,\r\n    video,\r\n    editorState,\r\n    editorDispatch,\r\n    setUserAssets,\r\n    setObjectIdCount,\r\n    setSpeakerVideos,\r\n    speakerVideos,\r\n    setFabricSub\r\n  );\r\n  useAnimate(canvas, speakerVideos, video, currentTime);\r\n  useGuidelines(\r\n    true,\r\n    editorState.canvasState,\r\n    canvas,\r\n    eventState,\r\n    eventDispatch,\r\n    editorDispatch,\r\n    editorState.shouldSaveTemplate\r\n  );\r\n  useAddObject(\r\n    editorState,\r\n    editorDispatch,\r\n    canvas,\r\n    objectIdCount,\r\n    updatetObjectId,\r\n    userAssets,\r\n    setUserAssets\r\n  );\r\n  useSelectionObserver(canvas, editorState, editorDispatch, fabricSub);\r\n  useUpdateObject(editorState, editorDispatch, canvas);\r\n  useUpdateCanvas(editorState.canvasState, editorDispatch, canvas);\r\n  useAddCanvas(\r\n    editorState.canvasState,\r\n    setCanvas,\r\n    info,\r\n    setIsCanvasData,\r\n    speakers,\r\n    setObjectIdCount,\r\n    setSpeakerVideos,\r\n    userAssets,\r\n    setFabricSub,\r\n    editorDispatch\r\n  );\r\n  useClickListener(canvas, editorState);\r\n  useAddSpeakers(\r\n    video,\r\n    canvas,\r\n    speakers,\r\n    objectIdCount,\r\n    setObjectIdCount,\r\n    isCanvasData,\r\n    setSpeakerVideos\r\n  );\r\n  \r\n  return (\r\n    <div\r\n      className={styles.CanvasComponent}\r\n      id='canvasComponent'\r\n      ref={canvasRef}\r\n    >\r\n      <div className={styles.Canvas}>\r\n        <canvas id='canvas' />\r\n      </div>\r\n      <CropCanvas\r\n        canvas={canvas}\r\n        userAssets={userAssets}\r\n        canvasRef={canvasRef}\r\n      />\r\n      {editorState.showToolbar &&\r\n      editorState.currentObject.type.length > 0 &&\r\n      editorState.currentObject.type !== 'activeSelection' ? (\r\n        <Toolbar canvas={canvas} type={editorState.currentObject.type} />\r\n      ) : null}\r\n      <ContextMenu\r\n        canvas={canvas}\r\n        objId={objectIdCount}\r\n        updateId={updatetObjectId}\r\n        clipboard={clipboard}\r\n        setClipboard={setClipboard}\r\n        fabricSub={fabricSub}\r\n        dispatch={editorDispatch}\r\n        setSpeakerVideos={setSpeakerVideos}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlayerCanvas;\r\n","import { useReducer } from 'react';\r\n\r\nconst initialState = {\r\n  isMoving: false,\r\n  rightClickEvent: null,\r\n  dbClickEvent: null,\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'setIsMoving':\r\n      return { ...state, isMoving: action.data };\r\n    case 'setRightClickEvent':\r\n      return { ...state, rightClickEvent: action.data };\r\n    case 'setDbClickEvent':\r\n      return { ...state, dbClickEvent: action.data };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst useEventState = () => {\r\n  const [eventState, eventDispatch] = useReducer(reducer, initialState);\r\n  return [eventState, eventDispatch];\r\n};\r\n\r\nexport default useEventState;\r\n","import React, { useContext } from 'react';\r\nimport EditorContext from '../../../../contexts/EditorContext';\r\nimport styles from './ResizeDropdown.module.css';\r\nimport { getResizeValues } from '../../../../utils/canvasUtils';\r\n\r\nconst options = [\r\n  {\r\n    name: 'landscape',\r\n    text: 'Landscape 16:9',\r\n    boxStyle: { width: '11.25rem' },\r\n  },\r\n  {\r\n    name: 'square',\r\n    text: 'Square 1:1',\r\n    boxStyle: { width: '6.375rem' },\r\n  },\r\n  {\r\n    name: 'vertical',\r\n    text: 'Vertical 9:16',\r\n    boxStyle: { width: '3.6875rem' },\r\n  },\r\n];\r\n\r\nconst ResizeDropdown = () => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const clickHandler = (e) => {\r\n    let id = e.currentTarget.id;\r\n    let { width, height, resize } = getResizeValues(\r\n      editorState.canvasState.initialWidth,\r\n      editorState.canvasState.initialHeight,\r\n      id\r\n    );\r\n    editorDispatch({ type: 'setVideoSize', data: { width, height, resize } });\r\n    editorDispatch({ type: 'setIsResizeDropdown', data: false });\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Dropdown}>\r\n      <ul className={styles.SizeOptions}>\r\n        {options.map((size) => {\r\n          return (\r\n            <li\r\n              key={size.name}\r\n              id={size.name}\r\n              className={[\r\n                styles.SizeOption,\r\n                editorState.canvasState.resize === size.name\r\n                  ? styles.Current\r\n                  : null,\r\n              ].join(' ')}\r\n              onClick={clickHandler}\r\n            >\r\n              <p className={styles.SizeOptionText}>{size.text}</p>\r\n              <div className={styles.SizeOptionBox} style={size.boxStyle}></div>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResizeDropdown;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useDeleteTemplate = () => {\r\n  const [isDeletingTemplate, setIsDeletingTemplate] = useState(false);\r\n  const [deleteTemplateRes, setDeleteTemplateRes] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosDeleteTemplate = useCallback((id) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .delete(`/template/${id}`)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const deleteTemplate = useCallback(\r\n    async (id) => {\r\n      setDeleteTemplateRes(null);\r\n      setIsDeletingTemplate(true);\r\n      try {\r\n        const res = await axiosDeleteTemplate(id);\r\n        if (isMounted.current) setDeleteTemplateRes(res.data);\r\n        console.log(res);\r\n      } catch (err) {\r\n        console.log('Error Deleting Templates', err);\r\n      } finally {\r\n        if (isMounted.current) setIsDeletingTemplate(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosDeleteTemplate]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isDeletingTemplate, deleteTemplate, deleteTemplateRes };\r\n};\r\n\r\nexport default useDeleteTemplate;\r\n","import React from 'react';\r\nimport './Spinner.css';\r\n\r\nconst spinner = ({style}) => {\r\n  return (\r\n    <div className='sk-circle' style={style}>\r\n      <div className='sk-circle1 sk-child'></div>\r\n      <div className='sk-circle2 sk-child'></div>\r\n      <div className='sk-circle3 sk-child'></div>\r\n      <div className='sk-circle4 sk-child'></div>\r\n      <div className='sk-circle5 sk-child'></div>\r\n      <div className='sk-circle6 sk-child'></div>\r\n      <div className='sk-circle7 sk-child'></div>\r\n      <div className='sk-circle8 sk-child'></div>\r\n      <div className='sk-circle9 sk-child'></div>\r\n      <div className='sk-circle10 sk-child'></div>\r\n      <div className='sk-circle11 sk-child'></div>\r\n      <div className='sk-circle12 sk-child'></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default spinner;\r\n","import React, { useContext, useEffect, useRef, useCallback } from 'react';\r\nimport EditorContext from '../../../../contexts/EditorContext';\r\nimport styles from './TemplatesDropdown.module.css';\r\nimport useDeleteTemplate from '../../../../hooks/useDeleteTemplate';\r\nimport Spinner from '../../../../components/Spinner/Spinner';\r\nimport uploadSvg from '../../../../assets/editor/upload.svg';\r\n\r\nconst TemplatesDropdown = ({\r\n  isCreatingTemplate,\r\n  templates,\r\n  setShouldGetTemplates,\r\n  currentOption,\r\n  setCurrentOption,\r\n  setTemplateToLoad,\r\n  isGettingTemplates,\r\n  templateTypeOption,\r\n}) => {\r\n  const { editorDispatch } = useContext(EditorContext);\r\n  const { isDeletingTemplate, deleteTemplate, deleteTemplateRes } =\r\n    useDeleteTemplate();\r\n  const templatesRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (deleteTemplateRes) setShouldGetTemplates(true);\r\n  }, [deleteTemplateRes, setShouldGetTemplates]);\r\n\r\n  useEffect(() => {\r\n    if (!currentOption) setShouldGetTemplates(true);\r\n  }, [currentOption, setShouldGetTemplates]);\r\n\r\n  const handleScroll = useCallback((e) => {\r\n    e.preventDefault();\r\n    templatesRef.current.scrollLeft += e.deltaY;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let container = templatesRef.current;\r\n    container.addEventListener('wheel', handleScroll);\r\n    return () => container.removeEventListener('wheel', handleScroll);\r\n  }, [handleScroll]);\r\n\r\n  const templateOptionClickHanlder = (e) => {\r\n    let id = e.currentTarget.id;\r\n    if (templates && templates[id]) {\r\n      setCurrentOption({\r\n        type: id,\r\n        templates: [...templates[id]],\r\n      });\r\n    }\r\n  };\r\n\r\n  const saveAsTemplateClickHandler = () => {\r\n    if (!isCreatingTemplate) {\r\n      editorDispatch({ type: 'setShouldSaveTemplate', data: true });\r\n    }\r\n  };\r\n\r\n  const templateClickHandler = (target) => {\r\n    editorDispatch({ type: 'setIsTemplatesDropdown', data: false });\r\n    setTemplateToLoad(target);\r\n  };\r\n\r\n  const deleteClickHandler = (target) => {\r\n    let box = window.confirm('Are you sure you want to delete this template?');\r\n    if (box === true) deleteTemplate(target._id);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Dropdown}>\r\n      <ul className={styles.TemplateOptions}>\r\n        <li\r\n          className={[\r\n            styles.TemplateOption,\r\n            currentOption && currentOption.type === 'commonTemplate'\r\n              ? styles.Current\r\n              : null,\r\n          ].join(' ')}\r\n          id='commonTemplate'\r\n          onClick={templateOptionClickHanlder}\r\n        >\r\n          Templates\r\n        </li>\r\n        <li\r\n          className={[\r\n            styles.TemplateOption,\r\n            currentOption && currentOption.type === 'userTemplate'\r\n              ? styles.Current\r\n              : null,\r\n          ].join(' ')}\r\n          id='userTemplate'\r\n          onClick={templateOptionClickHanlder}\r\n        >\r\n          My templates\r\n        </li>\r\n      </ul>\r\n      <ul className={styles.Templates} ref={templatesRef}>\r\n        {currentOption && currentOption.type === 'userTemplate' ? (\r\n          <li\r\n            className={[styles.Template, styles.SaveTemplate].join(' ')}\r\n            id='saveAsTemplate'\r\n            onClick={saveAsTemplateClickHandler}\r\n          >\r\n            {isCreatingTemplate ? (\r\n              <Spinner style={{ width: '40px', height: '40px' }} />\r\n            ) : (\r\n              <>\r\n                <img className={styles.SaveImg} src={uploadSvg} alt='save' />\r\n                <span className={styles.SaveText}>Save as template</span>\r\n              </>\r\n            )}\r\n          </li>\r\n        ) : null}\r\n        {currentOption && !isDeletingTemplate && !isGettingTemplates ? (\r\n          currentOption.templates.map((template) => {\r\n            return (\r\n              <li\r\n                className={styles.Template}\r\n                key={template._id}\r\n                id={template._id}\r\n              >\r\n                {templateTypeOption === currentOption.type ? (\r\n                  <div\r\n                    className={styles.DeleteContainer}\r\n                    onClick={() => deleteClickHandler(template)}\r\n                  >\r\n                    <span className={styles.XLine1}></span>\r\n                    <span className={styles.XLine2}></span>\r\n                  </div>\r\n                ) : null}\r\n                <img\r\n                  src={template.image_url}\r\n                  alt='template'\r\n                  className={styles.TemplateImg}\r\n                  onClick={() => templateClickHandler(template)}\r\n                />\r\n              </li>\r\n            );\r\n          })\r\n        ) : (\r\n          <Spinner style={{ width: '70px', height: '70px' }} />\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TemplatesDropdown;\r\n","import React, { useContext } from 'react';\r\nimport styles from './Backdrop.module.css';\r\nimport EditorContext from '../../contexts/EditorContext';\r\n\r\nconst Backdrop = (props) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n\r\n  const clickHandler = (e) => {\r\n    if (e.target.id === 'backdrop') {\r\n      let actionType = '';\r\n      if (editorState.isImageDropdown) actionType = 'setIsImageDropdown';\r\n      else if (editorState.isShapeDropdown) actionType = 'setIsShapeDropdown';\r\n      else if (editorState.isSubtitlesDropdown)\r\n        actionType = 'setIsSubtitlesDropdown';\r\n      else if (editorState.shouldReplaceImage)\r\n        actionType = 'setShouldReplaceImage';\r\n      else if (editorState.isResizeDropdown) actionType = 'setIsResizeDropdown';\r\n      else if (editorState.isCanvasBgColorDropdown)\r\n        actionType = 'setIsCanvasBgColorDropdown';\r\n      else if (editorState.isTemplatesDropdown)\r\n        actionType = 'setIsTemplatesDropdown';\r\n      else if (editorState.isZoomDropdown) actionType = 'setIsZoomDropdown';\r\n      else if (editorState.shouldAddCanvasBgImage)\r\n        actionType = 'setShouldAddCanvasBgImage';\r\n      else if (editorState.isDownloadDropdown)\r\n        actionType = 'setIsDownloadDropdown';\r\n      editorDispatch({ type: actionType, data: false });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Backdrop} onClick={clickHandler} id='backdrop'>\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\nexport default Backdrop;\r\n","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgResize(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 15,\n    height: 13,\n    viewBox: \"0 0 15 13\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13 1H2.33333C1.59695 1 1 1.59695 1 2.33333V10.3333C1 11.0697 1.59695 11.6667 2.33333 11.6667H13C13.7364 11.6667 14.3333 11.0697 14.3333 10.3333V2.33333C14.3333 1.59695 13.7364 1 13 1Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.9997 7H9.66634C8.92996 7 8.33301 7.59695 8.33301 8.33333V10.3333C8.33301 11.0697 8.92996 11.6667 9.66634 11.6667H12.9997C13.7361 11.6667 14.333 11.0697 14.333 10.3333V8.33333C14.333 7.59695 13.7361 7 12.9997 7Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgResize);\nexport default __webpack_public_path__ + \"static/media/resize.fc3f81a3.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCropImage(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M4.5 11.4H4.1V11V5.4H1.5V4.6H4.1V2H4.9V4.6H11H11.4V5V10.6H14V11.4H11.4V14H10.6V11.4H4.5ZM10.6 10.6H4.9V5.4H10.6V10.6Z\",\n    fill: \"#999999\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCropImage);\nexport default __webpack_public_path__ + \"static/media/cropImage.165e69b6.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAddText(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 21,\n    viewBox: \"0 0 20 21\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.66667 5.61532C1.66667 4.73126 2.01786 3.88341 2.64298 3.25829C3.2681 2.63317 4.11595 2.28198 5 2.28198H15C15.8841 2.28198 16.7319 2.63317 17.357 3.25829C17.9821 3.88341 18.3333 4.73126 18.3333 5.61532V15.6153C18.3333 16.4994 17.9821 17.3472 17.357 17.9723C16.7319 18.5975 15.8841 18.9486 15 18.9486H5C4.11595 18.9486 3.2681 18.5975 2.64298 17.9723C2.01786 17.3472 1.66667 16.4994 1.66667 15.6153V5.61532Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 7.4747H9.51563V14.6153H10.4844V7.4747H13V6.61533H7V7.4747Z\",\n    fill: \"#999999\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAddText);\nexport default __webpack_public_path__ + \"static/media/addText.b12f42ab.svg\";\nexport { ForwardRef as ReactComponent };","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetTemplates = () => {\r\n  const [isGettingTemplates, setIsGettingTemplates] = useState(false);\r\n  const [templates, setTemplates] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetTemplates = useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get('/template')\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getTemplates = useCallback(async () => {\r\n    setTemplates(null);\r\n    setIsGettingTemplates(true);\r\n    try {\r\n      const res = await axiosGetTemplates();\r\n      if (isMounted.current) setTemplates(res.data);\r\n      console.log(res);\r\n    } catch (err) {\r\n      console.log('Error Getting Templates', err);\r\n    } finally {\r\n      if (isMounted.current) setIsGettingTemplates(false);\r\n      return;\r\n    }\r\n  }, [axiosGetTemplates]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isGettingTemplates, getTemplates, templates, setTemplates };\r\n};\r\n\r\nexport default useGetTemplates;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useCreateTemplate = () => {\r\n  const [isCreatingTemplate, setIsCreatingTemplate] = useState(false);\r\n  const [createdTemplate, setCreatedTemplate] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosCreateTemplate = useCallback((data) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .post('/template', data)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const createTemplate = useCallback(\r\n    async (data) => {\r\n      setCreatedTemplate(null);\r\n      setIsCreatingTemplate(true);\r\n      try {\r\n        const res = await axiosCreateTemplate(data);\r\n        if (isMounted.current) setCreatedTemplate(res.data);\r\n        console.log(res);\r\n      } catch (err) {\r\n        console.log('Error Creating Template', err);\r\n      } finally {\r\n        if (isMounted.current) setIsCreatingTemplate(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosCreateTemplate]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isCreatingTemplate,\r\n    createTemplate,\r\n    createdTemplate,\r\n    setCreatedTemplate,\r\n  };\r\n};\r\n\r\nexport default useCreateTemplate;\r\n","import { useEffect, useState } from 'react';\r\nimport { getCanvasObject, getCanvasImage } from '../../../../utils/canvasUtils';\r\n\r\nconst useSaveTemplate = (\r\n  state,\r\n  dispatch,\r\n  canvas,\r\n  isCreatingTemplate,\r\n  createTemplate,\r\n  type\r\n) => {\r\n  const [canvasImage, setCanvasImage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (state.shouldSaveTemplate && canvasImage) {\r\n      let canvasObject = getCanvasObject(canvas);\r\n      let templateData = {\r\n        ...canvasObject,\r\n        image: canvasImage,\r\n        type: type,\r\n      };\r\n      createTemplate(templateData);\r\n      dispatch({ type: 'setShouldSaveTemplate', data: false });\r\n      setCanvasImage(null);\r\n    }\r\n  }, [\r\n    state.shouldSaveTemplate,\r\n    dispatch,\r\n    canvas,\r\n    createTemplate,\r\n    canvasImage,\r\n    type,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (state.shouldSaveTemplate && !isCreatingTemplate) {\r\n      getCanvasImage(canvas, setCanvasImage);\r\n    }\r\n  }, [isCreatingTemplate, state.shouldSaveTemplate, canvas]);\r\n};\r\n\r\nexport default useSaveTemplate;\r\n","import React, { useContext, useState, useEffect, useRef } from 'react';\r\nimport styles from './CanvasToolbar.module.css';\r\nimport ResizeDropdown from './ResizeDropdown/ResizeDropdown';\r\nimport TemplatesDropdown from './TemplatesDropdown/TemplatesDropdown';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport Backdrop from '../../../components/Backdrop/Backdrop';\r\nimport { ReactComponent as Templates } from '../../../assets/editor/templates.svg';\r\nimport { ReactComponent as Resize } from '../../../assets/editor/resize.svg';\r\nimport { ReactComponent as Crop } from '../../../assets/editor/cropImage.svg';\r\nimport { SketchPicker } from 'react-color';\r\nimport { useHistory } from 'react-router-dom';\r\nimport useGetTemplates from '../../../hooks/useGetTemplates';\r\nimport useCreateTemplate from '../../../hooks/useCreateTemplate';\r\nimport useSaveTemplate from './hooks/useSaveTemplate';\r\n\r\nconst templateType = process.env.REACT_APP_TEMPLATE_TYPE;\r\nconst templateTypeOption = process.env.REACT_APP_TEMPLATE_OPTION;\r\n\r\nconst CanvasToolbar = ({\r\n  setVideoData,\r\n  info,\r\n  setSpeakers,\r\n  canvas,\r\n  setTemplateToLoad,\r\n}) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { isGettingTemplates, getTemplates, templates, setTemplates } =\r\n    useGetTemplates();\r\n  const {\r\n    isCreatingTemplate,\r\n    createTemplate,\r\n    createdTemplate,\r\n    setCreatedTemplate,\r\n  } = useCreateTemplate();\r\n  const [shouldGetTemplates, setShouldGetTemplates] = useState(false);\r\n  const [bgColor, setBgColor] = useState(\r\n    editorState.canvasState.backgroundColor\r\n  );\r\n  const backgroundColorRef = useRef(null);\r\n  const resizeDropdownRef = useRef(null);\r\n  const [currentTemplateOption, setCurrentTemplateOption] = useState(null);\r\n\r\n  const history = useHistory();\r\n  useSaveTemplate(\r\n    editorState,\r\n    editorDispatch,\r\n    canvas,\r\n    isCreatingTemplate,\r\n    createTemplate,\r\n    templateType\r\n  );\r\n\r\n  const clickHandler = (e) => {\r\n    if (!editorState.shouldCropMedia && !editorState.isLoadingTemplate) {\r\n      if (editorState.isCropMode) {\r\n        editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n      } else {\r\n        let id = e.currentTarget.id;\r\n        if (id === 'resize') {\r\n          editorDispatch({ type: 'setIsResizeDropdown', data: true });\r\n        } else if (id === 'bgColor') {\r\n          editorDispatch({ type: 'setIsCanvasBgColorDropdown', data: true });\r\n        } else if (id === 'crop') {\r\n          setVideoData({ ...info });\r\n          let objects = canvas.getObjects();\r\n          let speakerVideos = [];\r\n          for (let i = 0; i < objects.length; i++) {\r\n            let obj = objects[i];\r\n            if (obj.type === 'video') speakerVideos.push({ ...obj.cropRect });\r\n          }\r\n          setSpeakers(speakerVideos);\r\n          history.push(`/editor/speakers`);\r\n        } else if (id === 'templates') {\r\n          editorDispatch({ type: 'setIsTemplatesDropdown', data: true });\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const colorChangeCompleteHandler = (c) => {\r\n    if (backgroundColorRef.current) {\r\n      let colorString = `rgba(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b}, ${c.rgb.a})`;\r\n      backgroundColorRef.current.style.background = colorString;\r\n      editorDispatch({ type: 'setCanvasBackgroundColor', data: colorString });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    backgroundColorRef.current.style.background = bgColor;\r\n  }, [bgColor]);\r\n\r\n  useEffect(() => {\r\n    if (shouldGetTemplates) {\r\n      setShouldGetTemplates(false);\r\n      getTemplates();\r\n    }\r\n  }, [shouldGetTemplates, getTemplates]);\r\n\r\n  useEffect(() => {\r\n    if (templates) {\r\n      setCurrentTemplateOption((prevState) => {\r\n        if (prevState) {\r\n          return {\r\n            type: prevState.type,\r\n            templates: [...templates[prevState.type]],\r\n          };\r\n        } else {\r\n          return {\r\n            type: 'commonTemplate',\r\n            templates: [...templates.commonTemplate],\r\n          };\r\n        }\r\n      });\r\n    }\r\n  }, [templates]);\r\n\r\n  useEffect(() => {\r\n    if (createdTemplate) {\r\n      setTemplates((prevState) => {\r\n        let type = createdTemplate.type;\r\n        if (type === 'common') {\r\n          return {\r\n            ...prevState,\r\n            commonTemplate: [...templates.commonTemplate, createdTemplate],\r\n          };\r\n        } else if (type === 'userOnly') {\r\n          return {\r\n            ...prevState,\r\n            userTemplate: [...templates.userTemplate, createdTemplate],\r\n          };\r\n        } else return { ...prevState };\r\n      });\r\n      setCreatedTemplate(null);\r\n    }\r\n  }, [createdTemplate, setTemplates, templates, setCreatedTemplate]);\r\n\r\n  return (\r\n    <div className={styles.CanvasToolbar}>\r\n      <div\r\n        className={[\r\n          styles.TemplatesContainer,\r\n          editorState.isTemplatesDropdown ? styles.Active : null,\r\n        ].join(' ')}\r\n        id='templates'\r\n        onClick={clickHandler}\r\n      >\r\n        <Templates />\r\n        <p className={styles.OptionText}>Templates</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div\r\n        className={[\r\n          styles.ResizeContainer,\r\n          editorState.isResizeDropdown ? styles.Active : null,\r\n        ].join(' ')}\r\n        id='resize'\r\n        onClick={clickHandler}\r\n      >\r\n        <Resize />\r\n        <p className={styles.OptionText}>Resize</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div className={styles.CropContainer} id='crop' onClick={clickHandler}>\r\n        <Crop />\r\n        <p className={styles.OptionText}>Crop</p>\r\n      </div>\r\n      <div className={styles.BorderDiv}></div>\r\n      <div\r\n        className={[\r\n          styles.ColorContainer,\r\n          editorState.isCanvasBgColorDropdown ? styles.Active : null,\r\n        ].join(' ')}\r\n        id='bgColor'\r\n        onClick={clickHandler}\r\n      >\r\n        <div className={styles.ColorPickerBorder}>\r\n          <div ref={backgroundColorRef} className={styles.ColorPicker}></div>\r\n        </div>\r\n        <p className={styles.OptionText}>Background color</p>\r\n      </div>\r\n\r\n      {editorState.isTemplatesDropdown ? (\r\n        <>\r\n          <Backdrop></Backdrop>\r\n          <div className={styles.TemplatesDropdownContainer}>\r\n            <TemplatesDropdown\r\n              isCreatingTemplate={isCreatingTemplate}\r\n              getTemplates={getTemplates}\r\n              templates={templates}\r\n              setShouldGetTemplates={setShouldGetTemplates}\r\n              currentOption={currentTemplateOption}\r\n              setCurrentOption={setCurrentTemplateOption}\r\n              setTemplateToLoad={setTemplateToLoad}\r\n              isGettingTemplates={isGettingTemplates}\r\n              templateTypeOption={templateTypeOption}\r\n            />\r\n          </div>\r\n        </>\r\n      ) : null}\r\n\r\n      {editorState.isResizeDropdown ? (\r\n        <>\r\n          <Backdrop></Backdrop>\r\n          <div className={styles.ResizeDropdown} ref={resizeDropdownRef}>\r\n            <ResizeDropdown />\r\n          </div>\r\n        </>\r\n      ) : null}\r\n\r\n      {editorState.isCanvasBgColorDropdown ? (\r\n        <>\r\n          <Backdrop></Backdrop>\r\n          <div className={styles.ColorDropdownContainer}>\r\n            <SketchPicker\r\n              color={bgColor}\r\n              onChange={(c) => setBgColor(c.rgb)}\r\n              onChangeComplete={colorChangeCompleteHandler}\r\n            />\r\n          </div>\r\n        </>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CanvasToolbar;\r\n","export default __webpack_public_path__ + \"static/media/play.516f516e.svg\";","export default __webpack_public_path__ + \"static/media/pause.2c1b8172.svg\";","import { useEffect, useCallback } from 'react';\r\nimport { getContainerSize } from '../utils/getSize';\r\n\r\nconst getCanvasSize = (state) => {\r\n  let maxWidth = 800;\r\n  let maxHeight = 560;\r\n  if (state.resize === 'square') maxHeight = 500;\r\n  let width = state.containerWidth;\r\n  let height = (state.videoHeight * width) / state.videoWidth;\r\n  if (width > height) {\r\n    if (width > maxWidth) {\r\n      height = (height * maxWidth) / width;\r\n      width = maxWidth;\r\n    }\r\n  } else {\r\n    if (height > maxHeight) {\r\n      width = (width * maxHeight) / height;\r\n      height = maxHeight;\r\n    }\r\n  }\r\n  return { width, height };\r\n};\r\n\r\nconst useContainerSize = (state, dispatch, containerRef) => {\r\n  const containerPadding = 88;\r\n  const getSizeInfo = useCallback(() => {\r\n    let { width, height } = getCanvasSize(state);\r\n    if (width > height) containerRef.current.style.paddingTop = '5rem';\r\n    else containerRef.current.style.paddingTop = '1rem';\r\n    let isInRange = width > 100;\r\n    return isInRange ? { width, height } : {};\r\n  }, [containerRef, state]);\r\n\r\n  const handleResize = useCallback(() => {\r\n    let { containerWidth, containerHeight } = getContainerSize(\r\n      containerRef,\r\n      containerPadding\r\n    );\r\n    dispatch({\r\n      type: 'setContainerSize',\r\n      data: { width: containerWidth, height: containerHeight },\r\n    });\r\n  }, [dispatch, containerRef]);\r\n\r\n  useEffect(() => {\r\n    if (state.initialWidth > 0 && state.shouldCalculateCanvasSize) {\r\n      dispatch({ type: 'setShouldCalculateCanvasSize', data: false });\r\n      let { width, height } = getSizeInfo();\r\n      if (width) {\r\n        dispatch({\r\n          type: 'setCanvasSize',\r\n          data: { width, height },\r\n        });\r\n      }\r\n    }\r\n  }, [dispatch, getSizeInfo, state]);\r\n\r\n  useEffect(() => {\r\n    handleResize();\r\n  }, [handleResize]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [handleResize]);\r\n};\r\n\r\nexport default useContainerSize;\r\n","export const getContainerSize = (containerRef, containerPadding) => {\r\n  let containerWidth =\r\n    window.innerWidth - containerRef.current.offsetLeft - containerPadding;\r\n  let containerHeight = containerRef.current.offsetHeight;\r\n  if (containerWidth > 800) {\r\n    containerHeight = (containerHeight * 800) / containerWidth;\r\n    containerWidth = 800;\r\n  }\r\n  return { containerWidth, containerHeight };\r\n};\r\n","import { useEffect, useCallback } from 'react';\r\n\r\nconst usePlayerTime = (\r\n  videoRef,\r\n  videoCuts,\r\n  words,\r\n  isPlaying,\r\n  currentTime,\r\n  nextCutIndex,\r\n  setNextCutIndex,\r\n  currentWordIndex,\r\n  setCurrentWordIndex,\r\n  currentSub,\r\n  setCurrentSub,\r\n  fabricSub\r\n) => {\r\n  const handleVideoCuts = useCallback(\r\n    (time) => {\r\n      if (videoCuts.length > 0 && videoCuts[nextCutIndex]) {\r\n        time = +time + 0.05;\r\n        let moreThanStart = time >= +videoCuts[nextCutIndex].start;\r\n        let lessThanEnd = time <= +videoCuts[nextCutIndex].end;\r\n        let isShortTime =\r\n          +videoCuts[nextCutIndex].end - videoCuts[nextCutIndex].start <=\r\n            0.05 && moreThanStart;\r\n        if ((moreThanStart && lessThanEnd) || isShortTime) {\r\n          videoRef.current.currentTime = +videoCuts[nextCutIndex].end;\r\n          // console.log(\r\n          //   `%c setting to: ${+videoCuts[nextCutIndex].end}`,\r\n          //   'background:red; color:white'\r\n          // );\r\n\r\n          if (videoCuts[nextCutIndex + 1]) setNextCutIndex(nextCutIndex + 1);\r\n          else setNextCutIndex(null);\r\n        }\r\n      }\r\n    },\r\n    [videoCuts, nextCutIndex, videoRef, setNextCutIndex]\r\n  );\r\n\r\n  const handleCurrentWord = useCallback(\r\n    (time, index) => {\r\n      time = +time + 0.05;\r\n      let word = words[index];\r\n      let nextWord = words[index + 1];\r\n      // if (word) {\r\n      //   console.log('comparing: ', time, '>', +word.end, time >= +word.end);\r\n      // }\r\n      if (index !== null && nextWord && time > +word.end) {\r\n        let isShortTime = +word.end - word.start <= 0.05 && !isPlaying;\r\n        if (!isShortTime && !nextWord.active && nextWord.next !== null) {\r\n          setCurrentWordIndex(nextWord.next);\r\n        } else if (!isShortTime) {\r\n          setCurrentWordIndex((prevState) => prevState + 1);\r\n        }\r\n      }\r\n    },\r\n    [isPlaying, words, setCurrentWordIndex]\r\n  );\r\n\r\n  const handleCurrentSub = useCallback(\r\n    (time, sub) => {\r\n      time = +time + 0.05;\r\n      let nextSub = sub.next;\r\n      // if (word) {\r\n      //   console.log('comparing: ', time, '>', +word.end, time >= +word.end);\r\n      // }\r\n      if (sub && nextSub && time > +sub.val.end) {\r\n        if (nextSub.val.active) setCurrentSub((prevState) => prevState.next);\r\n        else setCurrentSub(nextSub.nextSub);\r\n      }\r\n    },\r\n    [setCurrentSub]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (words && isPlaying && fabricSub && currentSub && currentTime !== null) {\r\n      handleCurrentSub(currentTime, currentSub);\r\n    }\r\n  }, [words, isPlaying, fabricSub, currentTime, handleCurrentSub, currentSub]);\r\n\r\n  useEffect(() => {\r\n    if (words && currentTime !== null)\r\n      handleCurrentWord(currentTime, currentWordIndex);\r\n  }, [words, currentTime, handleCurrentWord, currentWordIndex]);\r\n\r\n  useEffect(() => {\r\n    if (words && currentTime !== null) handleVideoCuts(currentTime);\r\n  }, [words, currentTime, handleVideoCuts]);\r\n};\r\n\r\nexport default usePlayerTime;\r\n","class Node {\r\n  constructor(val) {\r\n    this.val = val;\r\n    this.next = null;\r\n  }\r\n}\r\n\r\nexport class LinkedList {\r\n  constructor() {\r\n    this.head = null;\r\n    this.tail = null;\r\n    this.length = 0;\r\n  }\r\n\r\n  push(val) {\r\n    let newNode = new Node(val);\r\n    if (!this.head) {\r\n      this.head = newNode;\r\n      this.tail = newNode;\r\n    } else {\r\n      this.tail.next = newNode;\r\n      this.tail = newNode;\r\n    }\r\n    this.length++;\r\n    return this.length;\r\n  }\r\n\r\n  pop() {\r\n    if (!this.head) return null;\r\n    let current = this.head;\r\n    let newTail = current;\r\n    while (current.next) {\r\n      newTail = current;\r\n      current = current.next;\r\n    }\r\n    if (this.length === 1) {\r\n      this.head = null;\r\n      this.tail = null;\r\n    } else {\r\n      this.tail = newTail;\r\n      this.tail.next = null;\r\n    }\r\n    this.length--;\r\n\r\n    return current;\r\n  }\r\n\r\n  shift() {\r\n    if (!this.head) return null;\r\n    let temp = this.head;\r\n    this.head = this.head.next;\r\n    temp.next = null;\r\n    this.length--;\r\n    if (this.length === 0) this.tail = null;\r\n    return temp;\r\n  }\r\n\r\n  unshift(val) {\r\n    let newNode = new Node(val);\r\n    if (!this.head) this.tail = newNode;\r\n    else newNode.next = this.head;\r\n    this.head = newNode;\r\n    this.length++;\r\n    return this;\r\n  }\r\n\r\n  get(idx) {\r\n    if (idx < 0 || idx >= this.length) return null;\r\n    let current = this.head;\r\n    for (let i = 0; i <= idx; i++) {\r\n      if (i === idx) return current;\r\n      current = current.next;\r\n    }\r\n  }\r\n\r\n  set(idx, val) {\r\n    let temp = this.get(idx);\r\n    if (temp) {\r\n      temp.val = val;\r\n      return true;\r\n    } else return false;\r\n  }\r\n\r\n  insert(idx, val) {\r\n    if (idx < 0 || idx > this.length) return false;\r\n    if (idx === 0) return !!this.unshift(val);\r\n    if (idx === this.length) return !!this.push(val);\r\n    let newNode = new Node(val);\r\n    let current = this.get(idx - 1);\r\n    newNode.next = current.next;\r\n    current.next = newNode;\r\n    this.length++;\r\n    return true;\r\n  }\r\n\r\n  remove(idx) {\r\n    if (idx < 0 || idx >= this.length) return false;\r\n    if (idx === 0) return !!this.shift();\r\n    if (idx === this.length - 1) return !!this.pop();\r\n    let current = this.get(idx - 1);\r\n    current.next = current.next.next;\r\n    this.length--;\r\n    return true;\r\n  }\r\n\r\n  reverse(pre = null, current = this.head) {\r\n    if (this.length <= 1) return this;\r\n    let nextNode = current.next;\r\n    if (!pre) {\r\n      this.tail = this.head ;\r\n      this.tail.next = null;\r\n    }\r\n    current.next = pre;\r\n    pre = current;\r\n    if (nextNode.next === null) {\r\n      this.head = nextNode;\r\n      this.head.next = pre;\r\n      return this;\r\n    }\r\n    return this.reverse(pre, nextNode);\r\n  }\r\n}\r\n","import { useEffect } from 'react';\r\nimport { generateSubtitles } from '../utils/generateSubtitles';\r\nimport { newSubtitle, displaySub } from '../utils/subtitle.js';\r\nimport { findSubWithWordIndex } from '../../../utils/findIndex';\r\n\r\nconst useSubtitles = (\r\n  state,\r\n  canvas,\r\n  fabricSub,\r\n  setFabricSub,\r\n  words,\r\n  subList,\r\n  setSubList,\r\n  currentSub,\r\n  setCurrentSub,\r\n  currentWordIndex,\r\n  videoCuts,\r\n  shouldRerenderSub,\r\n  setShouldRerenderSub,\r\n  isPlaying,\r\n  videoRef\r\n) => {\r\n  useEffect(() => {\r\n    if (fabricSub && currentSub && !state.isLoadingTemplate) {\r\n      if (shouldRerenderSub) setShouldRerenderSub(false);\r\n      displaySub(fabricSub, currentSub);\r\n    }\r\n  }, [\r\n    fabricSub,\r\n    currentSub,\r\n    shouldRerenderSub,\r\n    setShouldRerenderSub,\r\n    subList,\r\n    state.isLoadingTemplate,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (subList && !isPlaying && !state.isLoadingTemplate) {\r\n      let sub = findSubWithWordIndex(currentWordIndex, words, subList);\r\n      if (sub !== null) setCurrentSub(sub);\r\n    }\r\n  }, [\r\n    subList,\r\n    setCurrentSub,\r\n    words,\r\n    currentWordIndex,\r\n    isPlaying,\r\n    state.isLoadingTemplate,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (fabricSub && videoCuts) generateSubtitles(words, setSubList);\r\n  }, [fabricSub, videoCuts, setSubList, words]);\r\n\r\n  useEffect(() => {\r\n    if (canvas && !fabricSub && state.isSubtitles) {\r\n      if (isPlaying) videoRef.current.pause();\r\n      let sub = newSubtitle(canvas, state);\r\n      canvas.add(sub);\r\n      canvas.requestRenderAll();\r\n      setFabricSub(sub);\r\n    } else if (\r\n      canvas &&\r\n      fabricSub &&\r\n      !state.isSubtitles &&\r\n      !state.isLoadingTemplate\r\n    ) {\r\n      canvas.remove(fabricSub);\r\n      setFabricSub(null);\r\n    }\r\n  }, [\r\n    videoRef,\r\n    isPlaying,\r\n    state,\r\n    fabricSub,\r\n    setFabricSub,\r\n    canvas,\r\n    subList,\r\n    words,\r\n    setSubList,\r\n  ]);\r\n};\r\n\r\nexport default useSubtitles;\r\n","import { fabric } from 'fabric';\r\n\r\nexport const newSubtitle = (canvas, state) => {\r\n  let zoom = canvas.getZoom();\r\n  let canvasWidth = canvas.getWidth() / zoom;\r\n  let canvasHeight = canvas.getHeight() / zoom;\r\n  let width = 550 < canvasWidth / 2 ? 550 : canvasWidth / 2;\r\n  let subtitle = new fabric.Subtitle(' ', {\r\n    width,\r\n    paddingX: 20,\r\n    paddingY: 20,\r\n    breakWords: true,\r\n    editable: false,\r\n    originX: 'center',\r\n    originY: 'center',\r\n    textAlign: 'center',\r\n    visible: false,\r\n    ...state.subtitlesState,\r\n    // bgCornerRadius: 5,\r\n    // excludeFromExport: true,\r\n  });\r\n  subtitle.left = canvasWidth / 2;\r\n  subtitle.top = canvasHeight - subtitle.height - subtitle.paddingY;\r\n  return subtitle;\r\n};\r\n\r\nexport const displaySub = (fabricSub, currentSub) => {\r\n  if (currentSub.val.silence) fabricSub.visible = false;\r\n  else if (currentSub.val.active) {\r\n    let text = '';\r\n    for (let i = 0; i < currentSub.val.words.length; i++) {\r\n      let word = currentSub.val.words[i];\r\n      text += word.text;\r\n    }\r\n    fabricSub.set({ text, visible: true });\r\n  }\r\n};","import { LinkedList } from './linkedList';\r\n\r\nexport const generateSubtitles = (words, setSubs) => {\r\n  let list = new LinkedList();\r\n  let sub = null;\r\n  let firstDeletedIndex = null;\r\n\r\n  const checkForPrevDeleted = (word, which, i) => {\r\n    if (firstDeletedIndex) {\r\n      list.get(firstDeletedIndex).nextSub = list.tail;\r\n      // console.log(i);\r\n      // console.log(\r\n      //   list[firstDeletedIndex],\r\n      //   list[firstDeletedIndex].nextSub,\r\n      //   'setting nextSub Sub',\r\n      //   word,\r\n      //   list.length - 1,\r\n      //   which\r\n      // );\r\n      firstDeletedIndex = null;\r\n    }\r\n  };\r\n\r\n  for (let i = 0; i < words.length; i++) {\r\n    let word = words[i];\r\n    let nextWord = words[i + 1];\r\n    if (!word.active) {\r\n      if (sub) {\r\n        list.push({ ...sub });\r\n        checkForPrevDeleted(word, 'not active and is Sub', i);\r\n        sub = null;\r\n        list.push({ ...word });\r\n        firstDeletedIndex = list.length - 1;\r\n        // console.log('setting reference for nextSub', word, list.length - 1);\r\n      } else {\r\n        list.push({ ...word });\r\n        if (!firstDeletedIndex) {\r\n          firstDeletedIndex = list.length - 1;\r\n          // console.log('setting reference for nextSub', word, list.length - 1);\r\n        }\r\n      }\r\n      continue;\r\n    }\r\n\r\n    let isLast = i === words.length - 1;\r\n    let wordTimeLength = +word.end - +word.start;\r\n    let isLongSilence =\r\n      !!word.silence &&\r\n      ((!sub && nextWord && !nextWord.active) || wordTimeLength >= 0.4);\r\n    if (isLongSilence) {\r\n      if (sub) {\r\n        list.push({ ...sub });\r\n        checkForPrevDeleted(word, 'isSub and isLongSilence', i);\r\n        sub = null;\r\n        // console.log('isSub and isLongSilence', i, word.text);\r\n      }\r\n      // console.log(' isLongSilence', i, word.text);\r\n      list.push({ ...word });\r\n      checkForPrevDeleted(word, 'isLongSilence', i);\r\n      continue;\r\n    } else if (word.silence) {\r\n      if (sub) {\r\n        sub.end += word.end;\r\n        sub.words.push({\r\n          ...word,\r\n          text: '',\r\n        });\r\n        if (isLast) {\r\n          list.push(sub);\r\n          checkForPrevDeleted(word, 'isSub and isLongSilence', i);\r\n        }\r\n        // console.log('isSub and silence', i, word.text);\r\n      } else {\r\n        sub = {\r\n          words: [{ ...word, text: '' }],\r\n          start: word.start,\r\n          end: word.end,\r\n          strLength: 0,\r\n          active: true,\r\n        };\r\n        if (isLast) {\r\n          list.push({ ...word });\r\n          checkForPrevDeleted(word, 'silence', i);\r\n        }\r\n        // console.log('silence', i, word.text);\r\n      }\r\n      continue;\r\n    }\r\n\r\n    let containsMark = !!word.text.match(/[.,:!?]$/);\r\n\r\n    let isRoomForWord =\r\n      sub !== null && sub.strLength + word.text.length + 1 < 48;\r\n    // if (sub) console.log(sub.words, sub.strLength, word.text, isRoomForWord);\r\n\r\n    if (isRoomForWord && containsMark && sub) {\r\n      let text = '';\r\n      if (sub.strLength > 0) text = ' ';\r\n      text += word.text;\r\n      sub.words.push({ ...word, text });\r\n      sub.end = word.end;\r\n      sub.strLength += text.length;\r\n      list.push({ ...sub });\r\n      checkForPrevDeleted(word, 'isRoomForWord && containsMark && sub', i);\r\n      sub = null;\r\n      // console.log('isRoomForWord && containsMark && sub', i, word.text);\r\n    } else if (containsMark && sub) {\r\n      list.push({ ...sub });\r\n      checkForPrevDeleted(word, 'containsMark && sub', i);\r\n      sub = {\r\n        words: [{ ...word }],\r\n        start: word.start,\r\n        end: word.end,\r\n        strLength: word.text.length,\r\n        active: true,\r\n      };\r\n      list.push({ ...sub });\r\n      sub = null;\r\n      // console.log('containsMark && sub', i, word.text);\r\n    } else if (containsMark) {\r\n      sub = {\r\n        words: [{ ...word }],\r\n        start: word.start,\r\n        end: word.end,\r\n        strLength: word.text.length,\r\n        active: true,\r\n      };\r\n      list.push({ ...sub });\r\n      checkForPrevDeleted(word, 'containsMark && sub', i);\r\n      sub = null;\r\n      // console.log('containsMark && sub', i, word.text);\r\n    } else if (isRoomForWord) {\r\n      let text = '';\r\n      if (sub.strLength > 0) text = ' ';\r\n      text += word.text;\r\n      sub.words.push({ ...word, text });\r\n      sub.end = word.end;\r\n      sub.strLength += text.length;\r\n      if (isLast) {\r\n        list.push(sub);\r\n        checkForPrevDeleted(word, 'isRoomForWord', i);\r\n      }\r\n      // console.log('isRoomForWord', i, word.text);\r\n    } else if (sub) {\r\n      list.push({ ...sub });\r\n      checkForPrevDeleted(word, 'sub', i);\r\n      sub = {\r\n        words: [{ ...word }],\r\n        start: word.start,\r\n        end: word.end,\r\n        strLength: word.text.length,\r\n        active: true,\r\n      };\r\n      if (isLast) list.push(sub);\r\n      // console.log('sub', i, word.text);\r\n    } else {\r\n      sub = {\r\n        words: [{ ...word }],\r\n        start: word.start,\r\n        end: word.end,\r\n        strLength: word.text.length,\r\n        active: true,\r\n      };\r\n      if (isLast) {\r\n        list.push(sub);\r\n        checkForPrevDeleted(word, 'end', i);\r\n      }\r\n      // console.log('elsee', i, word.text);\r\n    }\r\n  }\r\n  // console.log(list);\r\n  setSubs(list);\r\n};\r\n","import React, { useRef, useContext, useEffect, useState } from 'react';\r\nimport styles from './Player.module.css';\r\nimport PlayerCanvas from '../Canvas/PlayerCanvas/PlayerCanvas';\r\nimport EventContext from '../../contexts/EventContext';\r\nimport useEventState from '../../hooks/useEventsState';\r\nimport EditorContext from '../../contexts/EditorContext';\r\nimport CanvasToolbar from './CanvasToolbar/CanvasToolbar';\r\nimport playSvg from '../../assets/editor/play.svg';\r\nimport pauseSvg from '../../assets/editor/pause.svg';\r\nimport useContainerSize from './hooks/useContainerSize';\r\nimport usePlayerTime from './hooks/usePlayerTime';\r\nimport useSubtitles from './hooks/useSubtitles';\r\nimport Spinner from '../../components/Spinner/Spinner';\r\nimport UserContext from '../../contexts/UserContext';\r\n\r\nconst Player = ({\r\n  videoRef,\r\n  canvas,\r\n  setCanvas,\r\n  isPlaying,\r\n  words,\r\n  currentTime,\r\n  videoCuts,\r\n  setNextCutIndex,\r\n  setCurrentWordIndex,\r\n  nextCutIndex,\r\n  currentWordIndex,\r\n  subList,\r\n  setSubList,\r\n  fabricSub,\r\n  setFabricSub,\r\n  currentSub,\r\n  setCurrentSub,\r\n  shouldRerenderSub,\r\n  setShouldRerenderSub,\r\n  speakers,\r\n  info,\r\n  setVideoData,\r\n  transcriptonStatus,\r\n  setSpeakers,\r\n  userAssets,\r\n  setUserAssets,\r\n  clipboard,\r\n  setClipboard,\r\n  objectIdCount,\r\n  setObjectIdCount,\r\n  updatetObjectId,\r\n  speakerVideos,\r\n  setSpeakerVideos,\r\n}) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { userState, userDispatch } = useContext(UserContext);\r\n  const [eventState, eventDispatch] = useEventState();\r\n  const [templateToLoad, setTemplateToLoad] = useState(null);\r\n\r\n  const containerRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  const playClickHandler = () => {\r\n    if (!editorState.isLoadingTemplate) {\r\n      if (isPlaying) videoRef.current.pause();\r\n      else videoRef.current.play();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (userState.selectedTemplate) {\r\n      setTemplateToLoad({ ...userState.selectedTemplate });\r\n      userDispatch({ type: 'setSelectedTemplate', data: null });\r\n    }\r\n  }, [userState.selectedTemplate, userDispatch]);\r\n\r\n  useEffect(() => {\r\n    if (transcriptonStatus && transcriptonStatus.isFinished) {\r\n      videoRef.current.pause();\r\n    }\r\n  }, [transcriptonStatus, videoRef]);\r\n\r\n  useEffect(() => {\r\n    if (editorState.isCropMode) videoRef.current.pause();\r\n  }, [editorState.isCropMode, videoRef]);\r\n\r\n  useContainerSize(editorState.canvasState, editorDispatch, containerRef);\r\n\r\n  usePlayerTime(\r\n    videoRef,\r\n    videoCuts,\r\n    words,\r\n    isPlaying,\r\n    currentTime,\r\n    nextCutIndex,\r\n    setNextCutIndex,\r\n    currentWordIndex,\r\n    setCurrentWordIndex,\r\n    currentSub,\r\n    setCurrentSub,\r\n    fabricSub\r\n  );\r\n\r\n  useSubtitles(\r\n    editorState,\r\n    canvas,\r\n    fabricSub,\r\n    setFabricSub,\r\n    words,\r\n    subList,\r\n    setSubList,\r\n    currentSub,\r\n    setCurrentSub,\r\n    currentWordIndex,\r\n    videoCuts,\r\n    shouldRerenderSub,\r\n    setShouldRerenderSub,\r\n    isPlaying,\r\n    videoRef\r\n  );\r\n\r\n  return (\r\n    <div className={styles.Player} ref={containerRef}>\r\n      {!canvas || editorState.isLoadingTemplate ? (\r\n        <Spinner\r\n          style={{\r\n            width: '100px',\r\n            height: '100px',\r\n            position: 'absolute',\r\n            zIndex: '100',\r\n            margin: 'auto',\r\n            left: '0',\r\n            right: '0',\r\n            top: '200px',\r\n          }}\r\n        />\r\n      ) : null}\r\n      <EventContext.Provider value={{ eventState, eventDispatch }}>\r\n        <div className={styles.PlayerContent}>\r\n          <PlayerCanvas\r\n            canvas={canvas}\r\n            setCanvas={setCanvas}\r\n            video={videoRef.current}\r\n            fabricSub={fabricSub}\r\n            setFabricSub={setFabricSub}\r\n            currentTime={currentTime}\r\n            speakers={speakers}\r\n            info={info}\r\n            userAssets={userAssets}\r\n            setUserAssets={setUserAssets}\r\n            templateToLoad={templateToLoad}\r\n            setTemplateToLoad={setTemplateToLoad}\r\n            clipboard={clipboard}\r\n            setClipboard={setClipboard}\r\n            objectIdCount={objectIdCount}\r\n            setObjectIdCount={setObjectIdCount}\r\n            updatetObjectId={updatetObjectId}\r\n            speakerVideos={speakerVideos}\r\n            setSpeakerVideos={setSpeakerVideos}\r\n            canvasRef={canvasRef}\r\n          />\r\n          {canvas ? (\r\n            <>\r\n              <div className={styles.PlayerControls}>\r\n                <div className={styles.PlayButton} onClick={playClickHandler}>\r\n                  {isPlaying ? (\r\n                    <img src={pauseSvg} alt='pause' />\r\n                  ) : (\r\n                    <img src={playSvg} alt='play' />\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <CanvasToolbar\r\n                setVideoData={setVideoData}\r\n                info={info}\r\n                setSpeakers={setSpeakers}\r\n                canvas={canvas}\r\n                setTemplateToLoad={setTemplateToLoad}\r\n              />\r\n            </>\r\n          ) : null}\r\n        </div>\r\n      </EventContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Player;\r\n","import React, { useState, useEffect, useContext, useRef } from 'react';\r\nimport styles from './Video.module.css';\r\nimport { handlePlay, handleEnd, handlePause } from './utils/videoEvents';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\n// import useGetVideoFile from '../../hooks/useGetVideoFile';\r\n\r\nconst Video = ({\r\n  videoRef,\r\n  setIsPlaying,\r\n  setCurrentSelection,\r\n  setCurrentTime,\r\n  videoCuts,\r\n  words,\r\n  setNextCutIndex,\r\n  setCurrentWordIndex,\r\n  setCurrentSub,\r\n  subList,\r\n  info,\r\n  videoUrl,\r\n}) => {\r\n  const { editorDispatch } = useContext(EditorContext);\r\n  const [intervalId, setIntervalId] = useState(null);\r\n  const isFirstLoadRef = useRef(true);\r\n  // const { isGettingVideo, getVideo, file, getVideoError } = useGetVideoFile();\r\n\r\n  // useEffect(() => {\r\n  //   if(info && info.url) {\r\n  //     getVideo(info.url)\r\n  //   }\r\n  // }, [info, getVideo]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (intervalId) clearInterval(intervalId);\r\n    };\r\n  }, [intervalId]);\r\n\r\n  useEffect(() => {\r\n    if (videoUrl && videoRef.current && !isFirstLoadRef.current) {\r\n      videoRef.current.pause();\r\n      setIsPlaying(false);\r\n    }\r\n  }, [videoUrl, videoRef, setIsPlaying]);\r\n\r\n  const getVideoSize = () => {\r\n    if (isFirstLoadRef.current) {\r\n      isFirstLoadRef.current = false;\r\n      let initialWidth = videoRef.current.videoWidth;\r\n      let initialHeight = videoRef.current.videoHeight;\r\n      editorDispatch({\r\n        type: 'setCanvasInitialSize',\r\n        data: { initialWidth, initialHeight },\r\n      });\r\n      let data = {};\r\n      if (info.canvas && info.canvas.width) {\r\n        data = {\r\n          width: +info.canvas.width,\r\n          height: +info.canvas.height,\r\n          resize: info.canvas.resize,\r\n        };\r\n      } else {\r\n        data = {\r\n          width: initialWidth,\r\n          height: initialHeight,\r\n          resize: 'original',\r\n        };\r\n      }\r\n      editorDispatch({ type: 'setVideoSize', data });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <video\r\n      src={videoUrl}\r\n      id='video'\r\n      preload='auto'\r\n      className={styles.Video}\r\n      ref={videoRef}\r\n      controls\r\n      onPause={() => handlePause(setIsPlaying, intervalId, words)}\r\n      onPlay={() =>\r\n        handlePlay(\r\n          setCurrentSelection,\r\n          setIsPlaying,\r\n          setCurrentTime,\r\n          videoRef,\r\n          setIntervalId,\r\n          words\r\n        )\r\n      }\r\n      onEnded={() =>\r\n        handleEnd(\r\n          videoCuts,\r\n          setNextCutIndex,\r\n          words,\r\n          setCurrentWordIndex,\r\n          setCurrentTime,\r\n          setCurrentSub,\r\n          subList\r\n        )\r\n      }\r\n      onLoadedMetadata={getVideoSize}\r\n      crossOrigin='Anonymous'\r\n    />\r\n  );\r\n};\r\n\r\nexport default Video;\r\n","import { findSubWithWordIndex } from '../../../../utils/findIndex';\r\n\r\nexport const handlePlay = (\r\n  setCurrentSelection,\r\n  setIsPlaying,\r\n  setCurrentTime,\r\n  videoRef,\r\n  setIntervalId,\r\n  words\r\n) => {\r\n  setIsPlaying(true);\r\n  let selection = document.getSelection();\r\n  selection.removeAllRanges();\r\n  setCurrentSelection(null);\r\n  let interval = setInterval(() => {\r\n    // console.log('interval: ', videoRef.current.currentTime);\r\n    // console.log('playing');\r\n    if (words && videoRef.current) setCurrentTime(videoRef.current.currentTime);\r\n  }, 10);\r\n  setIntervalId(interval);\r\n};\r\n\r\nexport const handlePause = (setIsPlaying, intervalId, words) => {\r\n  setIsPlaying(false);\r\n  if (words) clearInterval(intervalId);\r\n};\r\n\r\nexport const handleEnd = (\r\n  videoCuts,\r\n  setNextCutIndex,\r\n  words,\r\n  setCurrentWordIndex,\r\n  setCurrentTime,\r\n  setCurrentSub,\r\n  subList\r\n) => {\r\n  if (words) {\r\n    if (videoCuts.length > 0) setNextCutIndex(0);\r\n    let word = words[0];\r\n    let wordIndex = 0;\r\n    let start = word.start;\r\n    if (!word.active && word.next !== null) {\r\n      wordIndex = word.next;\r\n      start = words[wordIndex].start;\r\n    }\r\n    setCurrentWordIndex(wordIndex);\r\n    let sub = findSubWithWordIndex(wordIndex, words, subList);\r\n    setCurrentSub(sub);\r\n    setCurrentTime(+start);\r\n  }\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\nconst getVideoInfo = (video, i) => ({\r\n  position: {\r\n    x: video.left,\r\n    y: video.top,\r\n    w: video.width * video.scaleX,\r\n    h: video.height * video.scaleY,\r\n    z: i,\r\n    radius: video.cornerRadius,\r\n    crop: video.cropRect,\r\n  },\r\n});\r\n\r\nconst generateLayer = (exportCanvas, width, height, arr, z) => {\r\n  exportCanvas.renderAll();\r\n  let image = exportCanvas.toDataURL({\r\n    format: 'image/jpg',\r\n    quality: 1,\r\n  });\r\n  arr.push({\r\n    image,\r\n    position: {\r\n      x: 0,\r\n      y: 0,\r\n      w: width,\r\n      h: height,\r\n      z,\r\n    },\r\n  });\r\n  exportCanvas.clear();\r\n  exportCanvas.backgroundColor = 'rgba(255, 255, 255, 0)';\r\n};\r\n\r\nconst handleLayers = (exportCanvas, canvas, setElements, setVideoInfo) => {\r\n  let objects = canvas.getObjects();\r\n  let width = canvas.getWidth() / canvas.getZoom();\r\n  let height = canvas.getHeight() / canvas.getZoom();\r\n  let videosArr = [];\r\n  let elementsArr = [];\r\n  let isAdded = true;\r\n  let index = 1;\r\n  generateLayer(exportCanvas, width, height, elementsArr, 0);\r\n  for (let i = 0; i < objects.length; i++) {\r\n    let el = objects[i];\r\n    if (el.type === 'subtitle' && isAdded) {\r\n      generateLayer(exportCanvas, width, height, elementsArr, index);\r\n      isAdded = false;\r\n    } else if (el.type === 'subtitle') continue;\r\n    else if (el.type === 'video') {\r\n      if (isAdded) {\r\n        generateLayer(exportCanvas, width, height, elementsArr, index);\r\n        index++;\r\n        isAdded = false;\r\n      }\r\n      videosArr.push(getVideoInfo(el, index));\r\n      index++;\r\n    } else {\r\n      let clone = fabric.util.object.clone(el);\r\n      exportCanvas.add(clone);\r\n      isAdded = true;\r\n    }\r\n  }\r\n  if (isAdded) generateLayer(exportCanvas, width, height, elementsArr, index);\r\n  setVideoInfo({ coordinates: videosArr });\r\n  setElements(elementsArr);\r\n};\r\n\r\nexport const prepareCanvas = async (canvas, setElements, setVideoInfo) => {\r\n  let exportCanvas = new fabric.Canvas();\r\n  exportCanvas.setDimensions({\r\n    width: canvas.getWidth() / canvas.getZoom(),\r\n    height: canvas.getHeight() / canvas.getZoom(),\r\n  });\r\n  exportCanvas.backgroundColor = canvas.backgroundColor;\r\n  handleLayers(exportCanvas, canvas, setElements, setVideoInfo);\r\n};\r\n","const randomUUID = () =>\r\n  Math.random().toString(36).substring(2, 15) +\r\n  Math.random().toString(36).substring(2, 15);\r\n\r\nexport default randomUUID;\r\n","const rgbaTohex = (color) => {\r\n  let rgb = color\r\n      .replace(/\\s/g, '')\r\n      .match(/^rgba?\\((\\d+),(\\d+),(\\d+),?([^,\\s)]+)?/i),\r\n    alpha = ((rgb && rgb[4]) || '').trim(),\r\n    hex = rgb\r\n      ? (rgb[1] | (1 << 8)).toString(16).slice(1) +\r\n        (rgb[2] | (1 << 8)).toString(16).slice(1) +\r\n        (rgb[3] | (1 << 8)).toString(16).slice(1)\r\n      : color;\r\n\r\n  let a = alpha !== '' ? alpha : '01';\r\n\r\n  a = ((+a * 255) | (1 << 8)).toString(16).slice(1);\r\n  hex = hex + a;\r\n  return hex;\r\n};\r\n\r\nexport default rgbaTohex;\r\n","import generateUUID from '../../../utils/generateRandomUUID';\r\nimport rgbaToHex from './rgbaToHex';\r\n\r\nexport const prepareBreaks = (cuts, endTime, setBreaks) => {\r\n  let videoBreaks = [];\r\n  let prev = null;\r\n  for (let i = 0; i < cuts.length; i++) {\r\n    let el = cuts[i];\r\n    if (i === 0 && el.start !== 0) {\r\n      videoBreaks.push({ start: 0, end: el.start });\r\n    } else if (el.start !== 0) {\r\n      videoBreaks.push({ start: prev, end: el.start });\r\n    }\r\n    prev = el.end;\r\n\r\n    if (i === cuts.length - 1 && el.end !== endTime) {\r\n      videoBreaks.push({ start: el.end, end: endTime });\r\n    }\r\n  }\r\n  setBreaks(videoBreaks);\r\n};\r\n\r\n\r\nconst getSubConfig = (object, subState) => {\r\n  let zoom = object.canvas.getZoom();\r\n  let width = object.canvas.getWidth() / zoom;\r\n  let height = object.canvas.getHeight() / zoom;\r\n  let x = (object.left * 100) / width;\r\n  let y = (object.top * 100) / height;\r\n  return {\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    objectWidth: object.width,\r\n    objectHeight: object.height,\r\n    xCoordinate: object.left,\r\n    yCoordinate: object.top,\r\n    top: object.lineCoords.tl.y,\r\n    left: object.lineCoords.tl.x,\r\n    fontSize: subState.fontSize,\r\n    fontColor: rgbaToHex(subState.fill),\r\n    fontFamily: subState.fontFamily,\r\n    backgroundColor: rgbaToHex(subState.backgroundColor),\r\n    textAlign: 'center',\r\n    padding: object.paddingY !== 0 ? object.paddingY / 2 : 0,\r\n    fontWeight: subState.fontWeight,\r\n    fontStyle: subState.fontStyle,\r\n  };\r\n}\r\n\r\nexport const prepareSubs = (subList, object, subState, setSubs) => {\r\n  let config = getSubConfig(object, subState);\r\n  console.log(config);\r\n  // let prev = null;\r\n  let deleteStart = 0;\r\n  let deleteEnd = 0;\r\n  let isLastDeleted = false;\r\n  let captions = [];\r\n\r\n  let subNode = subList.head;\r\n  for (let i = 0; i < subList.length; i++) {\r\n    let sub = subNode.val;\r\n    if (sub.active && isLastDeleted) {\r\n      let _id = generateUUID();\r\n      isLastDeleted = false;\r\n      captions.push({\r\n        start: deleteStart,\r\n        end: deleteEnd,\r\n        active: false,\r\n        silence: true,\r\n        _id,\r\n      });\r\n    } else if (!sub.active && !isLastDeleted) {\r\n      isLastDeleted = true;\r\n      deleteStart = sub.start;\r\n      deleteEnd = sub.end;\r\n    } else if (!sub.active && isLastDeleted) {\r\n      deleteEnd = sub.end;\r\n    }\r\n\r\n    if (sub.silence && sub.active) {\r\n      let _id = generateUUID();\r\n      captions.push({\r\n        start: sub.start,\r\n        end: sub.end,\r\n        silence: true,\r\n        _id,\r\n        active: true,\r\n      });\r\n    } else if (sub.active) {\r\n      let _id = generateUUID();\r\n      let text = '';\r\n      for (let i = 0; i < sub.words.length; i++) {\r\n        let word = sub.words[i];\r\n        text += word.text;\r\n      }\r\n      captions.push({\r\n        start: sub.start,\r\n        end: sub.end,\r\n        text,\r\n        silence: false,\r\n        active: true,\r\n        _id,\r\n      });\r\n    }\r\n    subNode = subNode.next;\r\n  }\r\n\r\n  if (isLastDeleted) {\r\n    let _id = generateUUID();\r\n    captions.push({\r\n      start: deleteStart,\r\n      end: deleteEnd,\r\n      active: false,\r\n      silence: true,\r\n      _id,\r\n    });\r\n  }\r\n  let subtitles = { captions, config };\r\n  console.log(subtitles);\r\n  setSubs(subtitles);\r\n};\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useUploadAsset = () => {\r\n  const [isUploadingAsset, setIsUploadingAsset] = useState(false);\r\n  const [uploadResponse, setUploadResponse] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosUploadAsset = useCallback((formData) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .post('/images', formData)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const uploadAsset = useCallback(\r\n    async (formData) => {\r\n      setUploadResponse(null);\r\n      setIsUploadingAsset(true);\r\n      try {\r\n        const res = await axiosUploadAsset(formData);\r\n        if (isMounted.current) setUploadResponse(res.data);\r\n        console.log(res);\r\n      } catch (err) {\r\n        console.log('Error Uploading Asset', err);\r\n        if (isMounted.current) setUploadResponse('error');\r\n      } finally {\r\n        if (isMounted.current) setIsUploadingAsset(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosUploadAsset]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isUploadingAsset, uploadAsset, uploadResponse };\r\n};\r\n\r\nexport default useUploadAsset;\r\n","import React, { useContext, useRef, useEffect } from 'react';\r\nimport styles from './ImageDropdown.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport useUploadAsset from '../../../hooks/useUploadAsset';\r\nimport Spinner from '../../../components/Spinner/Spinner';\r\n\r\nconst ImageDropdown = ({ assets, setAssets }) => {\r\n  const { editorDispatch } = useContext(EditorContext);\r\n  const { isUploadingAsset, uploadAsset, uploadResponse } = useUploadAsset();\r\n  const fileInput = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (uploadResponse && uploadResponse !== 'error') {\r\n      setAssets((prevState) => [...prevState, uploadResponse.image]);\r\n    }\r\n  }, [uploadResponse, setAssets]);\r\n\r\n  const clickHandler = (e) => {\r\n    let imageType = 'customImage';\r\n    let src = e.currentTarget.src;\r\n    let splitSrc = src.split('.');\r\n    if (splitSrc[splitSrc.length - 1] === 'svg') imageType = 'svg';\r\n    editorDispatch({ type: 'setImageToAdd', data: { type: imageType, src } });\r\n  };\r\n\r\n  const inputChangeHandler = () => {\r\n    if (fileInput.current.files[0]) {\r\n      let file = fileInput.current.files[0];\r\n      let formData = new FormData();\r\n      formData.append('image', file);\r\n      uploadAsset(formData);\r\n    }\r\n  };\r\n\r\n  const uploadClickHandler = () => {\r\n    fileInput.current.click();\r\n  };\r\n\r\n  const oddArr = assets ? assets.filter((_, i) => (i + 1) % 2 !== 0) : null;\r\n  const evenArr = assets ? assets.filter((_, i) => (i + 1) % 2 === 0) : null;\r\n\r\n  let assetsContent = assets ? (\r\n    <div className={styles.Images}>\r\n      <div className={styles.Column}>\r\n        {oddArr.map((el, i) => {\r\n          return (\r\n            <div key={el._id} className={styles.ImageContainer}>\r\n              <img\r\n                className={styles.Image}\r\n                src={el.image_url}\r\n                alt='asset'\r\n                onClick={clickHandler}\r\n              />\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <div className={styles.Column}>\r\n        {evenArr.map((el, i) => {\r\n          return (\r\n            <div key={el._id} className={styles.ImageContainer}>\r\n              <img\r\n                className={styles.Image}\r\n                src={el.image_url}\r\n                alt='asset'\r\n                onClick={clickHandler}\r\n              />\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n\r\n  return (\r\n    <div className={styles.Dropdown}>\r\n      <div className={styles.UplaodButtonContainer}>\r\n        <button onClick={uploadClickHandler} className={styles.UploadButton}>\r\n          Upload image\r\n        </button>\r\n        <input\r\n          accept='image/png, image/gif, image/jpeg, image/svg+xml'\r\n          className={styles.FileInput}\r\n          ref={fileInput}\r\n          type='file'\r\n          onChange={inputChangeHandler}\r\n        />\r\n        {isUploadingAsset ? (\r\n          <Spinner\r\n            style={{\r\n              width: '25px',\r\n              height: '25px',\r\n              margin: '25px auto',\r\n              position: 'absolute',\r\n              right: '20px',\r\n            }}\r\n          />\r\n        ) : null}\r\n      </div>\r\n      {!assets ? (\r\n        <Spinner style={{ width: '50px', height: '50px' }} />\r\n      ) : (\r\n        assetsContent\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageDropdown;\r\n","export default __webpack_public_path__ + \"static/media/square.1a317c4f.svg\";","export default __webpack_public_path__ + \"static/media/circle.0bedfa10.svg\";","export default __webpack_public_path__ + \"static/media/triangle.84433629.svg\";","export default __webpack_public_path__ + \"static/media/line.60fd0829.svg\";","import React, { useContext } from 'react';\r\nimport styles from './ShapeDropdown.module.css';\r\nimport square from '../../../assets/editor/square.svg';\r\nimport circle from '../../../assets/editor/circle.svg';\r\nimport triangle from '../../../assets/editor/triangle.svg';\r\nimport line from '../../../assets/editor/line.svg';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\n\r\nconst ShapeDropdown = () => {\r\n  const { editorDispatch } = useContext(EditorContext);\r\n  const clickHandler = (e) => {\r\n    if (e.target.tagName === 'IMG') {\r\n      editorDispatch({ type: 'setShapeToAdd', data: e.target.id });\r\n    } else if (e.target.classList.contains(styles.ShapeContainer)) {\r\n      editorDispatch({ type: 'setShapeToAdd', data: e.target.childNodes[0].id });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Dropdown} onClick={clickHandler}>\r\n      <div className={styles.ShapeContainer}>\r\n        <img className={styles.Shape} src={square} alt='square' id='square' />\r\n      </div>\r\n      <div className={styles.ShapeContainer}>\r\n        <img className={styles.Shape} src={circle} alt='circle' id='circle' />\r\n      </div>\r\n      <div className={styles.ShapeContainer}>\r\n        <img\r\n          className={styles.Shape}\r\n          src={triangle}\r\n          alt='triangle'\r\n          id='triangle'\r\n        />\r\n      </div>\r\n      <div className={styles.ShapeContainer}>\r\n        <img className={styles.Shape} src={line} alt='line' id='line' />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShapeDropdown;\r\n","var _path, _path2, _path3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAddImage(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 21,\n    viewBox: \"0 0 20 21\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.66667 5.61532C1.66667 4.73126 2.01786 3.88341 2.64298 3.25829C3.2681 2.63317 4.11595 2.28198 5 2.28198H15C15.8841 2.28198 16.7319 2.63317 17.357 3.25829C17.9821 3.88341 18.3333 4.73126 18.3333 5.61532V15.6153C18.3333 16.4994 17.9821 17.3472 17.357 17.9723C16.7319 18.5975 15.8841 18.9486 15 18.9486H5C4.11595 18.9486 3.2681 18.5975 2.64298 17.9723C2.01786 17.3472 1.66667 16.4994 1.66667 15.6153V5.61532Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.08333 9.78199C8.23393 9.78199 9.16667 8.84925 9.16667 7.69866C9.16667 6.54807 8.23393 5.61533 7.08333 5.61533C5.93274 5.61533 5 6.54807 5 7.69866C5 8.84925 5.93274 9.78199 7.08333 9.78199Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.105 11.1328L5 18.9487H15.225C16.0494 18.9487 16.84 18.6212 17.4229 18.0382C18.0058 17.4553 18.3333 16.6647 18.3333 15.8403C18.3333 15.452 18.1875 15.0778 17.925 14.7903L14.5667 11.1278C14.4101 10.9571 14.2198 10.8208 14.0076 10.7278C13.7955 10.6347 13.5664 10.5869 13.3347 10.5874C13.1031 10.5879 12.8741 10.6366 12.6624 10.7305C12.4507 10.8244 12.2608 10.9614 12.105 11.1328V11.1328Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAddImage);\nexport default __webpack_public_path__ + \"static/media/addImage.decc1d7e.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3, _circle;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAddShape(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 21,\n    viewBox: \"0 0 20 21\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.5 8.94866C7.96024 8.94866 8.33333 8.57557 8.33333 8.11533C7.22222 6.28198 5.5 3.1153 5.5 3.1153L2.5 8.11533C2.5 8.57557 2.8731 8.94866 3.33333 8.94866H7.5Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9 12.6153L3 17.6153\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.6667 3.11533H12.5C12.0398 3.11533 11.6667 3.48842 11.6667 3.94866V8.11533C11.6667 8.57556 12.0398 8.94866 12.5 8.94866H16.6667C17.1269 8.94866 17.5 8.57556 17.5 8.11533V3.94866C17.5 3.48842 17.1269 3.11533 16.6667 3.11533Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 14.5849,\n    cy: 15.2003,\n    r: 2.915,\n    stroke: \"#999999\",\n    strokeWidth: 0.8\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAddShape);\nexport default __webpack_public_path__ + \"static/media/addShape.ad7a674c.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3, _path4;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSubtitles(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.3334 4.99984C13.3334 3.15889 11.841 1.6665 10 1.6665C8.15907 1.6665 6.66669 3.15889 6.66669 4.99984V9.1665C6.66669 11.0075 8.15907 12.4998 10 12.4998C11.841 12.4998 13.3334 11.0075 13.3334 9.1665V4.99984Z\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15 13.5767C14.375 14.2868 13.6058 14.8554 12.7435 15.2446C11.8813 15.6337 10.946 15.8344 10 15.8333C9.05402 15.8344 8.11869 15.6337 7.25647 15.2446C6.39424 14.8554 5.62496 14.2868 5 13.5767\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 15.8335V18.3335\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.33331 18.3335H11.6666\",\n    stroke: \"#999999\",\n    strokeWidth: 0.8,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSubtitles);\nexport default __webpack_public_path__ + \"static/media/subtitles.606fce57.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTemplates(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 12,\n    viewBox: \"0 0 12 12\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.66667 6.16667H0.666667C0.576143 6.16667 0.5 6.09052 0.5 6V0.666667C0.5 0.576142 0.576142 0.5 0.666667 0.5H4.66667C4.75719 0.5 4.83333 0.576142 4.83333 0.666667V6C4.83333 6.09052 4.75719 6.16667 4.66667 6.16667ZM4.66667 11.5H0.666667C0.576142 11.5 0.5 11.4239 0.5 11.3333V8.66667C0.5 8.57614 0.576143 8.5 0.666667 8.5H4.66667C4.75719 8.5 4.83333 8.57614 4.83333 8.66667V11.3333C4.83333 11.4239 4.75719 11.5 4.66667 11.5ZM11.3333 11.5H7.33333C7.24281 11.5 7.16667 11.4239 7.16667 11.3333V6C7.16667 5.90948 7.24281 5.83333 7.33333 5.83333H11.3333C11.4239 5.83333 11.5 5.90948 11.5 6V11.3333C11.5 11.4239 11.4239 11.5 11.3333 11.5ZM7.16667 3.33333V0.666667C7.16667 0.576142 7.24281 0.5 7.33333 0.5H11.3333C11.4239 0.5 11.5 0.576142 11.5 0.666667V3.33333C11.5 3.42386 11.4239 3.5 11.3333 3.5H7.33333C7.24281 3.5 7.16667 3.42386 7.16667 3.33333Z\",\n    fill: \"current\",\n    stroke: \"current\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTemplates);\nexport default __webpack_public_path__ + \"static/media/templates.f216eee1.svg\";\nexport { ForwardRef as ReactComponent };","/* eslint-disable jsx-a11y/img-redundant-alt */\r\nimport React, { useContext } from 'react';\r\nimport styles from './DesignControls.module.css';\r\nimport EditorContext from '../../../contexts/EditorContext';\r\nimport Backdrop from '../../../components/Backdrop/Backdrop';\r\nimport ImageDropdown from '../ImageDropdown/ImageDropdown';\r\nimport ShapeDropdown from '../ShapeDropdown/ShapeDropdown';\r\n// import SubtitlesDropdown from '../SubtitlesDropdown/SubtitlesDropdown';\r\nimport { ReactComponent as AddText } from '../../../assets/editor/addText.svg';\r\nimport { ReactComponent as AddImage } from '../../../assets/editor/addImage.svg';\r\nimport { ReactComponent as AddShape } from '../../../assets/editor/addShape.svg';\r\nimport { ReactComponent as Subtitles } from '../../../assets/editor/subtitles.svg';\r\n\r\nconst DesignControls = ({ canvas, isWords, assets, setAssets }) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n\r\n  const clickHandler = (e) => {\r\n    if (\r\n      canvas &&\r\n      !editorState.shouldCropMedia &&\r\n      !editorState.isLoadingTemplate\r\n    ) {\r\n      let type = '';\r\n      let id = e.currentTarget.id;\r\n      if (id === 'addText') type = 'setShouldAddText';\r\n      else if (id === 'addImage') type = 'setIsImageDropdown';\r\n      else if (id === 'addShape') type = 'setIsShapeDropdown';\r\n      else if (id === 'subtitles' && isWords) {\r\n        // type = 'setIsSubtitlesDropdown';\r\n        editorDispatch({\r\n          type: 'setIsSubtitles',\r\n          data: !editorState.isSubtitles,\r\n        });\r\n      }\r\n      if (type.length > 0) editorDispatch({ type, data: true });\r\n      if (editorState.isCropMode) {\r\n        editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.ControlsContainer}>\r\n      <div\r\n        className={styles.AddTextContainer}\r\n        id='addText'\r\n        onClick={clickHandler}\r\n      >\r\n        <AddText className={styles.AddIcon} />\r\n        <div className={styles.HoverContent}>\r\n          <div className={styles.HoverTriangle}></div>\r\n          <p className={styles.HoverText}>Add text</p>\r\n        </div>\r\n      </div>\r\n      <div className={styles.DesignControl}>\r\n        <div\r\n          className={styles.AddImageContainer}\r\n          id='addImage'\r\n          onClick={clickHandler}\r\n        >\r\n          <AddImage\r\n            className={[\r\n              styles.AddIcon,\r\n              editorState.isImageDropdown ? styles.ActiveDesignControl : null,\r\n            ].join(' ')}\r\n          />\r\n          <div className={styles.HoverContent}>\r\n            <div className={styles.HoverTriangle}></div>\r\n            <p className={styles.HoverText}>Add image</p>\r\n          </div>\r\n        </div>\r\n        {editorState.isImageDropdown ||\r\n        editorState.shouldReplaceImage ||\r\n        editorState.shouldAddCanvasBgImage ? (\r\n          <>\r\n            <Backdrop />\r\n            <div className={styles.ImageDropdown}>\r\n              <ImageDropdown assets={assets} setAssets={setAssets} />\r\n            </div>\r\n          </>\r\n        ) : null}\r\n      </div>\r\n\r\n      <div className={styles.DesignControl}>\r\n        <div\r\n          className={styles.AddShapeContainer}\r\n          id='addShape'\r\n          onClick={clickHandler}\r\n        >\r\n          <AddShape\r\n            className={[\r\n              styles.AddIcon,\r\n              editorState.isShapeDropdown ? styles.ActiveDesignControl : null,\r\n            ].join(' ')}\r\n          />\r\n          <div className={styles.HoverContent}>\r\n            <div className={styles.HoverTriangle}></div>\r\n            <p className={styles.HoverText}>Add shape</p>\r\n          </div>\r\n        </div>\r\n        {editorState.isShapeDropdown ? (\r\n          <>\r\n            <Backdrop />\r\n            <div className={styles.ShapeDropdown}>\r\n              <ShapeDropdown />\r\n            </div>\r\n          </>\r\n        ) : null}\r\n      </div>\r\n      <div className={styles.DesignControl}>\r\n        <div\r\n          className={styles.AddShapeContainer}\r\n          id='subtitles'\r\n          onClick={clickHandler}\r\n        >\r\n          <Subtitles\r\n            className={[\r\n              styles.AddIcon,\r\n              editorState.isSubtitles ? styles.ActiveDesignControl : null,\r\n            ].join(' ')}\r\n          />\r\n          <div className={styles.HoverContent}>\r\n            <div className={styles.HoverTriangle}></div>\r\n            <p className={styles.HoverText}>Subtitles</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* {editorState.isSubtitlesDropdown ? (\r\n        <>\r\n          <Backdrop />\r\n          <div className={styles.SubtitlesDropdown}>\r\n            <SubtitlesDropdown isWords={isWords} />\r\n          </div>\r\n        </>\r\n      ) : null} */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DesignControls;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetAssets = () => {\r\n  const [isGettingAssets, setIsGettingAssets] = useState(false);\r\n  const [assets, setAssets] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetAssets = useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get('/images')\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getAssets = useCallback(async () => {\r\n    setAssets(null);\r\n    setIsGettingAssets(true);\r\n    try {\r\n      const res = await axiosGetAssets();\r\n      if (isMounted.current) setAssets(res.data);\r\n      console.log(res);\r\n    } catch (err) {\r\n      console.log('Error Getting Assets', err);\r\n    } finally {\r\n      if (isMounted.current) setIsGettingAssets(false);\r\n      return;\r\n    }\r\n  }, [axiosGetAssets]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isGettingAssets, getAssets, assets, setAssets };\r\n};\r\n\r\nexport default useGetAssets;\r\n","import React, {\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  useCallback,\r\n  useRef,\r\n} from 'react';\r\nimport styles from './Navigation.module.css';\r\nimport EditorContext from '../../contexts/EditorContext';\r\nimport { prepareCanvas } from './utils/prepareCanvas';\r\nimport { prepareBreaks, prepareSubs } from './utils/prepareBreaksAndSubs';\r\nimport DesignControls from './DesignControls/DesignControls';\r\nimport Navbar from '../../components/Navbar/Navbar';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Spinner from '../../components/Spinner/Spinner';\r\nimport useGetAssets from '../../hooks/useGetAssets';\r\nimport { cacheAssets } from '../../utils/cacheAssets';\r\n\r\nconst Navigation = ({\r\n  canvas,\r\n  videoRef,\r\n  videoCuts,\r\n  duration,\r\n  subList,\r\n  fabricSub,\r\n  setPreviewUrl,\r\n  videoData,\r\n  isUpdatingProject,\r\n  isDownloading,\r\n  downloadVideo,\r\n  isDownloadDataUploaded,\r\n  setIsDownloadDataUploaded,\r\n  words,\r\n  setUserAssets,\r\n}) => {\r\n  const { editorState, editorDispatch } = useContext(EditorContext);\r\n  const { getAssets, assets, setAssets } = useGetAssets();\r\n  const [shouldFetchAssets, setShouldFetchAssets] = useState(true);\r\n  const [downloadData, setDownloadData] = useState(null);\r\n  const [elements, setElements] = useState(null);\r\n  const [videoInfo, setVideoInfo] = useState(null);\r\n  const [breaks, setBreaks] = useState(null);\r\n  const [subs, setSubs] = useState(null);\r\n  const [resizeInfo, setResizeInfo] = useState(null);\r\n  const history = useHistory();\r\n  const isMounted = useRef(false);\r\n  const downloadRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (isDownloadDataUploaded) {\r\n      history.push(`/editor/progress/${videoData.id}`);\r\n      // history.push(`/preview/${videoData.id}`);\r\n    }\r\n  }, [isDownloadDataUploaded, history, videoData]);\r\n\r\n  useEffect(() => {\r\n    if (downloadData) {\r\n      downloadVideo(downloadData);\r\n      setDownloadData(null);\r\n    }\r\n  }, [downloadData, downloadVideo, history, videoData]);\r\n\r\n  useEffect(() => {\r\n    if (videoData && videoData.canvas) {\r\n      let assets = videoData.canvas.objects\r\n        .filter((obj) => obj.type === 'customImage')\r\n        .map((img) => img.src);\r\n      cacheAssets(assets, setUserAssets, isMounted);\r\n    } else if (videoData) setUserAssets([]);\r\n  }, [setUserAssets, videoData]);\r\n\r\n  useEffect(() => {\r\n    if (shouldFetchAssets) {\r\n      setShouldFetchAssets(false);\r\n      getAssets();\r\n    }\r\n  }, [shouldFetchAssets, getAssets]);\r\n\r\n  // const imageDownloadHandler = useCallback((elArr) => {\r\n  //   for (let i = 0; i < elArr.length; i++) {\r\n  //     let el = elArr[i];\r\n  //     downloadRef.current.href = el.image;\r\n  //     downloadRef.current.download = `design${i + 1}.png`;\r\n  //     downloadRef.current.click();\r\n  //   }\r\n  //   setElements(null);\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   if (elements) imageDownloadHandler(elements);\r\n  // }, [elements, imageDownloadHandler]);\r\n\r\n  const downloadClickHandler = () => {\r\n    if (editorState.isCropMode) {\r\n      editorDispatch({ type: 'setShouldCropMedia', data: true });\r\n    } else if (canvas && !isDownloading && !isUpdatingProject && words) {\r\n      videoRef.current.pause();\r\n      prepareBreaks(videoCuts, duration, setBreaks);\r\n      if (fabricSub && subList) {\r\n        prepareSubs(subList, fabricSub, editorState.subtitlesState, setSubs);\r\n      } else setSubs({ captions: [], config: {} });\r\n      prepareCanvas(canvas, setElements, setVideoInfo);\r\n      setResizeInfo({\r\n        type: editorState.canvasState.resize,\r\n        w: editorState.canvasState.videoWidth,\r\n        h: editorState.canvasState.videoHeight,\r\n      });\r\n    }\r\n  };\r\n\r\n  // const saveTemplateClickHandler = () => {\r\n  //   let pxRatio = 1;\r\n  //   let newCanvas = new fabric.Canvas();\r\n  //   let jsonCanvas = JSON.stringify(canvas);\r\n  //   let zoom = canvas.getZoom();\r\n  //   newCanvas.loadFromJSON(jsonCanvas, () => {\r\n  //     newCanvas.setZoom(pxRatio);\r\n  //     newCanvas.setDimensions({\r\n  //       width: (canvas.getWidth() / zoom) * pxRatio,\r\n  //       height: (canvas.getHeight() / zoom) * pxRatio,\r\n  //     });\r\n  //     let image = newCanvas.toDataURL({\r\n  //       format: 'image/jpg',\r\n  //       quality: 1,\r\n  //     });\r\n  //     downloadRef.current.href = image;\r\n  //     downloadRef.current.download = 'canvas.png';\r\n  //     downloadRef.current.click();\r\n  //   });\r\n  // };\r\n\r\n  // const downloadClickHandler2 = () => {\r\n  //   setPreviewUrl(videoData.url);\r\n  // };\r\n\r\n  const prepareData = useCallback(\r\n    (elementsArr, videoData, breaksData, subsData, resize, id) => {\r\n      let elements = [...elementsArr];\r\n      let data = {\r\n        id,\r\n        resize: { ...resize },\r\n        video: { ...videoData },\r\n        elements,\r\n        breaks: [...breaksData],\r\n        subtitles: { ...subsData },\r\n      };\r\n      console.log(data);\r\n      let jsonData = JSON.stringify(data);\r\n      setDownloadData(jsonData);\r\n      setElements(null);\r\n      setResizeInfo(null);\r\n      setBreaks(null);\r\n      setVideoInfo(null);\r\n      setSubs(null);\r\n    },\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (elements && videoInfo && breaks && subs && resizeInfo) {\r\n      prepareData(elements, videoInfo, breaks, subs, resizeInfo, videoData.id);\r\n    }\r\n  }, [elements, videoInfo, prepareData, breaks, subs, videoData, resizeInfo]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return (\r\n    <Navbar videoData={videoData}>\r\n      <div className={styles.Navigation}>\r\n        {canvas ? (\r\n          <DesignControls\r\n            canvas={canvas}\r\n            isWords={!!words}\r\n            assets={assets}\r\n            setAssets={setAssets}\r\n          />\r\n        ) : null}\r\n        {/* <button\r\n              id='downloadDesign'\r\n              className={styles.DownloadButton}\r\n              onClick={saveTemplateClickHandler}\r\n              style={{ marginRight: '0.7rem' }}\r\n            >\r\n              {!isDownloading ? 'Save Template' : 'Saving...'}\r\n            </button> */}\r\n        {isUpdatingProject ? (\r\n          <Spinner\r\n            style={{\r\n              width: '1.25rem',\r\n              height: '1.25rem',\r\n              marginRight: '10px',\r\n            }}\r\n          />\r\n        ) : (\r\n          <div\r\n            style={{\r\n              width: '1.25rem',\r\n              height: '1.25rem',\r\n              marginRight: '10px',\r\n            }}\r\n          ></div>\r\n        )}\r\n        {canvas && !editorState.isLoadingTemplate ? (\r\n          <button\r\n            id='downloadDesign'\r\n            className={styles.DownloadButton}\r\n            onClick={downloadClickHandler}\r\n          >\r\n            {!isDownloading ? 'Download' : 'Loading...'}\r\n          </button>\r\n        ) : null}\r\n\r\n        <a className={styles.DownloadLink} ref={downloadRef} href='/'>\r\n          Download\r\n        </a>\r\n      </div>\r\n    </Navbar>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import { useReducer } from 'react';\r\n\r\nconst initialState = {\r\n  shouldTriggerCanvasUpdate: true,\r\n  shouldTriggerWordsUpdate: false,\r\n  shouldSaveTemplate: false,\r\n  isLoadingTemplate: false,\r\n  isModifyingObject: false,\r\n  shouldUndo: false,\r\n  canvasState: {\r\n    initialWidth: 0,\r\n    initialHeight: 0,\r\n    videoHeight: 0,\r\n    videoWidth: 0,\r\n    containerWidth: 0,\r\n    containerHeight: 0,\r\n    resize: 'original',\r\n    width: 0,\r\n    height: 0,\r\n    backgroundColor: 'rgba(255,255,255,1)',\r\n    shouldUpdateCanvas: false,\r\n    shouldUpdateCanvasSize: false,\r\n    shouldCalculateCanvasSize: false,\r\n  },\r\n  shapeToAdd: null,\r\n  imageToAdd: null,\r\n  currentCoords: null,\r\n  showToolbar: false,\r\n  shapeState: {\r\n    fill: 'rgba(196,196,196,1)',\r\n    stroke: 'rgba(255,255,255,1)',\r\n    strokeWidth: 0,\r\n    rx: 0,\r\n    ry: 0,\r\n  },\r\n  imageState: {\r\n    cornerRadius: 0,\r\n    isSvg: false,\r\n  },\r\n  videoState: {\r\n    cornerRadius: 0,\r\n    stroke: 'rgba(255,255,255,1)',\r\n    strokeWidth: 0,\r\n  },\r\n  isSubtitles: false,\r\n  isCropMode: false,\r\n  cropType: 'rect',\r\n  shouldCropMedia: false,\r\n  isImageDropdown: false,\r\n  isSubtitlesDropdown: false,\r\n  isShapeDropdown: false,\r\n  isTemplatesDropdown: false,\r\n  isResizeDropdown: false,\r\n  isCanvasBgColorDropdown: false,\r\n  isDownloadDropdown: false,\r\n  shouldAddText: false,\r\n  shouldUpdateText: false,\r\n  shouldUpdateSubtitles: false,\r\n  shouldUpdateShape: false,\r\n  shouldUpdateImage: false,\r\n  shouldUpdateVideo: false,\r\n  shouldReplaceImage: false,\r\n  currentObject: {\r\n    type: '',\r\n    object: null,\r\n  },\r\n  textState: {\r\n    fontFamily: 'Inter',\r\n    fontStyle: 'Normal',\r\n    fontWeight: 'Normal',\r\n    fontSize: 30,\r\n    fill: 'rgba(0,0,0,1)',\r\n    textAlign: 'left',\r\n  },\r\n  subtitlesState: {\r\n    fontFamily: 'Inter',\r\n    fontStyle: 'Normal',\r\n    fontWeight: 'Normal',\r\n    fontSize: 24,\r\n    fill: 'rgba(0,0,0,1)',\r\n    backgroundColor: 'rgba(255,255,255,1)',\r\n  },\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'setShouldTriggerCanvasUpdate':\r\n      return { ...state, shouldTriggerCanvasUpdate: action.data };\r\n    case 'setShouldTriggerWordsUpdate':\r\n      return { ...state, shouldTriggerWordsUpdate: action.data };\r\n    case 'setShouldSaveTemplate':\r\n      return { ...state, shouldSaveTemplate: action.data };\r\n    case 'setIsLoadingTemplate':\r\n      return { ...state, isLoadingTemplate: action.data };\r\n    case 'setIsModifyingObject':\r\n      return { ...state, isModifyingObject: action.data };\r\n    case 'setShouldUndo':\r\n      return { ...state, shouldUndo: action.data };\r\n    case 'setCanvasState':\r\n      return { ...state, canvasState: action.data };\r\n    case 'setIsDownloadDropdown':\r\n      return { ...state, isDownloadDropdown: action.data };\r\n    case 'setIsSubtitles':\r\n      return { ...state, isSubtitles: action.data, isSubtitlesDropdown: false };\r\n    case 'setIsCropMode':\r\n      return { ...state, isCropMode: action.data };\r\n    case 'setCropType':\r\n      return { ...state, isCropMode: true, cropType: action.data };\r\n    case 'setShouldCropMedia':\r\n      return { ...state, shouldCropMedia: action.data };\r\n    case 'setIsImageDropdown':\r\n      return { ...state, isImageDropdown: action.data };\r\n    case 'setIsSubtitlesDropdown':\r\n      return { ...state, isSubtitlesDropdown: action.data };\r\n    case 'setIsTemplatesDropdown':\r\n      return { ...state, isTemplatesDropdown: action.data };\r\n    case 'setIsShapeDropdown':\r\n      return { ...state, isShapeDropdown: action.data };\r\n    case 'setIsResizeDropdown':\r\n      return { ...state, isResizeDropdown: action.data };\r\n    case 'setIsCanvasBgColorDropdown':\r\n      return { ...state, isCanvasBgColorDropdown: action.data };\r\n    case 'setCurrentCoords':\r\n      return { ...state, currentCoords: action.data };\r\n    case 'setShowToolbar':\r\n      return { ...state, showToolbar: action.data };\r\n    case 'setShowCanvasToolbar':\r\n      return { ...state, showCanvasToolbar: action.data };\r\n    case 'setShouldAddText':\r\n      return { ...state, shouldAddText: action.data };\r\n    case 'setShouldUpdateText':\r\n      return { ...state, shouldUpdateText: action.data };\r\n    case 'setShouldUpdateSubtitles':\r\n      return { ...state, shouldUpdateSubtitles: action.data };\r\n    case 'setShouldUpdateShape':\r\n      return { ...state, shouldUpdateShape: action.data };\r\n    case 'setShouldUpdateImage':\r\n      return { ...state, shouldUpdateImage: action.data };\r\n    case 'setShouldUpdateVideo':\r\n      return { ...state, shouldUpdateVideo: action.data };\r\n    case 'setCurrentObject':\r\n      return { ...state, currentObject: action.data };\r\n    case 'setShapeToAdd':\r\n      return { ...state, shapeToAdd: action.data, isShapeDropdown: false };\r\n    case 'setImageToAdd':\r\n      return { ...state, imageToAdd: action.data, isImageDropdown: false };\r\n    case 'setShapeState':\r\n      return { ...state, shapeState: { ...action.data } };\r\n    case 'setImageState':\r\n      return { ...state, imageState: { ...action.data } };\r\n    case 'setVideoState':\r\n      return { ...state, videoState: { ...action.data } };\r\n    case 'setTextState':\r\n      return { ...state, textState: { ...action.data } };\r\n    case 'setSubtitlesState':\r\n      return { ...state, subtitlesState: { ...action.data } };\r\n    case 'setShouldReplaceImage':\r\n      return { ...state, shouldReplaceImage: action.data };\r\n    case 'setShouldUpdateCanvas':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldUpdateCanvas: action.data,\r\n        },\r\n      };\r\n    case 'setShouldUpdateCanvasSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldUpdateCanvasSize: action.data,\r\n        },\r\n      };\r\n    case 'setShouldCalculateCanvasSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldCalculateCanvasSize: action.data,\r\n        },\r\n      };\r\n    case 'setCanvasBackgroundColor':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldUpdateCanvas: true,\r\n          backgroundColor: action.data,\r\n        },\r\n      };\r\n    case 'setCanvasSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldUpdateCanvasSize: true,\r\n          width: action.data.width,\r\n          height: action.data.height,\r\n        },\r\n      };\r\n    case 'setVideoSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldCalculateCanvasSize: true,\r\n          videoWidth: action.data.width,\r\n          videoHeight: action.data.height,\r\n          resize: action.data.resize,\r\n        },\r\n      };\r\n    case 'setContainerSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          shouldCalculateCanvasSize: true,\r\n          containerWidth: action.data.width,\r\n          containerHeight: action.data.height,\r\n        },\r\n      };\r\n    case 'setCanvasInitialSize':\r\n      return {\r\n        ...state,\r\n        canvasState: {\r\n          ...state.canvasState,\r\n          initialWidth: action.data.initialWidth,\r\n          initialHeight: action.data.initialHeight,\r\n        },\r\n      };\r\n    case 'setImageCornerRadius':\r\n      return {\r\n        ...state,\r\n        shouldUpdateImage: true,\r\n        imageState: {\r\n          ...state.imageState,\r\n          cornerRadius: action.data,\r\n        },\r\n      };\r\n    case 'setVideoCornerRadius':\r\n      return {\r\n        ...state,\r\n        shouldUpdateVideo: true,\r\n        videoState: {\r\n          ...state.videoState,\r\n          strokeWidth: 0,\r\n          cornerRadius: action.data,\r\n        },\r\n      };\r\n    case 'setVideoStroke':\r\n      return {\r\n        ...state,\r\n        shouldUpdateVideo: true,\r\n        videoState: {\r\n          ...state.videoState,\r\n          stroke: action.data,\r\n        },\r\n      };\r\n    case 'setVideoStrokeWidth':\r\n      return {\r\n        ...state,\r\n        shouldUpdateVideo: true,\r\n        videoState: {\r\n          ...state.videoState,\r\n          strokeWidth: action.data,\r\n          cornerRadius: 0,\r\n        },\r\n      };\r\n    case 'setShapeRadius':\r\n      return {\r\n        ...state,\r\n        shouldUpdateShape: true,\r\n        shapeState: {\r\n          ...state.shapeState,\r\n          rx: action.data,\r\n          ry: action.data,\r\n        },\r\n      };\r\n    case 'setShapeFill':\r\n      return {\r\n        ...state,\r\n        shouldUpdateShape: true,\r\n        shapeState: {\r\n          ...state.shapeState,\r\n          fill: action.data,\r\n        },\r\n      };\r\n    case 'setShapeStroke':\r\n      return {\r\n        ...state,\r\n        shouldUpdateShape: true,\r\n        shapeState: {\r\n          ...state.shapeState,\r\n          stroke: action.data,\r\n        },\r\n      };\r\n    case 'setShapeStrokeWidth':\r\n      return {\r\n        ...state,\r\n        shouldUpdateShape: true,\r\n        shapeState: {\r\n          ...state.shapeState,\r\n          strokeWidth: action.data,\r\n        },\r\n      };\r\n\r\n    case 'setFontFamily':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          fontFamily: action.data,\r\n        },\r\n      };\r\n    case 'setFontStyle':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          fontStyle: action.data,\r\n        },\r\n      };\r\n    case 'setFontWeight':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          fontWeight: action.data,\r\n        },\r\n      };\r\n    case 'setFontSize':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          fontSize: action.data,\r\n        },\r\n      };\r\n    case 'setTextFill':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          fill: action.data,\r\n        },\r\n      };\r\n    case 'setTextAlign':\r\n      return {\r\n        ...state,\r\n        shouldUpdateText: true,\r\n        textState: {\r\n          ...state.textState,\r\n          textAlign: action.data,\r\n        },\r\n      };\r\n\r\n    case 'setSubtitlesbackgroundColor':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          backgroundColor: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesFontFamily':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          fontFamily: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesFontStyle':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          fontStyle: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesFontWeight':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          fontWeight: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesFontSize':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          fontSize: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesTextFill':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          fill: action.data,\r\n        },\r\n      };\r\n    case 'setSubtitlesTextAlign':\r\n      return {\r\n        ...state,\r\n        shouldUpdateSubtitles: true,\r\n        subtitlesState: {\r\n          ...state.subtitlesState,\r\n          textAlign: action.data,\r\n        },\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst useEditorState = () => {\r\n  const [editorState, editorDispatch] = useReducer(reducer, initialState);\r\n  return [editorState, editorDispatch];\r\n};\r\n\r\nexport default useEditorState;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetVideo = () => {\r\n  const [isGettingVideo, setIsGettingVideo] = useState(false);\r\n  const [info, setInfo] = useState(null);\r\n  const [videoUrl, setVideoUrl] = useState(null);\r\n  const [transcriptonStatus, setTranscriptionStatus] = useState(null);\r\n  const [getVideoError, setGetVideoError] = useState(null);\r\n  const words = useRef(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetVideo = useCallback((id) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get(`/videos/${id}`)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getVideo = useCallback(\r\n    async (id) => {\r\n      setGetVideoError(null);\r\n      setIsGettingVideo(true);\r\n      try {\r\n        const res = await axiosGetVideo(id);\r\n        if (isMounted.current) {\r\n          let transcription = res.data.transcription;\r\n          if (transcription && transcription.length > 0) {\r\n            words.current = [...transcription];\r\n            setTranscriptionStatus({\r\n              timeLeft: res.data.transcriptionTime,\r\n              startDate: res.data.transcription_start,\r\n              isFinished: true,\r\n            });\r\n            setVideoUrl(\r\n              res.data.frame_rate_video_url\r\n                ? res.data.frame_rate_video_url\r\n                : res.data.original_video_url\r\n            );\r\n          } else {\r\n            setTranscriptionStatus({\r\n              timeLeft: res.data.transcriptionTime,\r\n              startDate: res.data.transcription_start,\r\n              isFinished: false,\r\n            });\r\n            setVideoUrl(res.data.original_video_url);\r\n          }\r\n          setInfo((prevState) => {\r\n            return prevState\r\n              ? prevState\r\n              : {\r\n                  id: res.data._id,\r\n                  duration: res.data.duration,\r\n                  url: res.data.original_video_url,\r\n                  finalUrl: res.data.final_video_url || null,\r\n                  canvas: res.data.canvas || null,\r\n                  title: res.data.title,\r\n                  finalText: res.data.final_full_text || null,\r\n                };\r\n          });\r\n        }\r\n        console.log(res);\r\n      } catch (err) {\r\n        if (isMounted.current) setGetVideoError(err);\r\n        console.log('Error Getting Video', err);\r\n      } finally {\r\n        if (isMounted.current) setIsGettingVideo(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosGetVideo]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isGettingVideo,\r\n    getVideo,\r\n    words: words.current,\r\n    info,\r\n    videoUrl,\r\n    getVideoError,\r\n    transcriptonStatus,\r\n  };\r\n};\r\n\r\nexport default useGetVideo;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useUpdateProject = () => {\r\n  const [isUpdatingProject, setIsUpdatingProject] = useState(false);\r\n  const [updateResponse, setUpdateResponse] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosUpdateProject = useCallback((data) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .put('/videos', data)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const updateProject = useCallback(\r\n    async (data) => {\r\n      setUpdateResponse(null);\r\n      setIsUpdatingProject(true);\r\n      try {\r\n        const res = await axiosUpdateProject(data);\r\n        if (isMounted.current) setUpdateResponse(res.data);\r\n        console.log(res);\r\n      } catch (err) {\r\n        console.log('Error Updating Project', err);\r\n        if (isMounted.current) setUpdateResponse('error');\r\n      } finally {\r\n        if (isMounted.current) setIsUpdatingProject(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosUpdateProject]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isUpdatingProject, updateProject, updateResponse };\r\n};\r\n\r\nexport default useUpdateProject;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useDownloadVideo = () => {\r\n  const [isDownloading, setIsDownloading] = useState(false);\r\n  const [isDownloadDataUploaded, setIsDownloadDataUploaded] = useState(false);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosDownloadVideo = useCallback((data) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .post('/download-video', data, {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        })\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const downloadVideo = useCallback(\r\n    async (data) => {\r\n      setIsDownloading(true);\r\n      try {\r\n        const res = await axiosDownloadVideo(data);\r\n        if (isMounted.current && res.data.status === 'ok') {\r\n          setIsDownloadDataUploaded(true);\r\n        }\r\n        console.log(res);\r\n      } catch (err) {\r\n        console.log('Error Downloading Video', err);\r\n      } finally {\r\n        if (isMounted.current) setIsDownloading(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosDownloadVideo]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isDownloading,\r\n    downloadVideo,\r\n    isDownloadDataUploaded,\r\n    setIsDownloadDataUploaded,\r\n  };\r\n};\r\n\r\nexport default useDownloadVideo;\r\n","import { useEffect, useRef, useCallback } from 'react';\r\nimport { getCanvasObject } from '../../../utils/canvasUtils';\r\n\r\nconst useCanvasUpdate = (\r\n  isMounted,\r\n  updateProject,\r\n  canvas,\r\n  info,\r\n  dispatch,\r\n  isDownloading,\r\n  state\r\n) => {\r\n  const timerRef = useRef(null);\r\n  const canUpdateRef = useRef(true);\r\n\r\n  const triggerCanvasUpdate = useCallback(() => {\r\n    if (timerRef.current) clearTimeout(timerRef.current);\r\n    let timeout = setTimeout(() => {\r\n      if (isMounted.current && canUpdateRef.current) {\r\n        timerRef.current = null;\r\n        let jsonCanvas = getCanvasObject(canvas);\r\n        updateProject({\r\n          id: info.id,\r\n          canvas: { ...jsonCanvas },\r\n        });\r\n      }\r\n    }, 1000);\r\n    timerRef.current = timeout;\r\n  }, [updateProject, info, canvas, isMounted]);\r\n\r\n  useEffect(() => {\r\n    if (state.shouldTriggerCanvasUpdate && canvas) {\r\n      // console.log('triggering');\r\n      dispatch({ type: 'setShouldTriggerCanvasUpdate', data: false });\r\n      if (!isDownloading) triggerCanvasUpdate();\r\n    }\r\n  }, [\r\n    triggerCanvasUpdate,\r\n    state.shouldTriggerCanvasUpdate,\r\n    dispatch,\r\n    isDownloading,\r\n    canvas,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      state.isCropMode ||\r\n      state.isLoadingTemplate ||\r\n      state.isModifyingObject\r\n    ) {\r\n      canUpdateRef.current = false;\r\n    } else canUpdateRef.current = true;\r\n  }, [state.isCropMode, state.isLoadingTemplate, state.isModifyingObject]);\r\n};\r\n\r\nexport default useCanvasUpdate;\r\n","import { useEffect, useRef, useCallback } from 'react';\r\n\r\nconst useWordsUpdate = (\r\n  isMounted,\r\n  updateProject,\r\n  info,\r\n  words,\r\n  dispatch,\r\n  isDownloading,\r\n  shouldUpdate,\r\n  videoCuts\r\n) => {\r\n  const wordsUpdateTimerRef = useRef(null);\r\n  const isFirstLoad = useRef(true);\r\n\r\n  const triggerWordsUpdate = useCallback(() => {\r\n    if (wordsUpdateTimerRef.current) clearTimeout(wordsUpdateTimerRef.current);\r\n    let timeout = setTimeout(() => {\r\n      if (isMounted.current) {\r\n        wordsUpdateTimerRef.current = null;\r\n        updateProject({\r\n          id: info.id,\r\n          transcription: [...words],\r\n        });\r\n      }\r\n    }, 1000);\r\n    wordsUpdateTimerRef.current = timeout;\r\n  }, [updateProject, info, words, isMounted]);\r\n\r\n  useEffect(() => {\r\n    if (shouldUpdate) {\r\n      dispatch({ type: 'setShouldTriggerWordsUpdate', data: false });\r\n      if (!isDownloading) triggerWordsUpdate();\r\n    }\r\n  }, [triggerWordsUpdate, shouldUpdate, dispatch, isDownloading]);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad.current) isFirstLoad.current = false;\r\n    else if (words) {\r\n      dispatch({ type: 'setShouldTriggerWordsUpdate', data: true });\r\n    }\r\n  }, [videoCuts, isDownloading, words, dispatch]);\r\n};\r\n\r\nexport default useWordsUpdate;\r\n","import { useEffect, useRef, useCallback } from 'react';\r\n\r\nconst useCheckTranscription = (\r\n  isGettingVideo,\r\n  getVideo,\r\n  status,\r\n  isMounted,\r\n  params\r\n) => {\r\n  const intervalRef = useRef(null);\r\n\r\n  const checkTranscription = useCallback(() => {\r\n    if (intervalRef.current) clearInterval(intervalRef.current);\r\n    let interval = setInterval(() => {\r\n      if (isMounted.current && !isGettingVideo) getVideo(params.id);\r\n    }, 4000);\r\n    intervalRef.current = interval;\r\n  }, [getVideo, params, isMounted, isGettingVideo]);\r\n\r\n  useEffect(() => {\r\n    if (status && !status.isFinished) {\r\n      checkTranscription();\r\n    } else if (status && status.isFinished) {\r\n      if (intervalRef.current) clearInterval(intervalRef.current);\r\n    }\r\n\r\n    return () => {\r\n      if (intervalRef.current) clearInterval(intervalRef.current);\r\n    };\r\n  }, [status, checkTranscription]);\r\n};\r\n\r\nexport default useCheckTranscription;\r\n","const deleteVideo = (canvas, obj, setVideos) => {\r\n  let moreThanOne =\r\n    canvas.getObjects().filter((el) => el.type === 'video').length > 1;\r\n  if (moreThanOne) {\r\n    setVideos((prevState) => prevState.filter((video) => video.id !== obj.id));\r\n    canvas.remove(obj);\r\n  }\r\n};\r\n\r\nconst deleteHandler = (canvas, dispatch, active, setVideos) => {\r\n  if (active.id === 'subtitle') {\r\n    dispatch({ type: 'setIsSubtitles', data: false });\r\n  } else if (!active.isEditing) {\r\n    if (active.type === 'video') deleteVideo(canvas, active, setVideos);\r\n    else if (active.type === 'activeSelection') {\r\n      for (let i = 0; i < active._objects.length; i++) {\r\n        let obj = active._objects[i];\r\n        if (obj.type === 'video') deleteVideo(canvas, obj, setVideos);\r\n        else if (obj.id === 'subtitle') {\r\n          dispatch({ type: 'setIsSubtitles', data: false });\r\n        } else canvas.remove(obj);\r\n      }\r\n    } else canvas.remove(active);\r\n    canvas.discardActiveObject().requestRenderAll();\r\n  }\r\n};\r\n\r\nexport const keyDownHandler = (\r\n  e,\r\n  canvas,\r\n  setIsPasting,\r\n  setIsCopying,\r\n  setIsCutting,\r\n  setIsBringToFront,\r\n  setIsSendToBack,\r\n  dispatch,\r\n  setIsCut,\r\n  setIsPlayPause,\r\n  setIsPrevWord,\r\n  setIsNextWord,\r\n  setSpeakerVideos,\r\n  setIsUndo\r\n) => {\r\n  let active = canvas && canvas.getActiveObject();\r\n  let canvasInput =\r\n    active && active.type === 'customTextbox' && active.isEditing;\r\n  let isInput = document.activeElement.tagName === 'INPUT' || canvasInput;\r\n  if (!isInput) {\r\n    let ctrl = e.ctrlKey || e.metaKey;\r\n    if (\r\n      e.code === 'Delete' ||\r\n      e.key === 'Delete' ||\r\n      e.code === 'Backspace' ||\r\n      e.key === 'Backspace'\r\n    ) {\r\n      if (active) deleteHandler(canvas, dispatch, active, setSpeakerVideos);\r\n      else setIsCut(true);\r\n    } else if (canvas && (e.code === 'Space' || e.key === 'Space')) {\r\n      e.preventDefault();\r\n      setIsPlayPause(true);\r\n    } else if (canvas && (e.code === 'KeyC' || e.key === 'c') && ctrl) {\r\n      e.preventDefault();\r\n      setIsCopying(true);\r\n    } else if (canvas && (e.code === 'KeyV' || e.key === 'v') && ctrl) {\r\n      e.preventDefault();\r\n      setIsPasting(true);\r\n    } else if (canvas && (e.code === 'KeyX' || e.key === 'x') && ctrl) {\r\n      e.preventDefault();\r\n      setIsCutting(true);\r\n    } else if (canvas && (e.code === 'BracketRight' || e.key === ']') && ctrl) {\r\n      e.preventDefault();\r\n      setIsBringToFront(true);\r\n    } else if (canvas && (e.code === 'BracketLeft' || e.key === '[') && ctrl) {\r\n      e.preventDefault();\r\n      setIsSendToBack(true);\r\n    } else if (e.code === 'ArrowRight' || e.key === 'ArrowRight') {\r\n      e.preventDefault();\r\n      if (active) {\r\n        active.left += 1;\r\n        canvas.fire('object:modified', { target: active });\r\n        canvas.fire('object:moved', { target: active });\r\n      } else setIsNextWord(true);\r\n    } else if (e.code === 'ArrowLeft' || e.key === 'ArrowLeft') {\r\n      e.preventDefault();\r\n      if (active) {\r\n        active.left -= 1;\r\n        canvas.fire('object:modified', { target: active });\r\n        canvas.fire('object:moved', { target: active });\r\n      } else setIsPrevWord(true);\r\n    } else if ((e.code === 'ArrowUp' || e.key === 'ArrowUp') && active) {\r\n      e.preventDefault();\r\n      active.top -= 1;\r\n      canvas.fire('object:modified', { target: active });\r\n      canvas.fire('object:moved', { target: active });\r\n    } else if ((e.code === 'ArrowDown' || e.key === 'ArrowDown') && active) {\r\n      e.preventDefault();\r\n      active.top += 1;\r\n      canvas.fire('object:modified', { target: active });\r\n      canvas.fire('object:moved', { target: active });\r\n    } else if ((e.code === 'KeyZ' || e.key === 'z') && ctrl) {\r\n      e.preventDefault();\r\n      setIsUndo(true);\r\n    }\r\n  }\r\n};\r\n\r\nexport const keyUpHandler = (\r\n  setIsPasting,\r\n  setIsCopying,\r\n  setIsCutting,\r\n  setIsBringToFront,\r\n  setIsSendToBack,\r\n  setIsCut,\r\n  setShouldRun,\r\n  setIsPlayPause,\r\n  setIsPrevWord,\r\n  setIsNextWord,\r\n  setIsUndo\r\n) => {\r\n  setIsCopying(false);\r\n  setIsPasting(false);\r\n  setIsCutting(false);\r\n  setIsBringToFront(false);\r\n  setIsSendToBack(false);\r\n  setIsCut(false);\r\n  setIsPlayPause(false);\r\n  setIsPrevWord(false);\r\n  setIsNextWord(false);\r\n  setIsUndo(false);\r\n  setShouldRun(true);\r\n};\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { handlePaste } from '../../../utils/pasteObject';\r\nimport { keyDownHandler, keyUpHandler } from '../utils/keyEvents';\r\n\r\nconst useKeyEvents = (\r\n  canvas,\r\n  clipboard,\r\n  setClipboard,\r\n  objId,\r\n  updateId,\r\n  fabricSub,\r\n  dispatch,\r\n  setShouldCut,\r\n  state,\r\n  videoRef,\r\n  isPlaying,\r\n  setIsPrevWord,\r\n  setIsNextWord,\r\n  setSpeakerVideos\r\n) => {\r\n  const [isPasting, setIsPasting] = useState(false);\r\n  const [isCopying, setIsCopying] = useState(false);\r\n  const [isCutting, setIsCutting] = useState(false);\r\n  const [isBringToFront, setIsBringToFront] = useState(false);\r\n  const [isSendToBack, setIsSendToBack] = useState(false);\r\n  const [isCut, setIsCut] = useState(false);\r\n  const [isUndo, setIsUndo] = useState(false);\r\n  const [isPlayPause, setIsPlayPause] = useState(false);\r\n  const [shouldRun, setShouldRun] = useState(true);\r\n\r\n  const handleEvents = useCallback(() => {\r\n    if (!state.isLoadingTemplate && !state.isCropMode) {\r\n      if (canvas && isPasting && clipboard) {\r\n        setShouldRun(false);\r\n        handlePaste(\r\n          canvas,\r\n          clipboard,\r\n          objId,\r\n          updateId,\r\n          setClipboard,\r\n          null,\r\n          fabricSub,\r\n          setSpeakerVideos\r\n        );\r\n      } else if (canvas && (isCopying || isCutting)) {\r\n        setShouldRun(false);\r\n        let active = canvas.getActiveObject();\r\n        if (active && active.id !== 'subtitle') {\r\n          setClipboard({\r\n            object: active,\r\n            coords: { top: active.top, left: active.left },\r\n          });\r\n          if (isCutting && active.type !== 'activeSelection') {\r\n            if (active.type === 'video') {\r\n              setSpeakerVideos((prevState) =>\r\n                prevState.filter((video) => video.id !== active.id)\r\n              );\r\n            }\r\n            canvas.remove(active);\r\n            canvas.discardActiveObject().requestRenderAll();\r\n          }\r\n        }\r\n      } else if (canvas && isBringToFront) {\r\n        setShouldRun(false);\r\n        let active = canvas.getActiveObject();\r\n        if (active && active.id !== 'subtitle') {\r\n          canvas.bringToFront(active);\r\n          if (fabricSub) canvas.bringToFront(fabricSub);\r\n          dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n        }\r\n      } else if (canvas && isSendToBack) {\r\n        setShouldRun(false);\r\n        let active = canvas.getActiveObject();\r\n        if (active && active.id !== 'subtitle') {\r\n          canvas.sendToBack(active);\r\n          dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n        }\r\n      } else if (canvas && isPlayPause) {\r\n        setShouldRun(false);\r\n        if (isPlaying) videoRef.current.pause();\r\n        else videoRef.current.play();\r\n      } else if (isCut) {\r\n        setShouldRun(false);\r\n        setShouldCut(true);\r\n      } else if (isUndo) {\r\n        setShouldRun(false);\r\n        dispatch({type: 'setShouldUndo', data: true});\r\n      }\r\n    }\r\n  }, [\r\n    canvas,\r\n    isPasting,\r\n    isCopying,\r\n    isBringToFront,\r\n    isSendToBack,\r\n    isCut,\r\n    isPlayPause,\r\n    isUndo,\r\n    objId,\r\n    setClipboard,\r\n    clipboard,\r\n    updateId,\r\n    fabricSub,\r\n    dispatch,\r\n    setShouldCut,\r\n    state.isLoadingTemplate,\r\n    state.isCropMode,\r\n    videoRef,\r\n    isPlaying,\r\n    isCutting,\r\n    setSpeakerVideos,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (shouldRun) handleEvents();\r\n  }, [\r\n    shouldRun,\r\n    handleEvents,\r\n    isPasting,\r\n    isCopying,\r\n    isCutting,\r\n    isBringToFront,\r\n    isSendToBack,\r\n    isCut,\r\n    isPlayPause,\r\n  ]);\r\n\r\n  const onKeyDown = useCallback(\r\n    (e) => {\r\n      keyDownHandler(\r\n        e,\r\n        canvas,\r\n        setIsPasting,\r\n        setIsCopying,\r\n        setIsCutting,\r\n        setIsBringToFront,\r\n        setIsSendToBack,\r\n        dispatch,\r\n        setIsCut,\r\n        setIsPlayPause,\r\n        setIsPrevWord,\r\n        setIsNextWord,\r\n        setSpeakerVideos,\r\n        setIsUndo\r\n      );\r\n    },\r\n    [canvas, dispatch, setIsPrevWord, setIsNextWord, setSpeakerVideos]\r\n  );\r\n\r\n  const onKeyUp = useCallback(\r\n    (e) => {\r\n      keyUpHandler(\r\n        setIsPasting,\r\n        setIsCopying,\r\n        setIsCutting,\r\n        setIsBringToFront,\r\n        setIsSendToBack,\r\n        setIsCut,\r\n        setShouldRun,\r\n        setIsPlayPause,\r\n        setIsPrevWord,\r\n        setIsNextWord,\r\n        setIsUndo\r\n      );\r\n    },\r\n    [setIsPrevWord, setIsNextWord]\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', onKeyDown);\r\n    document.addEventListener('keyup', onKeyUp);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', onKeyDown);\r\n      document.removeEventListener('keyup', onKeyUp);\r\n    };\r\n  }, [onKeyDown, onKeyUp]);\r\n};\r\n\r\nexport default useKeyEvents;\r\n","import {\r\n  findCurrentWordIndex,\r\n  handleVideoCuts,\r\n} from '../../../utils/updateTextAndCuts';\r\nimport { updateSubText } from '../../../utils/updateSubtitlesText';\r\nimport { findSubWithWordIndex } from '../../../utils/findIndex';\r\n\r\nconst finishUndo = (\r\n  wordsArr,\r\n  setCuts,\r\n  setPlayerTime,\r\n  index,\r\n  setWordIndex,\r\n  setCurrentSelection\r\n) => {\r\n  handleVideoCuts('delete', wordsArr, setCuts, setPlayerTime, index);\r\n  setCurrentSelection(null);\r\n  let selection = document.getSelection();\r\n  selection.removeAllRanges();\r\n  setWordIndex(index);\r\n};\r\n\r\nexport const undoDeletedText = (\r\n  target,\r\n  wordsArr,\r\n  setWordIndex,\r\n  setCurrentSelection,\r\n  setCuts,\r\n  setPlayerTime\r\n) => {\r\n  for (let i = 0; i < target.length; i++) {\r\n    let word = wordsArr[target[i]];\r\n    word.active = true;\r\n    if (word.next !== null) word.next = null;\r\n  }\r\n  finishUndo(\r\n    wordsArr,\r\n    setCuts,\r\n    setPlayerTime,\r\n    target[0],\r\n    setWordIndex,\r\n    setCurrentSelection\r\n  );\r\n};\r\n\r\nexport const undoRestoredText = (\r\n  target,\r\n  wordsArr,\r\n  setWordIndex,\r\n  setCurrentSelection,\r\n  setCuts,\r\n  setPlayerTime\r\n) => {\r\n  for (let i = 0; i < target.length; i++) {\r\n    let word = wordsArr[target[i]];\r\n    word.active = false;\r\n  }\r\n  let currentIndex = findCurrentWordIndex(target[0], wordsArr);\r\n  finishUndo(\r\n    wordsArr,\r\n    setCuts,\r\n    setPlayerTime,\r\n    currentIndex,\r\n    setWordIndex,\r\n    setCurrentSelection\r\n  );\r\n};\r\n\r\nexport const undoChangedText = (\r\n  prev,\r\n  wordsArr,\r\n  setCurrentSelection,\r\n  setShouldRerenderSub,\r\n  setWordIndex,\r\n  subList,\r\n  setPlayerTime\r\n) => {\r\n  let word = wordsArr[prev.target];\r\n  let sub = findSubWithWordIndex(prev.target, wordsArr, subList);\r\n  if (sub) {\r\n    let text = prev.change.value.length > 0 ? prev.change.value : null;\r\n    updateSubText(word._id, text, word.silence, setShouldRerenderSub, sub);\r\n  }\r\n  word.silence = prev.change.silence;\r\n  word.text = prev.change.value;\r\n  setCurrentSelection(null);\r\n  let selection = document.getSelection();\r\n  selection.removeAllRanges();\r\n  setPlayerTime(prev.target)\r\n  setWordIndex(prev.target);\r\n};\r\n","import { useEffect, useCallback } from 'react';\r\nimport {\r\n  undoDeletedText,\r\n  undoRestoredText,\r\n  undoChangedText,\r\n} from '../utils/undoText';\r\n\r\nconst undoHistory = [];\r\nconst updateUndoHistory = (lastAction) => undoHistory.push(lastAction);\r\n\r\nconst useUndo = (\r\n  state,\r\n  dispatch,\r\n  videoRef,\r\n  words,\r\n  setCurrentWordIndex,\r\n  setCurrentSelection,\r\n  setVideoCuts,\r\n  setPlayerTime,\r\n  setShouldRerenderSub,\r\n  subList\r\n) => {\r\n  const handleTextUndo = useCallback(\r\n    (prev, wordsArr) => {\r\n      if (prev.action === 'delete') {\r\n        undoDeletedText(\r\n          prev.target,\r\n          wordsArr,\r\n          setCurrentWordIndex,\r\n          setCurrentSelection,\r\n          setVideoCuts,\r\n          setPlayerTime\r\n        );\r\n      } else if (prev.action === 'restore') {\r\n        undoRestoredText(\r\n          prev.target,\r\n          wordsArr,\r\n          setCurrentWordIndex,\r\n          setCurrentSelection,\r\n          setVideoCuts,\r\n          setPlayerTime\r\n        );\r\n      } else if (prev.action === 'textChange') {\r\n        undoChangedText(\r\n          prev,\r\n          wordsArr,\r\n          setCurrentSelection,\r\n          setShouldRerenderSub,\r\n          setCurrentWordIndex,\r\n          subList,\r\n          setPlayerTime\r\n        );\r\n      }\r\n    },\r\n    [\r\n      setCurrentWordIndex,\r\n      setCurrentSelection,\r\n      setVideoCuts,\r\n      setPlayerTime,\r\n      setShouldRerenderSub,\r\n      subList,\r\n    ]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (state.shouldUndo) {\r\n      dispatch({ type: 'setShouldUndo', data: false });\r\n      let prev = undoHistory.pop();\r\n      if (prev && prev.type === 'transcription' && words) {\r\n        if (videoRef.current) videoRef.current.pause();\r\n        handleTextUndo(prev, words);\r\n      }\r\n    }\r\n  }, [words, state.shouldUndo, dispatch, handleTextUndo, videoRef]);\r\n\r\n  return { undoHistory, updateUndoHistory };\r\n};\r\n\r\nexport default useUndo;\r\n","import React, { useEffect, useState, useRef, useCallback } from 'react';\r\nimport styles from './VideoEditor.module.css';\r\nimport Transcription from '../Transcription/Transcription';\r\nimport Player from '../Player/Player';\r\nimport Video from './Video/Video';\r\nimport Navigation from '../Navigation/Navigation';\r\nimport useEditorState from '../../hooks/useEditorState';\r\nimport EditorContext from '../../contexts/EditorContext';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport useGetVideo from '../../hooks/useGetVideo';\r\nimport Spinner from '../../components/Spinner/Spinner';\r\nimport useUpdateProject from '../../hooks/useUpdateProject';\r\nimport useDownloadVideo from '../../hooks/useDownloadVideo';\r\nimport useCanvasUpdate from './hooks/useCanvasUpdate';\r\nimport useWordsUpdate from './hooks/useWordsUpdate';\r\nimport useCheckTranscription from './hooks/useCheckTranscription';\r\nimport useKeyEvents from './hooks/useKeyEvents';\r\nimport useUndo from './hooks/useUndo';\r\n\r\nconst VideoEditor = ({\r\n  speakers,\r\n  setSpeakers,\r\n  setVideoData,\r\n  // words,\r\n  // info,\r\n  // transcriptonStatus,\r\n}) => {\r\n  const [editorState, editorDispatch] = useEditorState();\r\n  const {\r\n    isGettingVideo,\r\n    getVideo,\r\n    words,\r\n    info,\r\n    videoUrl,\r\n    transcriptonStatus,\r\n    getVideoError,\r\n  } = useGetVideo();\r\n  const { isUpdatingProject, updateProject } = useUpdateProject();\r\n  const {\r\n    isDownloading,\r\n    downloadVideo,\r\n    isDownloadDataUploaded,\r\n    setIsDownloadDataUploaded,\r\n  } = useDownloadVideo();\r\n  const [currentSelection, setCurrentSelection] = useState(null);\r\n  const [currentWordIndex, setCurrentWordIndex] = useState(0);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(null);\r\n  const [nextCutIndex, setNextCutIndex] = useState(null);\r\n  const [shouldRerenderSub, setShouldRerenderSub] = useState(false);\r\n  const [canvas, setCanvas] = useState(null);\r\n  const [fabricSub, setFabricSub] = useState(null);\r\n  const [currentSub, setCurrentSub] = useState(null);\r\n  const [subList, setSubList] = useState(null);\r\n  const [videoCuts, setVideoCuts] = useState([]);\r\n  const [userAssets, setUserAssets] = useState(null);\r\n  const [clipboard, setClipboard] = useState(null);\r\n  const [objectIdCount, setObjectIdCount] = useState(1);\r\n  const [shouldCut, setShouldCut] = useState(false);\r\n  const [isNextWord, setIsNextWord] = useState(false);\r\n  const [isPrevWord, setIsPrevWord] = useState(false);\r\n  const [speakerVideos, setSpeakerVideos] = useState([]);\r\n  const updatetObjectId = useCallback(() => setObjectIdCount((i) => i + 1), []);\r\n  const history = useHistory();\r\n  const params = useParams();\r\n  const videoRef = useRef(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const setPlayerTime = useCallback(\r\n    (wordIndex, cuts = videoCuts) => {\r\n      let endTime = '0';\r\n      if (wordIndex !== null) {\r\n        let word = words[wordIndex];\r\n        endTime = word.end;\r\n        videoRef.current.currentTime = +word.start;\r\n        setCurrentTime(+word.start);\r\n        // console.log('seting player time: ', +word.start);\r\n      }\r\n      let cutIndex = 0;\r\n      for (let i = 0; i < cuts.length; i++) {\r\n        let cut = cuts[i];\r\n        if (+endTime > +cut.end) {\r\n          cutIndex++;\r\n        }\r\n      }\r\n      setNextCutIndex(cutIndex);\r\n    },\r\n    [setCurrentTime, setNextCutIndex, videoCuts, videoRef, words]\r\n  );\r\n\r\n  // useEffect(() => {\r\n  //   if(videoCuts) {\r\n  //     videoCuts.forEach(el => {\r\n  //       console.log(el);\r\n  //     });\r\n  //   }\r\n  // }, [videoCuts]);\r\n\r\n  // useEffect(() => {\r\n  //   let obj = editorState.currentObject.object;\r\n  //   if (obj) {\r\n  //     console.log(obj);\r\n  //   }\r\n  // }, [editorState]);\r\n  const { updateUndoHistory } = useUndo(\r\n    editorState,\r\n    editorDispatch,\r\n    videoRef,\r\n    words,\r\n    setCurrentWordIndex,\r\n    setCurrentSelection,\r\n    setVideoCuts,\r\n    setPlayerTime,\r\n    setShouldRerenderSub,\r\n    subList\r\n  );\r\n\r\n  useCanvasUpdate(\r\n    isMounted,\r\n    updateProject,\r\n    canvas,\r\n    info,\r\n    editorDispatch,\r\n    isDownloading,\r\n    editorState\r\n  );\r\n  useWordsUpdate(\r\n    isMounted,\r\n    updateProject,\r\n    info,\r\n    words,\r\n    editorDispatch,\r\n    isDownloading,\r\n    editorState.shouldTriggerWordsUpdate,\r\n    videoCuts\r\n  );\r\n  useCheckTranscription(\r\n    isGettingVideo,\r\n    getVideo,\r\n    transcriptonStatus,\r\n    isMounted,\r\n    params\r\n  );\r\n  useKeyEvents(\r\n    canvas,\r\n    clipboard,\r\n    setClipboard,\r\n    objectIdCount,\r\n    updatetObjectId,\r\n    fabricSub,\r\n    editorDispatch,\r\n    setShouldCut,\r\n    editorState,\r\n    videoRef,\r\n    isPlaying,\r\n    setIsPrevWord,\r\n    setIsNextWord,\r\n    setSpeakerVideos\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (params && params.id) getVideo(params.id);\r\n  }, [params, getVideo]);\r\n\r\n  useEffect(() => {\r\n    if (getVideoError) history.push('/home');\r\n  }, [getVideoError, history]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <EditorContext.Provider value={{ editorState, editorDispatch }}>\r\n        {info ? (\r\n          <>\r\n            <Navigation\r\n              canvas={canvas}\r\n              videoRef={videoRef}\r\n              videoCuts={videoCuts}\r\n              duration={info ? info.duration : null}\r\n              words={words}\r\n              subList={subList}\r\n              fabricSub={fabricSub}\r\n              videoData={info}\r\n              isUpdatingProject={isUpdatingProject}\r\n              isDownloading={isDownloading}\r\n              downloadVideo={downloadVideo}\r\n              isDownloadDataUploaded={isDownloadDataUploaded}\r\n              setIsDownloadDataUploaded={setIsDownloadDataUploaded}\r\n              setUserAssets={setUserAssets}\r\n            />\r\n            <main className={styles.Main}>\r\n              <Transcription\r\n                className={styles.VideoEditor}\r\n                words={words}\r\n                currentWordIndex={currentWordIndex}\r\n                setCurrentWordIndex={setCurrentWordIndex}\r\n                videoRef={videoRef}\r\n                setCuts={setVideoCuts}\r\n                currentSelection={currentSelection}\r\n                setCurrentSelection={setCurrentSelection}\r\n                currentSub={currentSub}\r\n                setCurrentSub={setCurrentSub}\r\n                fabricSub={fabricSub}\r\n                setShouldRerenderSub={setShouldRerenderSub}\r\n                status={transcriptonStatus}\r\n                shouldCut={shouldCut}\r\n                setShouldCut={setShouldCut}\r\n                isNextWord={isNextWord}\r\n                setIsNextWord={setIsNextWord}\r\n                isPrevWord={isPrevWord}\r\n                setIsPrevWord={setIsPrevWord}\r\n                dispatch={editorDispatch}\r\n                updateUndoHistory={updateUndoHistory}\r\n                setPlayerTime={setPlayerTime}\r\n              />\r\n              <Player\r\n                videoRef={videoRef}\r\n                canvas={canvas}\r\n                setCanvas={setCanvas}\r\n                isPlaying={isPlaying}\r\n                words={words}\r\n                currentTime={currentTime}\r\n                videoCuts={videoCuts}\r\n                setNextCutIndex={setNextCutIndex}\r\n                setCurrentWordIndex={setCurrentWordIndex}\r\n                nextCutIndex={nextCutIndex}\r\n                currentWordIndex={currentWordIndex}\r\n                subList={subList}\r\n                setSubList={setSubList}\r\n                fabricSub={fabricSub}\r\n                setFabricSub={setFabricSub}\r\n                currentSub={currentSub}\r\n                setCurrentSub={setCurrentSub}\r\n                shouldRerenderSub={shouldRerenderSub}\r\n                setShouldRerenderSub={setShouldRerenderSub}\r\n                speakers={speakers}\r\n                setSpeakers={setSpeakers}\r\n                info={info}\r\n                videoUrl={videoUrl}\r\n                setVideoData={setVideoData}\r\n                transcriptonStatus={transcriptonStatus}\r\n                userAssets={userAssets}\r\n                setUserAssets={setUserAssets}\r\n                clipboard={clipboard}\r\n                setClipboard={setClipboard}\r\n                objectIdCount={objectIdCount}\r\n                setObjectIdCount={setObjectIdCount}\r\n                updatetObjectId={updatetObjectId}\r\n                speakerVideos={speakerVideos}\r\n                setSpeakerVideos={setSpeakerVideos}\r\n              />\r\n              <Video\r\n                videoRef={videoRef}\r\n                setIsPlaying={setIsPlaying}\r\n                currentSelection={currentSelection}\r\n                setCurrentSelection={setCurrentSelection}\r\n                setCurrentTime={setCurrentTime}\r\n                videoCuts={videoCuts}\r\n                words={words}\r\n                setNextCutIndex={setNextCutIndex}\r\n                setCurrentWordIndex={setCurrentWordIndex}\r\n                setCurrentSub={setCurrentSub}\r\n                subList={subList}\r\n                info={info}\r\n                videoUrl={videoUrl}\r\n              />\r\n              {/* <div className={styles.DownloadCanvas}>\r\n                <canvas id='downloadCanvas' />\r\n              </div> */}\r\n            </main>\r\n          </>\r\n        ) : (\r\n          <Spinner style={{ width: '100px', height: '100px' }} />\r\n        )}\r\n      </EditorContext.Provider>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default VideoEditor;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst CustomRoute = ({ component: Component, where, allowed, redirect, ...rest }) => {\r\n  // console.log(rest, where);\r\n  return (\r\n    <Route {...rest}>\r\n      {allowed ? <Component {...rest} /> : <Redirect to={redirect} />}\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default CustomRoute;\r\n","export default __webpack_public_path__ + \"static/media/addSpeaker.45816d68.svg\";","export default __webpack_public_path__ + \"static/media/removeSpeaker.2614b0b2.svg\";","import { useState, useEffect } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst addCanvas = (state, id) => {\r\n  let canvas = new fabric.Canvas(id, {\r\n    width: state.initialWidth,\r\n    height: state.initialHeight,\r\n    backgroundColor: 'rgba(255,255,255,1)',\r\n    preserveObjectStacking: true,\r\n    fireRightClick: true,\r\n    stopContextMenu: true,\r\n    selection: false,\r\n    uniScaleKey: null,\r\n    altActionKey: null,\r\n  });\r\n  let ratio = Math.min(\r\n    state.width / state.initialWidth,\r\n    state.height / state.initialHeight\r\n  );\r\n  canvas.setZoom(ratio);\r\n  canvas.setDimensions({\r\n    width: state.width,\r\n    height: state.height,\r\n  });\r\n  return canvas;\r\n};\r\n\r\nconst useAddCanvas = (state, setCanvas, id) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad && state.initialWidth > 0) {\r\n      let canvas = addCanvas(state, id);\r\n      setCanvas(canvas);\r\n      setIsFirstLoad(false);\r\n    }\r\n  }, [setCanvas, state, isFirstLoad, id]);\r\n};\r\n\r\nexport default useAddCanvas;\r\n","import { useEffect, useState, useCallback, useRef } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst useAddVideo = (video, canvas, currentTime, setVideo) => {\r\n  const [isFirtLoad, setIsFirtLoad] = useState(true);\r\n  const isMounted = useRef(true);\r\n  const frameRef = useRef(null);\r\n  useEffect(() => () => (isMounted.current = false), []);\r\n\r\n  // const cancelAnimation = useCallback(() => {\r\n  //   // console.log('canceling', frameRef.current);\r\n  //   fabric.util.cancelAnimFrame(frameRef.current);\r\n  //   frameRef.current = null;\r\n  //   if (canvas) canvas.requestRenderAll();\r\n  // }, [canvas]);\r\n\r\n  const animate = useCallback(() => {\r\n    const render = () => {\r\n      canvas.requestRenderAll();\r\n      // console.log('animating');\r\n      frameRef.current = fabric.util.requestAnimFrame(render);\r\n    };\r\n    fabric.util.requestAnimFrame(render);\r\n  }, [canvas]);\r\n\r\n  const newVideo = useCallback((video) => {\r\n    let fabricVideo = new fabric.Video(video, {\r\n      top: 0,\r\n      left: 0,\r\n    });\r\n    return fabricVideo;\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   if (isFirtLoad) {\r\n  //     setTimeout(() => {\r\n  //       if (isMounted.current) cancelAnimation();\r\n  //     }, 1000);\r\n  //   }\r\n  // }, [cancelAnimation, isFirtLoad]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (frameRef.current) fabric.util.cancelAnimFrame(frameRef.current);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isFirtLoad && video && canvas) {\r\n      setIsFirtLoad(false);\r\n      video.currentTime = currentTime > 0 ? currentTime : 0.001;\r\n      let fabricVideo = newVideo(video);\r\n      canvas.add(fabricVideo);\r\n      fabricVideo.evented = false;\r\n      fabricVideo.selectable = false;\r\n      setVideo(fabricVideo);\r\n      animate();\r\n    }\r\n  }, [video, canvas, isFirtLoad, currentTime, animate, setVideo, newVideo]);\r\n};\r\n\r\nexport default useAddVideo;\r\n","import { useEffect } from 'react';\r\nimport { updateCanvasSize, updateCanvasStyle } from '../utils/updateCanvas';\r\n\r\nconst useUpdateCanvas = (state, dispatch, canvas) => {\r\n  useEffect(() => {\r\n    if (state.shouldUpdateCanvas) updateCanvasStyle(state, canvas, dispatch);\r\n    if (state.shouldUpdateCanvasSize) updateCanvasSize(state, canvas, dispatch);\r\n  }, [state, dispatch, canvas]);\r\n};\r\n\r\nexport default useUpdateCanvas;\r\n","export const updateCanvasStyle = (state, canvas, dispatch) => {\r\n  canvas.backgroundColor = state.backgroundColor;\r\n  canvas.requestRenderAll();\r\n  dispatch({ type: 'setShouldUpdateCanvas', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n\r\nexport const updateCanvasSize = (state, canvas, dispatch) => {\r\n  canvas.discardActiveObject();\r\n  let ratio = Math.min(\r\n    state.width / state.initialWidth,\r\n    state.height / state.initialHeight\r\n  );\r\n  canvas.setZoom(ratio);\r\n  canvas.setDimensions({\r\n    width: state.width,\r\n    height: state.height,\r\n  });\r\n  canvas.requestRenderAll();\r\n  dispatch({ type: 'setShouldUpdateCanvasSize', data: false });\r\n  dispatch({ type: 'setShouldTriggerCanvasUpdate', data: true });\r\n};\r\n","import { getSpeakerBox } from './box';\r\nimport { restrictBox } from './restrict';\r\n\r\nexport const handleFirstLoadSpeakers = (\r\n  canvas,\r\n  setBoxArr,\r\n  updateBoxId,\r\n  video,\r\n  speakers\r\n) => {\r\n  let boxes = [];\r\n  for (let i = 0; i < speakers.length; i++) {\r\n    let speaker = speakers[i];\r\n    let size = {\r\n      width: video.width,\r\n      height: video.height,\r\n      scaleX: speaker.w / video.width,\r\n      scaleY: speaker.h / video.height,\r\n    };\r\n    let box = getSpeakerBox(size, i + 1);\r\n    box.top = speaker.y;\r\n    box.left = speaker.x;\r\n    updateBoxId();\r\n    canvas.add(box).setActiveObject(box);\r\n    canvas.requestRenderAll();\r\n    boxes.push(box);\r\n    restrictBox(video, box);\r\n  }\r\n  setBoxArr(boxes);\r\n};\r\n\r\nexport const addSpeaker = (\r\n  boxArr,\r\n  boxId,\r\n  canvas,\r\n  setBoxArr,\r\n  updateBoxId,\r\n  video\r\n) => {\r\n  let size = null;\r\n  if (boxArr.length === 0) {\r\n    size = {\r\n      width: video.width,\r\n      height: video.height,\r\n      scaleX: video.scaleX / 2,\r\n      scaleY: video.scaleY / 2,\r\n    };\r\n  } else {\r\n    let last = boxArr[boxArr.length - 1];\r\n    size = {\r\n      width: last.width,\r\n      height: last.height,\r\n      scaleX: last.scaleX,\r\n      scaleY: last.scaleY,\r\n    };\r\n  }\r\n  let box = getSpeakerBox(size, boxId);\r\n  updateBoxId();\r\n  canvas.add(box).setActiveObject(box);\r\n  canvas.requestRenderAll();\r\n  setBoxArr((prevState) => [...prevState, box]);\r\n  restrictBox(video, box);\r\n};\r\n","import { createContext } from 'react';\r\n\r\nconst SpeakersContext = createContext(null);\r\nexport default SpeakersContext;","import { useEffect, useContext, useState } from 'react';\r\nimport { addSpeaker, handleFirstLoadSpeakers } from '../utils/speakerCrop';\r\nimport SpeakersContext from '../../../contexts/SpeakersContext';\r\n\r\nconst useCropSpeakers = (\r\n  canvas,\r\n  video,\r\n  boxArr,\r\n  setBoxArr,\r\n  boxId,\r\n  updateBoxId,\r\n  speakers,\r\n  setSpeakers\r\n) => {\r\n  const { speakersState, speakersDispatch } = useContext(SpeakersContext);\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n\r\n  // Handle Speaker Adding On First Load\r\n  useEffect(() => {\r\n    if (video && canvas && isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      if (\r\n        speakers.length === 1 &&\r\n        speakers[0].w === video.width &&\r\n        speakers[0].h === video.height\r\n      ) {\r\n        addSpeaker([], 1, canvas, setBoxArr, updateBoxId, video);\r\n      } else if (speakers.length > 0) {\r\n        handleFirstLoadSpeakers(\r\n          canvas,\r\n          setBoxArr,\r\n          updateBoxId,\r\n          video,\r\n          speakers\r\n        );\r\n        setSpeakers([]);\r\n      } else speakersDispatch({ type: 'setShouldAddSpeaker', data: true });\r\n    }\r\n  }, [\r\n    canvas,\r\n    setBoxArr,\r\n    updateBoxId,\r\n    isFirstLoad,\r\n    video,\r\n    speakers,\r\n    speakersDispatch,\r\n    setSpeakers,\r\n  ]);\r\n\r\n  // Handle Speaker Adding\r\n  useEffect(() => {\r\n    if (video && speakersState.shouldAddSpeaker) {\r\n      speakersDispatch({ type: 'setShouldAddSpeaker', data: false });\r\n      addSpeaker(boxArr, boxId, canvas, setBoxArr, updateBoxId, video);\r\n    }\r\n  }, [\r\n    boxArr,\r\n    speakersState,\r\n    speakersDispatch,\r\n    canvas,\r\n    video,\r\n    setBoxArr,\r\n    boxId,\r\n    updateBoxId,\r\n  ]);\r\n\r\n  // Handle Speaker Removing\r\n  useEffect(() => {\r\n    if (video && speakersState.shouldRemoveSpeaker) {\r\n      speakersDispatch({ type: 'setShouldRemoveSpeaker', data: false });\r\n      let active = canvas.getActiveObject();\r\n      if (active) {\r\n        canvas.remove(active);\r\n        setBoxArr((prevState) =>\r\n          prevState.filter((box) => box.id !== active.id)\r\n        );\r\n        canvas.requestRenderAll();\r\n      }\r\n    }\r\n  }, [speakersState, speakersDispatch, canvas, video, setBoxArr]);\r\n};\r\n\r\nexport default useCropSpeakers;\r\n","import React, { useState, useCallback } from 'react';\r\nimport styles from './SpeakersCanvas.module.css';\r\nimport useAddCanvas from './hooks/useAddCanvas';\r\nimport useAddVideo from './hooks/useAddVideo';\r\nimport useUpdateCanvas from './hooks/useUpdateCanvas';\r\nimport useGuidelines from '../hooks/useGuidelines';\r\nimport useCropSpeakers from '../hooks/useCropSpeakers';\r\n\r\nconst SpeakersCanvas = ({\r\n  canvas,\r\n  setCanvas,\r\n  canvasState,\r\n  canvasDispatch,\r\n  videoRef,\r\n  setBoxArr,\r\n  duration,\r\n  boxArr,\r\n  speakers,\r\n  setSpeakers,\r\n}) => {\r\n  const [video, setVideo] = useState(null);\r\n  const [boxId, setBoxId] = useState(1);\r\n  const updateBoxId = useCallback(() => setBoxId((i) => i + 1), []);\r\n\r\n  useGuidelines(false, canvasState, canvas);\r\n  useUpdateCanvas(canvasState, canvasDispatch, canvas);\r\n  useAddCanvas(canvasState, setCanvas, 'speakerCanvas');\r\n  useAddVideo(videoRef.current, canvas, duration / 10, setVideo);\r\n  useCropSpeakers(\r\n    canvas,\r\n    video,\r\n    boxArr,\r\n    setBoxArr,\r\n    boxId,\r\n    updateBoxId,\r\n    speakers,\r\n    setSpeakers\r\n  );\r\n\r\n  return (\r\n    <div className={styles.Canvas}>\r\n      <canvas id='speakerCanvas' />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SpeakersCanvas;\r\n","import { useReducer } from 'react';\r\n\r\nconst initialState = {\r\n  initialWidth: 0,\r\n  initialHeight: 0,\r\n  width: 0,\r\n  height: 0,\r\n  shouldUpdateCanvas: false,\r\n  shouldUpdateCanvasSize: false,\r\n  shouldAddSpeaker: false,\r\n  shouldRemoveSpeaker: false,\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'setCanvasSize':\r\n      return {\r\n        ...state,\r\n        shouldUpdateCanvasSize: true,\r\n        width: action.data.width,\r\n        height: action.data.height,\r\n      };\r\n    case 'setCanvasInitialSize':\r\n      return {\r\n        ...state,\r\n        initialWidth: action.data.initialWidth,\r\n        initialHeight: action.data.initialHeight,\r\n        width: action.data.width,\r\n        height: action.data.height,\r\n      };\r\n    case 'setShouldUpdateCanvas':\r\n      return { ...state, shouldUpdateCanvas: action.data };\r\n    case 'setShouldUpdateCanvasSize':\r\n      return { ...state, shouldUpdateCanvasSize: action.data };\r\n    case 'setShouldAddSpeaker':\r\n      return { ...state, shouldAddSpeaker: action.data };\r\n    case 'setShouldRemoveSpeaker':\r\n      return { ...state, shouldRemoveSpeaker: action.data };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst useSpeakersState = () => {\r\n  const [speakerState, speakerDispatch] = useReducer(reducer, initialState);\r\n  return [speakerState, speakerDispatch];\r\n};\r\n\r\nexport default useSpeakersState;\r\n","import { useEffect, useCallback, useState } from 'react';\r\nimport { getContainerSize } from '../utils/getSize';\r\n\r\nconst getCanvasSize = (containerSize, videoSize) => {\r\n  let width = containerSize.width;\r\n  let height = (videoSize.height * width) / videoSize.width;\r\n  let maxHeight = containerSize.height - 300;\r\n  if (height > maxHeight) {\r\n    height = maxHeight;\r\n    width = (height * videoSize.width) / videoSize.height;\r\n  }\r\n  return { width, height };\r\n};\r\n\r\nconst useContainerSize = (videoSize, dispatch, containerRef) => {\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const [containerSize, setContainerSize] = useState(null);\r\n  const containerPadding = 200;\r\n\r\n  const handleSize = useCallback(() => {\r\n    if (containerRef.current) {\r\n      getContainerSize(containerRef, setContainerSize, containerPadding);\r\n    }\r\n  }, [containerRef, setContainerSize, containerPadding]);\r\n\r\n  useEffect(() => {\r\n    handleSize();\r\n  }, [handleSize]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', handleSize);\r\n    return () => window.removeEventListener('resize', handleSize);\r\n  }, [handleSize]);\r\n\r\n  useEffect(() => {\r\n    if (videoSize && containerSize) {\r\n      let { width, height } = getCanvasSize(containerSize, videoSize);\r\n      let isInRange = width > 100;\r\n      if (isFirstLoad && isInRange) {\r\n        setIsFirstLoad(false);\r\n        dispatch({\r\n          type: 'setCanvasInitialSize',\r\n          data: {\r\n            initialWidth: videoSize.width,\r\n            initialHeight: videoSize.height,\r\n            width,\r\n            height,\r\n          },\r\n        });\r\n      } else if (isInRange) {\r\n        dispatch({ type: 'setCanvasSize', data: { width, height } });\r\n      }\r\n    }\r\n  }, [isFirstLoad, containerSize, videoSize, dispatch]);\r\n};\r\n\r\nexport default useContainerSize;\r\n","export const getContainerSize = (\r\n  containerRef,\r\n  setContainerSize,\r\n  containerPadding\r\n) => {\r\n  let width =\r\n    window.innerWidth - containerRef.current.offsetLeft - containerPadding;\r\n  let height = containerRef.current.offsetHeight;\r\n  setContainerSize({ width, height });\r\n};\r\n\r\nexport const getVideoSize = (videoRef, setVideoSize) => {\r\n  let width = videoRef.current.videoWidth;\r\n  let height = videoRef.current.videoHeight;\r\n  setVideoSize({ width, height });\r\n};\r\n","import React, { useState, useRef } from 'react';\r\nimport styles from './SelectSpeakers.module.css';\r\nimport Navbar from '../../components/Navbar/Navbar';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { getVideoSize } from './utils/getSize';\r\nimport addSpeaker from '../../assets/editor/addSpeaker.svg';\r\nimport removeSpeaker from '../../assets/editor/removeSpeaker.svg';\r\nimport SpeakersCanvas from '../Canvas/SpeakersCanvas/SpeakersCanvas';\r\nimport SpeakersContext from '../../contexts/SpeakersContext';\r\nimport useSpeakersState from '../../hooks/useSpeakersState';\r\nimport useContainerSize from './hooks/useContainerSize';\r\n\r\nconst SelectSpeakers = ({ videoData, setSpeakers, speakers }) => {\r\n  const [speakersState, speakersDispatch] = useSpeakersState();\r\n  const history = useHistory();\r\n  const [canvas, setCanvas] = useState(null);\r\n  const containerRef = useRef(null);\r\n  const videoRef = useRef(null);\r\n  const [videoSize, setVideoSize] = useState(null);\r\n  const [boxArr, setBoxArr] = useState([]);\r\n\r\n  useContainerSize(videoSize, speakersDispatch, containerRef);\r\n\r\n  const addSpeakerHandler = () => {\r\n    speakersDispatch({ type: 'setShouldAddSpeaker', data: true });\r\n  };\r\n\r\n  const removeSpeakerHandler = () => {\r\n    speakersDispatch({ type: 'setShouldRemoveSpeaker', data: true });\r\n  };\r\n\r\n  const confirmHandler = () => {\r\n    if (boxArr.length > 0) {\r\n      let arr = [];\r\n      for (let i = 0; i < boxArr.length; i++) {\r\n        let box = boxArr[i];\r\n        let w = box.width * box.scaleX;\r\n        let h = box.height * box.scaleY;\r\n        let x = box.lineCoords.tl.x / canvas.getZoom();\r\n        let y = box.lineCoords.tr.y / canvas.getZoom();\r\n        arr.push({ x, y, w, h });\r\n      }\r\n      setSpeakers(arr);\r\n    } else {\r\n      setSpeakers([{ x: 0, y: 0, w: videoSize.width, h: videoSize.height }]);\r\n    }\r\n    history.replace(`/editor/${videoData.id}`);\r\n    // history.push('/editor/video-editor');\r\n  };\r\n\r\n  const skipHandler = () => {\r\n    setSpeakers([{ x: 0, y: 0, w: videoSize.width, h: videoSize.height }]);\r\n    history.replace(`/editor/${videoData.id}`);\r\n    // history.push('/editor/video-editor');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar videoData={videoData} />\r\n      <SpeakersContext.Provider value={{ speakersState, speakersDispatch }}>\r\n        <div className={styles.SelectSpeakers} ref={containerRef}>\r\n          <h1 className={styles.Heading}>Select area with speakers</h1>\r\n          <p className={styles.Subheading}>\r\n            You can crop your video by selecting people on it. Once it done you\r\n            can edit each speaker independetly.\r\n          </p>\r\n          <div className={styles.CanvasContainer}>\r\n            <SpeakersCanvas\r\n              canvas={canvas}\r\n              setCanvas={setCanvas}\r\n              canvasState={speakersState}\r\n              canvasDispatch={speakersDispatch}\r\n              videoRef={videoRef}\r\n              boxArr={boxArr}\r\n              setBoxArr={setBoxArr}\r\n              duration={videoData ? videoData.duration : null}\r\n              speakers={speakers}\r\n              setSpeakers={setSpeakers}\r\n            />\r\n          </div>\r\n          <video\r\n            src={videoData ? videoData.url : null}\r\n            width={videoSize ? videoSize.width : 0}\r\n            height={videoSize ? videoSize.height : 0}\r\n            id='video'\r\n            preload='auto'\r\n            className={styles.Video}\r\n            ref={videoRef}\r\n            onLoadedMetadata={() => getVideoSize(videoRef, setVideoSize)}\r\n          />\r\n          {canvas ? (\r\n            <div className={styles.Controls}>\r\n              <p className={styles.SelectedText}>\r\n                <span className={styles.SelectedNumber}>{boxArr.length}</span>\r\n                {` speaker${boxArr.length !== 1 ? 's' : ''} selected`}\r\n              </p>\r\n              <div className={styles.SpeakerButtons}>\r\n                <div className={styles.AddSpeakerButton}>\r\n                  <button\r\n                    className={styles.AddSpeakers}\r\n                    onClick={addSpeakerHandler}\r\n                  >\r\n                    <img src={addSpeaker} alt='add' />\r\n                  </button>\r\n                  <p className={styles.AddSpeakersText}>Add more</p>\r\n                </div>\r\n                <div className={styles.RemoveSpeakerButton}>\r\n                  <button\r\n                    className={styles.RemoveSpeakers}\r\n                    onClick={removeSpeakerHandler}\r\n                  >\r\n                    <img src={removeSpeaker} alt='add' />\r\n                  </button>\r\n                  <p className={styles.RemoveSpeakersText}>Remove</p>\r\n                </div>\r\n              </div>\r\n              <div className={styles.NextSteps}>\r\n                <button className={styles.Confirm} onClick={confirmHandler}>\r\n                  Confirm\r\n                </button>\r\n                <button className={styles.Skip} onClick={skipHandler}>\r\n                  Do this later\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </SpeakersContext.Provider>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SelectSpeakers;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetDownloadProgress = () => {\r\n  const [isGettingProgress, setIsGettingProgress] = useState(false);\r\n  const [downloadProgress, setDownloadProgress] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetProgress = useCallback((id) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get(`/download-video-progress/${id}`)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getDownloadProgress = useCallback(async (id) => {\r\n    setIsGettingProgress(true);\r\n    try {\r\n      const res = await axiosGetProgress(id);\r\n      if (isMounted.current) {\r\n        let progress = res.data.progress;\r\n        if(progress === null) setDownloadProgress(false);\r\n        else setDownloadProgress(progress);\r\n      } \r\n      console.log(res);\r\n    } catch (err) {\r\n      console.log('Error Getting Download Progress', err);\r\n    } finally {\r\n      if (isMounted.current) setIsGettingProgress(false);\r\n      return;\r\n    }\r\n  }, [axiosGetProgress]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isGettingProgress,\r\n    getDownloadProgress,\r\n    downloadProgress,\r\n  };\r\n};\r\n\r\nexport default useGetDownloadProgress;\r\n","import { useEffect, useRef, useCallback } from 'react';\r\n\r\nconst useCheckDownloadProgress = (\r\n  isGettingProgress,\r\n  getDownloadProgress,\r\n  downloadProgress,\r\n  params,\r\n  isMounted\r\n) => {\r\n  const intervalRef = useRef(null);\r\n\r\n  const checkProgress = useCallback(() => {\r\n    if (intervalRef.current) clearInterval(intervalRef.current);\r\n    let interval = setInterval(() => {\r\n      if (isMounted.current && !isGettingProgress) {\r\n        getDownloadProgress(params.id);\r\n      }\r\n    }, 1500);\r\n    intervalRef.current = interval;\r\n  }, [getDownloadProgress, params, isMounted, isGettingProgress]);\r\n\r\n  useEffect(() => {\r\n    if (params && params.id) getDownloadProgress(params.id);\r\n  }, [params, getDownloadProgress]);\r\n\r\n  useEffect(() => {\r\n    if (downloadProgress !== null && downloadProgress !== 100) {\r\n      checkProgress();\r\n    } else if (intervalRef.current) clearInterval(intervalRef.current);\r\n\r\n    return () => {\r\n      if (intervalRef.current) clearInterval(intervalRef.current);\r\n    };\r\n  }, [checkProgress, downloadProgress]);\r\n};\r\n\r\nexport default useCheckDownloadProgress;\r\n","import React, { useEffect, useRef } from 'react';\r\nimport styles from './Download.module.css';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport useGetDownloadProgress from '../../hooks/useGetDownloadProgress';\r\nimport Navbar from '../../components/Navbar/Navbar';\r\nimport Progress from '../../components/Progress/Progress';\r\nimport Spinner from '../../components/Spinner/Spinner';\r\nimport useCheckDownloadProgress from './hooks/useCheckDownloadPorgress';\r\n\r\nconst Download = () => {\r\n  const { isGettingProgress, getDownloadProgress, downloadProgress } =\r\n    useGetDownloadProgress();\r\n  const history = useHistory();\r\n  const params = useParams();\r\n  const isMounted = useRef(null);\r\n\r\n  useCheckDownloadProgress(\r\n    isGettingProgress,\r\n    getDownloadProgress,\r\n    downloadProgress,\r\n    params,\r\n    isMounted\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (downloadProgress === false) history.replace('/home');\r\n  }, [downloadProgress, history]);\r\n\r\n  useEffect(() => {\r\n    if (+downloadProgress === 100) {\r\n      setTimeout(() => {\r\n        if (isMounted.current) history.replace(`/preview/${params.id}`);\r\n      }, 1000);\r\n    }\r\n  }, [downloadProgress, history, params]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {downloadProgress === null || downloadProgress === false ? (\r\n        <Spinner style={{ width: '100px', height: '100px' }} />\r\n      ) : (\r\n        <>\r\n          <Navbar />\r\n          <div className={styles.Download}>\r\n            <Progress\r\n              progress={downloadProgress}\r\n              heading='Generating your video'\r\n            />\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Download;\r\n","import React, { useState, useRef } from 'react';\r\nimport styles from './Editor.module.css';\r\nimport Uploader from '../Uploader/Uploader';\r\nimport VideoEditor from '../VideoEditor/VideoEditor';\r\nimport { useRouteMatch, Switch, Redirect } from 'react-router-dom';\r\nimport CustomRoute from '../../components/CustomRoute/CustomRoute';\r\nimport SelectSpeakers from '../SelectSpeakers/SelectSpeakers';\r\n// import UploaderMock from '../UploaderMock/UploaderMock';\r\nimport Download from '../Download/Download';\r\n\r\nconst Editor = () => {\r\n  const [viedoForUpload, setVideoForUpload] = useState(null);\r\n  const [videoData, setVideoData] = useState(null);\r\n  const [speakers, setSpeakers] = useState([]);\r\n  const match = useRouteMatch();\r\n  const words = useRef(null);\r\n  // const [transcriptonStatus, setTranscriptionStatus] = useState({\r\n  //   timeLeft: 0,\r\n  //   startDate: '1299671538',\r\n  //   isFinished: true,\r\n  // });\r\n\r\n  return (\r\n    <div className={styles.Editor}>\r\n      <Switch>\r\n        <CustomRoute\r\n          path={`${match.path}/new`}\r\n          redirect={`${match.path}/speakers`}\r\n          /////////////////////////////////////////\r\n          // redirect={`${match.path}/video-editor`}\r\n          where='in the Editor new route'\r\n          allowed={!videoData}\r\n          component={Uploader}\r\n          // component={UploaderMock}\r\n          viedoForUpload={viedoForUpload}\r\n          setVideoForUpload={setVideoForUpload}\r\n          setVideoData={setVideoData}\r\n          wordsRef={words}\r\n        />\r\n        <CustomRoute\r\n          path={`${match.path}/progress/:id`}\r\n          redirect={`/home`}\r\n          where='in the Editor download progress route'\r\n          allowed={true}\r\n          component={Download}\r\n        />\r\n        <CustomRoute\r\n          path={`${match.path}/speakers`}\r\n          redirect={`/home`}\r\n          where='in the Editor speakers route'\r\n          allowed={!!videoData}\r\n          component={SelectSpeakers}\r\n          videoData={videoData}\r\n          setSpeakers={setSpeakers}\r\n          speakers={speakers}\r\n        />\r\n        <CustomRoute\r\n          path={`${match.path}/:id`}\r\n          redirect={`/home`}\r\n          where='in the Editor project id route'\r\n          allowed={true}\r\n          component={VideoEditor}\r\n          speakers={speakers}\r\n          setSpeakers={setSpeakers}\r\n          setVideoData={setVideoData}\r\n        />\r\n\r\n        {/* <CustomRoute\r\n          path={`${match.path}/video-editor`}\r\n          redirect={`${match.path}/new`}\r\n          where='in the Editor video-editor route'\r\n          allowed={true}\r\n          component={VideoEditor}\r\n          words={words.current}\r\n          info={videoData}\r\n          transcriptonStatus={transcriptonStatus}\r\n          setVideoData={setVideoData}\r\n          speakers={speakers}\r\n          setSpeakers={setSpeakers}\r\n        /> */}\r\n        <Redirect to={`${match.path}/new`} />\r\n      </Switch>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Editor;\r\n","export default __webpack_public_path__ + \"static/media/google.321ceef8.svg\";","import React from 'react';\r\nimport styles from './Button.module.css';\r\n\r\nconst Button = ({ children, onClick }) => {\r\n  return (\r\n    <button onClick={onClick} className={styles.Button}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import React from 'react';\r\nimport styles from './Or.module.css';\r\n\r\nconst Or = () => {\r\n  return (\r\n    <div className={styles.Or}>\r\n      <div className={styles.Line}></div>\r\n      <span className={styles.Text}>or</span>\r\n      <div className={styles.Line}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Or;\r\n","import React from 'react';\r\nimport styles from './Input.module.css';\r\n\r\nconst Input = ({\r\n  placeholder,\r\n  type,\r\n  invalid,\r\n  setValue,\r\n  value,\r\n  name,\r\n  errorMessage,\r\n}) => {\r\n  const blurHandler = () => {\r\n    let isEmpty = value.trim() === '';\r\n    if (invalid && !isEmpty)\r\n      setValue((prevState) => ({ ...prevState, invalid: false }));\r\n  };\r\n  \r\n  const focusHandler = () => {\r\n    if (invalid) setValue((prevState) => ({ ...prevState, value: '' }));\r\n  };\r\n\r\n  return (\r\n    <div className={styles.InputContainer}>\r\n      <input\r\n        className={[styles.Input, invalid ? styles.Invalid : null].join(' ')}\r\n        placeholder={placeholder}\r\n        type={type}\r\n        value={value}\r\n        name={name}\r\n        onBlur={blurHandler}\r\n        onFocus={focusHandler}\r\n        onChange={(e) =>\r\n          setValue((prevState) => ({ ...prevState, value: e.target.value }))\r\n        }\r\n      ></input>\r\n      {invalid ? (\r\n        <div className={styles.ErrorMessage}>{errorMessage}</div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n","export default __webpack_public_path__ + \"static/media/mail.8a5f661c.svg\";","import React from 'react';\r\nimport styles from './CheckMail.module.css';\r\n// import UserContext from '../../../contexts/UserContext';\r\nimport mail from '../../../assets/auth/mail.svg';\r\n\r\nconst CheckMail = () => {\r\n  // const { userDispatch } = useContext(UserContext);\r\n  // const clickHandler = () => {\r\n  //   userDispatch({ type: 'setIsAuthenticated', data: true });\r\n  // };\r\n\r\n  return (\r\n    <div className={styles.CheckMail}>\r\n      <img src={mail} alt='mail' className={styles.Mail} />\r\n      <h2 className={styles.Heading}>Check your inbox</h2>\r\n      <p className={styles.Subheading}>\r\n        We sent you an activation link. Please be sure to check your spam folder\r\n        too.\r\n      </p>\r\n      {/* <div className={styles.EditorLink} onClick={clickHandler}>\r\n        Go to editor\r\n      </div> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckMail;\r\n","export const checkEmailValidity = (value) => {\r\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value);\r\n};","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useMagicLink = () => {\r\n  const [magickRes, setMagickRes] = useState(null);\r\n  const [magickError, setMagickError] = useState(null);\r\n  const isMounted = useRef(false);\r\n  const axiosMagicLink = useCallback((data) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .post('/send-magic-link', data, {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        })\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const magicLink = useCallback(\r\n    async (data) => {\r\n      setMagickRes(null)\r\n      setMagickError(null)\r\n      try {\r\n        const res = await axiosMagicLink(data);\r\n        console.log(res);\r\n        if (isMounted.current) {\r\n          setMagickRes(res.data);\r\n        }\r\n      } catch (err) {\r\n        setMagickError(err)\r\n        console.log('Error Authenticating with Magic Link', err);\r\n      } finally {\r\n        return;\r\n      }\r\n    },\r\n    [axiosMagicLink]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { magicLink, magickRes, magickError };\r\n};\r\n\r\nexport default useMagicLink;\r\n","import React, { useEffect, useState } from 'react';\r\nimport styles from './SignIn.module.css';\r\nimport google from '../../../assets/auth/google.svg';\r\nimport Button from '../Button/Button';\r\nimport Or from '../Or/Or';\r\nimport Input from '../Input/Input';\r\nimport CheckMail from '../CheckMail/CheckMail';\r\nimport { checkEmailValidity } from '../../../utils/validation';\r\nimport { Link } from 'react-router-dom';\r\nimport useMagicLink from '../../../hooks/useMagicLink';\r\nimport Spinner from '../../../components/Spinner/Spinner';\r\n\r\nconst SignIn = ({ authUrl, isLoading, setIsLoading, checkTokenValidity }) => {\r\n  const { magicLink, magickRes, magickError } = useMagicLink();\r\n  const [isSent, setIsSent] = useState(false);\r\n  const [email, setEmail] = useState({\r\n    value: '',\r\n    invalid: false,\r\n    type: 'email',\r\n    placeholder: 'Email address',\r\n    validation: true,\r\n    name: 'email',\r\n    errorMessage: 'Please enter your email',\r\n  });\r\n\r\n  useEffect(() => {\r\n    let token = localStorage.getItem('token');\r\n    if (token) checkTokenValidity(token);\r\n    else setIsLoading(false);\r\n  }, [checkTokenValidity, setIsLoading]);\r\n\r\n  useEffect(() => {\r\n    if (magickRes) setIsSent(true);\r\n  }, [magickRes]);\r\n\r\n  useEffect(() => {\r\n    if (magickError) {\r\n      setIsLoading(false);\r\n    }\r\n  }, [magickError, setIsLoading]);\r\n\r\n  const signInClickHandler = (e) => {\r\n    e.preventDefault();\r\n    let isValid = checkEmailValidity(email.value);\r\n    if (!isValid) setEmail((prevState) => ({ ...prevState, invalid: true }));\r\n    else {\r\n      setIsLoading(true);\r\n      let jsonData = JSON.stringify({ email: email.value });\r\n      magicLink(jsonData);\r\n    }\r\n  };\r\n\r\n  let signInContent = (\r\n    <div className={styles.SignIn}>\r\n      <h2 className={styles.Heading}>Welcome to Twiso!</h2>\r\n      <p className={styles.Subheading}>\r\n        Don't have an account?{' '}\r\n        <Link to={`${authUrl}/sign-up`} className={styles.SignUpLink}>\r\n          Sign up for free\r\n        </Link>\r\n      </p>\r\n      <div className={styles.FormContent}>\r\n        <a\r\n          className={styles.GoogleLink}\r\n          href={`${process.env.REACT_APP_API_BASE_URL}/api/v1/auth/google`}\r\n        >\r\n          <Button>\r\n            <img src={google} alt='google' className={styles.GoogleLogo} />\r\n            Continue with Google\r\n          </Button>\r\n        </a>\r\n        <Or />\r\n        <form className={styles.Form} onSubmit={signInClickHandler}>\r\n          <Input {...email} setValue={setEmail} />\r\n          <Button>Sign in</Button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n  if (isLoading)\r\n    signInContent = <Spinner style={{ width: '100px', height: '100px' }} />;\r\n\r\n  return !isSent ? signInContent : <CheckMail />;\r\n};\r\n\r\nexport default SignIn;\r\n","export default __webpack_public_path__ + \"static/media/downArrow.aee303a3.svg\";","export default __webpack_public_path__ + \"static/media/checkMark.eb440aa3.svg\";","import React, { useEffect, useCallback } from 'react';\r\nimport styles from './Dropdown.module.css';\r\nimport checkMark from '../../../../assets/auth/checkMark.svg';\r\n\r\nconst Dropdown = ({ options, value, setValue, setIsDropdown }) => {\r\n  const clickHandler = useCallback(() => setIsDropdown(false), [setIsDropdown]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', clickHandler);\r\n    return () => document.removeEventListener('click', clickHandler);\r\n  }, [clickHandler]);\r\n\r\n  return (\r\n    <ul className={styles.Dropdown}>\r\n      {options.map((option) => {\r\n        let isCurrent = value && value.id === option.id;\r\n        return (\r\n          <li\r\n            key={option.id}\r\n            id={option.id}\r\n            className={[styles.Option, isCurrent ? styles.Current : null].join(\r\n              ' '\r\n            )}\r\n            onClick={() => setValue((prevState) => ({ ...prevState, value: option }))}\r\n          >\r\n            <span className={styles.CheckMark}>\r\n              {isCurrent ? <img src={checkMark} alt='check mark' /> : null}\r\n            </span>\r\n\r\n            {option.type}\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Dropdown;\r\n","import React, { useState } from 'react';\r\nimport styles from './Select.module.css';\r\nimport downArrow from '../../../assets/auth/downArrow.svg';\r\nimport Dropdown from './Dropdown/Dropdown';\r\n\r\nconst Select = ({ options, invalid, value, setValue, errorMessage }) => {\r\n  const [isDropdown, setIsDropdown] = useState(null);\r\n\r\n  const clickHandler = () => {\r\n    if (invalid) setValue((prevState) => ({ ...prevState, invalid: false }));\r\n    setIsDropdown(true);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.SelectContainer}>\r\n      <div\r\n        className={[styles.Select, invalid ? styles.Invalid : null].join(' ')}\r\n        onClick={clickHandler}\r\n      >\r\n        <p\r\n          className={[\r\n            styles.Selected,\r\n            value.id !== 'placeholder' ? styles.Valid : null,\r\n          ].join(' ')}\r\n        >\r\n          {value.type}\r\n        </p>\r\n        <img src={downArrow} alt='arrow' />\r\n        {isDropdown ? (\r\n          <Dropdown\r\n            options={options}\r\n            value={value}\r\n            setValue={setValue}\r\n            setIsDropdown={setIsDropdown}\r\n          />\r\n        ) : null}\r\n      </div>\r\n      {invalid ? (\r\n        <div className={styles.ErrorMessage}>{errorMessage}</div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n","import React, { useState, useEffect } from 'react';\r\nimport styles from './SignUp.module.css';\r\nimport google from '../../../assets/auth/google.svg';\r\nimport Button from '../Button/Button';\r\nimport Or from '../Or/Or';\r\nimport Input from '../Input/Input';\r\nimport Select from '../Select/Select';\r\nimport CheckMail from '../CheckMail/CheckMail';\r\nimport { checkEmailValidity } from '../../../utils/validation';\r\nimport { Link } from 'react-router-dom';\r\nimport useMagicLink from '../../../hooks/useMagicLink';\r\nimport Spinner from '../../../components/Spinner/Spinner';\r\n\r\nconst SignUp = ({ authUrl, isLoading, setIsLoading, checkTokenValidity }) => {\r\n  const [isSent, setIsSent] = useState(false);\r\n  const { magicLink, magickRes, magickError } = useMagicLink();\r\n  const [name, setName] = useState({\r\n    value: '',\r\n    invalid: false,\r\n    type: 'text',\r\n    name: 'name',\r\n    placeholder: 'First name',\r\n    errorMessage: 'Please enter your name',\r\n  });\r\n\r\n  const [email, setEmail] = useState({\r\n    value: '',\r\n    invalid: false,\r\n    type: 'email',\r\n    name: 'email',\r\n    placeholder: 'Email address',\r\n    errorMessage: 'Please enter your email',\r\n  });\r\n\r\n  const [workType, setWorkType] = useState({\r\n    value: { type: 'What kind of work do you do?', id: 'placeholder' },\r\n    options: [\r\n      { type: 'What kind of work do you do?', id: 'placeholder' },\r\n      { type: 'Marketing', id: 'marketing' },\r\n      { type: 'Design', id: 'design' },\r\n      { type: 'Influencer', id: 'influencer' },\r\n      { type: 'Public Speaker', id: 'publicSpeaker' },\r\n      { type: 'Student', id: 'student' },\r\n      { type: 'Other', id: 'other' },\r\n    ],\r\n    invalid: false,\r\n    errorMessage: 'Please fill out this field',\r\n  });\r\n\r\n  useEffect(() => {\r\n    let token = localStorage.getItem('token');\r\n    if (token) {\r\n      checkTokenValidity(token);\r\n    } else setIsLoading(false);\r\n  }, [checkTokenValidity, setIsLoading]);\r\n\r\n  useEffect(() => {\r\n    if (magickRes) setIsSent(true);\r\n  }, [magickRes]);\r\n\r\n  useEffect(() => {\r\n    if (magickError) {\r\n      setIsLoading(false);\r\n    }\r\n  }, [magickError, setIsLoading]);\r\n\r\n  const createAccountClickHandler = (e) => {\r\n    e.preventDefault();\r\n    let isEmailValid = checkEmailValidity(email.value);\r\n    let isNameValid = name.value.trim() !== '';\r\n    let isWorkTypeValid = workType.value.id !== 'placeholder';\r\n    if (!isEmailValid) {\r\n      setEmail((prevState) => ({ ...prevState, invalid: true }));\r\n    }\r\n    if (!isNameValid) setName((prevState) => ({ ...prevState, invalid: true }));\r\n    if (!isWorkTypeValid) {\r\n      setWorkType((prevState) => ({ ...prevState, invalid: true }));\r\n    }\r\n    if (isEmailValid && isNameValid && isWorkTypeValid) {\r\n      setIsLoading(true);\r\n      let jsonData = JSON.stringify({\r\n        email: email.value,\r\n        firstName: name.value,\r\n        workType: workType.value.type,\r\n      });\r\n      magicLink(jsonData);\r\n    }\r\n  };\r\n\r\n  let signUpContent = (\r\n    <div className={styles.SignUp}>\r\n      <h2 className={styles.Heading}>Create Account</h2>\r\n      <p className={styles.Subheading}>\r\n        Already have an account?{' '}\r\n        <Link to={`${authUrl}/sign-in`} className={styles.SignInLink}>\r\n          Sign in\r\n        </Link>\r\n      </p>\r\n      <div className={styles.FormContent}>\r\n        <a\r\n          className={styles.GoogleLink}\r\n          href={`${process.env.REACT_APP_API_BASE_URL}/api/v1/auth/google`}\r\n        >\r\n          <Button>\r\n            <img src={google} alt='google' className={styles.GoogleLogo} />\r\n            Sign Up with Google\r\n          </Button>\r\n        </a>\r\n        <Or />\r\n        <form className={styles.Form}>\r\n          <Input {...name} setValue={setName} />\r\n          <Input {...email} setValue={setEmail} />\r\n          <Select {...workType} setValue={setWorkType} />\r\n          <Button onClick={createAccountClickHandler}>Create Account</Button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  if (isLoading)\r\n    signUpContent = <Spinner style={{ width: '100px', height: '100px' }} />;\r\n\r\n  return !isSent ? signUpContent : <CheckMail />;\r\n};\r\n\r\nexport default SignUp;\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport styles from './Token.module.css';\r\nimport Spinner from '../../../components/Spinner/Spinner';\r\nimport { useRouteMatch, useLocation, useHistory } from 'react-router-dom';\r\n\r\nconst Token = ({ setToken }) => {\r\n  const match = useRouteMatch();\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\r\n  const getToken = useCallback(() => {\r\n    return new URLSearchParams(location.search).get('token');\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    if (isFirstLoad) {\r\n      setIsFirstLoad(false);\r\n      let tokenParam = getToken();\r\n      if (tokenParam) {\r\n        localStorage.setItem('token', tokenParam);\r\n        setToken(tokenParam);\r\n      } else history.push(`${match.path}/sign-in`);\r\n    }\r\n  }, [getToken, setToken, history, match, isFirstLoad]);\r\n\r\n  return (\r\n    <div className={styles.Token}>\r\n      <Spinner style={{ width: '100px', height: '100px' }} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Token;\r\n","import instance from '../axios-instance';\r\n\r\nconst setAuthToken = (token) => {\r\n  instance.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n};\r\n\r\nexport default setAuthToken;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useRefreshToken = () => {\r\n  const [newToken, setNewToken] = useState(null);\r\n  const [refreshError, setRefreshError] = useState(null);\r\n  const isMounted = useRef(false);\r\n  const axiosRefreshToken = useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get('/refresh-token')\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const refreshToken = useCallback(async () => {\r\n    setNewToken(null)\r\n    setRefreshError(null)\r\n    try {\r\n      const res = await axiosRefreshToken();\r\n      console.log(res);\r\n      if (isMounted.current) {\r\n        setNewToken(res.data.accessToken);\r\n      }\r\n    } catch (err) {\r\n      setRefreshError(err)\r\n      console.log('Error Refreshing Token', err);\r\n    } finally {\r\n      return;\r\n    }\r\n  }, [axiosRefreshToken]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { refreshToken, newToken, refreshError };\r\n};\r\n\r\nexport default useRefreshToken;\r\n","import React, { useCallback, useEffect, useState, useContext } from 'react';\r\nimport styles from './Auth.module.css';\r\nimport SignIn from './SignIn/SignIn';\r\nimport SignUp from './SignUp/SignUp';\r\nimport Token from './Token/Token';\r\nimport {\r\n  useRouteMatch,\r\n  useHistory,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from 'react-router-dom';\r\nimport setAuthToken from '../../utils/setAuthToken';\r\nimport useRefreshToken from '../../hooks/useRefreshToken';\r\nimport UserContext from '../../contexts/UserContext';\r\n\r\nconst Auth = () => {\r\n  const { userDispatch } = useContext(UserContext);\r\n  const { refreshToken, newToken, refreshError } = useRefreshToken();\r\n  const [token, setToken] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const match = useRouteMatch();\r\n  const history = useHistory();\r\n  const checkTokenValidity = useCallback(\r\n    (token) => {\r\n      setIsLoading(true);\r\n      setAuthToken(token);\r\n      refreshToken();\r\n    },\r\n    [refreshToken]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (newToken) {\r\n      localStorage.setItem('token', newToken);\r\n      setAuthToken(newToken);\r\n      userDispatch({ type: 'setIsAuthenticated', data: true });\r\n    } else if (refreshError) {\r\n      localStorage.removeItem('token');\r\n      setIsLoading(false);\r\n      history.replace(`/sign-in`);\r\n    }\r\n  }, [newToken, refreshError, userDispatch, history, match]);\r\n\r\n  useEffect(() => {\r\n    if (token) checkTokenValidity(token);\r\n  }, [token, checkTokenValidity]);\r\n\r\n  return (\r\n    <div className={styles.Auth}>\r\n      <div className={styles.Account}>\r\n        <Switch>\r\n          <Route exact path={`${match.path}`}>\r\n            <Token setToken={setToken} />\r\n          </Route>\r\n          <Route exact path={`${match.path}/sign-in`}>\r\n            <SignIn\r\n              authUrl={match.path}\r\n              setIsLoading={setIsLoading}\r\n              isLoading={isLoading}\r\n              checkTokenValidity={checkTokenValidity}\r\n              token={token}\r\n            />\r\n          </Route>\r\n          <Route exact path={`${match.path}/sign-up`}>\r\n            <SignUp\r\n              authUrl={match.path}\r\n              setIsLoading={setIsLoading}\r\n              isLoading={isLoading}\r\n              checkTokenValidity={checkTokenValidity}\r\n              token={token}\r\n            />\r\n          </Route>\r\n          <Redirect to={`${match.path}/sign-in`} />\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n","export default __webpack_public_path__ + \"static/media/dot.4b8006c3.svg\";","import React, { useContext, useState, useEffect, useCallback } from 'react';\r\nimport styles from './User.module.css';\r\nimport dot from '../../../../assets/homepage/dot.svg';\r\nimport UserContext from '../../../../contexts/UserContext';\r\n\r\nconst User = () => {\r\n  const { userState, userDispatch } = useContext(UserContext);\r\n  const [isDropdown, setIsDropdown] = useState(false);\r\n\r\n  const getName = () => {\r\n    let isName = userState.name.length > 0;\r\n    let name = isName ? userState.name : userState.email;\r\n    return isName ? name[0].toUpperCase() + name.slice(1) : name;\r\n  };\r\n\r\n  const signOutClickHandler = () => {\r\n    localStorage.removeItem('token');\r\n    userDispatch({ type: 'setIsAuthenticated', data: false });\r\n  };\r\n\r\n  const dropdownClickHandler = () => {\r\n    setIsDropdown((prevState) => !prevState);\r\n  };\r\n\r\n  const clickHandler = useCallback((e) => {\r\n    for (let i = 0; i < e.path.length; i++) {\r\n      let id = e.path[i].id;\r\n      if (id === 'userDropdown' || id === 'signout') return;\r\n    }\r\n    setIsDropdown(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isDropdown) document.addEventListener('click', clickHandler);\r\n    return () => document.removeEventListener('click', clickHandler);\r\n  }, [isDropdown, clickHandler]);\r\n\r\n  return (\r\n    <div className={styles.User}>\r\n      {userState.email.length > 0 ? (\r\n        <div className={styles.UserName}>\r\n          <div className={styles.Initials}>\r\n            <span className={styles.Letter}>{getName()[0]}</span>\r\n          </div>\r\n          <div className={styles.Name}>{getName()}</div>\r\n        </div>\r\n      ) : null}\r\n      <div\r\n        className={styles.DropdownContainer}\r\n        onClick={dropdownClickHandler}\r\n        id='userDropdown'\r\n      >\r\n        <div className={styles.Dots}>\r\n          <img src={dot} alt='dot' />\r\n          <img src={dot} alt='dot' />\r\n          <img src={dot} alt='dot' />\r\n        </div>\r\n      </div>\r\n      {isDropdown ? (\r\n        <ul className={styles.Dropdown}>\r\n          <li\r\n            className={styles.SignOut}\r\n            onClick={signOutClickHandler}\r\n            id='signout'\r\n          >\r\n            Sign out\r\n          </li>\r\n        </ul>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgProjects(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 13,\n    viewBox: \"0 0 14 13\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.16671 10.333C2.16671 9.50252 2.83618 8.83305 3.66671 8.83305C4.49723 8.83305 5.16671 9.50252 5.16671 10.333C5.16671 11.5302 4.19723 12.4997 3.00004 12.4997C2.3961 12.4997 1.76702 12.2742 1.26728 11.8964C1.75815 11.6073 2.16671 11.0861 2.16671 10.333ZM11.5598 1.5466L12.4532 2.43993C12.5179 2.50467 12.5179 2.60809 12.4532 2.67283L6.83337 8.29261L5.70715 7.16638L11.3269 1.5466C11.3917 1.48186 11.4951 1.48186 11.5598 1.5466Z\",\n    stroke: \"current\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgProjects);\nexport default __webpack_public_path__ + \"static/media/projects.48eb08ab.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSettings(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 14,\n    viewBox: \"0 0 14 14\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.1935 2.9268L6.52681 9.59347C6.26681 9.85347 5.84681 9.85347 5.58681 9.59347L3.70015 7.7068C3.44015 7.4468 3.44015 7.0268 3.70015 6.7668C3.96015 6.5068 4.38015 6.5068 4.64015 6.7668L6.05348 8.18014L12.2468 1.9868C12.5068 1.7268 12.9268 1.7268 13.1868 1.9868C13.4535 2.2468 13.4535 2.6668 13.1935 2.9268ZM9.51348 0.826802C8.38682 0.366802 7.10681 0.206802 5.77348 0.446802C3.06015 0.933469 0.893481 3.12014 0.433481 5.83347C-0.326519 10.3335 3.42015 14.1868 7.89348 13.6068C10.5335 13.2668 12.7468 11.3001 13.4401 8.73347C13.7068 7.75347 13.7335 6.8068 13.5801 5.92014C13.4935 5.3868 12.8335 5.18013 12.4468 5.56013C12.2935 5.71347 12.2268 5.94014 12.2668 6.15347C12.4135 7.04013 12.3468 7.9868 11.9201 8.99347C11.1468 10.8001 9.46681 12.1268 7.51348 12.3068C4.11348 12.6201 1.29348 9.74013 1.71348 6.32013C2.00015 3.96013 3.90015 2.04014 6.25348 1.71347C7.40681 1.55347 8.50015 1.77347 9.43348 2.25347C9.69348 2.3868 10.0068 2.34013 10.2135 2.13347C10.5335 1.81347 10.4535 1.27347 10.0535 1.0668C9.87348 0.986802 9.69348 0.900135 9.51348 0.826802Z\",\n    fill: \"current\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSettings);\nexport default __webpack_public_path__ + \"static/media/settings.9fc61d51.svg\";\nexport { ForwardRef as ReactComponent };","import { fabric } from 'fabric';\r\n\r\nfabric.RectCropBox = fabric.util.createClass(fabric.Rect);\r\n\r\nfabric.RectCropBox.prototype.setControlsVisibility({\r\n  mtr: false,\r\n});\r\n\r\nfabric.RectCropBox.prototype.render = (function (render) {\r\n  return function (ctx) {\r\n    render.apply(this, arguments);\r\n    this._renderControls(ctx);\r\n    if (!this.canvas._activeObject) this.canvas._activeObject = this;\r\n  };\r\n})(fabric.RectCropBox.prototype.render);","import React from 'react';\r\nimport { NavLink, useRouteMatch, useLocation } from 'react-router-dom';\r\nimport styles from './SideDrawer.module.css';\r\nimport User from './User/User';\r\nimport { ReactComponent as Templates } from '../../../assets/homepage/templates.svg';\r\nimport { ReactComponent as Projects } from '../../../assets/homepage/projects.svg';\r\nimport { ReactComponent as Settings } from '../../../assets/homepage/settings.svg';\r\n\r\nconst SideDrawer = () => {\r\n  const match = useRouteMatch();\r\n  const location = useLocation();\r\n  \r\n  return (\r\n    <div className={styles.SideDrawer}>\r\n      <User />\r\n      <div className={styles.Links}>\r\n        <NavLink\r\n          to={`${match.path}/templates`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          <Templates\r\n            fill={\r\n              location.pathname.includes('templates') ? '#6F7BD0' : '#999999'\r\n            }\r\n          />\r\n          <span className={styles.LinkText}>Templates</span>\r\n        </NavLink>\r\n        <NavLink\r\n          to={`${match.path}/projects`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          <Projects\r\n            fill={\r\n              location.pathname.includes('projects') ? '#6F7BD0' : '#999999'\r\n            }\r\n          />\r\n          <span className={styles.LinkText}>My projects</span>\r\n        </NavLink>\r\n        <NavLink\r\n          to={`${match.path}/settings`}\r\n          className={styles.Link}\r\n          activeClassName={styles.Active}\r\n          replace\r\n        >\r\n          <Settings\r\n            fill={\r\n              location.pathname.includes('settings') ? '#6F7BD0' : '#999999'\r\n            }\r\n          />\r\n          <span className={styles.LinkText}>Settings</span>\r\n        </NavLink>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SideDrawer;\r\n","import React from 'react';\r\nimport styles from './Navbar.module.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Navbar = () => {\r\n\r\n  return (\r\n    <header className={styles.Navbar}>\r\n      <Link className={styles.NewButton} to='/editor/new'>\r\n        <span className={styles.Plus}>+</span>New Project\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useDeleteVideo = () => {\r\n  const [isDeletingVideo, setIsDeletingVideo] = useState(false);\r\n  const [deleteVideoResponse, setDeleteVideoResponse] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosDeleteVideo = useCallback((id) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .delete(`/videos/${id}`)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const deleteVideo = useCallback(\r\n    async (id) => {\r\n      setDeleteVideoResponse(null);\r\n      setIsDeletingVideo(true);\r\n      try {\r\n        const res = await axiosDeleteVideo(id);\r\n        if (isMounted.current) setDeleteVideoResponse('success');\r\n        console.log(res);\r\n      } catch (err) {\r\n        if (isMounted.current) {\r\n          setDeleteVideoResponse('error');\r\n          setIsDeletingVideo(false);\r\n        } \r\n        console.log('Error Deleting Video', err);\r\n      } finally {\r\n        return;\r\n      }\r\n    },\r\n    [axiosDeleteVideo]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isDeletingVideo,\r\n    deleteVideoResponse,\r\n    deleteVideo,\r\n  };\r\n};\r\n\r\nexport default useDeleteVideo;\r\n","export default __webpack_public_path__ + \"static/media/whiteDot.c72e7237.svg\";","import React, { useEffect, useState, useCallback, useRef } from 'react';\r\nimport styles from './Project.module.css';\r\nimport useUpdateProject from '../../../../hooks/useUpdateProject';\r\nimport Spinner from '../../../../components/Spinner/Spinner';\r\nimport { Link } from 'react-router-dom';\r\nimport useDeleteVideo from '../../../../hooks/useDeleteVideo';\r\nimport whiteDot from '../../../../assets/homepage/whiteDot.svg';\r\n\r\nconst Project = ({ video, setShouldFetch }) => {\r\n  const [input, setInput] = useState(video.title || '');\r\n  const [isDropdown, setIsDropdown] = useState(false);\r\n  const { isUpdatingProject, updateProject, updateResponse } =\r\n    useUpdateProject();\r\n  const { isDeletingVideo, deleteVideoResponse, deleteVideo } =\r\n    useDeleteVideo();\r\n  const inputRef = useRef(null);\r\n  const transformDate = (d) => {\r\n    let date = new Date(d);\r\n    let day = date.getDate();\r\n    let month = date.getMonth() + 1;\r\n    let year = date.getFullYear();\r\n    let dateString = `${day > 9 ? day : '0' + day}.${\r\n      month > 9 ? month : '0' + month\r\n    }.${year}`;\r\n    return dateString;\r\n  };\r\n\r\n  const blurHandler = (e) => {\r\n    inputRef.current.disabled = true;\r\n    let value = e.target.value.trim();\r\n    if (value.length > 0 && value !== video.title) {\r\n      updateProject({\r\n        id: video._id,\r\n        title: value,\r\n      });\r\n    } else setInput(video.title);\r\n  };\r\n\r\n  const deleteClickHanlder = () => {\r\n    let box = window.confirm('Are you sure you want to delete this project?');\r\n    if (box === true) deleteVideo(video._id);\r\n  };\r\n\r\n  const renameClickHanlder = () => {\r\n    setIsDropdown(false);\r\n    inputRef.current.disabled = false;\r\n    inputRef.current.focus();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (inputRef.current) inputRef.current.disabled = true;\r\n  }, []);\r\n\r\n  const clickHandler = useCallback((e) => {\r\n    for (let i = 0; i < e.path.length; i++) {\r\n      if (e.path[i].classList && e.path[i].classList[0] === 'projectDropdown') {\r\n        return;\r\n      }\r\n    }\r\n    setIsDropdown(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isDropdown) document.addEventListener('click', clickHandler);\r\n    return () => document.removeEventListener('click', clickHandler);\r\n  }, [isDropdown, clickHandler]);\r\n\r\n  useEffect(() => {\r\n    if (updateResponse && typeof updateResponse !== 'string') {\r\n      video.title = updateResponse.title;\r\n    } else if (updateResponse === 'error') setInput(video.title);\r\n  }, [updateResponse, video]);\r\n\r\n  useEffect(() => {\r\n    if (deleteVideoResponse === 'success') {\r\n      setShouldFetch(true);\r\n    }\r\n  }, [deleteVideoResponse, setShouldFetch]);\r\n\r\n  return (\r\n    <div className={styles.Project}>\r\n      <Link\r\n        to={`/${!video.final_video_url ? 'editor' : 'preview'}/${video._id}`}\r\n        className={styles.Video}\r\n        style={{ backgroundImage: `url(${video.screenshot_url})` }}\r\n      ></Link>\r\n\r\n      <div className={styles.InfoContainer}>\r\n        <div className={styles.Info}>\r\n          <div className={styles.DateAndName}>\r\n            {isUpdatingProject ? (\r\n              <Spinner\r\n                style={{ width: '20px', height: '20px', margin: 'auto 0' }}\r\n              />\r\n            ) : (\r\n              <input\r\n                className={styles.Name}\r\n                type='text'\r\n                value={input}\r\n                onBlur={blurHandler}\r\n                onChange={(e) => setInput(e.target.value)}\r\n                ref={inputRef}\r\n                disabled\r\n              />\r\n            )}\r\n            <p className={styles.Date}>{transformDate(video.created_at)}</p>\r\n          </div>\r\n          {isDeletingVideo ? (\r\n            <Spinner\r\n              style={{\r\n                width: '25.6px',\r\n                height: '25.6px',\r\n                marginRight: '5px',\r\n              }}\r\n            />\r\n          ) : (\r\n            <div className={styles.OptionsContainer}>\r\n              <div\r\n                className={styles.Options}\r\n                onClick={() => setIsDropdown((prevState) => !prevState)}\r\n              >\r\n                <div className={styles.Dots}>\r\n                  <img src={whiteDot} alt='dot' />\r\n                  <img src={whiteDot} alt='dot' />\r\n                  <img src={whiteDot} alt='dot' />\r\n                </div>\r\n              </div>\r\n              {isDropdown ? (\r\n                <ul className={['projectDropdown', styles.Dropdown].join(' ')}>\r\n                  <li\r\n                    className={styles.DropdownOption}\r\n                    onClick={deleteClickHanlder}\r\n                  >\r\n                    Delete\r\n                  </li>\r\n                  <li\r\n                    className={styles.DropdownOption}\r\n                    onClick={renameClickHanlder}\r\n                  >\r\n                    Rename\r\n                  </li>\r\n                </ul>\r\n              ) : null}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Project;\r\n","import React from 'react';\r\nimport styles from './Projects.module.css';\r\nimport { Link } from 'react-router-dom';\r\nimport Project from './Project/Project';\r\nimport Spinner from '../../../components/Spinner/Spinner';\r\n\r\nconst Projects = ({ videos, setShouldFetch }) => {\r\n  return (\r\n    <div className={styles.Projects}>\r\n      <h2 className={styles.Heading}>My projects</h2>\r\n      <p className={styles.Subheading}>\r\n        All your video and audio files in one place.\r\n      </p>\r\n      <div className={styles.ProjectsList}>\r\n        <div className={styles.AddProject}>\r\n          <Link className={styles.AddProjectInner} to='/editor/new'>\r\n            <div className={styles.AddProjectText}>\r\n              <span>+ Add new</span>\r\n            </div>\r\n          </Link>\r\n          <div className={styles.AddProjectInfo}></div>\r\n        </div>\r\n\r\n        {videos ? (\r\n          videos.map((video) => {\r\n            return (\r\n              <div className={styles.ProjectContainer} key={video._id}>\r\n                <Project video={video} setShouldFetch={setShouldFetch} />\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <Spinner style={{ width: '60px', height: '60px' }} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Projects;\r\n","import React from 'react';\r\nimport styles from './Template.module.css';\r\n\r\nconst Template = ({ template, clickHandler }) => {\r\n  return (\r\n    <div className={styles.Template}>\r\n      <div className={styles.TemplateInner}>\r\n        <div className={styles.TemplateImgContainer}>\r\n          <img\r\n            src={template.image_url}\r\n            className={styles.TemplateImg}\r\n            alt='template'\r\n            onClick={() => clickHandler(template)}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Template;\r\n","import React from 'react';\r\nimport styles from './TemplateList.module.css';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Template from './Template/Template';\r\n\r\nconst TemplateList = ({ current, templates, dispatch }) => {\r\n  const history = useHistory();\r\n  const templateClickHandler = (template) => {\r\n    dispatch({ type: 'setSelectedTemplate', data: { ...template } });\r\n    history.push('/editor/new');\r\n  };\r\n\r\n  return (\r\n    <div className={styles.TemplateList}>\r\n      <h2 className={styles.Heading}>{current}</h2>\r\n      <p className={styles.Subheading}>\r\n        Make your vlog, webinar or intervew video look professional\r\n      </p>\r\n      <div className={styles.List}>\r\n        {templates.commonTemplate\r\n          .filter((template) => template.resize === current)\r\n          .map((template) => (\r\n            <Template\r\n              key={template._id}\r\n              template={template}\r\n              clickHandler={templateClickHandler}\r\n            />\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TemplateList;\r\n","import React, { useEffect, useContext, useState } from 'react';\r\nimport styles from './Templates.module.css';\r\nimport TemplateList from './TemplateList/TemplateList';\r\nimport Spinner from '../../../components/Spinner/Spinner';\r\nimport UserContext from '../../../contexts/UserContext';\r\n\r\nconst Templates = ({ getTemplates, templates }) => {\r\n  const { userDispatch } = useContext(UserContext);\r\n  const [current, setCurrent] = useState('landscape');\r\n\r\n  useEffect(() => {\r\n    if (!templates) getTemplates();\r\n  }, [templates, getTemplates]);\r\n\r\n  return (\r\n    <div className={styles.Templates}>\r\n      <ul className={styles.TemplateTypes}>\r\n        <li\r\n          className={[\r\n            styles.TemplateType,\r\n            current === 'landscape' ? styles.Current : null,\r\n          ].join(' ')}\r\n          onClick={() => setCurrent('landscape')}\r\n        >\r\n          Landscape\r\n        </li>\r\n        <li\r\n          className={[\r\n            styles.TemplateType,\r\n            current === 'square' ? styles.Current : null,\r\n          ].join(' ')}\r\n          onClick={() => setCurrent('square')}\r\n        >\r\n          Square\r\n        </li>\r\n        <li\r\n          className={[\r\n            styles.TemplateType,\r\n            current === 'vertical' ? styles.Current : null,\r\n          ].join(' ')}\r\n          onClick={() => setCurrent('vertical')}\r\n        >\r\n          Vertcal\r\n        </li>\r\n      </ul>\r\n      {!templates ? (\r\n        <Spinner\r\n          style={{\r\n            width: '80px',\r\n            height: '80px',\r\n            marginTop: '50px',\r\n          }}\r\n        />\r\n      ) : (\r\n        <TemplateList\r\n          templates={templates}\r\n          dispatch={userDispatch}\r\n          current={current}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Templates;\r\n","import React from 'react';\r\nimport styles from './Input.module.css';\r\n\r\nconst Input = ({\r\n  placeholder,\r\n  type,\r\n  invalid,\r\n  setValue,\r\n  value,\r\n  name,\r\n  errorMessage,\r\n}) => {\r\n  const blurHandler = () => {\r\n    let isEmpty = value.trim() === '';\r\n    if (invalid && !isEmpty)\r\n      setValue((prevState) => ({ ...prevState, invalid: false }));\r\n  };\r\n  \r\n  const focusHandler = () => {\r\n    if (invalid) setValue((prevState) => ({ ...prevState, value: '' }));\r\n  };\r\n\r\n  return (\r\n    <div className={styles.InputContainer}>\r\n      <input\r\n        className={[styles.Input, invalid ? styles.Invalid : null].join(' ')}\r\n        placeholder={placeholder}\r\n        type={type}\r\n        value={value}\r\n        name={name}\r\n        onBlur={blurHandler}\r\n        onFocus={focusHandler}\r\n        onChange={(e) =>\r\n          setValue((prevState) => ({ ...prevState, value: e.target.value }))\r\n        }\r\n      ></input>\r\n      {invalid ? (\r\n        <div className={styles.ErrorMessage}>{errorMessage}</div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetUserInfo = () => {\r\n  const [isUpdatingUserInfo, setIsUpdatingUserInfo] = useState(false);\r\n  const [updatedUserInfo, setUpdatedUserInfo] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosUpdateUserInfo = useCallback((data, id) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .put(`/user/${id}`, data)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const updateUserInfo = useCallback(async (data, id) => {\r\n    setUpdatedUserInfo(null);\r\n    setIsUpdatingUserInfo(true);\r\n    try {\r\n      const res = await axiosUpdateUserInfo(data, id);\r\n      if (isMounted.current) setUpdatedUserInfo(res.data);\r\n      console.log(res);\r\n    } catch (err) {\r\n      console.log('Error Updating User Information', err);\r\n    } finally {\r\n      if (isMounted.current) setIsUpdatingUserInfo(false);\r\n      return;\r\n    }\r\n  }, [axiosUpdateUserInfo]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isUpdatingUserInfo, updateUserInfo, updatedUserInfo };\r\n};\r\n\r\nexport default useGetUserInfo;","import React, { useState, useContext, useEffect } from 'react';\r\nimport styles from './Settings.module.css';\r\nimport Input from './Input/Input';\r\nimport UserContext from '../../../contexts/UserContext';\r\nimport { checkEmailValidity } from '../../../utils/validation';\r\nimport useUpdateUserInfo from '../../../hooks/useUpdateUserInfo';\r\nimport Spinner from '../../../components/Spinner/Spinner';\r\nimport setAuthToken from '../../../utils/setAuthToken';\r\n\r\nconst Settings = ({ setShouldFetch }) => {\r\n  const { userState } = useContext(UserContext);\r\n  const { isUpdatingUserInfo, updateUserInfo, updatedUserInfo } =\r\n    useUpdateUserInfo();\r\n  const [name, setName] = useState({\r\n    value: '',\r\n    invalid: false,\r\n    type: 'text',\r\n    name: 'name',\r\n    placeholder: 'Name',\r\n    errorMessage: 'Please enter your name',\r\n  });\r\n  const [email, setEmail] = useState({\r\n    value: '',\r\n    invalid: false,\r\n    type: 'email',\r\n    name: 'email',\r\n    placeholder: 'Email address',\r\n    errorMessage: 'Please enter your email',\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (userState.email.length > 0) {\r\n      setName((prevState) => ({ ...prevState, value: userState.name }));\r\n      setEmail((prevState) => ({ ...prevState, value: userState.email }));\r\n    }\r\n  }, [userState]);\r\n\r\n  useEffect(() => {\r\n    if (updatedUserInfo) {\r\n      localStorage.setItem('token', updatedUserInfo.token);\r\n      setAuthToken(updatedUserInfo.token);\r\n      setShouldFetch(true);\r\n    }\r\n  }, [updatedUserInfo, setShouldFetch]);\r\n\r\n  const updateClickHandler = (e) => {\r\n    e.preventDefault();\r\n    let isEmailValid = checkEmailValidity(email.value);\r\n    let isNameValid = name.value.trim() !== '';\r\n    if (userState.name === '' && !isNameValid) isNameValid = true;\r\n    let isValid =\r\n      (email.value.trim() !== userState.email ||\r\n        name.value.trim() !== userState.name) &&\r\n      isNameValid &&\r\n      isEmailValid;\r\n\r\n    if (isValid && userState.id) {\r\n      updateUserInfo(\r\n        {\r\n          firstName: name.value,\r\n          email: email.value,\r\n        },\r\n        userState.id\r\n      );\r\n    } else {\r\n      if (!isEmailValid) {\r\n        setEmail((prevState) => ({ ...prevState, invalid: true }));\r\n      }\r\n      if (!isNameValid)\r\n        setName((prevState) => ({ ...prevState, invalid: true }));\r\n    }\r\n  };\r\n\r\n  const cancelClickHandler = () => {};\r\n\r\n  return (\r\n    <div className={styles.Settings}>\r\n      <h1 className={styles.Heading}>Settings</h1>\r\n      <form className={styles.Form} onSubmit={updateClickHandler}>\r\n        <label className={styles.Label} htmlFor='name'>\r\n          Name\r\n        </label>\r\n        <Input {...name} setValue={setName} />\r\n        <label className={styles.Label} htmlFor='email'>\r\n          Email\r\n        </label>\r\n        <Input {...email} setValue={setEmail} />\r\n        <div className={styles.ButtonSpinnerContainer}>\r\n          <button className={styles.UpdateButton} disabled={isUpdatingUserInfo}>\r\n            Update\r\n          </button>\r\n          {isUpdatingUserInfo ? (\r\n            <Spinner style={{ width: '20px', height: '20px' }} />\r\n          ) : null}\r\n        </div>\r\n      </form>\r\n      <div className={styles.Billing}>\r\n        <h1 className={styles.SubHeading}>Billing</h1>\r\n        <p className={styles.Plan}>Current plan: Free</p>\r\n        <p className={styles.Renewal}>Renewal period: Forever</p>\r\n        <button className={styles.CancelButton} onClick={cancelClickHandler}>\r\n          Upgrade to Starter\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetVideos = () => {\r\n  const [isGettingVideos, setIsGettingVideos] = useState(false);\r\n  const [videos, setVideos] = useState(false);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetVideos = useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get('/videos')\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getVideos = useCallback(async () => {\r\n    setIsGettingVideos(true);\r\n    try {\r\n      const res = await axiosGetVideos();\r\n      if (isMounted.current) setVideos(res.data);\r\n      console.log(res);\r\n    } catch (err) {\r\n      console.log('Error Getting Videos', err);\r\n    } finally {\r\n      if (isMounted.current) setIsGettingVideos(false);\r\n      return;\r\n    }\r\n  }, [axiosGetVideos]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isGettingVideos, getVideos, videos };\r\n};\r\n\r\n\r\n\r\nexport default useGetVideos;\r\n","import { useCallback, useState, useEffect, useRef } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetUserInfo = () => {\r\n  const [isGettingUserInfo, setIsGettingUserInfo] = useState(false);\r\n  const [userInfo, setUserInfo] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetUserInfo = useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get('/user/current')\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getUserInfo = useCallback(async () => {\r\n    setUserInfo(null);\r\n    setIsGettingUserInfo(true);\r\n    try {\r\n      const res = await axiosGetUserInfo();\r\n      if (isMounted.current) setUserInfo(res.data);\r\n      console.log(res);\r\n    } catch (err) {\r\n      console.log('Error Getting User Information', err);\r\n    } finally {\r\n      if (isMounted.current) setIsGettingUserInfo(false);\r\n      return;\r\n    }\r\n  }, [axiosGetUserInfo]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isGettingUserInfo, getUserInfo, userInfo };\r\n};\r\n\r\nexport default useGetUserInfo;","import React, { useEffect, useState, useContext } from 'react';\r\nimport styles from './Homepage.module.css';\r\nimport SideDrawer from './SideDrawer/SideDrawer';\r\nimport Navbar from './Navbar/Navbar';\r\nimport Projects from './Projects/Projects';\r\nimport Templates from './Templates/Templates';\r\nimport Settings from './Settings/Settings';\r\nimport { useRouteMatch, Switch, Route, Redirect } from 'react-router-dom';\r\nimport useGetVideos from '../../hooks/useGetVideos';\r\nimport useGetUserInfo from '../../hooks/useGetUserInfo';\r\nimport UserContext from '../../contexts/UserContext';\r\nimport useGetTemplates from '../../hooks/useGetTemplates';\r\n\r\nconst Homepage = () => {\r\n  const { userDispatch } = useContext(UserContext);\r\n  const match = useRouteMatch();\r\n  const { getVideos, videos } = useGetVideos();\r\n  const { getUserInfo, userInfo } = useGetUserInfo();\r\n  const { getTemplates, templates } = useGetTemplates();\r\n  const [shouldFetchVideos, setShouldFetchVideos] = useState(true);\r\n  const [shouldFetchUserInfo, setShouldFetchUserInfo] = useState(true);\r\n\r\n  useEffect(() => {\r\n    userDispatch({ type: 'setSelectedTemplate', data: null });\r\n  }, [userDispatch]);\r\n\r\n  useEffect(() => {\r\n    if (shouldFetchVideos) {\r\n      setShouldFetchVideos(false);\r\n      getVideos();\r\n    }\r\n  }, [getVideos, shouldFetchVideos]);\r\n\r\n  useEffect(() => {\r\n    if (shouldFetchUserInfo) {\r\n      setShouldFetchUserInfo(false);\r\n      getUserInfo();\r\n    }\r\n  }, [shouldFetchUserInfo, getUserInfo]);\r\n\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      let email = userInfo.email;\r\n      let name = '';\r\n      let id = userInfo._id;\r\n      if (userInfo.firstName) name = userInfo.firstName;\r\n      else if (userInfo.googleInfo && userInfo.googleInfo.given_name) {\r\n        name = userInfo.googleInfo.given_name;\r\n      } else if (userInfo.googleInfo && userInfo.googleInfo.name) {\r\n        name = userInfo.googleInfo.name;\r\n      }\r\n      userDispatch({ type: 'setUserInfo', data: { email, name, id } });\r\n    }\r\n  }, [userInfo, userDispatch]);\r\n\r\n  return (\r\n    <div className={styles.Homepage}>\r\n      <SideDrawer />\r\n      <div className={styles.Main}>\r\n        <Navbar />\r\n        <Switch>\r\n          <Route path={`${match.path}/templates`}>\r\n            <Templates getTemplates={getTemplates} templates={templates} />\r\n          </Route>\r\n          <Route exact path={`${match.path}/projects`}>\r\n            <Projects videos={videos} setShouldFetch={setShouldFetchVideos} />\r\n          </Route>\r\n          <Route exact path={`${match.path}/settings`}>\r\n            <Settings setShouldFetch={setShouldFetchUserInfo} />\r\n          </Route>\r\n          <Redirect to={`${match.path}/projects`} />\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Homepage;\r\n","import { useReducer } from 'react';\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  name: '',\r\n  email: '',\r\n  id: null,\r\n  selectedTemplate: null,\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'setIsAuthenticated':\r\n      return { ...state, isAuthenticated: action.data };\r\n    case 'setUserInfo':\r\n      return {\r\n        ...state,\r\n        name: action.data.name,\r\n        email: action.data.email,\r\n        id: action.data.id,\r\n      };\r\n    case 'setSelectedTemplate':\r\n      return { ...state, selectedTemplate: action.data };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst useUserState = () => {\r\n  const [userState, userDispatch] = useReducer(reducer, initialState);\r\n  return [userState, userDispatch];\r\n};\r\n\r\nexport default useUserState;\r\n","import { useEffect } from 'react';\r\nconst useTrackTime = (refreshToken) => {\r\n  useEffect(() => {\r\n    let interval = setInterval(() => {\r\n      refreshToken();\r\n    }, 1000 * 60 * 60 * 5); // 5 hours\r\n\r\n    return () => clearInterval(interval);\r\n  }, [refreshToken]);\r\n};\r\n\r\nexport default useTrackTime;\r\n","export default __webpack_public_path__ + \"static/media/exportArrow.a5f3dc35.svg\";","export default __webpack_public_path__ + \"static/media/copyLink.5981ccb5.svg\";","export default __webpack_public_path__ + \"static/media/play.bf489b35.svg\";","export default __webpack_public_path__ + \"static/media/pause.a3096265.svg\";","export default __webpack_public_path__ + \"static/media/fullScreen.08af1b32.svg\";","const openFullScreen = (el) => {\r\n  if (el.requestFullscreen) {\r\n    el.requestFullscreen();\r\n  } else if (el.msRequestFullscreen) {\r\n    el.msRequestFullscreen();\r\n  } else if (el.mozRequestFullScreen) {\r\n    el.mozRequestFullScreen();\r\n  } else if (el.webkitRequestFullscreen) {\r\n    el.webkitRequestFullscreen();\r\n  }\r\n};\r\n\r\nconst closeFullscreen = () => {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } else if (document.webkitExitFullscreen) {\r\n    document.webkitExitFullscreen();\r\n  } else if (document.msExitFullscreen) {\r\n    document.msExitFullscreen();\r\n  }\r\n};\r\n\r\nexport const fullScreenHanlder = (container) => {\r\n  if (!document.fullscreenElement) openFullScreen(container);\r\n  else closeFullscreen();\r\n};\r\n","export const handleInputChange = (val, min, max, ref) => {\r\n  ref.current.style.backgroundSize =\r\n    ((val - min) * 100) / (max - min) + '% 100%';\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport styles from './TimelineSlider.module.css';\r\nimport { handleInputChange } from '../../utils/slider';\r\n\r\nconst TimelineSlider = ({\r\n  min,\r\n  max,\r\n  step,\r\n  value,\r\n  setValue,\r\n  isPlaying,\r\n  video,\r\n}) => {\r\n  const inputRef = useRef(null);\r\n  const [shouldPlay, setShouldPlay] = useState(false);\r\n\r\n  useEffect(() => {\r\n    handleInputChange(value, min, max, inputRef);\r\n  }, [value, min, max]);\r\n\r\n  const mouseDownHandler = (e) => {\r\n    if (isPlaying) {\r\n      setShouldPlay(true);\r\n      video.pause();\r\n    } else {\r\n      setShouldPlay(false);\r\n    }\r\n  };\r\n\r\n  const mouseUpHandler = (e) => {\r\n    if (shouldPlay) video.play();\r\n  };\r\n\r\n  const changeHandler = (e) => {\r\n    setValue(e.target.value);\r\n    video.currentTime = e.target.value;\r\n  };\r\n\r\n  return (\r\n    <input\r\n      type='range'\r\n      ref={inputRef}\r\n      className={styles.Slider}\r\n      min={min}\r\n      max={max}\r\n      step={step}\r\n      value={value}\r\n      onChange={changeHandler}\r\n      onMouseDown={mouseDownHandler}\r\n      onMouseUp={mouseUpHandler}\r\n    />\r\n  );\r\n};\r\n\r\nexport default TimelineSlider;\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport styles from './Time.module.css';\r\nimport TimelineSlider from './TimelineSlider/TimelineSlider';\r\n\r\nconst Time = ({\r\n  duration,\r\n  time,\r\n  setTime,\r\n  isPlaying,\r\n  video\r\n}) => {\r\n  const [isMoreThanHour, setIsMoreThanHour] = useState(false);\r\n  const timeStrRef = useRef(null);\r\n  const [timeString, setTimeString] = useState('00:00');\r\n\r\n  const generateTimeString = useCallback((t) => {\r\n    let timeStr = '';\r\n    let h = Math.floor(t / 3600);\r\n    let m = Math.floor((t % 3600) / 60);\r\n    let s = Math.floor((t % 3600) % 60);\r\n    if (h > 0) {\r\n      h < 10 ? (timeStr += '0' + h + ':') : (timeStr += h + ':');\r\n      setIsMoreThanHour(true);\r\n    } else setIsMoreThanHour(false);\r\n    if (m < 10) timeStr += '0';\r\n    timeStr += m + ':';\r\n    if (s < 10) timeStr += '0';\r\n    timeStr += s;\r\n    setTimeString(timeStr);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isMoreThanHour) timeStrRef.current.style.width = '4rem';\r\n    else timeStrRef.current.style.width = '3rem';\r\n  }, [isMoreThanHour]);\r\n\r\n  useEffect(() => {\r\n    generateTimeString(time);\r\n  }, [time, generateTimeString]);\r\n\r\n  return (\r\n    <>\r\n      <p ref={timeStrRef} className={styles.Time}>\r\n        {timeString}\r\n      </p>\r\n      <div className={styles.Timeline}>\r\n        <TimelineSlider\r\n          min='0'\r\n          max={duration}\r\n          step='0.01'\r\n          value={time}\r\n          setValue={setTime}\r\n          isPlaying={isPlaying}\r\n          video={video}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Time;\r\n","export default __webpack_public_path__ + \"static/media/volume.d174078d.svg\";","import React, { useEffect, useRef } from 'react';\r\nimport styles from './VolumeSlider.module.css';\r\nimport { handleInputChange } from '../../utils/slider';\r\n\r\nconst VolumeSlider = ({ min, max, step, value, setValue }) => {\r\n  const inputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    handleInputChange(value, min, max, inputRef);\r\n  }, [value, min, max]);\r\n\r\n  return (\r\n    <input\r\n      type='range'\r\n      ref={inputRef}\r\n      className={styles.Slider}\r\n      min={min}\r\n      max={max}\r\n      step={step}\r\n      value={value}\r\n      onChange={(e) => setValue(e.target.value)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default VolumeSlider;","import React, { useEffect, useRef } from 'react';\r\nimport styles from './Volume.module.css';\r\nimport volumeSvg from '../../../../assets/preview/volume.svg';\r\nimport VolumeSlider from './VolumeSlider/VolumeSlider';\r\n\r\nconst Volume = ({ video, volume, setVolume }) => {\r\n  const volumeRef = useRef('1');\r\n\r\n  useEffect(() => {\r\n    if (+volume !== 0) volumeRef.current = volume;\r\n    video.volume = volume;\r\n  }, [video, volume]);\r\n\r\n  const volumeClickHandler = () => {\r\n    if (+volume === 0 && +volumeRef.current > 0.1) {\r\n      setVolume(volumeRef.current);\r\n    } else if (+volume === 0) {\r\n      volumeRef.current = '1';\r\n      setVolume('1');\r\n    } else {\r\n      volumeRef.current = volume;\r\n      setVolume('0');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button className={styles.Volume}>\r\n      <div className={styles.VolumeButton} onClick={volumeClickHandler}>\r\n        <img src={volumeSvg} alt='volume' />\r\n        {+volume === 0 ? <div className={styles.VolumeOff}></div> : null}\r\n      </div>\r\n      <div className={styles.VolumeBar}>\r\n        <VolumeSlider\r\n          min='0'\r\n          max='1'\r\n          step='0.1'\r\n          value={volume}\r\n          setValue={setVolume}\r\n        />\r\n      </div>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Volume;\r\n","import { useState, useEffect, useRef } from 'react';\r\n\r\nconst useSingleAndDoubleClick = (onSingleClick, onDoubleClick, ref) => {\r\n  const [clickCount, setClickCount] = useState(0);\r\n  const isMounted = useRef(false);\r\n  const timerRef = useRef(null);\r\n\r\n  const clickHandler = (e) => {\r\n    if (e.target.id === 'controls') setClickCount((prevSatate) => prevSatate + 1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (clickCount === 1) {\r\n      timerRef.current = setTimeout(() => {\r\n        if (isMounted.current) {\r\n          setClickCount(0);\r\n          onSingleClick();\r\n        }\r\n      }, 300);\r\n    } else if (clickCount > 1) {\r\n      if (timerRef.current) {\r\n        clearTimeout(timerRef.current);\r\n        timerRef.current = null;\r\n      }\r\n      setClickCount(0);\r\n      onDoubleClick();\r\n    }\r\n  }, [clickCount, onSingleClick, onDoubleClick]);\r\n\r\n  useEffect(() => {\r\n    let target = ref.current;\r\n    target.addEventListener('click', clickHandler);\r\n    return () => target.removeEventListener('click', clickHandler);\r\n  }, [ref]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n};\r\n\r\nexport default useSingleAndDoubleClick;\r\n","import { useCallback, useEffect, useRef, useState } from 'react';\r\n\r\nconst useShowHidePanel = (\r\n  isPlaying,\r\n  controlsRef,\r\n  panelRef,\r\n  visible,\r\n  hover,\r\n  shouldShowPanel,\r\n  setShouldShowPanel\r\n) => {\r\n  const [isCursorOnPanel, setIsCursorOnPanel] = useState(false);\r\n  const isMounted = useRef(false);\r\n  const hovertimerRef = useRef(null);\r\n  const visibletimerRef = useRef(null);\r\n\r\n  const startTimeout = useCallback((timerRef, ref, style) => {\r\n    if (timerRef.current) {\r\n      clearTimeout(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n    timerRef.current = setTimeout(() => {\r\n      if (isMounted.current) {\r\n        ref.current.classList.remove(style);\r\n        timerRef.current = null;\r\n      }\r\n    }, 3000);\r\n  }, []);\r\n\r\n  const mouseMoveHanlder = useCallback(() => {\r\n    controlsRef.current.classList.add(hover);\r\n    if (isPlaying && !isCursorOnPanel) {\r\n      startTimeout(hovertimerRef, controlsRef, hover);\r\n    } else if (isPlaying && isCursorOnPanel) {\r\n      if (hovertimerRef.current) {\r\n        clearTimeout(hovertimerRef.current);\r\n        hovertimerRef.current = null;\r\n      }\r\n    }\r\n  }, [isPlaying, isCursorOnPanel, controlsRef, startTimeout, hover]);\r\n\r\n  const mouseEnterHandler = useCallback(() => setIsCursorOnPanel(true), []);\r\n  const mouseLeaveHandler = useCallback(() => setIsCursorOnPanel(false), []);\r\n\r\n  useEffect(() => {\r\n    controlsRef.current.classList.add(hover);\r\n  }, [controlsRef, hover]);\r\n\r\n  useEffect(() => {\r\n    if (!isPlaying) {\r\n      controlsRef.current.classList.add(visible);\r\n      controlsRef.current.classList.add(hover);\r\n    } else {\r\n      controlsRef.current.classList.remove(visible);\r\n      if (!isCursorOnPanel) startTimeout(hovertimerRef, controlsRef, hover);\r\n    }\r\n  }, [isPlaying, controlsRef, visible, startTimeout, hover, isCursorOnPanel]);\r\n\r\n  useEffect(() => {\r\n    if (isPlaying && shouldShowPanel && !isCursorOnPanel) {\r\n      setShouldShowPanel(false);\r\n      controlsRef.current.classList.add(visible);\r\n      startTimeout(visibletimerRef, controlsRef, visible);\r\n    } else setShouldShowPanel(false);\r\n  }, [\r\n    controlsRef,\r\n    hover,\r\n    shouldShowPanel,\r\n    setShouldShowPanel,\r\n    visible,\r\n    startTimeout,\r\n    isPlaying,\r\n    isCursorOnPanel,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    let controls = controlsRef.current;\r\n    let panel = panelRef.current;\r\n    controls.addEventListener('mousemove', mouseMoveHanlder);\r\n    panel.addEventListener('mouseenter', mouseEnterHandler);\r\n    panel.addEventListener('mouseleave', mouseLeaveHandler);\r\n    return () => {\r\n      controls.removeEventListener('mousemove', mouseMoveHanlder);\r\n      panel.removeEventListener('mouseenter', mouseEnterHandler);\r\n      panel.removeEventListener('mouseleave', mouseLeaveHandler);\r\n    };\r\n  }, [\r\n    controlsRef,\r\n    panelRef,\r\n    mouseMoveHanlder,\r\n    mouseEnterHandler,\r\n    mouseLeaveHandler,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n};\r\n\r\nexport default useShowHidePanel;\r\n","import { useEffect, useCallback } from 'react';\r\n\r\nconst useKeyEvents = (video, playPause, setVolume, setShouldShowPanel) => {\r\n  const keydownHandler = useCallback(\r\n    (e) => {\r\n      if (document.activeElement.tagName === 'INPUT') e.preventDefault();\r\n      let isSpace = e.code === 'Space' || e.key === 'Space';\r\n      if (isSpace) {\r\n        e.preventDefault();\r\n        playPause();\r\n      } else if (\r\n        (e.code === 'ArrowLeft' || e.key === 'ArrowLeft') &&\r\n        !e.shiftKey\r\n      ) {\r\n        video.currentTime = video.currentTime - 5;\r\n      } else if (\r\n        (e.code === 'ArrowRight' || e.key === 'ArrowRight') &&\r\n        !e.shiftKey\r\n      ) {\r\n        video.currentTime = video.currentTime + 5;\r\n      } else if ((e.code === 'ArrowUp' || e.key === 'ArrowUp') && !e.shiftKey) {\r\n        e.preventDefault();\r\n        setVolume((prevState) => {\r\n          if (+prevState < 1)\r\n            return Math.round((+prevState + 0.1) * 100) / 100 + '';\r\n          else return prevState;\r\n        });\r\n      } else if (\r\n        (e.code === 'ArrowDown' || e.key === 'ArrowDown') &&\r\n        !e.shiftKey\r\n      ) {\r\n        e.preventDefault();\r\n        setVolume((prevState) => {\r\n          if (+prevState > 0)\r\n            return Math.round((+prevState - 0.1) * 100) / 100 + '';\r\n          else return prevState;\r\n        });\r\n      }\r\n      if (!isSpace) setShouldShowPanel(true);\r\n    },\r\n    [video, playPause, setVolume, setShouldShowPanel]\r\n  );\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', keydownHandler);\r\n    return () => window.removeEventListener('keydown', keydownHandler);\r\n  }, [keydownHandler]);\r\n};\r\n\r\nexport default useKeyEvents;\r\n","import React, { useState, useRef, useCallback, useEffect } from 'react';\r\nimport styles from './Controls.module.css';\r\nimport playSvg from '../../../assets/preview/play.svg';\r\nimport pauseSvg from '../../../assets/preview/pause.svg';\r\nimport fullScreenSvg from '../../../assets/preview/fullScreen.svg';\r\nimport { fullScreenHanlder } from './utils/fullScreen';\r\nimport Time from './Time/Time';\r\nimport Volume from './Volume/Volume';\r\nimport useSingleAndDoubleClick from './hooks/useSingleAndDoubleClick';\r\nimport useShowHidePanel from './hooks/useShowHidePanel';\r\nimport useKeyEvents from './hooks/useKeyEvents';\r\n\r\nconst Controls = ({ video, container, duration, time, setTime, isPlaying }) => {\r\n  const [volume, setVolume] = useState('1');\r\n  const [shouldShowPanel, setShouldShowPanel] = useState(false);\r\n  const controlsRef = useRef(null);\r\n  const panelRef = useRef(null);\r\n  const playPause = useCallback(() => {\r\n    if (isPlaying) video.pause();\r\n    else video.play();\r\n  }, [isPlaying, video]);\r\n\r\n  const fullScreen = useCallback(() => {\r\n    fullScreenHanlder(container);\r\n  }, [container]);\r\n\r\n  const exitHandler = useCallback(() => {\r\n    if (\r\n      !document.fullscreenElement &&\r\n      !document.webkitIsFullScreen &&\r\n      !document.mozFullScreen &&\r\n      !document.msFullscreenElement &&\r\n      video\r\n    ) {\r\n      video.classList.remove(styles.FullScreenSize);\r\n    } else if (video) video.classList.add(styles.FullScreenSize);\r\n  }, [video]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('fullscreenchange', exitHandler);\r\n    document.addEventListener('webkitfullscreenchange', exitHandler);\r\n    document.addEventListener('mozfullscreenchange', exitHandler);\r\n    document.addEventListener('MSFullscreenChange', exitHandler);\r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', exitHandler);\r\n      document.removeEventListener('webkitfullscreenchange', exitHandler);\r\n      document.removeEventListener('mozfullscreenchange', exitHandler);\r\n      document.removeEventListener('MSFullscreenChange', exitHandler);\r\n    };\r\n  }, [exitHandler]);\r\n\r\n  useKeyEvents(video, playPause, setVolume, setShouldShowPanel);\r\n  useSingleAndDoubleClick(playPause, fullScreen, controlsRef);\r\n  useShowHidePanel(\r\n    isPlaying,\r\n    controlsRef,\r\n    panelRef,\r\n    styles.Visible,\r\n    styles.Hover,\r\n    shouldShowPanel,\r\n    setShouldShowPanel\r\n  );\r\n\r\n  return (\r\n    <div id='controls' className={styles.Controls} ref={controlsRef}>\r\n      <div className={styles.ControlsPanel} ref={panelRef}>\r\n        <button className={styles.PlayPause} onClick={playPause}>\r\n          {isPlaying ? (\r\n            <img src={pauseSvg} alt='pause' />\r\n          ) : (\r\n            <img src={playSvg} alt='play' />\r\n          )}\r\n        </button>\r\n        <Time\r\n          duration={duration}\r\n          time={time}\r\n          setTime={setTime}\r\n          isPlaying={isPlaying}\r\n          video={video}\r\n        />\r\n        <Volume video={video} volume={volume} setVolume={setVolume} />\r\n        <button className={styles.FullScreen} onClick={fullScreen}>\r\n          <img src={fullScreenSvg} alt='full screen' />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Controls;\r\n","import React, { useState, useRef } from 'react';\r\nimport styles from './CustomPlayer.module.css';\r\nimport Controls from './Controls/Controls';\r\n\r\nconst CustomPlayer = ({ url }) => {\r\n  const [duration, setDuration] = useState(0);\r\n  const videoRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  const [time, setTime] = useState(0);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n  const setVideoDuration = () => setDuration(videoRef.current.duration);\r\n  const handleTimeUpdate = () => setTime(videoRef.current.currentTime);\r\n  const handlePlay = () => setIsPlaying(true);\r\n  const handlePause = () => setIsPlaying(false);\r\n\r\n  return (\r\n    <div className={styles.VideoContainer} ref={containerRef}>\r\n      <video\r\n        className={styles.Video}\r\n        src={url}\r\n        preload='auto'\r\n        ref={videoRef}\r\n        onLoadedMetadata={setVideoDuration}\r\n        onTimeUpdate={handleTimeUpdate}\r\n        onPlay={handlePlay}\r\n        onPause={handlePause}\r\n      />\r\n      {duration ? (\r\n        <Controls\r\n          video={videoRef.current}\r\n          container={containerRef.current}\r\n          duration={duration}\r\n          time={time}\r\n          setTime={setTime}\r\n          isPlaying={isPlaying}\r\n        />\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomPlayer;\r\n","import { useCallback, useState, useRef, useEffect } from 'react';\r\nimport axios from '../axios-instance';\r\n\r\nconst useGetPublicVideo = () => {\r\n  const [isGettingPublicVideo, setIsGettingPublicVideo] = useState(false);\r\n  const [publicInfo, setPublicInfo] = useState(null);\r\n  const [getPublicVideoError, setGetPublicVideoError] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosGetPublicVideo = useCallback((id) => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get(`/public/videos/${id}`)\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const getPublicVideo = useCallback(\r\n    async (id) => {\r\n      setGetPublicVideoError(null);\r\n      setIsGettingPublicVideo(true);\r\n      try {\r\n        const res = await axiosGetPublicVideo(id);\r\n        if (isMounted.current) {\r\n          setPublicInfo({\r\n            finalUrl: res.data.final_video_url || null,\r\n            title: res.data.title,\r\n          });\r\n        }\r\n        console.log(res);\r\n      } catch (err) {\r\n        if (isMounted.current) setGetPublicVideoError(err);\r\n        console.log('Error Getting Public Video', err);\r\n      } finally {\r\n        if (isMounted.current) setIsGettingPublicVideo(false);\r\n        return;\r\n      }\r\n    },\r\n    [axiosGetPublicVideo]\r\n  );\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return {\r\n    isGettingPublicVideo,\r\n    getPublicVideo,\r\n    publicInfo,\r\n    getPublicVideoError,\r\n  };\r\n};\r\n\r\nexport default useGetPublicVideo;\r\n","import { useEffect, useCallback, useRef, useState } from 'react';\r\nimport setAuthToken from '../utils/setAuthToken';\r\nimport axios from '../axios-instance';\r\n\r\nconst useCheckAuth = (dispatch) => {\r\n  const [newToken, setNewToken] = useState(null);\r\n  const [isAuth, setIsAuth] = useState(false);\r\n  const [isChecking, setIsChecking] = useState(true);\r\n  const [refreshError, setRefreshError] = useState(null);\r\n  const isMounted = useRef(false);\r\n\r\n  const axiosRefreshToken = useCallback(() => {\r\n    return new Promise((resolve, reject) => {\r\n      axios\r\n        .get('/refresh-token')\r\n        .then((res) => {\r\n          resolve(res);\r\n        })\r\n        .catch((err) => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const refreshToken = useCallback(async () => {\r\n    setNewToken(null);\r\n    setRefreshError(null);\r\n    try {\r\n      const res = await axiosRefreshToken();\r\n      console.log(res);\r\n      if (isMounted.current) {\r\n        setNewToken(res.data.accessToken);\r\n      }\r\n    } catch (err) {\r\n      setRefreshError(err);\r\n      console.log('Error Refreshing Token', err);\r\n    } finally {\r\n      return;\r\n    }\r\n  }, [axiosRefreshToken]);\r\n\r\n  const checkTokenValidity = useCallback(\r\n    (token) => {\r\n      setIsChecking(true);\r\n      setAuthToken(token);\r\n      refreshToken();\r\n    },\r\n    [refreshToken]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (newToken) {\r\n      localStorage.setItem('token', newToken);\r\n      setAuthToken(newToken);\r\n      setIsAuth(true);\r\n      dispatch({ type: 'setIsAuthenticated', data: true });\r\n    } else if (refreshError) {\r\n      localStorage.removeItem('token');\r\n    }\r\n    setIsChecking(false);\r\n  }, [newToken, refreshError, dispatch]);\r\n\r\n  useEffect(() => {\r\n    let token = localStorage.getItem('token');\r\n    if (token) checkTokenValidity(token);\r\n    else {\r\n      setIsChecking(false);\r\n      setIsAuth(false);\r\n    }\r\n  }, [checkTokenValidity]);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => (isMounted.current = false);\r\n  }, []);\r\n\r\n  return { isChecking, isAuth };\r\n};\r\n\r\nexport default useCheckAuth;\r\n","import React, { useEffect, useRef, useState, useContext } from 'react';\r\nimport styles from './Preview.module.css';\r\nimport Navbar from '../../components/Navbar/Navbar';\r\nimport exportArrow from '../../assets/preview/exportArrow.svg';\r\nimport copyLink from '../../assets/preview/copyLink.svg';\r\nimport { exportText } from './utils/previewUtils';\r\nimport CustomPlayer from '../CustomPlayer/CustomPlayer';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport Spinner from '../../components/Spinner/Spinner';\r\nimport useGetVideo from '../../hooks/useGetVideo';\r\nimport useGetPublicVideo from '../../hooks/useGetPublicVideo';\r\nimport UserContext from '../../contexts/UserContext';\r\nimport useCheckAuth from '../../hooks/useCheckAuth';\r\n\r\nconst Preview = () => {\r\n  const { userDispatch } = useContext(UserContext);\r\n  const { isChecking, isAuth } = useCheckAuth(userDispatch);\r\n  const { getVideo, info, getVideoError } = useGetVideo();\r\n  const { getPublicVideo, publicInfo, getPublicVideoError } =\r\n    useGetPublicVideo();\r\n  const [videoInfo, setVideoInfo] = useState(null);\r\n  const [article, setArticle] = useState(null);\r\n  const videoDownloadRef = useRef(null);\r\n  const params = useParams();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (info && info.finalText) {\r\n      setVideoInfo({ ...info });\r\n      setArticle(info.finalText);\r\n    } else if (publicInfo && publicInfo.finalUrl) {\r\n      setVideoInfo({ ...publicInfo });\r\n    }\r\n  }, [info, publicInfo]);\r\n\r\n  useEffect(() => {\r\n    if (getVideoError || (info && !info.finalUrl)) {\r\n      let isId = params && params.id;\r\n      if (isId) getPublicVideo(params.id);\r\n    }\r\n  }, [getVideoError, info, history, params, getPublicVideo]);\r\n\r\n  useEffect(() => {\r\n    if (getPublicVideoError || (publicInfo && !publicInfo.finalUrl)) {\r\n      history.push('/home');\r\n    }\r\n  }, [publicInfo, history, getPublicVideoError]);\r\n\r\n  useEffect(() => {\r\n    let isId = params && params.id;\r\n    if (!isChecking && !isAuth && isId) getPublicVideo(params.id);\r\n    else if (!isChecking && isAuth && isId) getVideo(params.id);\r\n  }, [isChecking, isAuth, params, getPublicVideo, getVideo]);\r\n\r\n  const downloadVideoHandler = () => {\r\n    videoDownloadRef.current.click();\r\n  };\r\n\r\n  const copyLinkHandler = () => {\r\n    navigator.clipboard.writeText(window.location.href);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.Preview}>\r\n      {videoInfo && videoInfo.finalUrl ? (\r\n        <>\r\n          <Navbar\r\n            videoData={videoInfo}\r\n            isPreview={true}\r\n            getVideoError={getVideoError}\r\n            isAuth={isAuth}\r\n          />\r\n          <main className={styles.Main}>\r\n            <div className={styles.MainContent}>\r\n              <div className={styles.CustomPlayer}>\r\n                <CustomPlayer url={videoInfo.finalUrl} />\r\n                <a\r\n                  ref={videoDownloadRef}\r\n                  style={{ display: 'none' }}\r\n                  href={`${process.env.REACT_APP_API_BASE_URL}/api/v1/public/videos/download/${params.id}`}\r\n                >\r\n                  Download Video\r\n                </a>\r\n              </div>\r\n              <div className={styles.VideoFooter}>\r\n                <p className={styles.Title}>{videoInfo.title}</p>\r\n                <div className={styles.DownloadAndLink}>\r\n                  <button\r\n                    className={styles.Download}\r\n                    onClick={downloadVideoHandler}\r\n                  >\r\n                    Download\r\n                  </button>\r\n                  <button className={styles.CopyLink} onClick={copyLinkHandler}>\r\n                    <img src={copyLink} alt='copy' />\r\n                    <span>Copy public link</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              {article ? (\r\n                <>\r\n                  <div className={styles.HeadlineAndExport}>\r\n                    <p className={styles.Headline}>\r\n                      Give your articale a headline!\r\n                    </p>\r\n                    <button\r\n                      className={styles.ExportButton}\r\n                      onClick={() => exportText(article, videoInfo.title)}\r\n                    >\r\n                      <span>Export text</span>\r\n                      <img src={exportArrow} alt='arrow' />\r\n                    </button>\r\n                  </div>\r\n                  <p className={styles.Text}>{article}</p>\r\n                </>\r\n              ) : null}\r\n            </div>\r\n          </main>\r\n        </>\r\n      ) : (\r\n        <Spinner style={{ width: '100px', height: '100px' }} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Preview;\r\n","export const exportText = (text, title) => {\r\n  let a = document.createElement('a');\r\n  a.setAttribute(\r\n    'href',\r\n    'data:text/plain;charset=utf-8,' + encodeURIComponent(text)\r\n  );\r\n  a.setAttribute('download', title);\r\n  a.style.display = 'none';\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\nfabric.Video = fabric.util.createClass(fabric.Image, {\r\n  type: 'video',\r\n  cropRect: null,\r\n  id: null,\r\n  cornerRadius: 0,\r\n  originalWidth: 0,\r\n  originalHeight: 0,\r\n  crossOrigin: 'Anonymous',\r\n\r\n  initialize: function (video, options) {\r\n    const defaultOpts = {\r\n      lockRotation: true,\r\n      objectCaching: true,\r\n      strokeUniform: true,\r\n      crossOrigin: 'Anonymous',\r\n      cacheProperties: ['time'],\r\n    };\r\n    options = options || {};\r\n\r\n    this.callSuper(\r\n      'initialize',\r\n      video,\r\n      Object.assign({}, defaultOpts, options)\r\n    );\r\n  },\r\n\r\n  toObject: function (options) {\r\n    return fabric.util.object.extend(this.callSuper('toObject'), {\r\n      type: this.get('type'),\r\n      cropRect: this.get('cropRect'),\r\n      id: this.get('id'),\r\n      cornerRadius: this.get('cornerRadius'),\r\n      originalWidth: this.get('originalWidth'),\r\n      originalHeight: this.get('originalHeight'),\r\n      crossOrigin: this.get('crossOrigin'),\r\n    });\r\n  },\r\n\r\n  _draw: function (video, ctx, w, h) {\r\n    const c = this.cropRect;\r\n    const d = {\r\n      x: -this.width / 2,\r\n      y: -this.height / 2,\r\n      w: this.width,\r\n      h: this.height,\r\n    };\r\n    if (c) {\r\n      ctx.drawImage(video, c.x, c.y, c.w, c.h, d.x, d.y, d.w, d.h);\r\n    } else {\r\n      ctx.drawImage(video, d.x, d.y, d.w, d.h);\r\n    }\r\n  },\r\n\r\n  // _stroke: function (ctx) {\r\n  //   if (!this.stroke || this.strokeWidth === 0) {\r\n  //     return;\r\n  //   }\r\n  //   var w = this.width / 2,\r\n  //     h = this.height / 2;\r\n  //   ctx.beginPath();\r\n  //   ctx.moveTo(-w, -h);\r\n  //   ctx.lineTo(w, -h);\r\n  //   ctx.lineTo(w, h);\r\n  //   ctx.lineTo(-w, h);\r\n  //   ctx.lineTo(-w, -h);\r\n  //   ctx.closePath();\r\n  // },\r\n\r\n  _render: function (ctx) {\r\n    this._draw(this.getElement(), ctx);\r\n    this._stroke(ctx);\r\n    this._renderPaintInOrder(ctx);\r\n  },\r\n});\r\n\r\nfabric.Video.prototype.setControlsVisibility({\r\n  tl: true,\r\n  tr: true,\r\n  bl: true,\r\n  br: true,\r\n  mtr: false,\r\n});\r\n\r\n// fabric.Video.prototype.setControlsVisibility({\r\n//   tl: true,\r\n//   tr: true,\r\n//   ml: true,\r\n//   mr: true,\r\n//   bl: true,\r\n//   br: true,\r\n//   mtr: false,\r\n// });\r\n\r\n\r\nfabric.Video.fromObject = function (object, callback) {\r\n  return fabric.Object._fromObject(\r\n    'Video',\r\n    object,\r\n    callback,\r\n    'type',\r\n    'cropRect',\r\n    'id',\r\n    'originalWidth',\r\n    'originalHeight'\r\n  );\r\n};","import { fabric } from 'fabric';\r\n\r\nfabric.SpeakerCropBox = fabric.util.createClass(fabric.Rect);\r\n\r\nfabric.SpeakerCropBox.prototype.setControlsVisibility({\r\n  mtr: false,\r\n});","import { fabric } from 'fabric';\r\n\r\nfabric.CircleCropBox = fabric.util.createClass(fabric.Circle);\r\n\r\nfabric.CircleCropBox.prototype.setControlsVisibility({\r\n  mt: false,\r\n  mb: false,\r\n  ml: false,\r\n  mr: false,\r\n  mtr: false,\r\n});\r\n\r\nfabric.CircleCropBox.prototype.render = (function (render) {\r\n  return function (ctx) {\r\n    render.apply(this, arguments);\r\n    this._renderControls(ctx);\r\n    if (!this.canvas._activeObject) this.canvas._activeObject = this;\r\n  };\r\n})(fabric.CircleCropBox.prototype.render);","import { fabric } from 'fabric';\r\n\r\nfabric.CustomTextbox = fabric.util.createClass(fabric.Textbox, {\r\n  type: 'customTextbox',\r\n  cursorWidth: 0.5,\r\n\r\n  toObject: function (options) {\r\n    return fabric.util.object.extend(this.callSuper('toObject'), {\r\n      type: this.get('type'),\r\n      cursorWidth: this.get('cursorWidth'),\r\n    });\r\n  },\r\n});\r\n\r\nfabric.CustomTextbox.fromObject = function (object, callback) {\r\n  return fabric.Object._fromObject(\r\n    'CustomTextbox',\r\n    object,\r\n    callback,\r\n    'customTextbox'\r\n  );\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\n// Subtitles renreding padding and border radius\r\n// CanvasRenderingContext2D.prototype.roundRect = function (x, y, w, h, r) {\r\n//   if (w < 2 * r) r = w / 2;\r\n//   if (h < 2 * r) r = h / 2;\r\n//   this.beginPath();\r\n//   this.moveTo(x + r, y);\r\n//   this.arcTo(x + w, y, x + w, y + h, r);\r\n//   this.arcTo(x + w, y + h, x, y + h, r);\r\n//   this.arcTo(x, y + h, x, y, r);\r\n//   this.arcTo(x, y, x + w, y, r);\r\n//   this.closePath();\r\n//   return this;\r\n// };\r\n// fabric.Subtitle = fabric.util.createClass(fabric.IText, {\r\n//   type: 'subtitle',\r\n\r\n//   _getNonTransformedDimensions() {\r\n//     // Object dimensions\r\n//     return new fabric.Point(\r\n//       this.width + this.paddingX,\r\n//       this.height + this.paddingY\r\n//     );\r\n//   },\r\n\r\n//   _calculateCurrentDimensions() {\r\n//     // Controls dimensions\r\n//     return fabric.util.transformPoint(\r\n//       this._getTransformedDimensions(),\r\n//       this.getViewportTransform(),\r\n//       true\r\n//     );\r\n//   },\r\n\r\n//   // _renderBackground(ctx) {\r\n//   //   if (!this.backgroundColor) {\r\n//   //     return;\r\n//   //   }\r\n//   //   var dim = this._getNonTransformedDimensions();\r\n//   //   ctx.fillStyle = this.backgroundColor;\r\n\r\n//   //   if (!this.bgCornerRadius) {\r\n//   //     ctx.fillRect(-dim.x / 2, -dim.y / 2, dim.x, dim.y);\r\n//   //   } else {\r\n//   //     ctx\r\n//   //       .roundRect(-dim.x / 2, -dim.y / 2, dim.x, dim.y, this.bgCornerRadius)\r\n//   //       .fill();\r\n//   //   }\r\n//   //   // if there is background color no other shadows\r\n//   //   // should be casted\r\n//   //   this._removeShadow(ctx);\r\n//   // },\r\n// });\r\n\r\n// fabric.Subtitle.prototype.controls = {};\r\n\r\nfabric.Subtitle = fabric.util.createClass(fabric.Textbox, {\r\n  type: 'subtitle',\r\n  id: 'subtitle',\r\n  paddingX: 0,\r\n  paddingY: 0,\r\n\r\n  _getNonTransformedDimensions() {\r\n    // Object dimensions\r\n    return new fabric.Point(\r\n      this.width + this.paddingX,\r\n      this.height + this.paddingY\r\n    );\r\n  },\r\n\r\n  _calculateCurrentDimensions() {\r\n    // Controls dimensions\r\n    return fabric.util.transformPoint(\r\n      this._getTransformedDimensions(),\r\n      this.getViewportTransform(),\r\n      true\r\n    );\r\n  },\r\n\r\n  toObject: function (options) {\r\n    return fabric.util.object.extend(this.callSuper('toObject'), {\r\n      type: this.get('type'),\r\n      id: this.get('id'),\r\n      paddingX: this.get('paddingX'),\r\n      paddingY: this.get('paddingY'),\r\n      editable: this.get('editable'),\r\n      breakWords: this.get('breakWords'),\r\n    });\r\n  },\r\n});\r\n\r\nfabric.Subtitle.fromObject = function (object, callback) {\r\n  return fabric.Object._fromObject('Subtitle', object, callback, 'subtitle');\r\n};\r\n\r\nfabric.Subtitle.prototype._wrapLine = function (\r\n  _line,\r\n  lineIndex,\r\n  desiredWidth,\r\n  reservedSpace\r\n) {\r\n  var lineWidth = 0,\r\n    splitByGrapheme = this.splitByGrapheme,\r\n    graphemeLines = [],\r\n    line = [],\r\n    // spaces in different languges?\r\n    words = splitByGrapheme\r\n      ? fabric.util.string.graphemeSplit(_line)\r\n      : _line.split(this._wordJoiners),\r\n    word = '',\r\n    offset = 0,\r\n    infix = splitByGrapheme ? '' : ' ',\r\n    wordWidth = 0,\r\n    infixWidth = 0,\r\n    largestWordWidth = 0,\r\n    lineJustStarted = true,\r\n    additionalSpace = splitByGrapheme ? 0 : this._getWidthOfCharSpacing();\r\n\r\n  reservedSpace = reservedSpace || 0;\r\n  desiredWidth -= reservedSpace;\r\n\r\n  if (words.length === 0) words.push([]);\r\n\r\n  for (var i = 0; i < words.length; i++) {\r\n    word = splitByGrapheme\r\n      ? words[i]\r\n      : fabric.util.string.graphemeSplit(words[i]);\r\n    wordWidth = this._measureWord(word, lineIndex, offset);\r\n    offset += word.length;\r\n\r\n    // Break the line if a word is wider than the set width\r\n    if (this.breakWords && wordWidth >= desiredWidth) {\r\n      if (!lineJustStarted) {\r\n        line.push(infix);\r\n        lineJustStarted = true;\r\n      }\r\n\r\n      // Loop through each character in word\r\n      for (var w = 0; w < word.length; w++) {\r\n        var letter = word[w];\r\n        var letterWidth =\r\n          (this.getMeasuringContext().measureText(letter).width *\r\n            this.fontSize) /\r\n          this.CACHE_FONT_SIZE;\r\n        if (lineWidth + letterWidth > desiredWidth) {\r\n          graphemeLines.push(line);\r\n          line = [];\r\n          line.push(letter);\r\n          lineWidth = letterWidth;\r\n        } else {\r\n          line.push(letter);\r\n          lineWidth += letterWidth;\r\n        }\r\n      }\r\n      word = [];\r\n    } else {\r\n      lineWidth += infixWidth + wordWidth - additionalSpace;\r\n    }\r\n\r\n    if (lineWidth >= desiredWidth && !lineJustStarted) {\r\n      graphemeLines.push(line);\r\n      line = [];\r\n      lineWidth = wordWidth;\r\n      lineJustStarted = true;\r\n    } else {\r\n      lineWidth += additionalSpace;\r\n    }\r\n\r\n    if (!lineJustStarted && !splitByGrapheme) {\r\n      line.push(infix);\r\n    }\r\n    line = line.concat(word);\r\n\r\n    infixWidth = splitByGrapheme\r\n      ? 0\r\n      : this._measureWord([infix], lineIndex, offset);\r\n    offset++;\r\n    lineJustStarted = false;\r\n    // keep track of largest word\r\n    if (wordWidth > largestWordWidth && !this.breakWords) {\r\n      largestWordWidth = wordWidth;\r\n    }\r\n  }\r\n\r\n  i && graphemeLines.push(line);\r\n\r\n  if (largestWordWidth + reservedSpace > this.dynamicMinWidth) {\r\n    this.dynamicMinWidth = largestWordWidth - additionalSpace + reservedSpace;\r\n  }\r\n  return graphemeLines;\r\n};\r\n","import { fabric } from 'fabric';\r\n\r\nfabric.CustomImage = fabric.util.createClass(fabric.Image, {\r\n  type: 'customImage',\r\n  cropRect: null,\r\n  id: null,\r\n  cornerRadius: 0,\r\n  originalWidth: 0,\r\n  originalHeight: 0,\r\n  crossOrigin: 'Anonymous',\r\n  isSvg: false,\r\n\r\n  initialize: function (customImage, options) {\r\n    const defaultOpts = {\r\n      objectCaching: true,\r\n      crossOrigin: 'Anonymous',\r\n    };\r\n    options = options || {};\r\n\r\n    this.callSuper(\r\n      'initialize',\r\n      customImage,\r\n      Object.assign({}, defaultOpts, options)\r\n    );\r\n  },\r\n\r\n  toObject: function (options) {\r\n    return fabric.util.object.extend(this.callSuper('toObject'), {\r\n      type: this.get('type'),\r\n      cropRect: this.get('cropRect'),\r\n      id: this.get('id'),\r\n      cornerRadius: this.get('cornerRadius'),\r\n      originalWidth: this.get('originalWidth'),\r\n      originalHeight: this.get('originalHeight'),\r\n      crossOrigin: this.get('crossOrigin'),\r\n      isSvg: this.get('isSvg'),\r\n    });\r\n  },\r\n\r\n  _draw: function (customImage, ctx, w, h) {\r\n    const c = this.cropRect;\r\n    const d = {\r\n      x: -this.width / 2,\r\n      y: -this.height / 2,\r\n      w: this.width,\r\n      h: this.height,\r\n    };\r\n    if (c) {\r\n      ctx.drawImage(customImage, c.x, c.y, c.w, c.h, d.x, d.y, d.w, d.h);\r\n    } else {\r\n      ctx.drawImage(customImage, d.x, d.y, d.w, d.h);\r\n    }\r\n  },\r\n\r\n  _render: function (ctx) {\r\n    this._draw(this.getElement(), ctx);\r\n  },\r\n});\r\n\r\nfabric.CustomImage.fromURL = function (url, callback, imgOptions) {\r\n  fabric.util.loadImage(\r\n    url,\r\n    function (img, isError) {\r\n      callback && callback(new fabric.CustomImage(img, imgOptions), isError);\r\n    },\r\n    null,\r\n    imgOptions && imgOptions.crossOrigin\r\n  );\r\n};\r\n\r\nfabric.CustomImage.fromObject = function (_object, callback) {\r\n  var object = fabric.util.object.clone(_object);\r\n  fabric.util.loadImage(\r\n    object.src,\r\n    function (img, isError) {\r\n      if (isError) {\r\n        callback && callback(null, true);\r\n        return;\r\n      }\r\n      fabric.CustomImage.prototype._initFilters.call(\r\n        object,\r\n        object.filters,\r\n        function (filters) {\r\n          object.filters = filters || [];\r\n          fabric.CustomImage.prototype._initFilters.call(\r\n            object,\r\n            [object.resizeFilter],\r\n            function (resizeFilters) {\r\n              object.resizeFilter = resizeFilters[0];\r\n              fabric.util.enlivenObjects(\r\n                [object.clipPath],\r\n                function (enlivedProps) {\r\n                  object.clipPath = enlivedProps[0];\r\n                  var image = new fabric.CustomImage(img, object);\r\n                  callback(image, false);\r\n                }\r\n              );\r\n            }\r\n          );\r\n        }\r\n      );\r\n    },\r\n    null,\r\n    object.crossOrigin\r\n  );\r\n};\r\n\r\n// fabric.CustomImageCrop = fabric.util.createClass(fabric.CustomImage);\r\n\r\n// fabric.CustomImageCrop.prototype.render = (function (render) {\r\n//   return function (ctx) {\r\n//     render.apply(this, arguments);\r\n//     this._renderControls(ctx);\r\n//     if (!this.canvas._activeObject) this.canvas._activeObject = this;\r\n//   };\r\n// })(fabric.CustomImageCrop.prototype.render);\r\n","export default __webpack_public_path__ + \"static/media/ctrlScale.3fdf1e45.svg\";","export default __webpack_public_path__ + \"static/media/ctrlStretch.366a4843.svg\";","export default __webpack_public_path__ + \"static/media/ctrlRotate.aba272aa.svg\";","import { fabric } from 'fabric';\r\nconst wrapWithFixedAnchor = fabric.controlsUtils.wrapWithFixedAnchor;\r\nconst wrapWithFireEvent = fabric.controlsUtils.wrapWithFireEvent;\r\nconst getLocalPoint = fabric.controlsUtils.getLocalPoint;\r\n\r\nfabric.Canvas.prototype._finalizeCurrentTransform = function (e) {\r\n  var transform = this._currentTransform,\r\n    target = transform.target,\r\n    eventName,\r\n    options = {\r\n      e: e,\r\n      target: target,\r\n      transform: transform,\r\n      action: transform.action,\r\n    };\r\n\r\n  if (target._scaling) target._scaling = false;\r\n  target.setCoords();\r\n\r\n  if (\r\n    transform.actionPerformed ||\r\n    (this.stateful && target.hasStateChanged())\r\n  ) {\r\n    if (transform.actionPerformed) {\r\n      eventName = this._addEventOptions(options, transform);\r\n      this._fire(eventName, options);\r\n    }\r\n    this._fire('modified', options);\r\n    target.scaleCrop = null;\r\n  }\r\n};\r\n\r\nlet sign =\r\n  Math.sign ||\r\n  function (x) {\r\n    return (x > 0) - (x < 0) || +x;\r\n  };\r\n\r\nconst handleXCrop = (\r\n  target,\r\n  newWidth,\r\n  distance,\r\n  isLeft,\r\n  shouldSetScaleCrop\r\n) => {\r\n  if (!target.cropRect) {\r\n    target.cropRect = {\r\n      h: target.height,\r\n      w: 0,\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n  }\r\n  target.width = newWidth;\r\n  target.cropRect.w = newWidth;\r\n  if (isLeft) target.cropRect.x = target.originalWidth - distance;\r\n  if (shouldSetScaleCrop) {\r\n    target.scaleCrop = { ...target.cropRect, s: target.scaleX };\r\n  }\r\n};\r\n\r\nconst handleXScale = (target, newWidth, distance, isLeft) => {\r\n  let cropRect = target.cropRect;\r\n  let oldHeight = target.height * target.scaleX;\r\n  let oldCropHeight = cropRect ? cropRect.h : target.originalHeight;\r\n  let scale = target.scaleX * (newWidth / target.width);\r\n  let newHeight = oldHeight / scale;\r\n  let newY = target.cropRect.y + (oldCropHeight - newHeight) / 2;\r\n\r\n  if (newHeight > target.scaleCrop.h) {\r\n    scale = target.scaleCrop.s;\r\n    newHeight = target.scaleCrop.h;\r\n    newY = target.scaleCrop.y;\r\n    target.scaleCrop = null;\r\n  }\r\n  if (!cropRect) target.cropRect = { w: target.width, h: 0, x: 0, y: 0 };\r\n  target.scaleX = scale;\r\n  target.scaleY = scale;\r\n  target.height = newHeight;\r\n  target.cropRect.h = newHeight;\r\n  target.cropRect.y = newY;\r\n  if (!target.scaleCrop) handleXCrop(target, newWidth, distance, isLeft, false);\r\n};\r\n\r\nconst handleXScaleCrop = (target, newPoint) => {\r\n  let isLeft = newPoint.x < 0;\r\n  let newWidth = Math.abs(newPoint.x / target.scaleX);\r\n  let cropRect = target.cropRect;\r\n  let leftover = 0;\r\n  if (!isLeft) leftover = cropRect ? cropRect.x : 0;\r\n  else {\r\n    leftover = cropRect ? target.originalWidth - (cropRect.x + cropRect.w) : 0;\r\n  }\r\n  let distance = newWidth + leftover;\r\n  if (!target.scaleCrop && target.originalWidth > distance) {\r\n    handleXCrop(target, newWidth, distance, isLeft, false);\r\n  } else {\r\n    if (!target.scaleCrop) {\r\n      let maxWidth = target.originalWidth - leftover;\r\n      distance = maxWidth + leftover;\r\n      handleXCrop(target, maxWidth, distance, isLeft, true);\r\n    }\r\n    handleXScale(target, newWidth, distance, isLeft);\r\n  }\r\n};\r\n\r\nconst handleYCrop = (\r\n  target,\r\n  newHeight,\r\n  distance,\r\n  isTop,\r\n  shouldSetScaleCrop\r\n) => {\r\n  if (!target.cropRect) {\r\n    target.cropRect = {\r\n      w: target.width,\r\n      h: 0,\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n  }\r\n  target.height = newHeight;\r\n  target.cropRect.h = newHeight;\r\n  if (isTop) target.cropRect.y = target.originalHeight - distance;\r\n  if (shouldSetScaleCrop) {\r\n    target.scaleCrop = { ...target.cropRect, s: target.scaleX };\r\n  }\r\n};\r\n\r\nconst handleYScale = (target, newHeight, distance, isTop) => {\r\n  let cropRect = target.cropRect;\r\n  let oldWidth = target.width * target.scaleX;\r\n  let oldCropWidth = cropRect ? cropRect.w : target.originalWidth;\r\n  let scale = target.scaleX * (newHeight / target.height);\r\n  let newWidth = oldWidth / scale;\r\n  let newX = target.cropRect.x + (oldCropWidth - newWidth) / 2;\r\n\r\n  if (newWidth > target.scaleCrop.w) {\r\n    scale = target.scaleCrop.s;\r\n    newWidth = target.scaleCrop.w;\r\n    newX = target.scaleCrop.x;\r\n    target.scaleCrop = null;\r\n  }\r\n  if (!cropRect) target.cropRect = { h: target.height, w: 0, x: 0, y: 0 };\r\n  target.scaleX = scale;\r\n  target.scaleY = scale;\r\n  target.width = newWidth;\r\n  target.cropRect.w = newWidth;\r\n  target.cropRect.x = newX;\r\n  if (!target.scaleCrop) handleYCrop(target, newHeight, distance, isTop, false);\r\n};\r\n\r\nconst handleYScaleCrop = (target, newPoint) => {\r\n  let isTop = newPoint.y < 0;\r\n  let newHeight = Math.abs(newPoint.y / target.scaleX);\r\n  let cropRect = target.cropRect;\r\n  let leftover = 0;\r\n  if (!isTop) leftover = cropRect ? cropRect.y : 0;\r\n  else {\r\n    leftover = cropRect ? target.originalHeight - (cropRect.y + cropRect.h) : 0;\r\n  }\r\n  let distance = newHeight + leftover;\r\n  if (!target.scaleCrop && target.originalHeight > distance) {\r\n    handleYCrop(target, newHeight, distance, isTop, false);\r\n  } else {\r\n    if (!target.scaleCrop) {\r\n      let maxHeight = target.originalHeight - leftover;\r\n      distance = maxHeight + leftover;\r\n      handleYCrop(target, maxHeight, distance, isTop, true);\r\n    }\r\n    handleYScale(target, newHeight, distance, isTop);\r\n  }\r\n};\r\n\r\nconst scaleObject = (eventData, transform, x, y, options) => {\r\n  options = options || {};\r\n  let target = transform.target;\r\n  let by = options.by;\r\n  let newPoint = getLocalPoint(\r\n    transform,\r\n    transform.originX,\r\n    transform.originY,\r\n    x,\r\n    y\r\n  );\r\n\r\n  let signX = by !== 'y' ? sign(newPoint.x) : 1;\r\n  let signY = by !== 'x' ? sign(newPoint.y) : 1;\r\n  if (!transform.signX) transform.signX = signX;\r\n  if (!transform.signY) transform.signY = signY;\r\n\r\n  if (\r\n    target.excludeFromExport ||\r\n    (target.lockScalingFlip &&\r\n      (transform.signX !== signX || transform.signY !== signY))\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  let oldW = target.cropRect ? target.cropRect.w : null;\r\n  let oldH = target.cropRect ? target.cropRect.h : null;\r\n  let oldScale = target.scaleX;\r\n\r\n  if (by && by === 'x') handleXScaleCrop(target, newPoint);\r\n  else if (by && by === 'y') handleYScaleCrop(target, newPoint);\r\n  let scaleChanged = oldScale !== target.scaleX;\r\n  let sizeChanged =\r\n    target.cropRect !== null &&\r\n    (oldW !== target.cropRect.w || oldH !== target.cropRect.h);\r\n  let didChange = scaleChanged || sizeChanged;\r\n  if (didChange && target.clipPath) target.clipPath = null;\r\n  return didChange;\r\n};\r\n\r\nconst scaleObjectX = (eventData, transform, x, y) => {\r\n  return scaleObject(eventData, transform, x, y, { by: 'x' });\r\n};\r\nconst scaleObjectY = (eventData, transform, x, y) => {\r\n  return scaleObject(eventData, transform, x, y, { by: 'y' });\r\n};\r\n\r\nexport const scalingX = wrapWithFireEvent(\r\n  'scaling',\r\n  wrapWithFixedAnchor(scaleObjectX)\r\n);\r\nexport const scalingY = wrapWithFireEvent(\r\n  'scaling',\r\n  wrapWithFixedAnchor(scaleObjectY)\r\n);\r\n","import { fabric } from 'fabric';\r\nimport ctrlScale from '../assets/editor/ctrlScale.svg';\r\nimport ctrlStretch from '../assets/editor/ctrlStretch.svg';\r\nimport ctrlRotate from '../assets/editor/ctrlRotate.svg';\r\nimport { scalingX, scalingY } from './imageScale';\r\n\r\nfabric.Object.prototype.transparentCorners = false;\r\nfabric.Object.prototype.cornerColor = 'white';\r\nfabric.Object.prototype.borderColor = '#6F7BD0';\r\nfabric.Object.prototype.cornerStrokeColor = '#6F7BD0';\r\nfabric.Object.prototype.cornerStyle = 'circle';\r\nfabric.Object.prototype.objectCaching = false;\r\nfabric.Object.prototype.lockScalingFlip = true;\r\nfabric.Line.prototype.borderColor = 'transparent';\r\nfabric.Circle.prototype.noScaleCache = false;\r\nfabric.Rect.prototype.noScaleCache = false;\r\nfabric.Triangle.prototype.noScaleCache = false;\r\nfabric.Line.prototype.noScaleCache = false;\r\nfabric.ActiveSelection.prototype.borderDashArray = [12, 12];\r\n// disable mouse group selection\r\nfabric.Canvas.prototype._groupSelectedObjects = function () {}\r\nfabric.Canvas.prototype._drawSelection = function () {}\r\n\r\nconst ctrlStretchImage = new Image();\r\nctrlStretchImage.src = ctrlStretch;\r\nconst ctrlScaleImage = new Image();\r\nctrlScaleImage.src = ctrlScale;\r\nconst ctrlRotateImage = new Image();\r\nctrlRotateImage.src = ctrlRotate;\r\nconst controlsUtils = fabric.controlsUtils,\r\n  scaleSkewStyleHandler = controlsUtils.scaleSkewCursorStyleHandler,\r\n  scaleStyleHandler = controlsUtils.scaleCursorStyleHandler,\r\n  scalingEqually = controlsUtils.scalingEqually,\r\n  scalingYOrSkewingX = controlsUtils.scalingYOrSkewingX,\r\n  scalingXOrSkewingY = controlsUtils.scalingXOrSkewingY,\r\n  scaleOrSkewActionName = controlsUtils.scaleOrSkewActionName,\r\n  objectControls = fabric.Object.prototype.controls;\r\n\r\nconst renderScaleIcon = (icon) => {\r\n  return function renderIcon(ctx, left, top, styleOverride, fabricObject) {\r\n    let size = this.cornerSize;\r\n    ctx.save();\r\n    ctx.translate(left, top);\r\n    ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle));\r\n    ctx.drawImage(icon, -size / 2, -size / 2, size, size);\r\n    ctx.restore();\r\n  };\r\n};\r\n\r\nconst renderStretchIconX = (icon) => {\r\n  return function renderIcon(ctx, left, top, styleOverride, fabricObject) {\r\n    let size = this.cornerSize;\r\n    ctx.save();\r\n    ctx.translate(left, top);\r\n    ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle));\r\n    ctx.drawImage(icon, -size / 3.2, -size / 2, size / 1.6, size);\r\n    ctx.restore();\r\n  };\r\n};\r\n\r\nconst renderStretchIconY = (icon) => {\r\n  return function renderIcon(ctx, left, top, styleOverride, fabricObject) {\r\n    let size = this.cornerSize;\r\n    ctx.save();\r\n    ctx.translate(left, top);\r\n    ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle + 90));\r\n    ctx.drawImage(icon, -size / 3.2, -size / 2, size / 1.6, size);\r\n    ctx.restore();\r\n  };\r\n};\r\n\r\nobjectControls.ml = new fabric.Control({\r\n  x: -0.5,\r\n  y: 0,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingXOrSkewingY,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetY: 3,\r\n  render: renderStretchIconX(ctrlStretchImage),\r\n});\r\n\r\nobjectControls.mr = new fabric.Control({\r\n  x: 0.5,\r\n  y: 0,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingXOrSkewingY,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetY: 3,\r\n  offsetX: 0,\r\n  render: renderStretchIconX(ctrlStretchImage),\r\n});\r\n\r\nobjectControls.mt = new fabric.Control({\r\n  x: 0,\r\n  y: -0.5,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingYOrSkewingX,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetX: -3,\r\n  offsetY: 0,\r\n  render: renderStretchIconY(ctrlStretchImage),\r\n});\r\n\r\nobjectControls.mb = new fabric.Control({\r\n  x: 0,\r\n  y: 0.5,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingYOrSkewingX,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetX: -3,\r\n  offsetY: 0,\r\n  render: renderStretchIconY(ctrlStretchImage),\r\n});\r\n\r\nobjectControls.tl = new fabric.Control({\r\n  x: -0.5,\r\n  y: -0.5,\r\n  cursorStyleHandler: scaleStyleHandler,\r\n  actionHandler: scalingEqually,\r\n  cornerSize: 32,\r\n  offsetY: 3,\r\n  offsetX: 0,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\n\r\nobjectControls.tr = new fabric.Control({\r\n  x: 0.5,\r\n  y: -0.5,\r\n  cursorStyleHandler: scaleStyleHandler,\r\n  actionHandler: scalingEqually,\r\n  cornerSize: 32,\r\n  offsetY: 3,\r\n  offsetX: 0,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\n\r\nobjectControls.bl = new fabric.Control({\r\n  x: -0.5,\r\n  y: 0.5,\r\n  cursorStyleHandler: scaleStyleHandler,\r\n  actionHandler: scalingEqually,\r\n  cornerSize: 32,\r\n  offsetY: 3,\r\n  offsetX: 0,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\n\r\nobjectControls.br = new fabric.Control({\r\n  x: 0.5,\r\n  y: 0.5,\r\n  cursorStyleHandler: scaleStyleHandler,\r\n  actionHandler: scalingEqually,\r\n  cornerSize: 32,\r\n  offsetY: 3,\r\n  offsetX: 0,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\n\r\nobjectControls.mtr = new fabric.Control({\r\n  x: 0,\r\n  y: 0.5,\r\n  cornerSize: 50,\r\n  offsetY: 30,\r\n  actionHandler: controlsUtils.rotationWithSnapping,\r\n  cursorStyleHandler: controlsUtils.rotationStyleHandler,\r\n  withConnection: false,\r\n  actionName: 'rotate',\r\n  render: renderScaleIcon(ctrlRotateImage),\r\n});\r\n\r\nif (fabric.Textbox) {\r\n  let textBoxControls = (fabric.Textbox.prototype.controls = {});\r\n  textBoxControls.mtr = objectControls.mtr;\r\n  textBoxControls.mr = new fabric.Control({\r\n    x: 0.5,\r\n    y: 0,\r\n    actionHandler: controlsUtils.changeWidth,\r\n    cursorStyleHandler: scaleSkewStyleHandler,\r\n    actionName: 'resizing',\r\n    cornerSize: 42,\r\n    offsetY: 3,\r\n    render: renderStretchIconX(ctrlStretchImage),\r\n  });\r\n\r\n  textBoxControls.ml = new fabric.Control({\r\n    x: -0.5,\r\n    y: 0,\r\n    actionHandler: controlsUtils.changeWidth,\r\n    cursorStyleHandler: scaleSkewStyleHandler,\r\n    actionName: 'resizing',\r\n    cornerSize: 42,\r\n    offsetY: 3,\r\n    render: renderStretchIconX(ctrlStretchImage),\r\n  });\r\n  fabric.Textbox.prototype.setControlsVisibility({\r\n    ml: true,\r\n    mr: true,\r\n    mtr: false,\r\n  });\r\n}\r\n\r\nlet line = (fabric.Line.prototype.controls = {});\r\nline.mtr = objectControls.mtr;\r\nline.ml = new fabric.Control({\r\n  x: -0.5,\r\n  y: 0,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingXOrSkewingY,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 30,\r\n  offsetY: 3,\r\n  offsetX: 0,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\nline.mr = new fabric.Control({\r\n  x: 0.5,\r\n  y: 0,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingXOrSkewingY,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 30,\r\n  offsetY: 3,\r\n  offsetX: 0,\r\n  render: renderScaleIcon(ctrlScaleImage),\r\n});\r\n\r\nfabric.Rect.prototype.setControlsVisibility({\r\n  tl: true,\r\n  mt: true,\r\n  tr: true,\r\n  ml: true,\r\n  mr: true,\r\n  bl: true,\r\n  mb: true,\r\n  br: true,\r\n  mtr: true,\r\n});\r\nfabric.Circle.prototype.setControlsVisibility({\r\n  tl: true,\r\n  mt: true,\r\n  tr: true,\r\n  ml: true,\r\n  mr: true,\r\n  bl: true,\r\n  mb: true,\r\n  br: true,\r\n  mtr: true,\r\n});\r\nfabric.Triangle.prototype.setControlsVisibility({\r\n  tl: true,\r\n  mt: true,\r\n  tr: true,\r\n  ml: true,\r\n  mr: true,\r\n  bl: true,\r\n  mb: true,\r\n  br: true,\r\n  mtr: true,\r\n});\r\nfabric.Line.prototype.setControlsVisibility({\r\n  ml: true,\r\n  mr: true,\r\n  mtr: true,\r\n});\r\n\r\nlet image = (fabric.Image.prototype.controls = {});\r\nimage.mtr = objectControls.mtr;\r\nimage.tr = objectControls.tr;\r\nimage.br = objectControls.br;\r\nimage.tl = objectControls.tl;\r\nimage.bl = objectControls.bl;\r\nfabric.Image.prototype.setControlsVisibility({\r\n  tl: true,\r\n  tr: true,\r\n  bl: true,\r\n  br: true,\r\n  mtr: true,\r\n});\r\nfabric.ActiveSelection.prototype.controls = {};\r\n\r\nimage.ml = new fabric.Control({\r\n  x: -0.5,\r\n  y: 0,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingX,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetY: 3,\r\n  render: renderStretchIconX(ctrlStretchImage),\r\n});\r\n\r\nimage.mr = new fabric.Control({\r\n  x: 0.5,\r\n  y: 0,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingX,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetY: 3,\r\n  offsetX: 1,\r\n  render: renderStretchIconX(ctrlStretchImage),\r\n});\r\n\r\nimage.mt = new fabric.Control({\r\n  x: 0,\r\n  y: -0.5,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingY,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetX: -3,\r\n  offsetY: -1,\r\n  render: renderStretchIconY(ctrlStretchImage),\r\n});\r\n\r\nimage.mb = new fabric.Control({\r\n  x: 0,\r\n  y: 0.5,\r\n  cursorStyleHandler: scaleSkewStyleHandler,\r\n  actionHandler: scalingY,\r\n  getActionName: scaleOrSkewActionName,\r\n  cornerSize: 42,\r\n  offsetX: -3,\r\n  offsetY: 1,\r\n  render: renderStretchIconY(ctrlStretchImage),\r\n});\r\n\r\n\r\n// fabric.Canvas.prototype.historyInit = function () {\r\n//   this.historyUndo = [];\r\n//   this.historyNextState = this.historyNext();\r\n\r\n//   this.on({\r\n//     \"object:added\": this.historySaveAction,\r\n//     \"object:removed\": this.historySaveAction,\r\n//     \"object:modified\": this.historySaveAction\r\n//   })\r\n// }\r\n\r\n// fabric.Canvas.prototype.historyNext = function () {\r\n//   return JSON.stringify(this.toDatalessJSON(this.extraProps));\r\n// }\r\n\r\n// fabric.Canvas.prototype.historySaveAction = function () {\r\n//   if (this.historyProcessing)\r\n//     return;\r\n\r\n//   const json = this.historyNextState;\r\n//   this.historyUndo.push(json);\r\n//   this.historyNextState = this.historyNext();\r\n// }\r\n\r\n// fabric.Canvas.prototype.undo = function () {\r\n//   // The undo process will render the new states of the objects\r\n//   // Therefore, object:added and object:modified events will triggered again\r\n//   // To ignore those events, we are setting a flag.\r\n//   this.historyProcessing = true;\r\n\r\n//   const history = this.historyUndo.pop();\r\n//   if (history) {\r\n//     this.loadFromJSON(history).renderAll();\r\n//   }\r\n\r\n//   this.historyProcessing = false;\r\n//   console.log(this.historyUndo);\r\n// }","import React, { useEffect } from 'react';\r\nimport './App.css';\r\nimport Editor from './containers/Editor/Editor';\r\nimport Auth from './containers/Auth/Auth';\r\nimport Homepage from './containers/Homepage/Homepage';\r\nimport UserContext from './contexts/UserContext';\r\nimport useUserState from './hooks/useUserState';\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  Switch,\r\n  Redirect,\r\n} from 'react-router-dom';\r\nimport CustomRoute from './components/CustomRoute/CustomRoute';\r\nimport useTrackTime from './hooks/useTrackTime';\r\nimport useRefreshToken from './hooks/useRefreshToken';\r\nimport setAuthToken from './utils/setAuthToken';\r\nimport Preview from './containers/Preview/Preview';\r\nimport './fabricConfig/fabricConfig';\r\n\r\nconst App = () => {\r\n  const [userState, userDispatch] = useUserState();\r\n  const { refreshToken, newToken, refreshError } = useRefreshToken();\r\n  useTrackTime(refreshToken);\r\n  useEffect(() => {\r\n    if (newToken) {\r\n      localStorage.setItem('token', newToken);\r\n      setAuthToken(newToken);\r\n    } else if (refreshError) {\r\n      localStorage.removeItem('token');\r\n      userDispatch({ type: 'setIsAuthenticated', data: false });\r\n    }\r\n  }, [newToken, refreshError, userDispatch]);\r\n\r\n  return (\r\n    <div className='App'>\r\n      <UserContext.Provider value={{ userState, userDispatch }}>\r\n        <Router basename='/'>\r\n          <Switch>\r\n            <CustomRoute\r\n              path='/auth'\r\n              redirect='/home'\r\n              where='in the App auth route'\r\n              allowed={!userState.isAuthenticated}\r\n              component={Auth}\r\n            />\r\n            <CustomRoute\r\n              path='/home'\r\n              redirect='/auth'\r\n              where='in the App home route'\r\n              allowed={userState.isAuthenticated}\r\n              component={Homepage}\r\n            />\r\n            <CustomRoute\r\n              path='/editor'\r\n              redirect='/auth'\r\n              where='in the App editor route'\r\n              allowed={userState.isAuthenticated}\r\n              component={Editor}\r\n            />\r\n            <CustomRoute\r\n              path='/preview/:id'\r\n              redirect='/auth'\r\n              where='in the App preview route'\r\n              allowed={true}\r\n              component={Preview}\r\n            />\r\n            <Route path='/'>\r\n              <Redirect to='/home' />\r\n            </Route>\r\n          </Switch>\r\n        </Router>\r\n      </UserContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"WordContainer\":\"Words_WordContainer__2MxYw\",\"Word\":\"Words_Word__3b2m1\",\"DeletedText\":\"Words_DeletedText__1n8km\",\"Deleted\":\"Words_Deleted__3CMYk\",\"WordInput\":\"Words_WordInput__3lLIb\",\"Pause\":\"Words_Pause__33kzp\",\"CurrentWord\":\"Words_CurrentWord__3w6qS\",\"Highlight\":\"Words_Highlight__cba72\",\"DeletedImgContainer\":\"Words_DeletedImgContainer__2Mj9-\",\"DeletedImg\":\"Words_DeletedImg__2JxpA\",\"InSelection\":\"Words_InSelection__33LHP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dropdown\":\"ImageDropdown_Dropdown__2eYxV\",\"UplaodButtonContainer\":\"ImageDropdown_UplaodButtonContainer__1lY8g\",\"UploadButton\":\"ImageDropdown_UploadButton__1lQXO\",\"FileInput\":\"ImageDropdown_FileInput__2Rzkx\",\"Images\":\"ImageDropdown_Images__LZdgK\",\"Column\":\"ImageDropdown_Column__27Nmx\",\"ImageContainer\":\"ImageDropdown_ImageContainer__1YX4Q\",\"Image\":\"ImageDropdown_Image__2oCLN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SideDrawer\":\"SideDrawer_SideDrawer__1Hp4L\",\"Links\":\"SideDrawer_Links__3agJG\",\"Link\":\"SideDrawer_Link__26bLH\",\"LinkText\":\"SideDrawer_LinkText__37vsx\",\"Active\":\"SideDrawer_Active__3v6LT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dropdown\":\"ShapeDropdown_Dropdown__3aeLl\",\"ShapeContainer\":\"ShapeDropdown_ShapeContainer__21oDr\",\"LineShapeContainer\":\"ShapeDropdown_LineShapeContainer__1eEMT\",\"Shape\":\"ShapeDropdown_Shape__3ZdgP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FontSizeDropdown\":\"FontSizeDropdown_FontSizeDropdown__3vQgK\",\"FontSizeOption\":\"FontSizeDropdown_FontSizeOption__5LIdC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"User\":\"User_User__1OH6i\",\"UserName\":\"User_UserName__34wjX\",\"Initials\":\"User_Initials__2M7AZ\",\"Letter\":\"User_Letter__12cie\",\"Name\":\"User_Name__xOAh7\",\"DropdownContainer\":\"User_DropdownContainer__2Bwpp\",\"Dots\":\"User_Dots__1mxvn\",\"Dropdown\":\"User_Dropdown__3Dj8L\",\"SignOut\":\"User_SignOut__1kQ7Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Projects\":\"Projects_Projects__Ml6Tj\",\"Heading\":\"Projects_Heading__1sNm8\",\"Subheading\":\"Projects_Subheading__jSsjo\",\"ProjectsList\":\"Projects_ProjectsList__3ZhTK\",\"AddProject\":\"Projects_AddProject__3o80h\",\"ProjectContainer\":\"Projects_ProjectContainer__dr8O4\",\"AddProjectInner\":\"Projects_AddProjectInner__1q9TS\",\"AddProjectText\":\"Projects_AddProjectText__2pD9X\",\"AddProjectInfo\":\"Projects_AddProjectInfo__1GsOm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Transcription\":\"Transcription_Transcription__13teg\",\"TextControls\":\"Transcription_TextControls__1U4fb\",\"OptionContainer\":\"Transcription_OptionContainer__21dCM\",\"SearchContainer\":\"Transcription_SearchContainer__3q-zR\",\"SearchInput\":\"Transcription_SearchInput__3ojca\",\"Text\":\"Transcription_Text__3pvrU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FontsDropdown\":\"FontsDropdown_FontsDropdown__2cMmK\",\"SearchContainer\":\"FontsDropdown_SearchContainer__2xV2U\",\"SearchSvg\":\"FontsDropdown_SearchSvg__2fL_Y\",\"SearchInput\":\"FontsDropdown_SearchInput__1YJKM\",\"FontOptionsContainer\":\"FontsDropdown_FontOptionsContainer__3NL_l\",\"FontOption\":\"FontsDropdown_FontOption__YA26x\",\"UploadFontContainer\":\"FontsDropdown_UploadFontContainer__BN5oN\",\"UploadFontButton\":\"FontsDropdown_UploadFontButton__2fdT4\",\"UploadFontFile\":\"FontsDropdown_UploadFontFile__17exH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageToolbar\":\"ImageToolbar_ImageToolbar__1bSOG\",\"BorderDiv\":\"ImageToolbar_BorderDiv__2L57I\",\"ReaplaceContainer\":\"ImageToolbar_ReaplaceContainer__Bvs6n\",\"RadiusContainer\":\"ImageToolbar_RadiusContainer__1809i\",\"CropContainer\":\"ImageToolbar_CropContainer__3a9ik\",\"DoneContainer\":\"ImageToolbar_DoneContainer__1sU7m\",\"RadiusInput\":\"ImageToolbar_RadiusInput__3neeS\",\"StrokeWidthArrowContainer\":\"ImageToolbar_StrokeWidthArrowContainer__2ZaEx\",\"BorderStyle\":\"ImageToolbar_BorderStyle__2Np8t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Menu\":\"ContextMenu_Menu__3Crct\",\"Option\":\"ContextMenu_Option__2sY3r\",\"Border\":\"ContextMenu_Border__2fUH-\",\"Overlay\":\"ContextMenu_Overlay__1PFYP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SignIn\":\"SignIn_SignIn__2rDwX\",\"Heading\":\"SignIn_Heading__3_D8_\",\"Subheading\":\"SignIn_Subheading__25WFn\",\"SignUpLink\":\"SignIn_SignUpLink__19pi6\",\"FormContent\":\"SignIn_FormContent__2RCot\",\"Form\":\"SignIn_Form__Qj1Re\",\"GoogleLogo\":\"SignIn_GoogleLogo__2dqJk\",\"GoogleLink\":\"SignIn_GoogleLink__1TqQV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SignUp\":\"SignUp_SignUp__FrU6o\",\"Heading\":\"SignUp_Heading__3VK7d\",\"Subheading\":\"SignUp_Subheading__3Fzc1\",\"SignInLink\":\"SignUp_SignInLink__2n2-H\",\"FormContent\":\"SignUp_FormContent__2PhXm\",\"Form\":\"SignUp_Form__2HSyr\",\"GoogleLogo\":\"SignUp_GoogleLogo__veA94\",\"GoogleLink\":\"SignUp_GoogleLink__300gn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Templates\":\"Templates_Templates__18kjm\",\"TemplateTypes\":\"Templates_TemplateTypes__1zVI4\",\"TemplateType\":\"Templates_TemplateType__16FOn\",\"Current\":\"Templates_Current__LIKEA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Controls\":\"Controls_Controls__mbKVi\",\"Visible\":\"Controls_Visible__2XX72\",\"Hover\":\"Controls_Hover__3aOvs\",\"ControlsPanel\":\"Controls_ControlsPanel__1Y7Ve\",\"PlayPause\":\"Controls_PlayPause__1XJpi\",\"FullScreen\":\"Controls_FullScreen__3oqLE\",\"FullScreenSize\":\"Controls_FullScreenSize__68-bJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Progress\":\"Progress_Progress__2E6Dv\",\"Percentage\":\"Progress_Percentage__jnSdL\",\"Heading\":\"Progress_Heading__10Jj_\",\"ProgressBar\":\"Progress_ProgressBar__cCNmS\",\"ProgressBarInner\":\"Progress_ProgressBarInner__FR8v1\",\"Subheading\":\"Progress_Subheading__2ySJW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dropdown\":\"ResizeDropdown_Dropdown__22BDd\",\"SizeOptions\":\"ResizeDropdown_SizeOptions__1ScvK\",\"SizeOption\":\"ResizeDropdown_SizeOption__2TmtL\",\"SizeOptionText\":\"ResizeDropdown_SizeOptionText__1RHTF\",\"SizeOptionBox\":\"ResizeDropdown_SizeOptionBox__T_EnZ\",\"Current\":\"ResizeDropdown_Current__3enTK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SelectContainer\":\"Select_SelectContainer__1RMVl\",\"Select\":\"Select_Select__1aFjD\",\"Selected\":\"Select_Selected__w1Ai2\",\"Valid\":\"Select_Valid__2h_nP\",\"Invalid\":\"Select_Invalid__2e9oA\",\"ErrorMessage\":\"Select_ErrorMessage__1bWOP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TranscriptionProgress\":\"TranscriptionProgress_TranscriptionProgress__3bzyV\",\"Heading\":\"TranscriptionProgress_Heading__RtL03\",\"Percentage\":\"TranscriptionProgress_Percentage__2n-2I\",\"Box\":\"TranscriptionProgress_Box__2KSuP\",\"Line\":\"TranscriptionProgress_Line__1WZ3f\",\"placeholderShimmer\":\"TranscriptionProgress_placeholderShimmer__18VTb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FontsDropdown\":\"TextDropdowns_FontsDropdown__lZ_Yz\",\"FontSizeDropdown\":\"TextDropdowns_FontSizeDropdown__zNPWy\",\"SketchPickerContainer\":\"TextDropdowns_SketchPickerContainer__1ap0H\",\"TextAlignDropdown\":\"TextDropdowns_TextAlignDropdown___lslt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Player\":\"Player_Player__29WZA\",\"PlayerContent\":\"Player_PlayerContent__GS7Av\",\"PlayerControls\":\"Player_PlayerControls__1cImT\",\"PlayButton\":\"Player_PlayButton__1jzX7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Or\":\"Or_Or__3D8lV\",\"Line\":\"Or_Line__3NIcd\",\"Text\":\"Or_Text__3K4vP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"InputContainer\":\"Input_InputContainer__FRPf0\",\"Input\":\"Input_Input__2JU04\",\"Invalid\":\"Input_Invalid__2bXHj\",\"ErrorMessage\":\"Input_ErrorMessage__NGuQM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CheckMail\":\"CheckMail_CheckMail__2juXE\",\"Heading\":\"CheckMail_Heading__2JEwf\",\"Subheading\":\"CheckMail_Subheading__3AHm5\",\"EditorLink\":\"CheckMail_EditorLink__IbMoD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dropdown\":\"Dropdown_Dropdown__3ndzl\",\"Option\":\"Dropdown_Option__2rSF0\",\"Current\":\"Dropdown_Current__1ur6I\",\"CheckMark\":\"Dropdown_CheckMark__-dXeR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TemplateList\":\"TemplateList_TemplateList__1Gw1A\",\"Heading\":\"TemplateList_Heading__2N4Be\",\"Subheading\":\"TemplateList_Subheading__1C0Z8\",\"List\":\"TemplateList_List__2XxAT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Template\":\"Template_Template__1xQdM\",\"TemplateInner\":\"Template_TemplateInner__hAH8x\",\"TemplateImgContainer\":\"Template_TemplateImgContainer__QFgie\",\"TemplateImg\":\"Template_TemplateImg__2gbr7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"InputContainer\":\"Input_InputContainer__2V1Cm\",\"Input\":\"Input_Input__2vywp\",\"Invalid\":\"Input_Invalid__36YI2\",\"ErrorMessage\":\"Input_ErrorMessage__1HkEE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Volume\":\"Volume_Volume__VAO_J\",\"VolumeButton\":\"Volume_VolumeButton__MQ56Q\",\"VolumeOff\":\"Volume_VolumeOff__1ZLBn\",\"VolumeBar\":\"Volume_VolumeBar__2Lv3T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FillDropdownContainer\":\"ShapeDropdowns_FillDropdownContainer__XKdBu\",\"StrokeDropdownContainer\":\"ShapeDropdowns_StrokeDropdownContainer__2g9Q8\",\"StrokeWidthDropdownContainer\":\"ShapeDropdowns_StrokeWidthDropdownContainer__3J5zz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Navigation\":\"Navigation_Navigation__1vpyv\",\"DownloadButton\":\"Navigation_DownloadButton__2FuTK\",\"DownloadDropdown\":\"Navigation_DownloadDropdown__2IsbQ\",\"DownloadLink\":\"Navigation_DownloadLink__3PFN5\",\"UploadVideo\":\"Navigation_UploadVideo__3uZ5a\",\"DownloadVideoContainer\":\"Navigation_DownloadVideoContainer__3mjYd\",\"DownloadVideo\":\"Navigation_DownloadVideo__1Kc0Z\",\"Close\":\"Navigation_Close__12UHs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Navbar\":\"Navbar_Navbar__3oWEF\",\"NewButton\":\"Navbar_NewButton__38UcV\",\"Plus\":\"Navbar_Plus__3mZZD\"};"],"sourceRoot":""}