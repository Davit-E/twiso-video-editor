(this["webpackJsonptwiso-video-editor"]=this["webpackJsonptwiso-video-editor"]||[]).push([[0],{11:function(e,t,a){e.exports={ControlsContainer:"DesignControls_ControlsContainer__2Nypq",DesignControl:"DesignControls_DesignControl__1FKA0",AddTextContainer:"DesignControls_AddTextContainer__2kzlD",ActiveDesignControl:"DesignControls_ActiveDesignControl__11UHN",AddImageContainer:"DesignControls_AddImageContainer__1-kZJ",AddShapeContainer:"DesignControls_AddShapeContainer__2l0qj",HoverContent:"DesignControls_HoverContent__RaV8d",HoverTriangle:"DesignControls_HoverTriangle__uOTqR",HoverText:"DesignControls_HoverText__3mdpQ",ShapeDropdown:"DesignControls_ShapeDropdown__3m4QA",ImageDropdown:"DesignControls_ImageDropdown__1kbq4",SubtitlesDropdown:"DesignControls_SubtitlesDropdown__1E3X-"}},110:function(e,t,a){e.exports={DownloadCanvas:"VideoEditor_DownloadCanvas__3rCEz",Main:"VideoEditor_Main__RsHdg"}},111:function(e,t,a){e.exports={CanvasComponent:"PlayerCanvas_CanvasComponent__2ZNRl",Canvas:"PlayerCanvas_Canvas__3KakF"}},113:function(e,t,a){e.exports={StrokeDropdownContainer:"VideoDropdowns_StrokeDropdownContainer__1cB9e",StrokeWidthDropdownContainer:"VideoDropdowns_StrokeWidthDropdownContainer__1VFYT"}},114:function(e,t,a){e.exports={CropCanvas:"CropCanvas_CropCanvas__2QUHd",Backdrop:"CropCanvas_Backdrop__15lRv"}},116:function(e,t,a){e.exports={Auth:"Auth_Auth__2-Tih",Account:"Auth_Account__FNRoH"}},117:function(e,t,a){e.exports={Homepage:"Homepage_Homepage__3OyFd",Main:"Homepage_Main__1n7s2"}},118:function(e,t,a){e.exports={VideoContainer:"CustomPlayer_VideoContainer__3sLMV",Video:"CustomPlayer_Video__3yEBQ"}},119:function(e,t,a){e.exports={Time:"Time_Time__2bwh7",Timeline:"Time_Timeline__2XAL4"}},12:function(e,t,a){e.exports={TextToolbar:"TextToolbar_TextToolbar__30rxF",BorderDiv:"TextToolbar_BorderDiv__XlYMr",DownArrow:"TextToolbar_DownArrow__3bu3E",TextAlign:"TextToolbar_TextAlign__2KX5Y",Bold:"TextToolbar_Bold__38wPs",Italic:"TextToolbar_Italic__I_P46",FontsContainer:"TextToolbar_FontsContainer__2NtOu",FontSizeContainer:"TextToolbar_FontSizeContainer__1QFbt",ColorPickerContainer:"TextToolbar_ColorPickerContainer__1EnTr",FontWeightBoldContainer:"TextToolbar_FontWeightBoldContainer__2-Bfx",FontStyleItalicContainer:"TextToolbar_FontStyleItalicContainer__6Diha",TextAlignContainer:"TextToolbar_TextAlignContainer__HLDJn",BgColorContainer:"TextToolbar_BgColorContainer__3QNkE",FontSizeInputContainer:"TextToolbar_FontSizeInputContainer__p2Uno",FontSizeInput:"TextToolbar_FontSizeInput__3nD-x",FontSizeArrowContainer:"TextToolbar_FontSizeArrowContainer__1N8MA",ColorPickerBorder:"TextToolbar_ColorPickerBorder__EGOSu",ColorPicker:"TextToolbar_ColorPicker__2Mme4",Active:"TextToolbar_Active__2gO17",BgColor:"TextToolbar_BgColor__19qDO"}},13:function(e,t,a){e.exports={LineDropdown:"StrokeWidthDropdown_LineDropdown__2P8_5",ShapeDropdown:"StrokeWidthDropdown_ShapeDropdown__1sirw",StrokeOption:"StrokeWidthDropdown_StrokeOption__2JfPD"}},155:function(e,t,a){e.exports={Editor:"Editor_Editor__3ckPM"}},156:function(e,t,a){e.exports={Uploader:"Uploader_Uploader__lgMfw"}},16:function(e,t,a){e.exports={Navbar:"Navbar_Navbar__3RMWK",BackFileInfoContainer:"Navbar_BackFileInfoContainer__3ky9K",BackButton:"Navbar_BackButton__1R1aO",HomeLinkContainer:"Navbar_HomeLinkContainer__1Dv9V",HomeLink:"Navbar_HomeLink__GI7Bo",BorderLine:"Navbar_BorderLine__3Xq1w",FileName:"Navbar_FileName__23abe",Creater:"Navbar_Creater__j3mKP",EditVideo:"Navbar_EditVideo__1kNxg",UserInfoContainer:"Navbar_UserInfoContainer__w_iEs",UserName:"Navbar_UserName__3B7D3",Initials:"Navbar_Initials__1Dx3n",Letter:"Navbar_Letter__1FlLa",LogInLink:"Navbar_LogInLink__BnnPz",SignUpLink:"Navbar_SignUpLink__33Ovn"}},160:function(e,t,a){e.exports={Toolbar:"Toolbar_Toolbar__1YXGU"}},165:function(e,t,a){e.exports={Backdrop:"Backdrop_Backdrop__ko406"}},167:function(e,t,a){e.exports={Video:"Video_Video__1FtcR"}},168:function(e,t,a){e.exports={Canvas:"SpeakersCanvas_Canvas__1_qgr"}},169:function(e,t,a){e.exports={Download:"Download_Download__oDnCR"}},17:function(e,t,a){e.exports={CanvasToolbar:"CanvasToolbar_CanvasToolbar__O2HUb",BorderDiv:"CanvasToolbar_BorderDiv__MTa7N",DownArrow:"CanvasToolbar_DownArrow__1dYUL",TemplatesContainer:"CanvasToolbar_TemplatesContainer__1VVpG",ResizeContainer:"CanvasToolbar_ResizeContainer__Hqy4C",CropContainer:"CanvasToolbar_CropContainer__3JUnP",ColorContainer:"CanvasToolbar_ColorContainer__1zr54",Active:"CanvasToolbar_Active__FkhLj",OptionText:"CanvasToolbar_OptionText__t_-zi",ResizeDropdown:"CanvasToolbar_ResizeDropdown__BY9u_",ColorPickerBorder:"CanvasToolbar_ColorPickerBorder__Uj88y",ColorPicker:"CanvasToolbar_ColorPicker__3vZ8h",ColorDropdownContainer:"CanvasToolbar_ColorDropdownContainer__3Hg_w",TemplatesDropdownContainer:"CanvasToolbar_TemplatesDropdownContainer__3ilbY"}},170:function(e,t,a){e.exports={Button:"Button_Button__364Yd"}},171:function(e,t,a){e.exports={Token:"Token_Token__dZAfL"}},172:function(e,t,a){e.exports={Slider:"TimelineSlider_Slider__3FZvE"}},173:function(e,t,a){e.exports={Slider:"VolumeSlider_Slider__3Dz_-"}},179:function(e,t,a){},180:function(e,t,a){},19:function(e,t,a){e.exports={VideoToolbar:"VideoToolbar_VideoToolbar__23h3P",BorderDiv:"VideoToolbar_BorderDiv__2wSCo",StrokeContainer:"VideoToolbar_StrokeContainer__32EUg",StrokeWidthContainer:"VideoToolbar_StrokeWidthContainer__20qdy",CircleCropContainer:"VideoToolbar_CircleCropContainer__1fOak",RadiusContainer:"VideoToolbar_RadiusContainer__ZqwJN",CropContainer:"VideoToolbar_CropContainer__2Dxpf",DoneContainer:"VideoToolbar_DoneContainer__2gT_8",StrokeWidthInput:"VideoToolbar_StrokeWidthInput__Ss4Xq",RadiusInput:"VideoToolbar_RadiusInput__1kwS5",StrokeWidthArrowContainer:"VideoToolbar_StrokeWidthArrowContainer__1aF3z",CircleCropCircle:"VideoToolbar_CircleCropCircle__3uHh9",BorderStyle:"VideoToolbar_BorderStyle__392SW",DownArrow:"VideoToolbar_DownArrow__1TUzs",ColorPickerBorder:"VideoToolbar_ColorPickerBorder__21hnf",ColorPicker:"VideoToolbar_ColorPicker__2H6CG",StrokeWidthInputContainer:"VideoToolbar_StrokeWidthInputContainer__3iFYS"}},20:function(e,t,a){e.exports={SelectSpeakers:"SelectSpeakers_SelectSpeakers__1sJES",Heading:"SelectSpeakers_Heading__8zH9K",Subheading:"SelectSpeakers_Subheading__1CSDR",Video:"SelectSpeakers_Video__3v4_Z",CanvasContainer:"SelectSpeakers_CanvasContainer__yI3pN",Controls:"SelectSpeakers_Controls__m__i7",SelectedText:"SelectSpeakers_SelectedText__29VjD",SelectedNumber:"SelectSpeakers_SelectedNumber__u1ZaC",SpeakerButtons:"SelectSpeakers_SpeakerButtons__2E6zY",AddSpeakerButton:"SelectSpeakers_AddSpeakerButton__2jPJf",RemoveSpeakerButton:"SelectSpeakers_RemoveSpeakerButton__3EhX6",AddSpeakers:"SelectSpeakers_AddSpeakers__yU4j4",RemoveSpeakers:"SelectSpeakers_RemoveSpeakers__1IG3b",AddSpeakersText:"SelectSpeakers_AddSpeakersText__bYScV",RemoveSpeakersText:"SelectSpeakers_RemoveSpeakersText__2jvXO",Confirm:"SelectSpeakers_Confirm__29WEc",Skip:"SelectSpeakers_Skip__10Iwh"}},209:function(e,t){},21:function(e,t,a){e.exports={TextAlignDropdown:"TextAlignDropdown_TextAlignDropdown__PkoUd",TextAlignOption:"TextAlignDropdown_TextAlignOption__2NPzu",Current:"TextAlignDropdown_Current__2vk5u",TextAlignImage:"TextAlignDropdown_TextAlignImage__wtSLz",TextAlignText:"TextAlignDropdown_TextAlignText__nuEMl"}},210:function(e,t){},211:function(e,t){},22:function(e,t,a){e.exports={ShapeToolbar:"ShapeToolbar_ShapeToolbar__3ltKA",BorderDiv:"ShapeToolbar_BorderDiv__1MpYU",DownArrow:"ShapeToolbar_DownArrow__MgRL3",FillContainer:"ShapeToolbar_FillContainer__dFbZJ",StrokeContainer:"ShapeToolbar_StrokeContainer__21-kB",StrokeWidthContainer:"ShapeToolbar_StrokeWidthContainer__1IzFk",RadiusContainer:"ShapeToolbar_RadiusContainer__3GI8W",ColorPickerBorder:"ShapeToolbar_ColorPickerBorder__qXCuh",ColorPicker:"ShapeToolbar_ColorPicker__2vzHo",StrokeWidthInputContainer:"ShapeToolbar_StrokeWidthInputContainer__1ISoG",StrokeWidthInput:"ShapeToolbar_StrokeWidthInput__239HS",StrokeWidthArrowContainer:"ShapeToolbar_StrokeWidthArrowContainer__2MBk5",RadiusInput:"ShapeToolbar_RadiusInput__19zGn"}},23:function(e,t,a){e.exports={Dropdown:"TemplatesDropdown_Dropdown__MdBoq",TemplateOptions:"TemplatesDropdown_TemplateOptions__350Ik",TemplateOption:"TemplatesDropdown_TemplateOption__299cX",Current:"TemplatesDropdown_Current__1sj0v",Templates:"TemplatesDropdown_Templates__1RED3",Template:"TemplatesDropdown_Template__2E35x",TemplateImg:"TemplatesDropdown_TemplateImg__13jCN",SaveTemplate:"TemplatesDropdown_SaveTemplate__38HgZ",SaveImg:"TemplatesDropdown_SaveImg__3-wgo",SaveText:"TemplatesDropdown_SaveText__3BE5c",DeleteContainer:"TemplatesDropdown_DeleteContainer__1E3G3",XLine1:"TemplatesDropdown_XLine1__26-ee",XLine2:"TemplatesDropdown_XLine2__303a-"}},24:function(e,t,a){e.exports={Project:"Project_Project__2FloU",Video:"Project_Video__2kLKG",InfoContainer:"Project_InfoContainer__7VfXZ",Info:"Project_Info__cXMOT",DateAndName:"Project_DateAndName__36dEs",Name:"Project_Name__1iMCC",Date:"Project_Date__1IAn8",OptionsContainer:"Project_OptionsContainer__2o0s8",Options:"Project_Options__2JtAe",Dots:"Project_Dots__2XgEw",Dot:"Project_Dot__3S_-i",Dropdown:"Project_Dropdown__2of2b",DropdownOption:"Project_DropdownOption__26e-S"}},25:function(e,t,a){e.exports={Preview:"Preview_Preview__17wzV",Main:"Preview_Main__1ts9X",MainContent:"Preview_MainContent__3yphW",CustomPlayer:"Preview_CustomPlayer__2cIUh",VideoFooter:"Preview_VideoFooter__14BqQ",Title:"Preview_Title__1FDCi",DownloadAndLink:"Preview_DownloadAndLink__2b3Hg",Download:"Preview_Download__1l2FY",CopyLink:"Preview_CopyLink__g0mcY",HeadlineAndExport:"Preview_HeadlineAndExport__3vxHH",Headline:"Preview_Headline__2yd8P",ExportButton:"Preview_ExportButton__3t5_Z",Text:"Preview_Text__3m3nn"}},29:function(e,t,a){e.exports={DragDrop:"DragDrop_DragDrop__69U1q",UploadText:"DragDrop_UploadText__3BF2H",DropArea:"DragDrop_DropArea__3Ck_W",DropAreaContent:"DragDrop_DropAreaContent__2FbMw",DropAreaText:"DragDrop_DropAreaText__3Nk_9",DropAreaHeading:"DragDrop_DropAreaHeading__3SZMc",DropAreaSubheading:"DragDrop_DropAreaSubheading__37y0F",DropAreaBrowse:"DragDrop_DropAreaBrowse__1ku5G",Active:"DragDrop_Active__2Le0T"}},30:function(e,t,a){e.exports={Settings:"Settings_Settings__oINJ2",Heading:"Settings_Heading__2aIcU",Form:"Settings_Form__3r9zh",Label:"Settings_Label__1qq6Z",ButtonSpinnerContainer:"Settings_ButtonSpinnerContainer__2xdqg",UpdateButton:"Settings_UpdateButton__h93wd",Billing:"Settings_Billing__1-bxN",SubHeading:"Settings_SubHeading__bsETM",Plan:"Settings_Plan___kEo6",Renewal:"Settings_Renewal__34Bs9",CancelButton:"Settings_CancelButton__1JpZ_"}},318:function(e,t,a){},319:function(e,t,a){"use strict";a.r(t);var n,r,o,i,c=a(0),s=a.n(c),l=a(154),u=a.n(l),d=(a(179),a(3)),b=(a(180),a(155)),p=a.n(b),j=a(156),h=a.n(j),f=a(29),g=a.n(f),O=a.p+"static/media/upload.e681cc4b.svg",m=a(1),v=function(e){var t=e.setVideoForUpload,a=Object(c.useRef)(null),n=Object(c.useRef)(null),r=Object(c.useCallback)((function(e){return e.preventDefault(),e.dataTransfer.dropEffect="copy",n.current.classList.add(g.a.Active),!1}),[]),o=Object(c.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),n.current.classList.add(g.a.Active)}),[]),i=Object(c.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),n.current.classList.remove(g.a.Active)}),[]),s=Object(c.useCallback)((function(e){if("video/mp4"===e.type){var a=document.createElement("video");a.preload="metadata",a.onloadedmetadata=function(){a.duration>1&&t(e)},a.src=URL.createObjectURL(e)}}),[t]),l=Object(c.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),n.current.classList.remove(g.a.Active);var t=e.dataTransfer.files[0];return s(t),!1}),[s]);return Object(c.useEffect)((function(){var e=n.current;return e.addEventListener("dragover",r,!1),e.addEventListener("dragenter",o,!1),e.addEventListener("dragleave",i,!1),e.addEventListener("drop",l,!1),function(){e.removeEventListener("dragover",r,!1),e.removeEventListener("dragenter",o,!1),e.removeEventListener("dragleave",i,!1),e.removeEventListener("drop",l,!1)}}),[r,l,o,i]),Object(m.jsxs)("div",{className:g.a.DragDrop,children:[Object(m.jsx)("p",{className:g.a.UploadText,children:"Upload a video or audio file"}),Object(m.jsx)("div",{ref:n,className:g.a.DropArea,onClick:function(){return a.current.click()},children:Object(m.jsxs)("div",{className:g.a.DropAreaContent,children:[Object(m.jsx)("img",{src:O,alt:"upload"}),Object(m.jsxs)("div",{className:g.a.DropAreaText,children:[Object(m.jsx)("p",{className:g.a.DropAreaHeading,children:"Drag & drop your file here"}),Object(m.jsxs)("p",{className:g.a.DropAreaSubheading,children:["or click to ",Object(m.jsx)("span",{className:g.a.DropAreaBrowse,children:"browse"})]})]})]})}),Object(m.jsx)("input",{ref:a,type:"file",accept:"video/mp4",style:{display:"none"},onChange:function(){return s(a.current.files[0])}})]})},S=a(55),x=a.n(S),C=function(e){var t=e.progress,a=e.heading;return Object(m.jsxs)("div",{className:x.a.Progress,children:[Object(m.jsxs)("p",{className:x.a.Percentage,children:[t,"%"]}),Object(m.jsx)("p",{className:x.a.Heading,children:a}),Object(m.jsx)("div",{className:x.a.ProgressBar,children:Object(m.jsx)("div",{className:x.a.ProgressBarInner,style:{maxWidth:t+"%"}})}),Object(m.jsx)("p",{className:x.a.Subheading,children:"Please be patient. It may take several minutes."})]})},_=a(7),w=a.n(_),k=a(8),y=a(157),T=a.n(y),N=T.a.create({baseURL:"".concat("https://holovan.eu.ngrok.io","/api/v1")}),D=N,A=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useState)(0),u=Object(d.a)(l,2),b=u[0],p=u[1],j=Object(c.useRef)(null),h=Object(c.useRef)(!1),f=function(e){var t=Math.round(100*e.loaded/e.total);h.current&&100!==t&&p(t)},g=Object(c.useCallback)((function(e){return new Promise((function(t,a){D.post("/videos",e,{onUploadProgress:f,headers:{Accept:"application/json","Content-Type":"multipart/form-data"}}).then((function(e){t(e)})).catch((function(e){a(e)}))}))}),[]),O=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(0),n(!0),e.prev=2,e.next=5,g(t);case 5:a=e.sent,console.log(a),h.current&&(p(100),j.current=a.data.subtitles.captions,s({id:a.data._id,duration:a.data.duration,url:a.data.original_video_url,title:a.data.title})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error Uploading Video",e.t0);case 13:return e.prev=13,h.current&&n(!1),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[2,10,13,17]])})));return function(t){return e.apply(this,arguments)}}(),[g]);return Object(c.useEffect)((function(){return h.current=!0,function(){return h.current=!1}}),[]),{isUploading:a,uploadVideo:O,words:j.current,info:i,uploadProgress:b}},I=a(16),R=a.n(I),E=a.p+"static/media/backArrow.1051c99a.svg",P=a(15),L=a(9),F=a.p+"static/media/twiso.8864782d.svg",M=Object(c.createContext)(null),B=M,H=function(e){var t=e.children,a=e.videoData,n=e.isPreview,r=e.getVideoError,o=e.isAuth,i=Object(c.useContext)(B).userState,s=Object(P.g)(),l=function(){var e=i.name.length>0,t=e?i.name:i.email;return e?t[0].toUpperCase()+t.slice(1):t};return Object(m.jsxs)("header",{className:R.a.Navbar,children:[Object(m.jsxs)("div",{className:R.a.BackFileInfoContainer,children:[n?null:Object(m.jsx)("div",{className:R.a.BackButton,onClick:function(){return s.goBack()},children:Object(m.jsx)("img",{className:R.a.BackArrow,src:E,alt:"back"})}),o&&n?Object(m.jsxs)("div",{className:R.a.HomeLinkContainer,children:[Object(m.jsx)(L.b,{className:R.a.HomeLink,to:"/home",children:Object(m.jsx)("img",{className:R.a.Home,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEUSURBVHgBpZK9agJBEIB3DwvTHSmTIgby12kX0iQ+QgobfxrxAfQJ9FG0sLeyFEsrUey00Uc4tBEszm9kD2TZPfwZ+LjZnZ+dmRulUiSO41DdKgTnYQZryF0TK8FNWMCnBMMSWi7fwAoMYYj6Cr9a6yVs0L/hDVsXXnyvFk3JZeWvrAFT+LINbZhc0qtpSebSObWAMub7SKk/ptxUER+QFjWxI8lYgHffkDxV1E0lHwHZ5tw9Q95ykhcq8O/I8Qc5YleZlIf6sIUHktRwLrmcMp4SZQOfCKqas/ydLOe97Rsot9grHEHW5ehLcLHcnSCZwQ6KZidEpIXozO8AA+zJuQA9UXRy49jCiKFFxhYqay7J0h0BgtiuWLa/pFkAAAAASUVORK5CYII=",alt:"back"})}),Object(m.jsx)("div",{className:R.a.BorderLine})]}):null,!o&&n?Object(m.jsx)("img",{className:R.a.Twiso,src:F,alt:"twiso"}):null,a&&!n?Object(m.jsxs)("div",{className:R.a.FileInfoContainer,children:[Object(m.jsx)("p",{className:R.a.FileName,children:a.title}),Object(m.jsx)("p",{className:R.a.Creater,children:l()})]}):null,n&&o&&!r?Object(m.jsx)(L.b,{replace:!0,to:"/editor/".concat(a.id),className:R.a.EditVideo,children:"Edit video"}):null]}),t,!o&&n?Object(m.jsxs)("div",{className:R.a.UserInfoContainer,children:[Object(m.jsx)(L.b,{to:"/auth/sign-in",className:R.a.LogInLink,children:"Log in"}),Object(m.jsx)(L.b,{to:"/auth/sign-up",className:R.a.SignUpLink,children:"Get Twiso for free"})]}):null,o||!n?Object(m.jsx)("div",{className:R.a.UserInfoContainer,children:i.email.length>0?Object(m.jsx)("div",{className:R.a.UserName,children:Object(m.jsx)("div",{className:R.a.Initials,children:Object(m.jsx)("span",{className:R.a.Letter,children:l()[0]})})}):null}):null]})},U=function(e){var t=e.viedoForUpload,a=e.setVideoForUpload,n=e.setVideoData,r=Object(c.useContext)(B).userState,o=A(),i=o.uploadVideo,s=o.info,l=o.uploadProgress,u=Object(P.g)();return Object(c.useEffect)((function(){s&&r.selectedTemplate?u.replace("/editor/".concat(s.id)):s&&n(s)}),[u,s,n,r.selectedTemplate]),Object(c.useEffect)((function(){if(t){var e=new FormData;e.append("video",t),i(e)}}),[t,i]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H,{}),Object(m.jsx)("div",{className:h.a.Uploader,children:t?Object(m.jsx)(C,{progress:l,heading:"Uploading your video"}):Object(m.jsx)(v,{setVideoForUpload:a})})]})},W=a(110),V=a.n(W),z=a(43),Y=a.n(z),X=a.p+"static/media/cut.70605b4d.svg",G=a.p+"static/media/search.243833c0.svg",Z=a.p+"static/media/undo.e9b7eaa5.svg",q=function(e,t,a,n,r,o){"delete"===e?function(e,t,a,n){for(var r=[],o=!1,i=0,c=0,s=0,l=0,u=0;u<e.length;u++){var d=e[u];d.active&&o?(o=!1,e[c].next=u,r.push({start:i,end:l})):d.active||o?!d.active&&o&&(l=d.end,s=u):(o=!0,i=d.start,c=u,l=d.end)}o&&r.push({start:i,end:l}),o&&c!==e.length-1?e[c].next=s:o&&(e[c].next=e.length-1),null!==n&&a(n,r),t([].concat(r))}(t,a,n,r):"restore"===e&&function(e,t,a,n){e((function(e){for(var r=[],o=0;o<e.length;o++){var i=e[o];i.start!==n&&r.push(i)}return t(a),[].concat(r)}))}(a,n,r,o)},K=function(e,t){for(var a=null,n=e;n>=0;n--){if(t[n].active){a=n;break}}if(null===a)for(var r=e;r<t.length;r++){if(t[r].active){a=r;break}}return a},J=a(32),Q=a.n(J),$=a.p+"static/media/restoreText.cd3d0599.svg",ee=Object(c.createContext)(null),te=ee,ae=a(2),ne=function(e,t,a,n,r){!a&&t&&e?function(e,t,a){for(var n=a.val.words,r=0;r<n.length;r++){var o=n[r];if(o._id===e){var i=0===o.text.indexOf(" ");o.text=i?" "+t:t,o.silence&&(o.silence=!1);break}}}(e,t,r):t&&a?function(e,t,a){var n=a.val.words;if(n)for(var r=0;r<n.length;r++){var o=n[r];if(o._id===e){var i=0===r;t=i?t+" ":t;var c=0!==o.text.indexOf(" ");o.text=c&&!i?" "+t:t,o.silence&&(o.silence=!1);break}}else a.val.silence=!1,a.val.words=[Object(ae.a)(Object(ae.a)({},a.val),{},{text:t})]}(e,t,r):e&&function(e,t){for(var a=t.val.words,n=0,r=0;r<a.length;r++){var o=a[r];o._id===e&&(o.text="",o.silence=!0),o.silence&&n++}n===a.length&&(t.val.silence=!0,t.val.words=null)}(e,r),n(!0)},re=function(e){var t=e.wordsArr,a=e.currentWordIndex,n=e.searchInput,r=e.wordClickHandler,o=e.inputIndex,i=e.setInputIndex,s=e.currentSelection,l=e.fabricSub,u=e.currentSub,b=e.setShouldRerenderSub,p=e.updateUndoHistory,j=Object(c.useContext)(te).editorDispatch,h=Object(c.useState)(""),f=Object(d.a)(h,2),g=f[0],O=f[1],v=Object(c.useRef)(null),S=function(e,t,a,n){var r=null,o=t[a];"textToText"===e&&o.text!==n?r={silence:!1,value:o.text}:"silenceToText"===e?r={silence:!0,value:""}:"textToSilence"!==e||o.silence||(r={silence:!1,value:o.text}),r&&p({type:"transcription",action:"textChange",target:a,change:r})},x=function(e){var a=e.target.parentNode.id,n=g.trim().length>0?g.trim():null;t[o]&&(n&&!t[o].silence?(S("textToText",t,o,n),t[o].text=n,l&&ne(a,n,!1,b,u)):n?(S("silenceToText",t,o,n),t[o].text=n,t[o].silence=!1,l&&ne(a,n,!0,b,u)):(S("textToSilence",t,o,n),l&&!t[o].silence&&ne(a,n,!1,b,u),t[o].silence=!0)),O(""),i(null),j({type:"setShouldTriggerWordsUpdate",data:!0})},C=!1,_=!0,w=!1,k=!1;return Object(c.useEffect)((function(){null!==o&&(v.current.focus(),t[o]&&!t[o].silence&&O(t[o].text))}),[o,t]),t.map((function(e,t){_=!(C&&!e.active);var i=t===a&&!s&&e.active,c=!e.silence&&e.active&&n.trim().length>1&&e.text.trim().toLowerCase().includes(n.trim().toLowerCase());C||e.active||(C=!0),C&&e.active&&(C=!1),s&&s.start===t?w=!0:s&&s.end===t?k=!0:k&&(w=!1,k=!1);var l=null!==o&&i,u=l?Object(m.jsx)("input",{ref:v,className:Q.a.WordInput,type:"text",value:g,onBlur:x,onChange:function(e){return O(e.target.value)}}):Object(m.jsx)("span",{className:e.silence?Q.a.Pause:Q.a.Word,children:e.silence?"\u2022\u2022\u2022\u2022 ":e.text+" "}),d=e.active?u:Object(m.jsxs)("span",{className:Q.a.Deleted,children:[Object(m.jsx)("span",{className:Q.a.DeletedImgContainer,children:Object(m.jsx)("img",{className:Q.a.DeletedImg,src:$,alt:"restore text"})}),Object(m.jsx)("span",{className:Q.a.DeletedText,children:"[...] "})]}),b={width:"auto"};return l&&(b.width=e.silence?"70px":1.5*e.text.length+"ch",b.marginRight="0.4rem"),_?Object(m.jsx)("span",{style:b,id:e._id,className:[Q.a.WordContainer,i?Q.a.CurrentWord:null,c?Q.a.Highlight:null,w?Q.a.InSelection:null].join(" "),onClick:function(t){return r(t,!e.active)},children:d},e._id):null}))},oe=function(e,t,a){var n=t[e];if(a&&n){for(var r=a.head,o=0;o<a.length;o++){var i=r.val;if(i.words&&+i.end>=+n.start)for(var c=0;c<i.words.length;c++){var s=i.words[c];if(s&&s._id===n._id)return r}else if(i.silence&&n._id===i._id)return r;r=r.next}return null}return null},ie=function(e,t){for(var a=0;a<t.length;a++){if(t[a]._id===e)return a}return null},ce=function(e,t){for(var a=e-1;a>=0;a--){if(t[a].active)return a}return null},se=function(e,t){for(var a=e+1;a<t.length;a++){if(t[a].active)return a}return null},le=a(10),ue=a(59),de=a.n(ue),be=function(e){var t=e.status,a=e.words,n=e.setIsFinished,r=Object(c.useState)(0),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useRef)(null),b=Object(c.useState)(!0),p=Object(d.a)(b,2),j=p[0],h=p[1];Object(c.useEffect)((function(){j&&(t.isFinished&&n(!0),h(!1))}),[j,t,n]),Object(c.useEffect)((function(){var e=u.current;return function(){e&&clearInterval(e)}}),[]);var f=Object(c.useCallback)((function(e){var t=setInterval((function(){l.current&&s((function(e){return e>=99?(clearInterval(t),99):e+1}))}),e);u.current=t}),[]),g=Object(c.useCallback)((function(e){if(e.timeLeft&&e.timeLeft>1){u.current&&clearInterval(u.current);var t=new Date(1e3*+e.startDate),a=new Date,n=Math.floor((a-t)/1e3),r=100*n/(n+e.timeLeft);s(r);var o=1e3*e.timeLeft/(100-r);s(r),f(o)}else s(99)}),[f]);return Object(c.useEffect)((function(){if(!j&&t.isFinished){clearInterval(u.current);var e=setInterval((function(){l.current&&s((function(t){return t>=100?(clearInterval(e),100):t+1}))}),100)}else g(t);return function(){0}}),[j,t,g]),Object(c.useEffect)((function(){var e=null;return 100===i&&a&&(e=setTimeout((function(){l.current&&n(!0)}),500)),function(){null!==e&&clearTimeout(e)}}),[i,a,n]),Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),Object(m.jsx)("div",{className:de.a.TranscriptionProgress,children:j?null:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:de.a.Heading,children:"We are transcribing your video, this process may take several minutes. Once it's finished, you can edit your video by editing text."}),Object(m.jsxs)("p",{className:de.a.Percentage,children:[Math.floor(i),"%"]}),Object(m.jsx)("div",{className:de.a.Box,children:Object(le.a)(Array(20)).map((function(e,t){return Object(m.jsx)("div",{className:de.a.Line},t)}))})]})})},pe=function(e){var t=e.words,a=e.currentWordIndex,n=e.setCurrentWordIndex,r=e.videoRef,o=e.setCuts,i=e.currentSelection,s=e.setCurrentSelection,l=e.currentSub,u=e.fabricSub,b=e.setShouldRerenderSub,p=e.status,j=e.shouldCut,h=e.setShouldCut,f=e.isNextWord,g=e.setIsNextWord,O=e.isPrevWord,v=e.setIsPrevWord,S=e.dispatch,x=e.updateUndoHistory,C=e.setPlayerTime,_=Object(c.useState)(""),w=Object(d.a)(_,2),k=w[0],y=w[1],T=Object(c.useState)(null),N=Object(d.a)(T,2),D=N[0],A=N[1],I=Object(c.useState)(!0),R=Object(d.a)(I,2),E=R[0],P=R[1],L=Object(c.useState)(!1),F=Object(d.a)(L,2),M=F[0],B=F[1],H=Object(c.useCallback)((function(){t&&(r.current&&r.current.pause(),!i&&null!==a&&t?function(e,t,a,n,r,o){e[t].active=!1,o({type:"transcription",action:"delete",target:[t]});var i=K(t,e);a(i),q("delete",e,n,r,i)}(t,a,n,o,C,x):i&&t&&function(e,t,a,n,r,o,i){for(var c=a.start,s=a.end,l=[],u=c;u<e.length;u++){var d=e[u];if(d.active&&l.push(u),d.active=!1,u===s)break}i({type:"transcription",action:"delete",target:[].concat(l)});var b=K(c,e);t(b),q("delete",e,r,o,b),n(null)}(t,n,i,s,o,C,x),document.getSelection().removeAllRanges())}),[i,a,s,n,o,C,r,t,x]),U=Object(c.useCallback)((function(e,o){e(!1),r.current&&r.current.pause();var i=o(a,t);null!==i&&(document.getSelection().removeAllRanges(),s(null),C(i),n(i))}),[a,n,t,r,C,s]);Object(c.useEffect)((function(){j?(h(!1),H()):f&&t?U(g,se):O&&t&&U(v,ce)}),[j,h,H,f,g,O,v,t,U]),Object(c.useEffect)((function(){if(E&&t){P(null);var e=K(0,t);n(e),q("delete",t,o,C,e)}}),[E,t,o,C,n]);var W=Object(c.useCallback)((function(e){var a=document.getSelection();if(e.detail<2&&a.anchorNode&&a.focusNode){var o=a.anchorNode.parentNode,i=a.focusNode.parentNode,c="SPAN"===o.tagName,l="SPAN"===i.tagName,u=a.anchorNode.compareDocumentPosition(a.focusNode);!c&&!l||a.isCollapsed||(r.current&&r.current.pause(),function(e,t,a,n,r,o,i,c,s,l){var u="",d="";if(t.parentNode.id===a.parentNode.id){var b=ie(t.parentNode.id,l);t.parentNode.id&&null!==b&&(s(b),i(b)),e.removeAllRanges(),c(null)}else n&&r?4===o?(u=t.parentNode.id,d=a.parentNode.id):2===o&&(u=a.parentNode.id,d=t.parentNode.id):n?4===o?(u=t.parentNode.id,d=t.parentNode.parentNode.lastChild.id):2===o&&(u=t.parentNode.parentNode.firstChild.id,d=t.parentNode.id):r&&(4===o?(u=t.parentNode.parentNode.firstChild.parentNode.id,d=a.id):2===o&&(u=a.id,d=t.parentNode.parentNode.lastChild.parentNode.id));if(""!==u&&""!==d){var p=ie(u,l),j=ie(d,l);null!==p&&null!==j&&(c({start:p,end:j}),s(p),i(p))}}(a,o,i,c,l,u,n,s,C,t))}}),[r,n,s,C,t]);return Object(c.useEffect)((function(){return document.addEventListener("mouseup",W),function(){return document.removeEventListener("mouseup",W)}}),[W]),Object(m.jsxs)("div",{className:Y.a.Transcription,children:[Object(m.jsxs)("div",{className:Y.a.TextControls,children:[Object(m.jsxs)("div",{className:Y.a.OptionContainer,onClick:H,children:[Object(m.jsx)("img",{src:X,alt:"cut"}),Object(m.jsx)("p",{children:"Cut"})]}),Object(m.jsxs)("div",{className:Y.a.OptionContainer,onClick:function(){return S({type:"setShouldUndo",data:!0})},children:[Object(m.jsx)("img",{src:Z,alt:"cut"}),Object(m.jsx)("p",{children:"Undo"})]}),Object(m.jsxs)("div",{className:Y.a.SearchContainer,children:[Object(m.jsx)("input",{value:k,onChange:function(e){return y(e.target.value)},className:Y.a.SearchInput,placeholder:"Search",type:"text"}),Object(m.jsx)("img",{className:Y.a.SearchSvg,src:G,alt:"search"})]})]}),Object(m.jsx)("div",{id:"textbox",className:Y.a.Text,children:M?Object(m.jsx)(re,{wordsArr:t,currentWordIndex:a,searchInput:k,wordClickHandler:function(e,a){var i=e.currentTarget.id,c=ie(i,t);r.current&&r.current.pause(),e.detail>1&&null===D&&A(c),a||null!==D||null===c?null===D&&function(e,t,a,n,r,o,i){for(var c=[],s=t;s<e.length;s++){var l=e[s];if(l.active)break;l.active=!0,c.push(s),null!==l.next&&(l.next=null)}i({type:"transcription",action:"restore",target:[].concat(c)});var u=e[t].start;q("restore",null,r,o,t,u),n(null),document.getSelection().removeAllRanges(),a(t)}(t,c,n,s,o,C,x):(s(null),C(c),n(c))},inputIndex:D,setInputIndex:A,currentSelection:i,fabricSub:u,currentSub:l,setShouldRerenderSub:b,updateUndoHistory:x}):Object(m.jsx)(be,{status:p,words:t,setIsFinished:B})})]})},je=a(64),he=a.n(je),fe=a(111),ge=a.n(fe),Oe=a(4),me=function(e,t,a){e.cropRect&&(t.cropRect={x:e.cropRect.x*a.width/e.originalWidth,y:e.cropRect.y*a.height/e.originalHeight,w:e.cropRect.w*a.width/e.originalWidth,h:e.cropRect.h*a.height/e.originalHeight},t.width=t.cropRect.w,t.height=t.cropRect.h);var n=1;n=t.width*e.scaleX>t.height*e.scaleY?e.width*e.scaleX/t.width:e.height*e.scaleY/t.height,t.scaleX=n,t.scaleY=n},ve=function(e,t,a,n,r,o,i){var c=a.getActiveObject();e?(!function(e,t,a,n,r){var o=new Oe.fabric.CustomImage(e,{originalWidth:e.width,originalHeight:e.height,width:e.width,height:e.height,src:t,top:r.top,left:r.left,id:r.id,cornerRadius:n?0:r.cornerRadius,angle:r.angle,isSvg:n,crossOrigin:"Anonymous"});me(r,o,e),a.remove(r),a.add(o).setActiveObject(o),a.requestRenderAll()}(e,t,a,n,c),i({type:"setShouldUpdateImage",data:!0})):function(e,t,a,n,r,o,i){var c=new Image;c.crossOrigin="Anonymous",c.src=e;var s=new Oe.fabric.CustomImage(c,{originalWidth:0,originalHeight:0,width:t.width,height:t.height,src:e,scaleX:t.scaleX,scaleY:t.scaleY,top:t.top,left:t.left,id:t.id,cornerRadius:a?0:t.cornerRadius,angle:t.angle,isSvg:a,crossOrigin:"Anonymous",excludeFromExport:!0,opacity:0});n.remove(t),n.add(s).setActiveObject(s),n.requestRenderAll(),c.onload=function(){r.current&&(s.originalWidth=c.width,s.originalHeight=c.height,s.width=c.width,s.height=c.height,me(t,s,c),s.excludeFromExport=!1,s.opacity=1,n.requestRenderAll(),o((function(e){return[].concat(Object(le.a)(e),[c])})),i({type:"setShouldUpdateImage",data:!0}),i({type:"setShouldTriggerCanvasUpdate",data:!0}))}}(t,c,n,a,r,o,i),i({type:"setShouldReplaceImage",data:!1})},Se=function(e,t,a,n,r,o,i,c,s){e?function(e,t,a,n,r,o){var i=new Oe.fabric.CustomImage(e,{originalWidth:e.width,originalHeight:e.height,width:e.width,height:e.height,src:t,scaleX:256/e.width,scaleY:256/e.width,left:100,top:100,id:r,cornerRadius:0,isSvg:n,crossOrigin:"Anonymous"});a.add(i).setActiveObject(i),a.requestRenderAll(),o()}(e,t,a,n,c,s):function(e,t,a,n,r,o,i,c){var s=new Image;s.crossOrigin="Anonymous",s.src=e;var l=s.width,u=s.height;0!==l&&0!==u||(l=256,u=320);var d=256/l,b=new Oe.fabric.CustomImage(s,{originalWidth:0,originalHeight:0,width:l,height:u,src:e,scaleX:d,scaleY:d,left:100,top:100,id:o,cornerRadius:0,isSvg:t,crossOrigin:"Anonymous",excludeFromExport:!0});a.add(b).setActiveObject(b),a.requestRenderAll(),i(),s.onload=function(){n.current&&(b.originalWidth=s.width,b.originalHeight=s.height,b.width=s.width,b.height=s.height,b.scaleX=256/s.width,b.scaleY=256/s.width,b.excludeFromExport=!1,a.requestRenderAll(),r((function(e){return[].concat(Object(le.a)(e),[s])})),c({type:"setShouldTriggerCanvasUpdate",data:!0}))}}(t,n,a,r,o,c,s,i)},xe=function(){var e=Object(k.a)(w.a.mark((function e(t,a,n,r,o,i,c,s){var l,u,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=t.imageToAdd.src,u=i.filter((function(e){return e.src===l}))[0],d="svg"===t.imageToAdd.type,t.shouldReplaceImage?ve(u,l,a,d,s,c,n):Se(u,l,a,d,s,c,n,r,o),n({type:"setImageToAdd",data:null});case 5:case"end":return e.stop()}}),e)})));return function(t,a,n,r,o,i,c,s){return e.apply(this,arguments)}}(),Ce=function(e,t,a,n,r){a({type:"setShapeToAdd",data:null});var o=null;"square"===e.shapeToAdd?o=new Oe.fabric.Rect({left:100,top:100,width:152,height:152,noScaleCache:!1,strokeUniform:!0,fill:"rgba(196,196,196,1)",stroke:"rgba(255,255,255,1)",strokeWidth:0,rx:0,ry:0}):"circle"===e.shapeToAdd?o=new Oe.fabric.Circle({left:100,top:100,radius:76,noScaleCache:!1,strokeUniform:!0,fill:"rgba(196,196,196,1)",stroke:"rgba(255,255,255,1)",strokeWidth:0,rx:0,ry:0}):"triangle"===e.shapeToAdd?o=new Oe.fabric.Triangle({left:100,top:100,width:152,height:150,noScaleCache:!1,strokeUniform:!0,fill:"rgba(196,196,196,1)",stroke:"rgba(255,255,255,1)",strokeWidth:0,rx:0,ry:0}):"line"===e.shapeToAdd&&(o=new Oe.fabric.Line([0,0,300,0],{left:100,top:100,stroke:"rgba(196,196,196,1)",strokeWidth:2,noScaleCache:!1,rx:0,ry:0})),o&&(o.id=n,t.add(o).setActiveObject(o),t.requestRenderAll(),r())},_e=function(e,t,a,n,r,o,i){var s=Object(c.useRef)(!1);Object(c.useEffect)((function(){return s.current=!0,function(){return s.current=!1}}),[]),Object(c.useEffect)((function(){e.shapeToAdd?Ce(e,a,t,n,r):e.imageToAdd?xe(e,a,t,n,r,o,i,s):e.shouldAddText&&function(e,t,a,n,r){a({type:"setShouldAddText",data:!1});var o=new Oe.fabric.CustomTextbox("Add\u2004text\u200e",Object(ae.a)({left:100,top:100,width:130,splitByGrapheme:!0},t.textState));o.id=n,e.add(o).setActiveObject(o),e.requestRenderAll(),r()}(a,e,t,n,r)}),[a,t,e,n,r,o,i])},we=Object(c.createContext)(null),ke=we,ye=a(159),Te=a.n(ye),Ne=["Inter"],De=function(e,t){var a=0,n=e.width,r=e.height;return e.cropRect&&(n=e.cropRect.w,r=e.cropRect.h),a=(n+=e.strokeWidth)<(r+=e.strokeWidth)?n*t/200:r*t/200,new Oe.fabric.Rect({width:e.width+e.strokeWidth,height:e.height+e.strokeWidth,rx:a,ry:a,left:(-e.width-e.strokeWidth)/2,top:(-e.height-e.strokeWidth)/2,noScaleCache:!1})},Ae=function(e,t,a,n){e.set({fontFamily:t}),a.requestRenderAll(),n&&n({type:"setShouldTriggerCanvasUpdate",data:!0})},Ie=function(e,t,a,n){Ne.includes(a)?Ae(t,a,e,n):Te.a.load({google:{families:[a]},timeout:5e3,fontactive:function(r,o){Ne.push(a),Ae(t,r,e,n)}})},Re=function(e,t){if(!e.isOnScreen()){var a=t.getZoom(),n=t.getWidth()/a,r=t.getHeight()/a,o=e.height*e.scaleY,i=e.width*e.scaleX;"subtitle"===e.id?(e.left=t.getWidth()/t.getZoom()/2,e.top=t.getHeight()/t.getZoom()-e.height-e.paddingY):(e.angle=0,e.setCoords(),e.top>r?e.top=r-o:e.top<0&&(e.top=0),e.left>n?e.left=n-i:e.left<0&&(e.left=0)),e.setCoords()}},Ee=function(e,t,a){var n=t.getZoom(),r=t.getWidth()/n,o=t.getHeight()/n,i=e.height*e.scaleY,c=e.width*e.scaleX,s="subtitle"===e.type,l="customTextbox"===e.type||s,u="vertical"===t.resize,d=u&&(c>2*r/3||i>2*o/3);if(d&&l)e.width=r/2,c=r/2;else if(d){var b=2*r/3/e.width;e.scaleX=b,e.scaleY=b,c=e.width*e.scaleX,i=e.height*e.scaleY}if(l&&u&&+e.fontSize>30&&a&&(e.fontSize=30,a({type:s?"setSubtitlesFontSize":"setFontSize",data:30})),e.isOnScreen()||s){if(s){e.left=r/2;var p=o-e.height-e.paddingY;e.top=p>0?p:e.height/2,e.width=550<r/2?550:r/2}}else e.angle=0,e.setCoords(),e.top>o?e.top=o-i:e.top<0&&(e.top=0),e.left>r?e.left=r-c:e.left<0&&(e.left=0);e.setCoords()},Pe=["fontFamily","fontStyle","fontWeight","fontSize","fill","opacity","textAlign"],Le=["fill","stroke","strokeWidth","rx","ry"],Fe=["cornerRadius","isSvg"],Me=["cornerRadius","stroke","strokeWidth"],Be=function(e,t,a,n){var r={};"video"===e.target.type&&null===e.target.stroke&&(e.target.stroke="rgba(255,255,255,1)"),n.forEach((function(t){r[t]=e.target[t]})),t({type:a,data:r})},He=function(e,t){var a={type:"",object:null};t({type:"setCurrentCoords",data:e.target.lineCoords}),"activeSelection"===e.target.type?a.type="activeSelection":"customTextbox"===e.target.type?(a.type="text",Be(e,t,"setTextState",Pe)):"customImage"===e.target.type?(a.type="customImage",Be(e,t,"setImageState",Fe)):"subtitle"===e.target.type?a.type="subtitle":"video"===e.target.type?(a.type="video",Be(e,t,"setVideoState",Me)):(a.type=e.target.type,Be(e,t,"setShapeState",Le)),a.object=e.target,t({type:"setCurrentObject",data:a})},Ue=function(e,t){e(!0),t({type:"setIsModifyingObject",data:!0})},We=function(e,t,a,n){var r=Object(c.useContext)(ke),o=r.eventState,i=r.eventDispatch,s=Object(c.useState)(!1),l=Object(d.a)(s,2),u=l[0],b=l[1],p=Object(c.useRef)(!0),j=Object(c.useRef)(null),h=Object(c.useCallback)((function(e){e.on("text:editing:entered",(function(t){return function(e,t,a,n){a(!0),n({type:"setIsModifyingObject",data:!0}),"Add\u2004text\u200e"===e.target.text&&(e.target.text="",e.target.hiddenTextarea.value="",e.target.setCoords(),t.renderAll())}(t,e,b,a)})),e.on("text:editing:exited",(function(t){return function(e,t,a,n){a(!1),n({type:"setIsModifyingObject",data:!1}),""===e.target.text&&(e.target.text="Add\u2004text\u200e"),e.target.setCoords(),t.renderAll()}(t,e,b,a)})),e.on("selection:created",(function(e){return function(e,t){return He(e,t)}(e,a)})),e.on("selection:updated",(function(e){return function(e,t){t({type:"setShowToolbar",data:!1}),He(e,t)}(e,a)})),e.on("object:modified",(function(t){return function(e,t,a,n,r){if(("customImage"===e.target.type||"video"===e.target.type)&&("scaleX"===e.action||"scaleY"===e.action)){var o=e.target.cornerRadius;0!==o&&e.target.set("clipPath",De(e.target,o))}He(e,a),"rotate"!==e.action&&Re(e.target,t),"drag"===e.action&&n({type:"setIsMoving",data:!1}),r(!1),a({type:"setIsModifyingObject",data:!1}),"activeSelection"!==e.target.type&&a({type:"setShouldTriggerCanvasUpdate",data:!0})}(t,e,a,i,b)})),e.on("object:added",(function(t){return function(e,t,a,n){n&&a.bringToFront(n),("customImage"!==e.target.type||0!==e.target.originalWidth&&0!==e.target.originalHeight)&&t({type:"setShouldTriggerCanvasUpdate",data:!0})}(t,a,e,n)})),e.on("object:removed",(function(e){return function(e,t){t({type:"setShouldTriggerCanvasUpdate",data:!0})}(0,a)})),e.on("selection:cleared",(function(t){return function(e,t,a,n){if(e.deselected&&e.deselected.length>1)for(var r=0;r<e.deselected.length;r++)Re(e.deselected[r],t);n.current=null,a({type:"setCurrentObject",data:{type:"",object:null}}),a({type:"setCurrentCoords",data:null}),a({type:"setShouldTriggerCanvasUpdate",data:!0})}(t,e,a,j)})),e.on("object:rotating",(function(){return Ue(b,a)})),e.on("object:scaling",(function(){return Ue(b,a)}))}),[a,i,n]);Object(c.useEffect)((function(){return e&&h(e),function(){var t;e&&((t=e).off("selection:created"),t.off("selection:updated"),t.off("selection:cleared"),t.off("object:modified"),t.off("object:added"),t.off("object:removed"),t.off("object:rotating"),t.off("object:scaling"),t.off("text:editing:entered"),t.off("text:editing:exited"))}}),[e,h]),Object(c.useEffect)((function(){if(!p.current){var e=!0;(u||o.isMoving||!t.currentCoords||t.isCropMode||"activeSelection"===t.currentObject.type)&&(e=!1),a({type:"setShowToolbar",data:e})}}),[o,u,t.isCropMode,t.currentCoords,t.currentObject,a]),Object(c.useEffect)((function(){p.current?p.current=!1:t.currentCoords&&"activeSelection"!==t.currentObject.type?t.currentObject.object&&t.currentObject.object.id!==j.current&&(j.current=t.currentObject.object.id,a({type:"setShowToolbar",data:!0})):a({type:"setShowToolbar",data:!1})}),[t.currentCoords,t.currentObject,a,t.isCropMode])},Ve=function(e,t,a,n,r,o,i,c,s){r.save(),r.lineWidth=o,r.strokeStyle=i,r.beginPath(),r.moveTo((e+c[4])*s,(t+c[5])*s),r.lineTo((a+c[4])*s,(n+c[5])*s),r.stroke(),r.restore()},ze=function(e,t,a){e=Math.round(e),t=Math.round(t);for(var n=e-a,r=e+a;n<=r;n++)if(n===t)return!0;return!1},Ye=function(e,t,a,n,r,o){Ve(e.x+.5,e.y1>e.y2?e.y2:e.y1,e.x+.5,e.y2>e.y1?e.y2:e.y1,t,a,n,r,o)},Xe=function(e,t,a,n,r,o){Ve(e.x1>e.x2?e.x2:e.x1,e.y+.5,e.x2>e.x1?e.x2:e.x1,e.y+.5,t,a,n,r,o)},Ge=function(e,t,a,n,r,o,i,c){r.save(),r.strokeStyle=o,r.lineWidth=i,r.beginPath(),r.moveTo(e*c[0],t*c[3]),r.lineTo(a*c[0],n*c[3]),r.stroke(),r.restore()},Ze=function(e,t,a,n,r,o,i){var s=Object(c.useState)(null),l=Object(d.a)(s,2),u=l[0],b=l[1],p=Object(c.useState)(null),j=Object(d.a)(p,2),h=j[0],f=j[1],g=Object(c.useState)([]),O=Object(d.a)(g,2),m=O[0],v=O[1],S=Object(c.useState)([]),x=Object(d.a)(S,2),C=x[0],_=x[1],w=Object(c.useState)(1),k=Object(d.a)(w,2),y=k[0],T=k[1],N=Object(c.useState)(null),D=Object(d.a)(N,2),A=D[0],I=D[1],R=Object(c.useState)(null),E=Object(d.a)(R,2),P=E[0],L=E[1],F=Object(c.useState)({}),M=Object(d.a)(F,2),B=M[0],H=M[1],U=Object(c.useState)({}),W=Object(d.a)(U,2),V=W[0],z=W[1],Y=Object(c.useState)(null),X=Object(d.a)(Y,2),G=X[0],Z=X[1],q=Object(c.useState)(null),K=Object(d.a)(q,2),J=K[0],Q=K[1],$="rgb(111, 123, 208)",ee="rgb(111, 123, 208)",te=Object(c.useCallback)((function(){f(a.viewportTransform),T(a.getZoom())}),[a]),ae=Object(c.useCallback)((function(){a.clearContext(a.contextTop)}),[a]),ne=Object(c.useCallback)((function(e){!function(e,t,a,n,r,o,i){var c=e.target,s=t.getObjects(),l=c.getCenterPoint(),u=l.x,d=l.y,b=c.getBoundingRect(),p=b.height/a[3],j=b.width/a[0],h=!1,f=!1;if(t._currentTransform){for(var g=function(e){if(s[e]===c)return"continue";var t=s[e].getCenterPoint(),l=t.x,b=t.y,g=s[e].getBoundingRect(),O=g.height/a[3],m=g.width/a[0];ze(l,u,i)&&(f=!0,r((function(e){return[].concat(Object(le.a)(e),[{x:l,y1:b<d?b-O/2-n:b+O/2+n,y2:d>b?d+p/2+n:d-p/2-n}])})),c.setPositionByOrigin(new Oe.fabric.Point(l,d),"center","center")),ze(l-m/2,u-j/2,i)&&(f=!0,r((function(e){return[].concat(Object(le.a)(e),[{x:l-m/2,y1:b<d?b-O/2-n:b+O/2+n,y2:d>b?d+p/2+n:d-p/2-n}])})),c.setPositionByOrigin(new Oe.fabric.Point(l-m/2+j/2,d),"center","center")),ze(l+m/2,u+j/2,i)&&(f=!0,r((function(e){return[].concat(Object(le.a)(e),[{x:l+m/2,y1:b<d?b-O/2-n:b+O/2+n,y2:d>b?d+p/2+n:d-p/2-n}])})),c.setPositionByOrigin(new Oe.fabric.Point(l+m/2-j/2,d),"center","center")),ze(b,d,i)&&(h=!0,o((function(e){return[].concat(Object(le.a)(e),[{y:b,x1:l<u?l-m/2-n:l+m/2+n,x2:u>l?u+j/2+n:u-j/2-n}])})),c.setPositionByOrigin(new Oe.fabric.Point(u,b),"center","center")),ze(b-O/2,d-p/2,i)&&(h=!0,o((function(e){return[].concat(Object(le.a)(e),[{y:b-O/2,x1:l<u?l-m/2-n:l+m/2+n,x2:u>l?u+j/2+n:u-j/2-n}])})),c.setPositionByOrigin(new Oe.fabric.Point(u,b-O/2+p/2),"center","center")),ze(b+O/2,d+p/2,i)&&(h=!0,o((function(e){return[].concat(Object(le.a)(e),[{y:b+O/2,x1:l<u?l-m/2-n:l+m/2+n,x2:u>l?u+j/2+n:u-j/2-n}])})),c.setPositionByOrigin(new Oe.fabric.Point(u,b+O/2-p/2),"center","center"))},O=s.length;O--;)g(O);h||o([]),f||r([])}}(e,a,h,5,v,_,4),function(e,t,a,n,r,o,i,c){var s=e.target,l=s.getCenterPoint();if(t._currentTransform){var u=Math.round(l.x)in r,d=Math.round(l.y)in o;a(u),n(d),(u||d)&&s.setPositionByOrigin(new Oe.fabric.Point(u?i/2:l.x,d?c/2:l.y),"center","center")}}(e,a,Z,Q,B,V,A,P)}),[a,h,P,V,A,B]),re=Object(c.useCallback)((function(){for(var e=m.length;e--;)Ye(m[e],u,1,$,h,y);for(var t=C.length;t--;)Xe(C[t],u,1,$,h,y);G&&function(e,t,a,n,r,o){Ge(e+.5,0,e+.5,t,a,n,r,o)}(A/2,P,u,ee,1,h),J&&function(e,t,a,n,r,o){Ge(0,e+.5,t,e+.5,a,n,r,o)}(P/2,A,u,ee,1,h)}),[u,h,C,m,y,P,A,J,G]),oe=Object(c.useCallback)((function(){v([]),_([]),Z(null),Q(null),a.requestRenderAll()}),[a]),ie=Object(c.useCallback)((function(){b(a.getSelectionContext()),I(a.getWidth()/a.getZoom()),L(a.getHeight()/a.getZoom());for(var e={},t={},n=A/2-4,r=A/2+4;n<=r;n++)e[Math.round(n)]=!0;for(var o=P/2-4,i=P/2+4;o<=i;o++)t[Math.round(o)]=!0;H(e),z(t)}),[P,A,a]),ce=Object(c.useCallback)((function(e){e.off("mouse:down"),e.off("object:moving"),e.off("mouse:up"),e.off("mouse:dblclick"),e.off("mouse:down:before")}),[]),se=Object(c.useCallback)((function(e){e.off("before:render"),e.off("after:render")}),[]);Object(c.useEffect)((function(){a&&ie()}),[t.shouldUpdateCanvasSize,a,ie]),Object(c.useEffect)((function(){return a&&u&&(a.on("mouse:down",te),a.on("object:moving",(function(t){e&&!n.isMoving&&(r({type:"setIsMoving",data:!0}),o({type:"setIsModifyingObject",data:!0})),ne(t)})),a.on("mouse:up",(function(t){e&&3===t.button&&(r({type:"setRightClickEvent",data:t}),t.e.preventDefault()),oe(t)})),a.on("mouse:dblclick",(function(t){e&&t.target&&("customImage"===t.target.type||"video"===t.target.type)&&r({type:"setDbClickEvent",data:t})}))),function(){a&&u&&ce(a)}}),[e,n,r,o,t.shouldUpdateCanvasSize,ce,a,u,oe,ne,te]),Object(c.useEffect)((function(){return a&&u&&!i?(a.on("before:render",ae),a.on("after:render",re)):i&&se(a),function(){a&&u&&se(a)}}),[t.shouldUpdateCanvasSize,i,se,a,u,re,ae])},qe=["rect","circle","triangle","line"],Ke=function(e,t,a){Object(c.useEffect)((function(){e.shouldUpdateSubtitles&&function(e,t,a){var n=e.currentObject.object;if(n){var r=e.subtitlesState;n._clearCache();for(var o=0,i=Object.entries(r);o<i.length;o++){var c=Object(d.a)(i[o],2),s=c[0],l=c[1];"fontFamily"!==s&&n.set(s,l)}Ie(t,n,r.fontFamily,a),e.showToolbar||a({type:"setShowToolbar",data:!0})}a({type:"setShouldUpdateSubtitles",data:!1})}(e,a,t),e.shouldUpdateText&&function(e,t,a){var n=e.currentObject.object,r=e.textState;if(r&&n){n._clearCache();for(var o=0,i=Object.entries(r);o<i.length;o++){var c=Object(d.a)(i[o],2),s=c[0],l=c[1];"fontFamily"!==s&&n.set(s,l)}Ie(t,n,r.fontFamily,a),e.showToolbar||a({type:"setShowToolbar",data:!0})}a({type:"setShouldUpdateText",data:!1})}(e,a,t),e.shouldUpdateShape&&qe.includes(e.currentObject.type)&&function(e,t,a){var n=e.currentObject.object;if(n){for(var r=0,o=Object.entries(e.shapeState);r<o.length;r++){var i=Object(d.a)(o[r],2),c=i[0],s=i[1];n.set(c,s)}e.showToolbar||a({type:"setShowToolbar",data:!0}),t.requestRenderAll()}a({type:"setShouldUpdateShape",data:!1}),a({type:"setShouldTriggerCanvasUpdate",data:!0})}(e,a,t),e.shouldUpdateImage&&"customImage"===e.currentObject.type&&function(e,t,a){var n=e.currentObject.object;if(n&&"customImage"===n.type&&n.originalWidth>0&&n.originalHeight>0){var r=e.imageState.cornerRadius;0===r?n.clipPath=null:n.set("clipPath",De(n,r)),n.cornerRadius=r,t.requestRenderAll()}a({type:"setShouldUpdateImage",data:!1}),a({type:"setShouldTriggerCanvasUpdate",data:!0})}(e,a,t),e.shouldUpdateVideo&&function(e,t,a){var n=e.currentObject.object;if(n&&"video"===n.type){var r=e.videoState.cornerRadius;0===r?n.clipPath=null:n.set("clipPath",De(n,r));for(var o=0,i=Object.entries(e.videoState);o<i.length;o++){var c=Object(d.a)(i[o],2),s=c[0],l=c[1];n.set(s,l)}e.showToolbar||a({type:"setShowToolbar",data:!0}),t.requestRenderAll()}a({type:"setShouldUpdateVideo",data:!1}),a({type:"setShouldTriggerCanvasUpdate",data:!0})}(e,a,t)}),[e,t,a])},Je=function(e,t){var a=Math.min(e.width/e.videoWidth,e.height/e.videoHeight);t.setZoom(a),t.setDimensions({width:e.width,height:e.height}),t.renderAll()},Qe=function(e,t,a){Object(c.useEffect)((function(){e.shouldUpdateCanvas&&function(e,t,a){t.backgroundColor=e.backgroundColor,t.requestRenderAll(),a({type:"setShouldUpdateCanvas",data:!1}),a({type:"setShouldTriggerCanvasUpdate",data:!0})}(e,a,t),e.shouldUpdateCanvasSize&&function(e,t,a){if(a({type:"setShouldUpdateCanvasSize",data:!1}),t){t.discardActiveObject();var n=t.resize!==e.resize;if(t.resize=e.resize,Je(e,t),n){for(var r=t.getObjects(),o=0;o<r.length;o++){var i=r[o];Ee(i,t,a)}a({type:"setShouldTriggerCanvasUpdate",data:!0})}t.renderAll()}}(e,a,t)}),[e,t,a])},$e=function(e,t,a,n,r,o,i,c,s){var l=new Oe.fabric.Canvas("canvas",{width:e.videoWidth,height:e.videoHeight,resize:e.resize,backgroundColor:"rgba(255,255,255,1)",preserveObjectStacking:!0,fireRightClick:!0,stopContextMenu:!0,uniScaleKey:null,altActionKey:null});t.canvas?function(e,t,a,n,r,o,i,c,s,l){e.clear();var u=[],d=1;e.loadFromJSON(t,(function(){if(n.current){for(var t=e.getObjects(),b=0;b<t.length;b++){var p=t[b];a||"video"!==p.type?"subtitle"===p.id?(s(p),l({type:"setIsSubtitles",data:!0}),l({type:"setSubtitlesState",data:{fontFamily:p.fontFamily,fontStyle:p.fontStyle,fontWeight:p.fontWeight,fontSize:p.fontSize,fill:p.fill,backgroundColor:p.backgroundColor}}),Ie(e,p,p.fontFamily)):(p.id=d,d++,"customTextbox"===p.type?Ie(e,p,p.fontFamily):"video"===p.type&&u.push(p)):e.remove(p)}Je(r,e),c(d),o(e),a&&i(u)}}))}(l,t.canvas,a,r,e,n,o,i,c,s):(Je(e,l),n(l))},et=function(e,t,a,n,r,o,i,s,l,u){var b=Object(c.useState)(!0),p=Object(d.a)(b,2),j=p[0],h=p[1],f=Object(c.useRef)(!1);Object(c.useEffect)((function(){return f.current=!0,function(){return f.current=!1}}),[]),Object(c.useEffect)((function(){if(j&&e.width>0&&s){var c=a&&a.canvas,d=0===r.length&&c;d&&n(!0),$e(e,a,d,t,f,i,o,l,u),h(!1)}}),[r,t,e,j,a,n,o,i,s,l,u])},tt=function(e,t,a){return new Oe.fabric.Video(e,{id:a,src:e.src,originalWidth:e.videoWidth,originalHeight:e.videoHeight,left:t.x,top:t.y,width:t.w,height:t.h,stroke:"rgba(255,255,255,1)",cropRect:Object(ae.a)({},t)})},at=function(e,t,a,n,r,o,i){var s=Object(c.useState)(!0),l=Object(d.a)(s,2),u=l[0],b=l[1];Object(c.useEffect)((function(){if(u&&!o&&e&&t){b(!1);var c=[],s=n;if(a.length>0)for(var l=0;l<a.length;l++){var d=a[l],p=tt(e,d,s);t.add(p),s++,Ee(p,t,null),c.push(p)}else{var j=tt(e,{w:e.videoWidth,h:e.videoHeight,x:0,y:0},s);t.add(j),s++,Ee(j,t,null),c.push(j)}i(c),r(s)}}),[o,n,r,e,t,u,a,i])},nt=function(e,t){var a=Object(c.useCallback)((function(a){if(e&&!t.isCropMode&&!t.shouldCropMedia&&!t.shouldReplaceImage){for(var n=0;n<a.path.length;n++)if("canvasComponent"===a.path[n].id)return;e.discardActiveObject().requestRenderAll()}}),[e,t.isCropMode,t.shouldCropMedia,t.shouldReplaceImage]);Object(c.useEffect)((function(){return document.addEventListener("click",a),function(){return document.removeEventListener("click",a)}}),[e,a])},rt=a(160),ot=a.n(rt),it=a(12),ct=a.n(it),st=a.p+"static/media/downArrow.400d75ac.svg",lt=a.p+"static/media/bold.d705790f.svg",ut=a.p+"static/media/subBackground.dce1ffb0.svg",dt=a.p+"static/media/italic.ee8b3de6.svg",bt=a.p+"static/media/textLeft.37f6ba9c.svg",pt=a.p+"static/media/textRight.67805ee0.svg",jt=a.p+"static/media/textCenter.357cd59c.svg",ht=a.p+"static/media/textJustify.3d19e46c.svg",ft=a(44),gt=a.n(ft),Ot=["ABeeZee","Abel","Abhaya Libre","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akaya Kanadaka","Akaya Telivigala","Akronim","Aladin","Alata","Alatsi","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Aleo","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almarai","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiko","Amiri","Amita","Anaheim","Andada","Andika","Andika New Basic","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo","Archivo Black","Archivo Narrow","Aref Ruqaa","Arima Madurai","Arimo","Arizonia","Armata","Arsenal","Artifika","Arvo","Arya","Asap","Asap Condensed","Asar","Asset","Assistant","Astloch","Asul","Athiti","Atma","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","B612","B612 Mono","Bad Script","Bahiana","Bahianita","Bai Jamjuree","Ballet","Baloo 2","Baloo Bhai 2","Baloo Bhaina 2","Baloo Chettan 2","Baloo Da 2","Baloo Paaji 2","Baloo Tamma 2","Baloo Tammudu 2","Baloo Thambi 2","Balsamiq Sans","Balthazar","Bangers","Barlow","Barlow Condensed","Barlow Semi Condensed","Barriecito","Barrio","Basic","Baskervville","Battambang","Baumans","Bayon","Be Vietnam","Bebas Neue","Belgrano","Bellefair","Belleza","Bellota","Bellota Text","BenchNine","Benne","Bentham","Berkshire Swash","Beth Ellen","Bevan","Big Shoulders Display","Big Shoulders Inline Display","Big Shoulders Inline Text","Big Shoulders Stencil Display","Big Shoulders Stencil Text","Big Shoulders Text","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","BioRhyme","BioRhyme Expanded","Biryani","Bitter","Black And White Picture","Black Han Sans","Black Ops One","Blinker","Bodoni Moda","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Brygada 1918","Bubblegum Sans","Bubbler One","Buda","Buenard","Bungee","Bungee Hairline","Bungee Inline","Bungee Outline","Bungee Shade","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Cairo","Caladea","Calistoga","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Castoro","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Chakra Petch","Changa","Changa One","Chango","Charm","Charmonman","Chathura","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chilanka","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Coiny","Combo","Comfortaa","Comic Neue","Coming Soon","Commissioner","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Cormorant","Cormorant Garamond","Cormorant Infant","Cormorant SC","Cormorant Unicase","Cormorant Upright","Courgette","Courier Prime","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Pro","Crimson Text","Croissant One","Crushed","Cuprum","Cute Font","Cutive","Cutive Mono","DM Mono","DM Sans","DM Serif Display","DM Serif Text","Damion","Dancing Script","Dangrek","Darker Grotesque","David Libre","Dawning of a New Day","Days One","Dekko","Dela Gothic One","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Do Hyeon","Dokdo","Domine","Donegal One","Doppio One","Dorsa","Dosis","DotGothic16","Dr Sugiyama","Duru Sans","Dynalight","EB Garamond","Eagle Lake","East Sea Dokdo","Eater","Economica","Eczar","El Messiri","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Encode Sans","Encode Sans Condensed","Encode Sans Expanded","Encode Sans Semi Condensed","Encode Sans Semi Expanded","Engagement","Englebert","Enriqueta","Epilogue","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fahkwang","Fanwood Text","Farro","Farsan","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Faustina","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Code","Fira Mono","Fira Sans","Fira Sans Condensed","Fira Sans Extra Condensed","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Frank Ruhl Libre","Fraunces","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gaegu","Gafata","Galada","Galdeano","Galindo","Gamja Flower","Gayathri","Gelasio","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Girassol","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Goldman","Gorditas","Gothic A1","Gotu","Goudy Bookletter 1911","Graduate","Grand Hotel","Grandstander","Gravitas One","Great Vibes","Grenze","Grenze Gotisch","Griffy","Gruppo","Gudea","Gugi","Gupter","Gurajada","Habibi","Hachi Maru Pop","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Harmattan","Headland One","Heebo","Henny Penny","Hepta Slab","Herr Von Muellerhoff","Hi Melody","Hind","Hind Guntur","Hind Madurai","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IBM Plex Mono","IBM Plex Sans","IBM Plex Sans Condensed","IBM Plex Serif","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Ibarra Real Nova","Iceberg","Iceland","Imbue","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Inria Sans","Inria Serif","Inter","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","JetBrains Mono","Jim Nightshade","Jockey One","Jolly Lodger","Jomhuria","Jomolhari","Josefin Sans","Josefin Slab","Jost","Joti One","Jua","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","K2D","Kadwa","Kalam","Kameron","Kanit","Kantumruy","Karla","Karma","Katibeh","Kaushan Script","Kavivanar","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kirang Haerang","Kite One","Kiwi Maru","Knewave","KoHo","Kodchasan","Kosugi","Kosugi Maru","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Krub","Kufam","Kulim Park","Kumar One","Kumar One Outline","Kumbh Sans","Kurale","La Belle Aurore","Lacquer","Laila","Lakki Reddy","Lalezar","Lancelot","Langar","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Lemonada","Lexend","Lexend Deca","Lexend Exa","Lexend Giga","Lexend Mega","Lexend Peta","Lexend Tera","Lexend Zetta","Libre Barcode 128","Libre Barcode 128 Text","Libre Barcode 39","Libre Barcode 39 Extended","Libre Barcode 39 Extended Text","Libre Barcode 39 Text","Libre Barcode EAN13 Text","Libre Baskerville","Libre Caslon Display","Libre Caslon Text","Libre Franklin","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Literata","Liu Jian Mao Cao","Livvic","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Long Cang","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","M PLUS 1p","M PLUS Rounded 1c","Ma Shan Zheng","Macondo","Macondo Swash Caps","Mada","Magra","Maiden Orange","Maitree","Major Mono Display","Mako","Mali","Mallanna","Mandali","Manjari","Manrope","Mansalva","Manuale","Marcellus","Marcellus SC","Marck Script","Margarine","Markazi Text","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Meera Inimai","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Mina","Miniver","Miriam Libre","Mirza","Miss Fajardose","Mitr","Modak","Modern Antiqua","Mogra","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Mukta","Mukta Mahee","Mukta Malar","Mukta Vaani","Mulish","MuseoModerno","Mystery Quest","NTR","Nanum Brush Script","Nanum Gothic","Nanum Gothic Coding","Nanum Myeongjo","Nanum Pen Script","Nerko One","Neucha","Neuton","New Rocker","New Tegomin","News Cycle","Newsreader","Niconne","Niramit","Nixie One","Nobile","Nokora","Norican","Nosifer","Notable","Nothing You Could Do","Noticia Text","Noto Sans","Noto Sans HK","Noto Sans JP","Noto Sans KR","Noto Sans SC","Noto Sans TC","Noto Serif","Noto Serif JP","Noto Serif KR","Noto Serif SC","Noto Serif TC","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Nunito Sans","Odibee Sans","Odor Mean Chey","Offside","Oi","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Overpass","Overpass Mono","Ovo","Oxanium","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Padauk","Palanquin","Palanquin Dark","Pangolin","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Pattaya","Patua One","Pavanam","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piazzolla","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poor Story","Poppins","Port Lligat Sans","Port Lligat Slab","Potta One","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Pridi","Princess Sofia","Prociono","Prompt","Prosto One","Proza Libre","Public Sans","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Rakkas","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rasa","Rationale","Ravi Prakash","Recursive","Red Hat Display","Red Hat Text","Red Rose","Redressed","Reem Kufi","Reenie Beanie","Reggae One","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","RocknRoll One","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rowdies","Rozha One","Rubik","Rubik Mono One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Saira","Saira Condensed","Saira Extra Condensed","Saira Semi Condensed","Saira Stencil One","Salsa","Sanchez","Sancreek","Sansita","Sansita Swashed","Sarabun","Sarala","Sarina","Sarpanch","Satisfy","Sawarabi Gothic","Sawarabi Mincho","Scada","Scheherazade","Schoolbell","Scope One","Seaweed Script","Secular One","Sedgwick Ave","Sedgwick Ave Display","Sen","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shippori Mincho","Shippori Mincho B1","Shojumaru","Short Stack","Shrikhand","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Single Day","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Solway","Song Myung","Sonsie One","Sora","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Space Grotesk","Space Mono","Spartan","Special Elite","Spectral","Spectral SC","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Sriracha","Srisakdi","Staatliches","Stalemate","Stalinist One","Stardos Stencil","Stick","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Stylish","Sue Ellen Francisco","Suez One","Sulphur Point","Sumana","Sunflower","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Syne","Syne Mono","Syne Tactile","Tajawal","Tangerine","Taprom","Tauri","Taviraj","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","Texturina","Thasadith","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Tomorrow","Trade Winds","Train One","Trirong","Trispace","Trocchi","Trochut","Truculenta","Trykker","Tulpen One","Turret Road","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Varta","Vast Shadow","Vesper Libre","Viaoda Libre","Vibes","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Vollkorn SC","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Xanh Mono","Yanone Kaffeesatz","Yantramanav","Yatra One","Yellowtail","Yeon Sung","Yeseva One","Yesteryear","Yrsa","Yusei Magic","ZCOOL KuaiLe","ZCOOL QingKe HuangYou","ZCOOL XiaoWei","Zeyada","Zhi Mang Xing","Zilla Slab","Zilla Slab Highlight"],mt=function(e){var t=e.setIsDropDown,a=e.dispatch,n=e.isSub,r=Object(c.useState)(""),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Ot.filter((function(e){return e.toLowerCase().includes(i.toLowerCase())})).map((function(e){return Object(m.jsx)("li",{className:gt.a.FontOption,children:e},e)}));return Object(m.jsxs)("div",{className:gt.a.FontsDropdown,children:[Object(m.jsxs)("div",{className:gt.a.SearchContainer,children:[Object(m.jsx)("img",{className:gt.a.SearchSvg,src:G,alt:"search"}),Object(m.jsx)("input",{value:i,onChange:function(e){return s(e.target.value)},className:gt.a.SearchInput,placeholder:"Search",type:"text"})]}),Object(m.jsx)("ul",{className:gt.a.FontOptionsContainer,onClick:function(e){"LI"===e.target.tagName&&(a({type:n?"setSubtitlesFontFamily":"setFontFamily",data:e.target.textContent}),a({type:"setShowToolbar",data:!1}),t(!1))},children:l}),Object(m.jsx)("div",{className:gt.a.UploadFontContainer,children:Object(m.jsx)("button",{className:gt.a.UploadFontButton,children:"Upload font"})})]})},vt=a(39),St=a.n(vt),xt=function(e){var t=e.setIsDropDown,a=e.dispatch,n=e.isSub;return Object(m.jsxs)("ul",{className:St.a.FontSizeDropdown,onClick:function(e){"LI"===e.target.tagName&&(a({type:n?"setSubtitlesFontSize":"setFontSize",data:e.target.textContent}),a({type:"setShowToolbar",data:!1}),t(!1))},children:[Object(m.jsx)("li",{className:St.a.FontSizeOption,children:"14"}),Object(m.jsx)("li",{className:St.a.FontSizeOption,children:"24"}),Object(m.jsx)("li",{className:St.a.FontSizeOption,children:"30"}),Object(m.jsx)("li",{className:St.a.FontSizeOption,children:"36"}),Object(m.jsx)("li",{className:St.a.FontSizeOption,children:"48"}),Object(m.jsx)("li",{className:St.a.FontSizeOption,children:"60"}),Object(m.jsx)("li",{className:St.a.FontSizeOption,children:"72"}),Object(m.jsx)("li",{className:St.a.FontSizeOption,children:"96"})]})},Ct=a(21),_t=a.n(Ct),wt=function(e){var t=e.setIsDropDown,a=e.dispatch,n=e.current;return Object(m.jsxs)("ul",{className:_t.a.TextAlignDropdown,onClick:function(e){var n=null;"LI"===e.target.tagName?n=e.target.childNodes[0].alt:"P"===e.target.tagName?n=e.target.textContent:"IMG"===e.target.tagName&&(n=e.target.alt),n&&(a({type:"setTextAlign",data:n.toLowerCase()}),t(!1))},children:[Object(m.jsxs)("li",{className:[_t.a.TextAlignOption,"left"===n?_t.a.Current:null].join(" "),children:[Object(m.jsx)("img",{className:_t.a.TextAlignImage,src:bt,alt:"left"}),Object(m.jsx)("p",{className:_t.a.TextAlignText,children:"Left"})]}),Object(m.jsxs)("li",{className:[_t.a.TextAlignOption,"center"===n?_t.a.Current:null].join(" "),children:[Object(m.jsx)("img",{className:_t.a.TextAlignImage,src:jt,alt:"center"}),Object(m.jsx)("p",{className:_t.a.TextAlignText,children:"Center"})]}),Object(m.jsxs)("li",{className:[_t.a.TextAlignOption,"right"===n?_t.a.Current:null].join(" "),children:[Object(m.jsx)("img",{className:_t.a.TextAlignImage,src:pt,alt:"right"}),Object(m.jsx)("p",{className:_t.a.TextAlignText,children:"Right"})]}),Object(m.jsxs)("li",{className:[_t.a.TextAlignOption,"justify"===n?_t.a.Current:null].join(" "),children:[Object(m.jsx)("img",{className:_t.a.TextAlignImage,src:ht,alt:"justify"}),Object(m.jsx)("p",{className:_t.a.TextAlignText,children:"Justify"})]})]})},kt=a(38),yt=a(60),Tt=a.n(yt),Nt=function(e){var t=e.state,a=e.dispatch,n=e.coords,r=e.isFontFamilyDropdown,o=e.isFontSizeDropdown,i=e.isColorDropdown,s=e.isTextAlignDropDown,l=e.setIsFontFamilyDropdown,u=e.setIsFontSizeDropdown,b=e.colorChangeCompleteHandler,p=e.setIsTextAlignDropDown,j=e.setColor,h=e.color,f=e.colorPickerRef,g=e.isSub,O=e.isBgColorDropdown,v=e.setBgColor,S=e.bgColor,x=e.bgColorPickerRef,C=Object(c.useState)({top:41}),_=Object(d.a)(C,2),w=_[0],k=_[1];return Object(c.useEffect)((function(){n&&n.coordY+301+41+20>t.canvasState.height&&k({bottom:41})}),[t.canvasState,n]),Object(m.jsxs)(m.Fragment,{children:[r?Object(m.jsx)("div",{className:Tt.a.FontsDropdown,style:w,children:Object(m.jsx)(mt,{setIsDropDown:l,dispatch:a,isSub:g})}):null,o?Object(m.jsx)("div",{className:Tt.a.FontSizeDropdown,style:Object(ae.a)(Object(ae.a)({},w),{},{right:g?"223px":"151px"}),children:Object(m.jsx)(xt,{setIsDropDown:u,dispatch:a,isSub:g})}):null,i?Object(m.jsx)("div",{className:Tt.a.SketchPickerContainer,style:w,children:Object(m.jsx)(kt.a,{color:h,onChange:function(e){return j(e.rgb)},onChangeComplete:function(e){return b(e,f,a,g,O)}})}):null,s?Object(m.jsx)("div",{className:Tt.a.TextAlignDropdown,style:w,children:Object(m.jsx)(wt,{setIsDropDown:p,dispatch:a,current:t.textState.textAlign})}):null,O?Object(m.jsx)("div",{className:Tt.a.SketchPickerContainer,style:w,children:Object(m.jsx)(kt.a,{color:S,onChange:function(e){return v(e.rgb)},onChangeComplete:function(e){return b(e,x,a,g,O)}})}):null]})},Dt=function(e,t,a,n,r){var o="rgba(".concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", ").concat(e.rgb.a,")");if(r&&t.current)t.current.style.background=o,a({type:"setSubtitlesbackgroundColor",data:o});else if(t.current){var i=n?"setSubtitlesTextFill":"setTextFill";t.current.style.background=o,a({type:i,data:o})}},At=function(e){var t=e.coords,a=e.isSub,n=Object(c.useContext)(te),r=n.editorState,o=n.editorDispatch,i=Object(c.useState)(0),s=Object(d.a)(i,2),l=s[0],u=s[1],b=Object(c.useState)(!0),p=Object(d.a)(b,2),j=p[0],h=p[1],f=Object(c.useState)(!1),g=Object(d.a)(f,2),O=g[0],v=g[1],S=Object(c.useState)(!1),x=Object(d.a)(S,2),C=x[0],_=x[1],w=Object(c.useState)(!1),k=Object(d.a)(w,2),y=k[0],T=k[1],N=Object(c.useState)(!1),D=Object(d.a)(N,2),A=D[0],I=D[1],R=Object(c.useState)(!1),E=Object(d.a)(R,2),P=E[0],L=E[1],F=Object(c.useState)({r:0,g:0,b:0,a:1}),M=Object(d.a)(F,2),B=M[0],H=M[1],U=Object(c.useState)({r:0,g:0,b:0,a:1}),W=Object(d.a)(U,2),V=W[0],z=W[1],Y=Object(c.useRef)(null),X=Object(c.useRef)(null),G=[ct.a.FontWeightBoldContainer],Z=[ct.a.FontStyleItalicContainer],q=a?r.subtitlesState:r.textState,K="Bold"===q.fontWeight,J="Italic"===q.fontStyle;K&&G.push(ct.a.Active),J&&Z.push(ct.a.Active);var Q=bt;"center"===r.textState.textAlign?Q=jt:"right"===r.textState.textAlign?Q=pt:"justify"===r.textState.textAlign&&(Q=ht);var $={fontFamily:v,fontSizeArrow:_,colorPicker:T,textAlign:I,bgColor:L},ee={bold:function(){var e="Bold";K&&(e="Normal"),o({type:a?"setSubtitlesFontWeight":"setFontWeight",data:e})},italic:function(){var e="Italic";J&&(e="Normal"),o({type:a?"setSubtitlesFontStyle":"setFontStyle",data:e})}},ae=function(e){return function(e,t,a){"bold"!==e.currentTarget.id&&"italic"!==e.currentTarget.id||a[e.currentTarget.id]();for(var n=0,r=Object.entries(t);n<r.length;n++){var o=Object(d.a)(r[n],2),i=o[0],c=o[1];i===e.currentTarget.id?c((function(e){return!e})):c(!1)}}(e,$,ee)};return Object(c.useEffect)((function(){if(j){h(!1),u(q.fontSize);var e=q.fill.split("(")[1].split(")")[0].split(","),t=Object(d.a)(e,4),n=t[0],r=t[1],o=t[2],i=t[3];if(H({r:n,g:r,b:o,a:i}),Y.current.style.background=q.fill,a){var c=q.backgroundColor.split("(")[1].split(")")[0].split(","),s=Object(d.a)(c,4);n=s[0],r=s[1],o=s[2],i=s[3],z({r:n,g:r,b:o,a:i}),X.current.style.background=q.backgroundColor}}}),[q,j,a]),Object(m.jsxs)("div",{className:ct.a.TextToolbar,children:[Object(m.jsxs)("div",{className:ct.a.FontsContainer,id:"fontFamily",onClick:ae,children:[Object(m.jsx)("p",{children:q.fontFamily}),Object(m.jsx)("img",{className:ct.a.DownArrow,src:st,alt:"arrow"})]}),Object(m.jsx)("div",{className:ct.a.BorderDiv}),Object(m.jsxs)("div",{className:ct.a.FontSizeContainer,children:[Object(m.jsx)("div",{className:ct.a.FontSizeInputContainer,children:Object(m.jsx)("input",{className:ct.a.FontSizeInput,type:"number",value:l,onChange:function(e){return function(e,t,a,n){t(e.target.value);var r=+e.target.value;r<=0?r=1:r>1080&&(r=1080),a({type:n?"setSubtitlesFontSize":"setFontSize",data:r})}(e,u,o,a)}})}),Object(m.jsx)("div",{className:ct.a.FontSizeArrowContainer,id:"fontSizeArrow",onClick:ae,children:Object(m.jsx)("img",{className:ct.a.DownArrow,src:st,alt:"arrow"})})]}),Object(m.jsx)("div",{className:ct.a.BorderDiv}),Object(m.jsx)("div",{className:ct.a.ColorPickerContainer,id:"colorPicker",onClick:ae,children:Object(m.jsx)("div",{className:ct.a.ColorPickerBorder,children:Object(m.jsx)("div",{ref:Y,className:ct.a.ColorPicker})})}),Object(m.jsx)("div",{className:ct.a.BorderDiv}),Object(m.jsx)("div",{className:G.join(" "),id:"bold",onClick:ae,children:Object(m.jsx)("img",{className:ct.a.Bold,src:lt,alt:"bold"})}),Object(m.jsx)("div",{className:ct.a.BorderDiv}),Object(m.jsx)("div",{className:Z.join(" "),id:"italic",onClick:ae,children:Object(m.jsx)("img",{className:ct.a.Italic,src:dt,alt:"italic"})}),Object(m.jsx)("div",{className:ct.a.BorderDiv}),a?Object(m.jsxs)("div",{className:ct.a.BgColorContainer,id:"bgColor",onClick:ae,children:[Object(m.jsx)("div",{className:ct.a.BgColor,ref:X}),Object(m.jsx)("img",{src:ut,alt:"italic"}),Object(m.jsx)("p",{children:"Background"})]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:ct.a.TextAlignContainer,id:"textAlign",onClick:ae,children:Object(m.jsx)("img",{className:ct.a.TextAlign,src:Q,alt:"textAlign"})})}),Object(m.jsx)(Nt,{state:r,dispatch:o,coords:t,isFontFamilyDropdown:O,isFontSizeDropdown:C,isColorDropdown:y,isTextAlignDropDown:A,setIsFontFamilyDropdown:v,setIsFontSizeDropdown:_,colorChangeCompleteHandler:Dt,setIsTextAlignDropDown:I,setColor:H,setBgColor:z,color:B,bgColor:V,colorPickerRef:Y,bgColorPickerRef:X,isSub:a,isBgColorDropdown:P})]})},It=a(22),Rt=a.n(It),Et=a.p+"static/media/cornerRadius.edfa6868.svg",Pt=a(85),Lt=a.n(Pt),Ft=a(13),Mt=a.n(Ft),Bt=function(e){var t=e.setIsDropDown,a=e.dispatch,n=e.type,r=e.isSmallRange,o=e.includesZero,i=function(e){"LI"===e.target.tagName&&(a({type:n,data:+e.target.textContent}),a({type:"setShowToolbar",data:!1}),t(!1))};return r?Object(m.jsxs)("ul",{className:Mt.a.LineDropdown,onClick:i,children:[o?Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"0"}):Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"1"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"5"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"10"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"15"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"20"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"25"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"30"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"35"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"40"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"45"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"50"})]}):Object(m.jsxs)("ul",{className:Mt.a.ShapeDropdown,onClick:i,children:[Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"0"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"4"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"8"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"12"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"24"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"48"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"96"}),Object(m.jsx)("li",{className:Mt.a.StrokeOption,children:"120"})]})},Ht=function(e){var t=e.state,a=e.dispatch,n=e.coords,r=e.shapeToolbar,o=e.isStrokeWidthDropdown,i=e.isFillDropdown,s=e.isStrokeDropdown,l=e.fill,u=e.setFill,b=e.fillChangeCompleteHandler,p=e.fillRef,j=e.stroke,h=e.setStroke,f=e.strokeChangeCompleteHandler,g=e.strokeRef,O=e.setIsStrokeWidthDropdown,v=e.isLine,S=e.isRect,x=Object(c.useState)({top:41}),C=Object(d.a)(x,2),_=C[0],w=C[1],k=Object(c.useState)({top:41}),y=Object(d.a)(k,2),T=y[0],N=y[1],D=Object(c.useCallback)((function(e,t,a){var n=t.offsetWidth,r={};e.coordY+301+41+20>a&&(r.bottom=41,N({bottom:41,right:S?66:0})),e.coordX+n-220<0&&(r.left=0,r.bottom||(r.top=41)),0!==Object.keys(r).length&&w(r)}),[S]);return Object(c.useEffect)((function(){n&&r&&D(n,r,t.canvasState.height)}),[D,r,t.canvasState,n]),Object(m.jsxs)(m.Fragment,{children:[i?Object(m.jsx)("div",{className:Lt.a.FillDropdownContainer,style:_,children:Object(m.jsx)(kt.a,{color:l,onChange:function(e){return u(e.rgb)},onChangeComplete:function(e){return b(e,a,p)}})}):null,s?Object(m.jsx)("div",{className:Lt.a.StrokeDropdownContainer,style:_,children:Object(m.jsx)(kt.a,{color:j,onChange:function(e){return h(e.rgb)},onChangeComplete:function(e){return f(e,a,g)}})}):null,o?Object(m.jsx)("div",{className:Lt.a.StrokeWidthDropdownContainer,style:T,children:Object(m.jsx)(Bt,{setIsDropDown:O,isSmallRange:v,includesZero:!1,dispatch:a,type:"setShapeStrokeWidth"})}):null]})},Ut=function(e,t,a){if(a.current){var n="rgba(".concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", ").concat(e.rgb.a,")");t({type:"setShapeFill",data:n}),a.current.style.background=n}},Wt=function(e,t,a){if(a.current){var n="rgba(".concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", ").concat(e.rgb.a,")");t({type:"setShapeStroke",data:n}),a.current.style.background=n}},Vt=function(e){var t=e.coords,a=Object(c.useContext)(te),n=a.editorState,r=a.editorDispatch,o=Object(c.useState)(!0),i=Object(d.a)(o,2),s=i[0],l=i[1],u=Object(c.useState)("rgba(196,196,196,1)"),b=Object(d.a)(u,2),p=b[0],j=b[1],h=Object(c.useState)("rgba(255,255,255,1)"),f=Object(d.a)(h,2),g=f[0],O=f[1],v=Object(c.useState)(!1),S=Object(d.a)(v,2),x=S[0],C=S[1],_=Object(c.useState)(!1),w=Object(d.a)(_,2),k=w[0],y=w[1],T=Object(c.useState)(!1),N=Object(d.a)(T,2),D=N[0],A=N[1],I=Object(c.useState)(n.shapeState.strokeWidth),R=Object(d.a)(I,2),E=R[0],P=R[1],L=Object(c.useState)(n.shapeState.rx),F=Object(d.a)(L,2),M=F[0],B=F[1],H=Object(c.useRef)(null),U=Object(c.useRef)(null),W=Object(c.useRef)(null),V=Object(c.useRef)(null),z="line"===n.currentObject.type,Y="rect"===n.currentObject.type,X=function(e){return function(e,t,a,n){var r=e.currentTarget.id;"fill"===r?(t((function(e){return!e})),a(!1),n(!1)):"stroke"===r?(a((function(e){return!e})),t(!1),n(!1)):"strokeWidth"===r?(n((function(e){return!e})),t(!1),a(!1)):(n(!1),t(!1),a(!1))}(e,C,y,A)};return Object(c.useEffect)((function(){s&&function(e,t,a,n,r,o,i,c){if(a(!1),e)o.current.style.borderTopLeftRadius="15px",o.current.style.borderBottomLeftRadius="15px";else{var s=t.fill.split("(")[1].split(")")[0].split(","),l=Object(d.a)(s,4);n({r:l[0],g:l[1],b:l[2],a:l[3]}),r.current.style.background=t.fill}var u=t.stroke.split("(")[1].split(")")[0].split(","),b=Object(d.a)(u,4);i({r:b[0],g:b[1],b:b[2],a:b[3]}),c.current.style.background=t.stroke}(z,n.shapeState,l,j,U,V,O,W)}),[z,n.shapeState,s]),Object(m.jsxs)("div",{ref:H,className:Rt.a.ShapeToolbar,children:[z?null:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:Rt.a.FillContainer,id:"fill",onClick:X,children:[Object(m.jsx)("div",{className:Rt.a.ColorPickerBorder,children:Object(m.jsx)("div",{ref:U,className:Rt.a.ColorPicker})}),Object(m.jsx)("p",{children:"Fill"})]}),Object(m.jsx)("div",{className:Rt.a.BorderDiv})]}),Object(m.jsxs)("div",{ref:V,className:Rt.a.StrokeContainer,id:"stroke",onClick:X,children:[Object(m.jsx)("div",{className:Rt.a.ColorPickerBorder,children:Object(m.jsx)("div",{ref:W,className:Rt.a.ColorPicker})}),Object(m.jsx)("p",{children:"Stroke"})]}),Object(m.jsx)("div",{className:Rt.a.BorderDiv}),Object(m.jsxs)("div",{className:Rt.a.StrokeWidthContainer,children:[Object(m.jsx)("div",{className:Rt.a.StrokeWidthInputContainer,children:Object(m.jsx)("input",{className:Rt.a.StrokeWidthInput,type:"number",value:E,onChange:function(e){return function(e,t,a,n){a(e.target.value);var r=+e.target.value;n&&r<=0?r=1:n&&r>50?r=50:!n&&r>120?r=120:!n&&r<0&&(r=0),t({type:"setShapeStrokeWidth",data:r})}(e,r,P,z)}})}),Object(m.jsx)("div",{style:{borderTopRightRadius:Y?"0":"15px",borderBottomRightRadius:Y?"0":"15px"},className:Rt.a.StrokeWidthArrowContainer,id:"strokeWidth",onClick:X,children:Object(m.jsx)("img",{className:Rt.a.DownArrow,src:st,alt:"arrow"})})]}),Y?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:Rt.a.BorderDiv}),Object(m.jsxs)("div",{className:Rt.a.RadiusContainer,id:"radius",onClick:X,children:[Object(m.jsx)("img",{src:Et,alt:"radius"}),Object(m.jsx)("input",{className:Rt.a.RadiusInput,type:"number",value:M,onChange:function(e){B(e.target.value);var t=+e.target.value;t<0&&(t=0),t>100&&(t=100),r({type:"setShapeRadius",data:t})}})]})]}):null,Object(m.jsx)(Ht,{state:n,dispatch:r,coords:t,shapeToolbar:H.current,isStrokeWidthDropdown:D,setIsStrokeWidthDropdown:A,isStrokeDropdown:k,isFillDropdown:x,fill:p,setFill:j,fillChangeCompleteHandler:Ut,fillRef:U,stroke:g,setStroke:O,strokeChangeCompleteHandler:Wt,strokeRef:W,isLine:z,isRect:Y})]})},zt=a(45),Yt=a.n(zt),Xt=a.p+"static/media/replaceImage.24b71204.svg",Gt=a.p+"static/media/cropImage.165e69b6.svg",Zt=function(){var e=Object(c.useContext)(te),t=e.editorState,a=e.editorDispatch,n=Object(c.useContext)(ke).eventState,r=Object(c.useState)(t.imageState.cornerRadius),o=Object(d.a)(r,2),i=o[0],s=o[1],l=function(e){"replace"===e.currentTarget.id?a({type:"setShouldReplaceImage",data:!0}):"crop"===e.currentTarget.id&&a({type:"setCropType",data:"rect"})};Object(c.useEffect)((function(){n.dbClickEvent&&a({type:"setCropType",data:"rect"})}),[n,a]);var u=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:[Yt.a.ReaplaceContainer,t.imageState.isSvg?Yt.a.BorderStyle:null].join(" "),id:"replace",onClick:l,children:[Object(m.jsx)("img",{src:Xt,alt:"replace"}),Object(m.jsx)("p",{children:"Replace"})]}),t.imageState.isSvg?null:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:Yt.a.BorderDiv}),Object(m.jsxs)("div",{className:Yt.a.RadiusContainer,id:"radius",onClick:l,children:[Object(m.jsx)("img",{src:Et,alt:"radius"}),Object(m.jsx)("input",{className:Yt.a.RadiusInput,type:"number",value:i,onChange:function(e){s(e.target.value);var t=+e.target.value;t<0&&(t=0),t>100&&(t=100),a({type:"setImageCornerRadius",data:t})}})]}),Object(m.jsx)("div",{className:Yt.a.BorderDiv}),Object(m.jsxs)("div",{className:Yt.a.CropContainer,id:"crop",onClick:l,children:[Object(m.jsx)("img",{src:Gt,alt:"crop"}),Object(m.jsx)("p",{children:"Crop"})]})]})]});return Object(m.jsx)("div",{className:Yt.a.ImageToolbar,children:u})},qt=a(19),Kt=a.n(qt),Jt=function(e,t,a){if(a.current){var n="rgba(".concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", ").concat(e.rgb.a,")");t({type:"setVideoStroke",data:n}),a.current.style.background=n}},Qt=a(113),$t=a.n(Qt),ea=function(e){var t=e.state,a=e.dispatch,n=e.coords,r=e.videoToolbar,o=e.isStrokeWidthDropdown,i=e.setIsStrokeWidthDropdown,s=e.isStrokeDropdown,l=e.stroke,u=e.setStroke,b=e.strokeChangeCompleteHandler,p=e.strokeRef,j=Object(c.useState)({top:41}),h=Object(d.a)(j,2),f=h[0],g=h[1],O=Object(c.useCallback)((function(e,t,a){var n=t.offsetWidth,r={};e.coordY+301+41+20>a&&(r.bottom=41),e.coordX+n-220<0&&(r.left=0,r.bottom||(r.top=41)),0!==Object.keys(r).length&&g(r)}),[]);return Object(c.useEffect)((function(){n&&r&&O(n,r,t.canvasState.height)}),[O,r,t.canvasState,n]),Object(m.jsxs)(m.Fragment,{children:[s?Object(m.jsx)("div",{className:$t.a.StrokeDropdownContainer,style:f,children:Object(m.jsx)(kt.a,{color:l,onChange:function(e){return u(e.rgb)},onChangeComplete:function(e){return b(e,a,p)}})}):null,o?Object(m.jsx)("div",{className:$t.a.StrokeWidthDropdownContainer,style:f,children:Object(m.jsx)(Bt,{type:"setVideoStrokeWidth",setIsDropDown:i,isSmallRange:!0,includesZero:!0,dispatch:a})}):null]})},ta=function(e){var t=e.coords,a=Object(c.useContext)(te),n=a.editorState,r=a.editorDispatch,o=Object(c.useContext)(ke).eventState,i=Object(c.useState)(!0),s=Object(d.a)(i,2),l=s[0],u=s[1],b=Object(c.useState)(n.videoState.cornerRadius),p=Object(d.a)(b,2),j=p[0],h=p[1],f=Object(c.useState)("rgba(255,255,255,1)"),g=Object(d.a)(f,2),O=g[0],v=g[1],S=Object(c.useState)(!1),x=Object(d.a)(S,2),C=x[0],_=x[1],w=Object(c.useState)(!1),k=Object(d.a)(w,2),y=k[0],T=k[1],N=Object(c.useState)(n.videoState.strokeWidth),D=Object(d.a)(N,2),A=D[0],I=D[1],R=Object(c.useRef)(null),E=Object(c.useRef)(null),P=Object(c.useRef)(null),L=function(e){var t=e.currentTarget.id;"crop"===t?r({type:"setCropType",data:"rect"}):"circleCrop"===t&&r({type:"setCropType",data:"circle"}),function(e,t,a){"stroke"===e?(t((function(e){return!e})),a(!1)):"strokeWidth"===e?(a((function(e){return!e})),t(!1)):(a(!1),t(!1))}(t,_,T)};Object(c.useEffect)((function(){o.dbClickEvent&&r({type:"setCropType",data:"rect"})}),[o,r]),Object(c.useEffect)((function(){l&&(u(!1),function(e,t,a){if(a.current&&null!==e.stroke){var n=e.stroke.split("(")[1].split(")")[0].split(","),r=Object(d.a)(n,4);t({r:r[0],g:r[1],b:r[2],a:r[3]}),a.current.style.background=e.stroke}}(n.videoState,v,R))}),[n.videoState,l]);var F=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:Kt.a.CropContainer,id:"crop",onClick:L,children:[Object(m.jsx)("img",{src:Gt,alt:"replace"}),Object(m.jsx)("p",{children:"Crop"})]}),Object(m.jsx)("div",{className:Kt.a.BorderDiv}),Object(m.jsxs)("div",{className:Kt.a.CircleCropContainer,id:"circleCrop",onClick:L,children:[Object(m.jsx)("div",{className:Kt.a.CircleCropCircle}),Object(m.jsx)("p",{children:"Circle crop"})]}),Object(m.jsx)("div",{className:Kt.a.BorderDiv}),Object(m.jsxs)("div",{ref:E,className:Kt.a.StrokeContainer,id:"stroke",onClick:L,children:[Object(m.jsx)("div",{className:Kt.a.ColorPickerBorder,children:Object(m.jsx)("div",{ref:R,className:Kt.a.ColorPicker})}),Object(m.jsx)("p",{children:"Stroke"})]}),Object(m.jsx)("div",{className:Kt.a.BorderDiv}),Object(m.jsxs)("div",{className:Kt.a.StrokeWidthContainer,children:[Object(m.jsx)("div",{className:Kt.a.StrokeWidthInputContainer,children:Object(m.jsx)("input",{className:Kt.a.StrokeWidthInput,type:"number",value:A,onChange:function(e){return function(e,t,a){a(e.target.value);var n=+e.target.value;n>50?n=50:n<0&&(n=0),t({type:"setVideoStrokeWidth",data:n})}(e,r,I)}})}),Object(m.jsx)("div",{className:Kt.a.StrokeWidthArrowContainer,id:"strokeWidth",onClick:L,children:Object(m.jsx)("img",{className:Kt.a.DownArrow,src:st,alt:"arrow"})})]}),Object(m.jsx)("div",{className:Kt.a.BorderDiv}),Object(m.jsxs)("div",{className:Kt.a.RadiusContainer,id:"radius",onClick:L,children:[Object(m.jsx)("img",{src:Et,alt:"radius"}),Object(m.jsx)("input",{className:Kt.a.RadiusInput,type:"number",value:j,onChange:function(e){h(e.target.value);var t=+e.target.value;t<0&&(t=0),t>100&&(t=100),r({type:"setVideoCornerRadius",data:t})}})]}),Object(m.jsx)(ea,{state:n,dispatch:r,coords:t,videoToolbar:P.current,isStrokeWidthDropdown:y,setIsStrokeWidthDropdown:T,isStrokeDropdown:C,stroke:O,setStroke:v,strokeChangeCompleteHandler:Jt,strokeRef:R})]});return Object(m.jsx)("div",{className:Kt.a.VideoToolbar,ref:P,children:F})},aa=["rect","circle","triangle","line"],na=function(e){var t=e.canvas,a=e.type,n=Object(c.useState)(null),r=Object(d.a)(n,2),o=r[0],i=r[1],s=Object(c.useContext)(te).editorState,l=Object(c.useRef)(null),u=Object(c.useCallback)((function(e){l.current.style.transform="translate(".concat(e.coordX,"px, ").concat(e.coordY,"px)"),l.current.style.opacity=1,i(e)}),[]);return Object(c.useEffect)((function(){s.currentCoords&&u(function(e,t,a,n,r,o){var i=n.offsetWidth,c=n.offsetHeight,s=e.tl.y>e.bl.y,l=s?r+c:r,u=Math.min(e.tl.y,e.tr.y,e.br.y,e.bl.y)-c-l;if(u-o<0){var d=Math.max(e.tl.y,e.tr.y,e.br.y,e.bl.y)+r+(s?0:c);u=d+o+c<a?d:a-c-r}var b=Math.min(e.tl.x,e.tr.x,e.br.x,e.bl.x);return b+i>t?b=t-i:b<0&&(b=0),{coordX:b,coordY:u}}(s.currentCoords,t.getWidth(),t.getHeight(),l.current,28,10))}),[t,u,s.currentCoords,s.currentObject,s.isCroppingImage]),Object(m.jsxs)("div",{ref:l,className:ot.a.Toolbar,children:["text"===a?Object(m.jsx)(At,{coords:o,isSub:!1}):null,"subtitle"===a?Object(m.jsx)(At,{coords:o,isSub:!0}):null,aa.includes(a)?Object(m.jsx)(Vt,{coords:o}):null,"customImage"===a?Object(m.jsx)(Zt,{}):null,"video"===a?Object(m.jsx)(ta,{coords:o}):null]})},ra=a(46),oa=a.n(ra),ia=function(e,t,a,n){return new Promise((function(r,o){e.clone((function(e){e.id=t,e.top=a,e.left=n,r(e)}))}))},ca=function(){var e=Object(k.a)(w.a.mark((function e(t,a,n,r,o,i,c,s){var l,u,d,b,p,j,h,f,g,O,m,v;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.discardActiveObject(),l=a.coords.top+15,u=a.coords.left+15,d=a.object.type,b=[],"activeSelection"!==d){e.next=24;break}p=[],j=0;case 8:if(!(j<a.object._objects.length)){e.next=19;break}if("subtitle"===(h=a.object._objects[j]).type){e.next=16;break}return e.next=13,ia(h,n+j,h.top+l-a.object.top,h.left+u-a.object.left);case 13:f=e.sent,p.push(f),r();case 16:j++,e.next=8;break;case 19:for(g=0;g<p.length;g++)"video"===(O=p[g]).type&&b.push(O),t.add(O),t.renderAll(),Re(O,t);m=new Oe.fabric.ActiveSelection(p,{canvas:t}),t.setActiveObject(m),e.next=31;break;case 24:return e.next=26,ia(a.object,n,l,u);case 26:v=e.sent,"video"===d&&b.push(v),r(),t.add(v).setActiveObject(v),Re(v,t);case 31:b.length>0&&s((function(e){return[].concat(Object(le.a)(e),b)})),c&&t.bringToFront(c),t.requestRenderAll(),i&&i({type:"setRightClickEvent",data:null}),o({object:a.object,coords:{top:l,left:u}});case 36:case"end":return e.stop()}}),e)})));return function(t,a,n,r,o,i,c,s){return e.apply(this,arguments)}}(),sa=function(e){var t=e.canvas,a=e.objId,n=e.updateId,r=e.clipboard,o=e.setClipboard,i=e.fabricSub,s=e.dispatch,l=e.setSpeakerVideos,u=Object(c.useContext)(ke),b=u.eventState,p=u.eventDispatch,j=Object(c.useState)(!1),h=Object(d.a)(j,2),f=h[0],g=h[1],O=Object(c.useState)(!1),v=Object(d.a)(O,2),S=v[0],x=v[1],C=Object(c.useState)(!1),_=Object(d.a)(C,2),w=_[0],k=_[1],y=Object(c.useRef)(null),T=Object(c.useRef)(!0);Object(c.useEffect)((function(){return function(){return T.current=!1}}),[]);var N=Object(c.useCallback)((function(e){if(e.currentTarget&&"subtitle"!==e.currentTarget.id||r){if(e.currentTarget&&"subtitle"!==e.currentTarget.id){var a=t.getActiveObject();a&&a.id===e.currentTarget.id||t.setActiveObject(e.currentTarget),x(e.currentTarget),k(!1)}else k(!0);e.pointer.x+y.current.offsetWidth>t.getWidth()?y.current.style.left=e.pointer.x-y.current.offsetWidth+"px":y.current.style.left=e.pointer.x+"px",y.current.style.top=e.pointer.y+"px"}else p({type:"setRightClickEvent",data:null})}),[t,p,r]),D=function(e){e.preventDefault(),f&&(g(!1),p({type:"setRightClickEvent",data:null}))},A=function(e){t.getObjects().filter((function(e){return"video"===e.type})).length>1&&(l((function(t){return t.filter((function(t){return t.id!==e.id}))})),t.remove(e))},I=function(e){var c=e.currentTarget.id;if("delete"===c){if("subtitle"===S.id)s({type:"setIsSubtitles",data:!1});else if("video"===S.type)A(S);else if("activeSelection"===S.type)for(var u=0;u<S._objects.length;u++){var d=S._objects[u];console.log(d),"video"===d.type?A(d):"subtitle"===d.id?s({type:"setIsSubtitles",data:!1}):t.remove(d)}else t.remove(S);t.discardActiveObject().requestRenderAll(),p({type:"setRightClickEvent",data:null})}else"bringToFront"===c?(t.bringToFront(S),i&&t.bringToFront(i),s({type:"setShouldTriggerCanvasUpdate",data:!0}),p({type:"setRightClickEvent",data:null})):"sendToBack"===c?(t.sendToBack(S),s({type:"setShouldTriggerCanvasUpdate",data:!0}),p({type:"setRightClickEvent",data:null})):"copy"===c?(o({object:S,coords:{top:S.top,left:S.left}}),p({type:"setRightClickEvent",data:null})):"paste"===c&&(r?ca(t,r,a,n,o,p,i,l):p({type:"setRightClickEvent",data:null}))};Object(c.useEffect)((function(){return t&&b.rightClickEvent&&(N(b.rightClickEvent),setTimeout((function(){T.current&&g(!0)}),400)),function(){T.current&&g(!1)}}),[t,b.rightClickEvent,N]);var R=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:oa.a.Overlay,onContextMenu:D,onClick:D}),Object(m.jsxs)("ul",{onContextMenu:function(e){return e.preventDefault()},ref:y,className:oa.a.Menu,id:"contextMenu",children:[w?null:Object(m.jsxs)("li",{className:oa.a.Option,id:"copy",onClick:I,children:[Object(m.jsx)("p",{children:"Copy"}),Object(m.jsx)("p",{children:"\u2318C"})]}),Object(m.jsxs)("li",{className:oa.a.Option,id:"paste",onClick:I,children:[Object(m.jsx)("p",{children:"Paste"}),Object(m.jsx)("p",{children:"\u2318V"})]}),w?null:Object(m.jsxs)("li",{className:oa.a.Option,id:"delete",onClick:I,children:[Object(m.jsx)("p",{children:"Delete"}),Object(m.jsx)("p",{children:"DEL"})]}),w?null:Object(m.jsx)("li",{className:oa.a.Border}),w?null:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("li",{className:oa.a.Option,id:"bringToFront",onClick:I,children:[Object(m.jsx)("p",{children:"Bring to front"}),Object(m.jsx)("p",{children:"\u2318]"})]}),Object(m.jsxs)("li",{className:oa.a.Option,id:"sendToBack",onClick:I,children:[Object(m.jsx)("p",{children:"Send to back"}),Object(m.jsx)("p",{children:"\u2318["})]})]})]})]});return b.rightClickEvent?R:null},la=function(e,t,a,n){var r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!0),u=Object(c.useRef)(null),b=Object(c.useCallback)((function(){u.current&&Oe.fabric.util.cancelAnimFrame(u.current),e&&e.requestRenderAll(),u.current=null}),[e]),p=Object(c.useCallback)((function(t){u.current&&Oe.fabric.util.cancelAnimFrame(u.current);Oe.fabric.util.requestAnimFrame((function a(){e.requestRenderAll();for(var n=0;n<t.length;n++)t[n].dirty=!0;u.current=Oe.fabric.util.requestAnimFrame(a)}))}),[e]);Object(c.useEffect)((function(){e&&t?p(t):e&&b()}),[e,p,b,t]),Object(c.useEffect)((function(){i&&(s(!1),a.currentTime=n>0?n:.001)}),[i,n,a]),Object(c.useEffect)((function(){return function(){u.current&&Oe.fabric.util.cancelAnimFrame(u.current)}}),[]),Object(c.useEffect)((function(){return function(){return l.current=!1}}),[])},ua=a(114),da=a.n(ua),ba=function(e,t){return new Oe.fabric.SpeakerCropBox(Object(ae.a)(Object(ae.a)({},e),{},{fill:"rgba(111, 122, 208, 0.4)",top:0,left:0,borderColor:"#6F7BD0",id:t}))},pa=function(e,t,a){var n=function(e){var t=e.scaleX,a=e.scaleY,n=e.width,r=e.height,o=e.cropRect,i=Math.min(n,r),c=i,s=c===r?a:t;return o&&(s*=i/(c=Math.min(e.originalWidth,e.originalHeight))),{scale:s,radius:c/2}}(e),r=n.scale,o=n.radius;return new Oe.fabric.CircleCropBox({originX:"left",originY:"top",left:a,top:t,strokeDashArray:[12,12],fill:"rgba(255, 255, 255, 0)",borderColor:"rgba(0, 0, 0, 0)",strokeWidth:1,strokeUniform:!0,stroke:"#dbff17",radius:o,scaleX:r,scaleY:r,selectable:!0,type:"cropbox",excludeFromExport:!0,noScaleCache:!1,globalCompositeOperation:"source-over",lockMovementY:!0,lockMovementX:!0})},ja=function(e,t,a,n,r,o,i,c,s){n.add(a),e.top=c,e.left=s,e.excludeFromExport=!0,e.id="media",e.visible=!0,e.globalCompositeOperation="destination-atop",e.setControlsVisibility({mtr:!1,ml:!1,mr:!1,mt:!1,mb:!1}),n.add(e),function(e){var t=e.cropRect;t&&(e.top=e.top-t.y*e.scaleY,e.left=e.left-t.x*e.scaleX,e.width=e.originalWidth,e.height=e.originalHeight,e.cropRect={x:0,y:0,w:e.width,h:e.height}),e.setCoords()}(e),n.setActiveObject(e),n.add(t),n.requestRenderAll(),r(e),i(a),o(t)},ha=function(e,t,a,n,r,o,i,c,s){t.discardActiveObject(),e.visible=!1,e.angle=0,e.setCoords(),e.clipPath=null,e.strokeWidth=0;var l,u="video"===e.type,d="rect"===i,b=null,p=null,j=s.current.getBoundingClientRect(),h=a.getZoom(),f=e.top+j.y/h,g=e.left+j.x/h;d?(b=function(e,t,a){var n=function(e){var t=e.scaleX,a=e.scaleY,n=e.width,r=e.height;return e.cropRect&&(t*=e.width/e.originalWidth,a*=e.height/e.originalHeight,n=e.originalWidth,r=e.originalHeight),{scaleX:t,scaleY:a,width:n,height:r}}(e),r=n.scaleX,o=n.scaleY,i=n.width,c=n.height;return new Oe.fabric.RectCropBox({fill:"rgba(255, 255, 255, 0)",originX:"left",originY:"top",left:a,top:t,width:i,height:c,scaleX:r,scaleY:o,borderColor:"rgba(0, 0, 0, 0)",strokeWidth:1,strokeUniform:!0,strokeDashArray:[12,12],stroke:"#dbff17",selectable:!0,type:"cropbox",noScaleCache:!1,excludeFromExport:!0,globalCompositeOperation:"source-over",lockMovementY:!0,lockMovementX:!0})}(e,f,g),l=b,p=new Oe.fabric.Rect({fill:"rgba(255, 255, 255, 1)",originX:"left",originY:"top",top:l.top,left:l.left,width:l.width,height:l.height,scaleX:l.scaleX,scaleY:l.scaleY,selectable:!1,borderColor:"rgba(0, 0, 0, 0)",stroke:"rgba(0, 0, 0, 0)",strokeWidth:1,strokeUniform:!1,type:"holeBox",excludeFromExport:!0,noScaleCache:!1,globalCompositeOperation:"destination-out"})):(b=pa(e,f,g),p=function(e){return new Oe.fabric.Circle({fill:"rgba(255, 255, 255, 1)",originX:"left",originY:"top",top:e.top,left:e.left,radius:e.radius,scaleX:e.scaleX,scaleY:e.scaleY,selectable:!1,borderColor:"rgba(0, 0, 0, 0)",stroke:"rgba(0, 0, 0, 0)",strokeWidth:1,strokeUniform:!1,type:"holeBox",excludeFromExport:!0,noScaleCache:!1,globalCompositeOperation:"destination-out"})}(b));var O=null;if(O=u?e._element:c.filter((function(t){return t.src===e.src}))[0],a.add(function(e){var t=e.getZoom(),a=e.getWidth()/t,n=e.getHeight()/t;return new Oe.fabric.Rect({left:0,top:0,width:a,height:n,noScaleCache:!1,fill:"rgba(0, 0, 0, 0.5)",strokeWidth:0,selectable:!1,excludeFromExport:!0,rx:0,ry:0,id:"overlay",globalCompositeOperation:"source-over",hoverCursor:"default"})}(a)),O){var m=new(u?Oe.fabric.Video:Oe.fabric.CustomImage)(O,{originalWidth:e.originalWidth,originalHeight:e.originalHeight,width:e.width,height:e.height,scaleX:e.scaleX,scaleY:e.scaleY,cornerRadius:e.cornerRadius,cropRect:e.cropRect});ja(m,b,p,a,n,r,o,f,g)}else e.clone((function(e){ja(e,b,p,a,n,r,o,f,g)}))},fa=function(e,t){var a=t.height*t.scaleY,n=t.width*t.scaleX,r=e.height*e.scaleY,o=e.width*e.scaleX,i=t.top,c=t.left,s=i+a,l=c+n,u=e.top,d=u+r,b=e.left;return{top:i,left:c,right:l,bottom:s,leftBound:b,topBound:u,rightBound:b+o,bottomBound:d,objectWidth:n,objectHeight:a}},ga=function(e,t){e.left=t.left,e.top=t.top,e.scaleY=t.scaleY,e.scaleX=t.scaleX,e.setCoords()},Oa=function(e,t,a){t.on("moving",(function(n){var r=fa(e,t),o=r.top,i=r.left,c=r.right,s=r.bottom,l=r.leftBound,u=r.topBound,d=r.rightBound,b=r.bottomBound,p=r.objectWidth,j=r.objectHeight;i<l&&(t.left=l),o<u&&(t.top=u),c>d&&(t.left=d-p),s>b&&(t.top=b-j),a&&ga(a,t)})),t.on("scaling",(function(n){var r=fa(e,t),o=r.top,i=r.left,c=r.right,s=r.bottom,l=r.leftBound,u=r.topBound,d=r.rightBound,b=r.bottomBound,p=r.objectWidth,j=r.objectHeight;t.left=Math.min(Math.max(i,l),d-p),t.top=Math.min(Math.max(o,u),b-j),t.scaleX>e.scaleX&&(t.scaleX=e.scaleX,(i<l||c>d)&&(t.left=l)),t.scaleY>e.scaleY&&(t.scaleY=e.scaleY,(o<u||s>b)&&(t.top=u)),a&&ga(a,t)}))},ma=function(e,t,a,n,r,o,i){var s=Object(c.useState)(null),l=Object(d.a)(s,2),u=l[0],b=l[1],p=Object(c.useState)(null),j=Object(d.a)(p,2),h=j[0],f=j[1],g=Object(c.useState)(null),O=Object(d.a)(g,2),m=O[0],v=O[1],S=Object(c.useState)(null),x=Object(d.a)(S,2),C=x[0],_=x[1],w=Object(c.useState)(null),k=Object(d.a)(w,2),y=k[0],T=k[1],N=Object(c.useState)(null),D=Object(d.a)(N,2),A=D[0],I=D[1],R=Object(c.useCallback)((function(){b(null),v(null),f(null),T(null),I(null)}),[]);Object(c.useEffect)((function(){e.shouldCropMedia&&h&&y&&m?function(e,t,a,n,r,o,i){var c=t.scaleX/a.scaleX,s=t.scaleY/a.scaleY,l=(t.top-a.top)/a.scaleY,u=(t.left-a.left)/a.scaleX;e.width=t.width*c,e.height=t.height*s,e.scaleX=a.scaleX,e.scaleY=a.scaleY,e.cropRect={x:u,y:l,w:t.width*c,h:t.height*s};var d=i.current.getBoundingClientRect(),b=o.getZoom();if(e.top=t.top-d.y/b,e.left=t.left-d.x/b,e.setCoords(),!e.isOnScreen()){var p=r.getZoom(),j=r.getWidth()/p,h=r.getHeight()/p;e.top>h?e.top=h-e.height*e.scaleY:e.top<0&&(e.top=0),e.left>j?e.left=j-e.width*e.scaleX:e.left<0&&(e.left=0)}n(e)}(h,y,m,I,a,n,i):e.shouldCropMedia&&I(h)}),[e.shouldCropMedia,h,y,m,a,n,i]),Object(c.useEffect)((function(){A&&e.shouldCropMedia&&function(e,t,a,n,r,o,i,c){n.visible=!0,n.angle=o.angle,e.setActiveObject(n);var s=n.type;n.setControlsVisibility({mtr:"customImage"===s,ml:!0,mr:!0,mt:!0,mb:!0}),"circle"===r&&(n.cornerRadius=100),a({type:"setCurrentObject",data:{type:s,object:n}}),n.cornerRadius>0?(a({type:"setVideoStrokeWidth",data:0}),a({type:"video"===s?"setVideoCornerRadius":"setImageCornerRadius",data:n.cornerRadius})):"video"===s&&a({type:"setVideoStrokeWidth",data:o.strokeWidth}),n.setCoords(),t.clear(),c(),e.requestRenderAll(),i({type:"setDbClickEvent",data:null}),a({type:"setShouldCropMedia",data:!1}),a({type:"setIsCropMode",data:!1}),a({type:"setCurrentCoords",data:n.lineCoords}),a({type:"setShowToolbar",data:!0}),a({type:"setShouldTriggerCanvasUpdate",data:!0})}(a,n,t,A,e.cropType,u,r,R)}),[u,A,e.shouldCropMedia,e.cropType,t,a,n,r,R]),Object(c.useEffect)((function(){if(e.isCropMode){var c=a.getActiveObject();c&&c.originalWidth>0&&c.originalHeight>0?(f(c),b({cornerRadius:c.cornerRadius,width:c.width,height:c.height,top:c.top,left:c.left,angle:c.angle,strokeWidth:c.strokeWidth,cropRect:c.cropRect}),ha(c,a,n,v,T,_,e.cropType,o,i)):(r({type:"setDbClickEvent",data:null}),t({type:"setIsCropMode",data:!1}))}}),[e.isCropMode,e.cropType,a,n,t,r,o,i]),Object(c.useEffect)((function(){var e,t;return y&&m&&C&&(Oa(m,y,C),t=y,(e=m).on("moving",(function(a){var n=fa(t,e),r=n.top,o=n.left,i=n.right,c=n.bottom,s=n.leftBound,l=n.topBound,u=n.rightBound,d=n.bottomBound,b=n.objectWidth,p=n.objectHeight;o>s&&(e.left=s),r>l&&(e.top=l),i<u&&(e.left=u-b),c<d&&(e.top=d-p)})),e.on("scaling",(function(a){var n=fa(t,e),r=n.top,o=n.left,i=n.right,c=n.bottom,s=n.leftBound,l=n.topBound,u=n.rightBound,d=n.bottomBound,b=n.objectWidth,p=n.objectHeight;e.left=Math.max(Math.min(o,s),u-b),e.top=Math.max(Math.min(r,l),d-p),(e.scaleX<t.scaleX||e.scaleY<t.scaleY)&&(e.scaleX=Math.max(t.scaleX,t.scaleY),e.scaleY=e.scaleX,(o>s||i<u)&&(e.left=s),(r>l||c<d)&&(e.top=l))}))),function(){m&&(m.off("moving"),m.off("scaling")),y&&(y.off("moving"),y.off("scaling"))}}),[y,m,C]),Object(c.useEffect)((function(){return y&&e.isCropMode&&(n.on("mouse:down",(function(e){(!e.target||"cropbox"!==e.target.type&&"media"!==e.target.id)&&(t({type:"setShouldCropMedia",data:!0}),t({type:"setShowToolbar",data:!1}))})),n.on("mouse:over",(function(e){!e.target||"cropbox"!==e.target.type&&"media"!==e.target.id||(n.setActiveObject(e.target),n.renderAll())})),n.on("mouse:move",(function(e){e.transform&&"drag"===e.transform.action&&"cropbox"===e.target.type&&(e.target=m,e.transform.target=m,e.transform.offsetX=e.absolutePointer.x-m.left,e.transform.offsetY=e.absolutePointer.y-m.top)}))),function(){n&&(n.off("mouse:over"),n.off("mouse:down"),n.off("mouse:move"))}}),[y,e.isCropMode,t,n,m])},va=function(e,t){var a=Object(c.useState)(!0),n=Object(d.a)(a,2),r=n[0],o=n[1];Object(c.useEffect)((function(){if(e&&r){o(!1);var a=new Oe.fabric.Canvas("cropCanvas",{width:0,height:0,preserveObjectStacking:!0,fireRightClick:!0,stopContextMenu:!0,selection:!1,uniScaleKey:null,altActionKey:null});t(a)}}),[e,r,t])},Sa=function(e,t,a,n){var r=t.getObjects(),o=null,i=null,c=null;r.length>0&&(i=(o=r.filter((function(e){return"media"===e.id}))[0]).top-n.current.y/n.current.zoom,c=o.left-n.current.x/n.current.zoom);var s=function(e,t){var a=window.innerWidth,n=window.innerHeight,r=Math.min(e.width/e.videoWidth,e.height/e.videoHeight);return t.setZoom(r),t.setDimensions({width:a,height:n}),{newWidth:a,newHeight:n,newZoom:r}}(e,t),l=s.newWidth,u=s.newHeight,d=s.newZoom;if(o){var b=a.current.getBoundingClientRect();!function(e,t,a,n,r){for(var o=0;o<e.length;o++){var i=e[o];"overlay"===i.id?(i.width=a/t,i.height=n/t):(i.top-=r.top,i.left-=r.left)}}(r,d,l,u,function(e,t,a,n,r){var o={left:0,top:0};if(e){var i=t+r.y/n,c=a+r.x/n;o.top=e.top-i,o.left=e.left-c}return o}(o,i,c,d,b)),n.current={x:b.x,y:b.y,zoom:d}}t.requestRenderAll()},xa=function(e,t,a,n,r){var o=Object(c.useRef)(null),i=Object(c.useCallback)((function(){e&&(e.resize=t.resize,Sa(t,e,r,o))}),[t,e,r]);Object(c.useEffect)((function(){i()}),[i]),Object(c.useEffect)((function(){return window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}}),[i]),Object(c.useEffect)((function(){if(a){var t=r.current.getBoundingClientRect(),i=e.getZoom();o.current={x:t.x,y:t.y,zoom:i},n.current.style.display="block"}else o.current=null,n.current.style.display="none"}),[a,e,n,r])},Ca=function(e){var t=e.canvas,a=e.userAssets,n=e.canvasRef,r=Object(c.useContext)(te),o=r.editorState,i=r.editorDispatch,s=Object(c.useContext)(ke).eventDispatch,l=Object(c.useState)(null),u=Object(d.a)(l,2),b=u[0],p=u[1],j=Object(c.useRef)(null);va(t,p),ma(o,i,t,b,s,a,n),xa(b,o.canvasState,o.isCropMode,j,n,i);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:da.a.CropCanvas,ref:j,children:Object(m.jsx)("canvas",{id:"cropCanvas"})}),o.isCropMode?Object(m.jsx)("div",{className:da.a.Backdrop,onClick:function(){i({type:"setShouldCropMedia",data:!0}),i({type:"setShowToolbar",data:!1})}}):null]})},_a=function(e){return new Promise((function(t,a){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){return t(n)},n.onerror=function(){return a()},n.src=e}))},wa=function(){var e=Object(k.a)(w.a.mark((function e(t,a,n){var r,o,i,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(le.a)(new Set(t)),o=r.map((function(e){return _a(e)})),e.next=4,Promise.allSettled(o);case 4:i=e.sent,c=i.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value})),n.current&&a(c);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ka=function(e){var t=e.toJSON(["id","rx","ry","crossOrigin"]),a=e.getZoom();return t.width=Math.round(e.getWidth()/a),t.height=Math.round(e.getHeight()/a),t.resize=e.resize,t},ya=function(e,t,a){var n=e,r=t,o="original";return"landscape"===a?(n=1280,r=720,o=a):"square"===a?(n=1280,r=1280,o=a):"vertical"===a&&(n=720,r=1280,o=a),{width:n,height:r,resize:o}},Ta=function(e,t){var a=t.width,n=t.height,r=e.left,o=e.top;if(e.width*e.scaleX>t.originalWidth||e.height*e.scaleY>t.originalHeight){var i=e.height/e.originalHeight,c=e.width/e.originalWidth;a=t.originalWidth*c,n=t.originalHeight*i;var s=e.width*e.scaleX/a,l=e.height*e.scaleY/n,u=Math.min(s,l);e.scaleX=u,e.scaleY=u}else a=e.width*e.scaleX,n=e.height*e.scaleY,e.scaleX=1,e.scaleY=1;r+a>t.originalWidth&&(r-=r+a-t.originalWidth),o+n>t.originalHeight&&(o-=o+n-t.originalHeight),e.originalWidth=t.originalWidth,e.originalHeight=t.originalHeight,e.width=a,e.height=n,e.cropRect={x:r,y:o,w:a,h:n},e.src=t.src,0!==e.cornerRadius&&e.set("clipPath",De(e,e.cornerRadius)),e.setCoords()},Na=function(e,t,a,n,r,o,i,c,s){e.clear();var l=[],u=1;e.loadFromJSON(t,(function(){if(a.current){for(var d=e.getObjects(),b=0;b<d.length;b++){var p=d[b];"subtitle"===p.id?(s(p),n.isSubtitles||i({type:"setIsSubtitles",data:!0}),i({type:"setSubtitlesState",data:{fontFamily:p.fontFamily,fontStyle:p.fontStyle,fontWeight:p.fontWeight,fontSize:p.fontSize,fill:p.fill,backgroundColor:p.backgroundColor}}),Ie(e,p,p.fontFamily)):(p.id=u,u++,"customTextbox"===p.type?Ie(e,p,p.fontFamily):"video"===p.type&&l.push(p))}!function(e,t,a,n,r,o,i,c,s){for(var l=null,u=0;u<a.length;u++){var d=a[u];s[u]&&(l=s[u]),l?Ta(d,l):e.remove(d)}var b=ya(n.canvasState.initialWidth,n.canvasState.initialHeight,r.resize);c({type:"setVideoSize",data:{width:b.width,height:b.height,resize:b.resize}}),i(t),o(a),c({type:"setIsLoadingTemplate",data:!1})}(e,u,l,n,t,r,o,i,c)}}))},Da=function(e,t,a,n,r,o,i,s,l,u,b){var p=Object(c.useState)(!0),j=Object(d.a)(p,2),h=j[0],f=j[1],g=Object(c.useState)(null),O=Object(d.a)(g,2),m=O[0],v=O[1],S=Object(c.useRef)(!1);Object(c.useEffect)((function(){m&&(f(!0),v(null),i(m),Na(a,e,S,r,l,s,o,u,b),t(null))}),[e,a,m,r,i,t,l,s,o,u,b]),Object(c.useEffect)((function(){if(a&&e&&h){f(!1),o({type:"setIsSubtitles",data:!1}),b(null),o({type:"setIsLoadingTemplate",data:!0}),n.pause(),a.clear();var t=e.objects.filter((function(e){return"customImage"===e.type})).map((function(e){return e.src}));wa(t,v,S)}}),[e,a,o,n,h,b]),Object(c.useEffect)((function(){return S.current=!0,function(){return S.current=!1}}),[])},Aa=function(e){var t=e.canvas,a=e.setCanvas,n=e.video,r=e.fabricSub,o=e.setFabricSub,i=e.currentTime,s=e.speakers,l=e.info,u=e.userAssets,b=e.setUserAssets,p=e.templateToLoad,j=e.setTemplateToLoad,h=e.clipboard,f=e.setClipboard,g=e.objectIdCount,O=e.setObjectIdCount,v=e.updatetObjectId,S=e.speakerVideos,x=e.setSpeakerVideos,C=e.canvasRef,_=Object(c.useContext)(te),w=_.editorState,k=_.editorDispatch,y=Object(c.useContext)(ke),T=y.eventState,N=y.eventDispatch,D=Object(c.useState)(!1),A=Object(d.a)(D,2),I=A[0],R=A[1];return Da(p,j,t,n,w,k,b,O,x,S,o),la(t,S,n,i),Ze(!0,w.canvasState,t,T,N,k,w.shouldSaveTemplate),_e(w,k,t,g,v,u,b),We(t,w,k,r),Ke(w,k,t),Qe(w.canvasState,k,t),et(w.canvasState,a,l,R,s,O,x,u,o,k),nt(t,w),at(n,t,s,g,O,I,x),Object(m.jsxs)("div",{className:ge.a.CanvasComponent,id:"canvasComponent",ref:C,children:[Object(m.jsx)("div",{className:ge.a.Canvas,children:Object(m.jsx)("canvas",{id:"canvas"})}),Object(m.jsx)(Ca,{canvas:t,userAssets:u,canvasRef:C}),w.showToolbar&&w.currentObject.type.length>0&&"activeSelection"!==w.currentObject.type?Object(m.jsx)(na,{canvas:t,type:w.currentObject.type}):null,Object(m.jsx)(sa,{canvas:t,objId:g,updateId:v,clipboard:h,setClipboard:f,fabricSub:r,dispatch:k,setSpeakerVideos:x})]})},Ia={isMoving:!1,rightClickEvent:null,dbClickEvent:null},Ra=function(e,t){switch(t.type){case"setIsMoving":return Object(ae.a)(Object(ae.a)({},e),{},{isMoving:t.data});case"setRightClickEvent":return Object(ae.a)(Object(ae.a)({},e),{},{rightClickEvent:t.data});case"setDbClickEvent":return Object(ae.a)(Object(ae.a)({},e),{},{dbClickEvent:t.data});default:return e}},Ea=function(){var e=Object(c.useReducer)(Ra,Ia),t=Object(d.a)(e,2);return[t[0],t[1]]},Pa=a(17),La=a.n(Pa),Fa=a(56),Ma=a.n(Fa),Ba=[{name:"landscape",text:"Landscape 16:9",boxStyle:{width:"11.25rem"}},{name:"square",text:"Square 1:1",boxStyle:{width:"6.375rem"}},{name:"vertical",text:"Vertical 9:16",boxStyle:{width:"3.6875rem"}}],Ha=function(){var e=Object(c.useContext)(te),t=e.editorState,a=e.editorDispatch,n=function(e){var n=e.currentTarget.id,r=ya(t.canvasState.initialWidth,t.canvasState.initialHeight,n),o=r.width,i=r.height,c=r.resize;a({type:"setVideoSize",data:{width:o,height:i,resize:c}}),a({type:"setIsResizeDropdown",data:!1})};return Object(m.jsx)("div",{className:Ma.a.Dropdown,children:Object(m.jsx)("ul",{className:Ma.a.SizeOptions,children:Ba.map((function(e){return Object(m.jsxs)("li",{id:e.name,className:[Ma.a.SizeOption,t.canvasState.resize===e.name?Ma.a.Current:null].join(" "),onClick:n,children:[Object(m.jsx)("p",{className:Ma.a.SizeOptionText,children:e.text}),Object(m.jsx)("div",{className:Ma.a.SizeOptionBox,style:e.boxStyle})]},e.name)}))})})},Ua=a(23),Wa=a.n(Ua),Va=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(e){return new Promise((function(t,a){D.delete("/template/".concat(e)).then((function(e){t(e)})).catch((function(e){a(e)}))}))}),[]),b=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),n(!0),e.prev=2,e.next=5,u(t);case 5:a=e.sent,l.current&&s(a.data),console.log(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error Deleting Templates",e.t0);case 13:return e.prev=13,l.current&&n(!1),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[2,10,13,17]])})));return function(t){return e.apply(this,arguments)}}(),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isDeletingTemplate:a,deleteTemplate:b,deleteTemplateRes:i}},za=(a(318),function(e){var t=e.style;return Object(m.jsxs)("div",{className:"sk-circle",style:t,children:[Object(m.jsx)("div",{className:"sk-circle1 sk-child"}),Object(m.jsx)("div",{className:"sk-circle2 sk-child"}),Object(m.jsx)("div",{className:"sk-circle3 sk-child"}),Object(m.jsx)("div",{className:"sk-circle4 sk-child"}),Object(m.jsx)("div",{className:"sk-circle5 sk-child"}),Object(m.jsx)("div",{className:"sk-circle6 sk-child"}),Object(m.jsx)("div",{className:"sk-circle7 sk-child"}),Object(m.jsx)("div",{className:"sk-circle8 sk-child"}),Object(m.jsx)("div",{className:"sk-circle9 sk-child"}),Object(m.jsx)("div",{className:"sk-circle10 sk-child"}),Object(m.jsx)("div",{className:"sk-circle11 sk-child"}),Object(m.jsx)("div",{className:"sk-circle12 sk-child"})]})}),Ya=function(e){var t=e.isCreatingTemplate,a=e.templates,n=e.setShouldGetTemplates,r=e.currentOption,o=e.setCurrentOption,i=e.setTemplateToLoad,s=e.isGettingTemplates,l=e.templateTypeOption,u=Object(c.useContext)(te).editorDispatch,d=Va(),b=d.isDeletingTemplate,p=d.deleteTemplate,j=d.deleteTemplateRes,h=Object(c.useRef)(null);Object(c.useEffect)((function(){j&&n(!0)}),[j,n]),Object(c.useEffect)((function(){r||n(!0)}),[r,n]);var f=Object(c.useCallback)((function(e){e.preventDefault(),h.current.scrollLeft+=e.deltaY}),[]);Object(c.useEffect)((function(){var e=h.current;return e.addEventListener("wheel",f),function(){return e.removeEventListener("wheel",f)}}),[f]);var g=function(e){var t=e.currentTarget.id;a&&a[t]&&o({type:t,templates:Object(le.a)(a[t])})};return Object(m.jsxs)("div",{className:Wa.a.Dropdown,children:[Object(m.jsxs)("ul",{className:Wa.a.TemplateOptions,children:[Object(m.jsx)("li",{className:[Wa.a.TemplateOption,r&&"commonTemplate"===r.type?Wa.a.Current:null].join(" "),id:"commonTemplate",onClick:g,children:"Templates"}),Object(m.jsx)("li",{className:[Wa.a.TemplateOption,r&&"userTemplate"===r.type?Wa.a.Current:null].join(" "),id:"userTemplate",onClick:g,children:"My templates"})]}),Object(m.jsxs)("ul",{className:Wa.a.Templates,ref:h,children:[r&&"userTemplate"===r.type?Object(m.jsx)("li",{className:[Wa.a.Template,Wa.a.SaveTemplate].join(" "),id:"saveAsTemplate",onClick:function(){t||u({type:"setShouldSaveTemplate",data:!0})},children:t?Object(m.jsx)(za,{style:{width:"40px",height:"40px"}}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("img",{className:Wa.a.SaveImg,src:O,alt:"save"}),Object(m.jsx)("span",{className:Wa.a.SaveText,children:"Save as template"})]})}):null,!r||b||s?Object(m.jsx)(za,{style:{width:"70px",height:"70px"}}):r.templates.map((function(e){return Object(m.jsxs)("li",{className:Wa.a.Template,id:e._id,children:[l===r.type?Object(m.jsxs)("div",{className:Wa.a.DeleteContainer,onClick:function(){return t=e,void(!0===window.confirm("Are you sure you want to delete this template?")&&p(t._id));var t},children:[Object(m.jsx)("span",{className:Wa.a.XLine1}),Object(m.jsx)("span",{className:Wa.a.XLine2})]}):null,Object(m.jsx)("img",{src:e.image_url,alt:"template",className:Wa.a.TemplateImg,onClick:function(){return t=e,u({type:"setIsTemplatesDropdown",data:!1}),void i(t);var t}})]},e._id)}))]})]})},Xa=a(165),Ga=a.n(Xa),Za=function(e){var t=Object(c.useContext)(te),a=t.editorState,n=t.editorDispatch;return Object(m.jsx)("div",{className:Ga.a.Backdrop,onClick:function(e){if("backdrop"===e.target.id){var t="";a.isImageDropdown?t="setIsImageDropdown":a.isShapeDropdown?t="setIsShapeDropdown":a.isSubtitlesDropdown?t="setIsSubtitlesDropdown":a.shouldReplaceImage?t="setShouldReplaceImage":a.isResizeDropdown?t="setIsResizeDropdown":a.isCanvasBgColorDropdown?t="setIsCanvasBgColorDropdown":a.isTemplatesDropdown?t="setIsTemplatesDropdown":a.isZoomDropdown?t="setIsZoomDropdown":a.shouldAddCanvasBgImage?t="setShouldAddCanvasBgImage":a.isDownloadDropdown&&(t="setIsDownloadDropdown"),n({type:t,data:!1})}},id:"backdrop",children:e.children})},qa=["title","titleId"];function Ka(){return(Ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ja(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Qa(e,t){var a=e.title,s=e.titleId,l=Ja(e,qa);return c.createElement("svg",Ka({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},l),a?c.createElement("title",{id:s},a):null,n||(n=c.createElement("path",{d:"M6 2H2.66667C2.29848 2 2 2.29848 2 2.66667V6C2 6.36819 2.29848 6.66667 2.66667 6.66667H6C6.36819 6.66667 6.66667 6.36819 6.66667 6V2.66667C6.66667 2.29848 6.36819 2 6 2Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),r||(r=c.createElement("path",{d:"M6 9.33331H2.66667C2.29848 9.33331 2 9.63179 2 9.99998V13.3333C2 13.7015 2.29848 14 2.66667 14H6C6.36819 14 6.66667 13.7015 6.66667 13.3333V9.99998C6.66667 9.63179 6.36819 9.33331 6 9.33331Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),o||(o=c.createElement("path",{d:"M13.3333 2H10C9.63182 2 9.33334 2.29848 9.33334 2.66667V6C9.33334 6.36819 9.63182 6.66667 10 6.66667H13.3333C13.7015 6.66667 14 6.36819 14 6V2.66667C14 2.29848 13.7015 2 13.3333 2Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),i||(i=c.createElement("path",{d:"M13.3333 9.33331H10C9.63182 9.33331 9.33334 9.63179 9.33334 9.99998V13.3333C9.33334 13.7015 9.63182 14 10 14H13.3333C13.7015 14 14 13.7015 14 13.3333V9.99998C14 9.63179 13.7015 9.33331 13.3333 9.33331Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})))}var $a,en,tn=c.forwardRef(Qa),an=(a.p,["title","titleId"]);function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function rn(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function on(e,t){var a=e.title,n=e.titleId,r=rn(e,an);return c.createElement("svg",nn({width:15,height:13,viewBox:"0 0 15 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,$a||($a=c.createElement("path",{d:"M13 1H2.33333C1.59695 1 1 1.59695 1 2.33333V10.3333C1 11.0697 1.59695 11.6667 2.33333 11.6667H13C13.7364 11.6667 14.3333 11.0697 14.3333 10.3333V2.33333C14.3333 1.59695 13.7364 1 13 1Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),en||(en=c.createElement("path",{d:"M12.9997 7H9.66634C8.92996 7 8.33301 7.59695 8.33301 8.33333V10.3333C8.33301 11.0697 8.92996 11.6667 9.66634 11.6667H12.9997C13.7361 11.6667 14.333 11.0697 14.333 10.3333V8.33333C14.333 7.59695 13.7361 7 12.9997 7Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})))}var cn,sn=c.forwardRef(on),ln=(a.p,["title","titleId"]);function un(){return(un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function dn(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bn(e,t){var a=e.title,n=e.titleId,r=dn(e,ln);return c.createElement("svg",un({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,cn||(cn=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 11.4H4.1V11V5.4H1.5V4.6H4.1V2H4.9V4.6H11H11.4V5V10.6H14V11.4H11.4V14H10.6V11.4H4.5ZM10.6 10.6H4.9V5.4H10.6V10.6Z",fill:"#999999"})))}var pn,jn,hn=c.forwardRef(bn),fn=(a.p,function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(){return new Promise((function(e,t){D.get("/template").then((function(t){e(t)})).catch((function(e){t(e)}))}))}),[]),b=Object(c.useCallback)(Object(k.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),n(!0),e.prev=2,e.next=5,u();case 5:t=e.sent,l.current&&s(t.data),console.log(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error Getting Templates",e.t0);case 13:return e.prev=13,l.current&&n(!1),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[2,10,13,17]])}))),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isGettingTemplates:a,getTemplates:b,templates:i,setTemplates:s}}),gn=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(e){return new Promise((function(t,a){D.post("/template",e).then((function(e){t(e)})).catch((function(e){a(e)}))}))}),[]),b=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),n(!0),e.prev=2,e.next=5,u(t);case 5:a=e.sent,l.current&&s(a.data),console.log(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error Creating Template",e.t0);case 13:return e.prev=13,l.current&&n(!1),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[2,10,13,17]])})));return function(t){return e.apply(this,arguments)}}(),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isCreatingTemplate:a,createTemplate:b,createdTemplate:i,setCreatedTemplate:s}},On=function(e,t,a,n,r,o){var i=Object(c.useState)(null),s=Object(d.a)(i,2),l=s[0],u=s[1];Object(c.useEffect)((function(){if(e.shouldSaveTemplate&&l){var n=ka(a),i=Object(ae.a)(Object(ae.a)({},n),{},{image:l,type:o});r(i),t({type:"setShouldSaveTemplate",data:!1}),u(null)}}),[e.shouldSaveTemplate,t,a,r,l,o]),Object(c.useEffect)((function(){e.shouldSaveTemplate&&!n&&function(e,t){var a=new Oe.fabric.Canvas,n=JSON.stringify(e),r=e.getZoom();a.loadFromJSON(n,(function(){a.setZoom(1),a.setDimensions({width:e.getWidth()/r*1,height:e.getHeight()/r*1});var n=a.toDataURL({format:"image/jpg",quality:1});t(n)}))}(a,u)}),[n,e.shouldSaveTemplate,a])},mn=function(e){var t=e.setVideoData,a=e.info,n=e.setSpeakers,r=e.canvas,o=e.setTemplateToLoad,i=Object(c.useContext)(te),s=i.editorState,l=i.editorDispatch,u=fn(),b=u.isGettingTemplates,p=u.getTemplates,j=u.templates,h=u.setTemplates,f=gn(),g=f.isCreatingTemplate,O=f.createTemplate,v=f.createdTemplate,S=f.setCreatedTemplate,x=Object(c.useState)(!1),C=Object(d.a)(x,2),_=C[0],w=C[1],k=Object(c.useState)(s.canvasState.backgroundColor),y=Object(d.a)(k,2),T=y[0],N=y[1],D=Object(c.useRef)(null),A=Object(c.useRef)(null),I=Object(c.useState)(null),R=Object(d.a)(I,2),E=R[0],L=R[1],F=Object(P.g)();On(s,l,r,g,O,"common");var M=function(e){if(!s.shouldCropMedia&&!s.isLoadingTemplate)if(s.isCropMode)l({type:"setShouldCropMedia",data:!0});else{var o=e.currentTarget.id;if("resize"===o)l({type:"setIsResizeDropdown",data:!0});else if("bgColor"===o)l({type:"setIsCanvasBgColorDropdown",data:!0});else if("crop"===o){t(Object(ae.a)({},a));for(var i=r.getObjects(),c=[],u=0;u<i.length;u++){var d=i[u];"video"===d.type&&c.push(Object(ae.a)({},d.cropRect))}n(c),F.push("/editor/speakers")}else"templates"===o&&l({type:"setIsTemplatesDropdown",data:!0})}};return Object(c.useEffect)((function(){D.current.style.background=T}),[T]),Object(c.useEffect)((function(){_&&(w(!1),p())}),[_,p]),Object(c.useEffect)((function(){j&&L((function(e){return e?{type:e.type,templates:Object(le.a)(j[e.type])}:{type:"commonTemplate",templates:Object(le.a)(j.commonTemplate)}}))}),[j]),Object(c.useEffect)((function(){v&&(h((function(e){var t=v.type;return"common"===t?Object(ae.a)(Object(ae.a)({},e),{},{commonTemplate:[].concat(Object(le.a)(j.commonTemplate),[v])}):"userOnly"===t?Object(ae.a)(Object(ae.a)({},e),{},{userTemplate:[].concat(Object(le.a)(j.userTemplate),[v])}):Object(ae.a)({},e)})),S(null))}),[v,h,j,S]),Object(m.jsxs)("div",{className:La.a.CanvasToolbar,children:[Object(m.jsxs)("div",{className:[La.a.TemplatesContainer,s.isTemplatesDropdown?La.a.Active:null].join(" "),id:"templates",onClick:M,children:[Object(m.jsx)(tn,{}),Object(m.jsx)("p",{className:La.a.OptionText,children:"Templates"})]}),Object(m.jsx)("div",{className:La.a.BorderDiv}),Object(m.jsxs)("div",{className:[La.a.ResizeContainer,s.isResizeDropdown?La.a.Active:null].join(" "),id:"resize",onClick:M,children:[Object(m.jsx)(sn,{}),Object(m.jsx)("p",{className:La.a.OptionText,children:"Resize"})]}),Object(m.jsx)("div",{className:La.a.BorderDiv}),Object(m.jsxs)("div",{className:La.a.CropContainer,id:"crop",onClick:M,children:[Object(m.jsx)(hn,{}),Object(m.jsx)("p",{className:La.a.OptionText,children:"Crop"})]}),Object(m.jsx)("div",{className:La.a.BorderDiv}),Object(m.jsxs)("div",{className:[La.a.ColorContainer,s.isCanvasBgColorDropdown?La.a.Active:null].join(" "),id:"bgColor",onClick:M,children:[Object(m.jsx)("div",{className:La.a.ColorPickerBorder,children:Object(m.jsx)("div",{ref:D,className:La.a.ColorPicker})}),Object(m.jsx)("p",{className:La.a.OptionText,children:"Background color"})]}),s.isTemplatesDropdown?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Za,{}),Object(m.jsx)("div",{className:La.a.TemplatesDropdownContainer,children:Object(m.jsx)(Ya,{isCreatingTemplate:g,getTemplates:p,templates:j,setShouldGetTemplates:w,currentOption:E,setCurrentOption:L,setTemplateToLoad:o,isGettingTemplates:b,templateTypeOption:"commonTemplate"})})]}):null,s.isResizeDropdown?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Za,{}),Object(m.jsx)("div",{className:La.a.ResizeDropdown,ref:A,children:Object(m.jsx)(Ha,{})})]}):null,s.isCanvasBgColorDropdown?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Za,{}),Object(m.jsx)("div",{className:La.a.ColorDropdownContainer,children:Object(m.jsx)(kt.a,{color:T,onChange:function(e){return N(e.rgb)},onChangeComplete:function(e){if(D.current){var t="rgba(".concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", ").concat(e.rgb.a,")");D.current.style.background=t,l({type:"setCanvasBackgroundColor",data:t})}}})})]}):null]})},vn=a.p+"static/media/play.516f516e.svg",Sn=a.p+"static/media/pause.2c1b8172.svg",xn=function(e,t,a){var n=Object(c.useCallback)((function(){var t=function(e){var t=560;"square"===e.resize&&(t=500);var a=e.containerWidth,n=e.videoHeight*a/e.videoWidth;return a>n?a>800&&(n=800*n/a,a=800):n>t&&(a=a*t/n,n=t),{width:a,height:n}}(e),n=t.width,r=t.height;return a.current.style.paddingTop=n>r?"5rem":"1rem",n>100?{width:n,height:r}:{}}),[a,e]),r=Object(c.useCallback)((function(){var e=function(e,t){var a=window.innerWidth-e.current.offsetLeft-t,n=e.current.offsetHeight;return a>800&&(n=800*n/a,a=800),{containerWidth:a,containerHeight:n}}(a,88),n=e.containerWidth,r=e.containerHeight;t({type:"setContainerSize",data:{width:n,height:r}})}),[t,a]);Object(c.useEffect)((function(){if(e.initialWidth>0&&e.shouldCalculateCanvasSize){t({type:"setShouldCalculateCanvasSize",data:!1});var a=n(),r=a.width,o=a.height;r&&t({type:"setCanvasSize",data:{width:r,height:o}})}}),[t,n,e]),Object(c.useEffect)((function(){r()}),[r]),Object(c.useEffect)((function(){return window.addEventListener("resize",r),function(){return window.removeEventListener("resize",r)}}),[r])},Cn=function(e,t,a,n,r,o,i,s,l,u,d,b){var p=Object(c.useCallback)((function(a){if(t.length>0&&t[o]){var n=(a=+a+.05)>=+t[o].start,r=a<=+t[o].end,c=+t[o].end-t[o].start<=.05&&n;(n&&r||c)&&(e.current.currentTime=+t[o].end,t[o+1]?i(o+1):i(null))}}),[t,o,e,i]),j=Object(c.useCallback)((function(e,t){e=+e+.05;var r=a[t],o=a[t+1];if(null!==t&&o&&e>+r.end){var i=+r.end-r.start<=.05&&!n;i||o.active||null===o.next?i||l((function(e){return e+1})):l(o.next)}}),[n,a,l]),h=Object(c.useCallback)((function(e,t){e=+e+.05;var a=t.next;t&&a&&e>+t.val.end&&(a.val.active?d((function(e){return e.next})):d(a.nextSub))}),[d]);Object(c.useEffect)((function(){a&&n&&b&&u&&null!==r&&h(r,u)}),[a,n,b,r,h,u]),Object(c.useEffect)((function(){a&&null!==r&&j(r,s)}),[a,r,j,s]),Object(c.useEffect)((function(){a&&null!==r&&p(r)}),[a,r,p])},_n=a(166),wn=a(115),kn=function e(t){Object(wn.a)(this,e),this.val=t,this.next=null},yn=function(){function e(){Object(wn.a)(this,e),this.head=null,this.tail=null,this.length=0}return Object(_n.a)(e,[{key:"push",value:function(e){var t=new kn(e);return this.head?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),this.length++,this.length}},{key:"pop",value:function(){if(!this.head)return null;for(var e=this.head,t=e;e.next;)t=e,e=e.next;return 1===this.length?(this.head=null,this.tail=null):(this.tail=t,this.tail.next=null),this.length--,e}},{key:"shift",value:function(){if(!this.head)return null;var e=this.head;return this.head=this.head.next,e.next=null,this.length--,0===this.length&&(this.tail=null),e}},{key:"unshift",value:function(e){var t=new kn(e);return this.head?t.next=this.head:this.tail=t,this.head=t,this.length++,this}},{key:"get",value:function(e){if(e<0||e>=this.length)return null;for(var t=this.head,a=0;a<=e;a++){if(a===e)return t;t=t.next}}},{key:"set",value:function(e,t){var a=this.get(e);return!!a&&(a.val=t,!0)}},{key:"insert",value:function(e,t){if(e<0||e>this.length)return!1;if(0===e)return!!this.unshift(t);if(e===this.length)return!!this.push(t);var a=new kn(t),n=this.get(e-1);return a.next=n.next,n.next=a,this.length++,!0}},{key:"remove",value:function(e){if(e<0||e>=this.length)return!1;if(0===e)return!!this.shift();if(e===this.length-1)return!!this.pop();var t=this.get(e-1);return t.next=t.next.next,this.length--,!0}},{key:"reverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.head;if(this.length<=1)return this;var a=t.next;return e||(this.tail=this.head,this.tail.next=null),t.next=e,e=t,null===a.next?(this.head=a,this.head.next=e,this):this.reverse(e,a)}}]),e}(),Tn=function(e,t,a,n,r,o,i,s,l,u,d,b,p,j,h){Object(c.useEffect)((function(){a&&s&&!e.isLoadingTemplate&&(b&&p(!1),function(e,t){if(t.val.silence)e.visible=!1;else if(t.val.active){for(var a="",n=0;n<t.val.words.length;n++)a+=t.val.words[n].text;e.set({text:a,visible:!0})}}(a,s))}),[a,s,b,p,o,e.isLoadingTemplate]),Object(c.useEffect)((function(){if(o&&!j&&!e.isLoadingTemplate){var t=oe(u,r,o);null!==t&&l(t)}}),[o,l,r,u,j,e.isLoadingTemplate]),Object(c.useEffect)((function(){a&&d&&function(e,t){for(var a=new yn,n=null,r=null,o=function(e,t,n){r&&(a.get(r).nextSub=a.tail,r=null)},i=0;i<e.length;i++){var c=e[i],s=e[i+1];if(c.active){var l=i===e.length-1,u=+c.end-+c.start;if(c.silence&&(!n&&s&&!s.active||u>=.4))n&&(a.push(Object(ae.a)({},n)),o(),n=null),a.push(Object(ae.a)({},c)),o();else if(c.silence)n?(n.end+=c.end,n.words.push(Object(ae.a)(Object(ae.a)({},c),{},{text:""})),l&&(a.push(n),o())):(n={words:[Object(ae.a)(Object(ae.a)({},c),{},{text:""})],start:c.start,end:c.end,strLength:0,active:!0},l&&(a.push(Object(ae.a)({},c)),o()));else{var d=!!c.text.match(/[.,:!?]$/),b=null!==n&&n.strLength+c.text.length+1<48;if(b&&d&&n){var p="";n.strLength>0&&(p=" "),p+=c.text,n.words.push(Object(ae.a)(Object(ae.a)({},c),{},{text:p})),n.end=c.end,n.strLength+=p.length,a.push(Object(ae.a)({},n)),o(),n=null}else if(d&&n)a.push(Object(ae.a)({},n)),o(),n={words:[Object(ae.a)({},c)],start:c.start,end:c.end,strLength:c.text.length,active:!0},a.push(Object(ae.a)({},n)),n=null;else if(d)n={words:[Object(ae.a)({},c)],start:c.start,end:c.end,strLength:c.text.length,active:!0},a.push(Object(ae.a)({},n)),o(),n=null;else if(b){var j="";n.strLength>0&&(j=" "),j+=c.text,n.words.push(Object(ae.a)(Object(ae.a)({},c),{},{text:j})),n.end=c.end,n.strLength+=j.length,l&&(a.push(n),o())}else n?(a.push(Object(ae.a)({},n)),o(),n={words:[Object(ae.a)({},c)],start:c.start,end:c.end,strLength:c.text.length,active:!0},l&&a.push(n)):(n={words:[Object(ae.a)({},c)],start:c.start,end:c.end,strLength:c.text.length,active:!0},l&&(a.push(n),o()))}}else n?(a.push(Object(ae.a)({},n)),o(),n=null,a.push(Object(ae.a)({},c)),r=a.length-1):(a.push(Object(ae.a)({},c)),r||(r=a.length-1))}t(a)}(r,i)}),[a,d,i,r]),Object(c.useEffect)((function(){if(t&&!a&&e.isSubtitles){j&&h.current.pause();var r=function(e,t){var a=e.getZoom(),n=e.getWidth()/a,r=e.getHeight()/a,o=550<n/2?550:n/2,i=new Oe.fabric.Subtitle(" ",Object(ae.a)({width:o,paddingX:20,paddingY:20,breakWords:!0,editable:!1,originX:"center",originY:"center",textAlign:"center",visible:!1},t.subtitlesState));return i.left=n/2,i.top=r-i.height-i.paddingY,i}(t,e);t.add(r),t.requestRenderAll(),n(r)}else t&&a&&!e.isSubtitles&&!e.isLoadingTemplate&&(t.remove(a),n(null))}),[h,j,e,a,n,t,o,r,i])},Nn=function(e){var t=e.videoRef,a=e.canvas,n=e.setCanvas,r=e.isPlaying,o=e.words,i=e.currentTime,s=e.videoCuts,l=e.setNextCutIndex,u=e.setCurrentWordIndex,b=e.nextCutIndex,p=e.currentWordIndex,j=e.subList,h=e.setSubList,f=e.fabricSub,g=e.setFabricSub,O=e.currentSub,v=e.setCurrentSub,S=e.shouldRerenderSub,x=e.setShouldRerenderSub,C=e.speakers,_=e.info,w=e.setVideoData,k=e.transcriptonStatus,y=e.setSpeakers,T=e.userAssets,N=e.setUserAssets,D=e.clipboard,A=e.setClipboard,I=e.objectIdCount,R=e.setObjectIdCount,E=e.updatetObjectId,P=e.speakerVideos,L=e.setSpeakerVideos,F=Object(c.useContext)(te),M=F.editorState,H=F.editorDispatch,U=Object(c.useContext)(B),W=U.userState,V=U.userDispatch,z=Ea(),Y=Object(d.a)(z,2),X=Y[0],G=Y[1],Z=Object(c.useState)(null),q=Object(d.a)(Z,2),K=q[0],J=q[1],Q=Object(c.useRef)(null),$=Object(c.useRef)(null);return Object(c.useEffect)((function(){W.selectedTemplate&&(J(Object(ae.a)({},W.selectedTemplate)),V({type:"setSelectedTemplate",data:null}))}),[W.selectedTemplate,V]),Object(c.useEffect)((function(){k&&k.isFinished&&t.current.pause()}),[k,t]),Object(c.useEffect)((function(){M.isCropMode&&t.current.pause()}),[M.isCropMode,t]),xn(M.canvasState,H,Q),Cn(t,s,o,r,i,b,l,p,u,O,v,f),Tn(M,a,f,g,o,j,h,O,v,p,s,S,x,r,t),Object(m.jsxs)("div",{className:he.a.Player,ref:Q,children:[!a||M.isLoadingTemplate?Object(m.jsx)(za,{style:{width:"100px",height:"100px",position:"absolute",zIndex:"100",margin:"auto",left:"0",right:"0",top:"200px"}}):null,Object(m.jsx)(ke.Provider,{value:{eventState:X,eventDispatch:G},children:Object(m.jsxs)("div",{className:he.a.PlayerContent,children:[Object(m.jsx)(Aa,{canvas:a,setCanvas:n,video:t.current,fabricSub:f,setFabricSub:g,currentTime:i,speakers:C,info:_,userAssets:T,setUserAssets:N,templateToLoad:K,setTemplateToLoad:J,clipboard:D,setClipboard:A,objectIdCount:I,setObjectIdCount:R,updatetObjectId:E,speakerVideos:P,setSpeakerVideos:L,canvasRef:$}),a?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:he.a.PlayerControls,children:Object(m.jsx)("div",{className:he.a.PlayButton,onClick:function(){M.isLoadingTemplate||(r?t.current.pause():t.current.play())},children:r?Object(m.jsx)("img",{src:Sn,alt:"pause"}):Object(m.jsx)("img",{src:vn,alt:"play"})})}),Object(m.jsx)(mn,{setVideoData:w,info:_,setSpeakers:y,canvas:a,setTemplateToLoad:J})]}):null]})})]})},Dn=a(167),An=a.n(Dn),In=function(e){var t=e.videoRef,a=e.setIsPlaying,n=e.setCurrentSelection,r=e.setCurrentTime,o=e.videoCuts,i=e.words,s=e.setNextCutIndex,l=e.setCurrentWordIndex,u=e.setCurrentSub,b=e.subList,p=e.info,j=e.videoUrl,h=Object(c.useContext)(te).editorDispatch,f=Object(c.useState)(null),g=Object(d.a)(f,2),O=g[0],v=g[1],S=Object(c.useRef)(!0);Object(c.useEffect)((function(){return function(){O&&clearInterval(O)}}),[O]),Object(c.useEffect)((function(){j&&t.current&&!S.current&&(t.current.pause(),a(!1))}),[j,t,a]);return Object(m.jsx)("video",{src:j,id:"video",preload:"auto",className:An.a.Video,ref:t,controls:!0,onPause:function(){return function(e,t,a){e(!1),a&&clearInterval(t)}(a,O,i)},onPlay:function(){return function(e,t,a,n,r,o){t(!0),document.getSelection().removeAllRanges(),e(null),r(setInterval((function(){o&&n.current&&a(n.current.currentTime)}),10))}(n,a,r,t,v,i)},onEnded:function(){return function(e,t,a,n,r,o,i){if(a){e.length>0&&t(0);var c=a[0],s=0,l=c.start;c.active||null===c.next||(l=a[s=c.next].start),n(s),o(oe(s,a,i)),r(+l)}}(o,s,i,l,r,u,b)},onLoadedMetadata:function(){if(S.current){S.current=!1;var e=t.current.videoWidth,a=t.current.videoHeight;h({type:"setCanvasInitialSize",data:{initialWidth:e,initialHeight:a}});var n={};n=p.canvas&&p.canvas.width?{width:+p.canvas.width,height:+p.canvas.height,resize:p.canvas.resize}:{width:e,height:a,resize:"original"},h({type:"setVideoSize",data:n})}},crossOrigin:"Anonymous"})},Rn=a(86),En=a.n(Rn),Pn=function(e,t){return{position:{x:e.left,y:e.top,w:e.width*e.scaleX,h:e.height*e.scaleY,z:t,radius:e.cornerRadius,crop:e.cropRect}}},Ln=function(e,t,a,n,r){e.renderAll();var o=e.toDataURL({format:"image/jpg",quality:1});n.push({image:o,position:{x:0,y:0,w:t,h:a,z:r}}),e.clear(),e.backgroundColor="rgba(255, 255, 255, 0)"},Fn=function(e,t,a,n){var r=t.getObjects(),o=t.getWidth()/t.getZoom(),i=t.getHeight()/t.getZoom(),c=[],s=[],l=!0,u=1;Ln(e,o,i,s,0);for(var d=0;d<r.length;d++){var b=r[d];if("subtitle"===b.type&&l)Ln(e,o,i,s,u),l=!1;else{if("subtitle"===b.type)continue;if("video"===b.type)l&&(Ln(e,o,i,s,u),u++,l=!1),c.push(Pn(b,u)),u++;else{var p=Oe.fabric.util.object.clone(b);e.add(p),l=!0}}}l&&Ln(e,o,i,s,u),n({coordinates:c}),a(s)},Mn=function(){var e=Object(k.a)(w.a.mark((function e(t,a,n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new Oe.fabric.Canvas).setDimensions({width:t.getWidth()/t.getZoom(),height:t.getHeight()/t.getZoom()}),r.backgroundColor=t.backgroundColor,Fn(r,t,a,n);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Bn=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},Hn=function(e){var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),a=(t&&t[4]||"").trim(),n=t?(256|t[1]).toString(16).slice(1)+(256|t[2]).toString(16).slice(1)+(256|t[3]).toString(16).slice(1):e,r=""!==a?a:"01";return n+=r=(255*+r|256).toString(16).slice(1)},Un=function(e,t,a,n){var r=function(e,t){var a=e.canvas.getZoom(),n=e.canvas.getWidth()/a,r=e.canvas.getHeight()/a;return{x:100*e.left/n,y:100*e.top/r,width:n,height:r,objectWidth:e.width,objectHeight:e.height,xCoordinate:e.left,yCoordinate:e.top,top:e.lineCoords.tl.y,left:e.lineCoords.tl.x,fontSize:t.fontSize,fontColor:Hn(t.fill),fontFamily:t.fontFamily,backgroundColor:Hn(t.backgroundColor),textAlign:"center",padding:0!==e.paddingY?e.paddingY/2:0,fontWeight:t.fontWeight,fontStyle:t.fontStyle}}(t,a);console.log(r);for(var o=0,i=0,c=!1,s=[],l=e.head,u=0;u<e.length;u++){var d=l.val;if(d.active&&c){var b=Bn();c=!1,s.push({start:o,end:i,active:!1,silence:!0,_id:b})}else d.active||c?!d.active&&c&&(i=d.end):(c=!0,o=d.start,i=d.end);if(d.silence&&d.active){var p=Bn();s.push({start:d.start,end:d.end,silence:!0,_id:p,active:!0})}else if(d.active){for(var j=Bn(),h="",f=0;f<d.words.length;f++){h+=d.words[f].text}s.push({start:d.start,end:d.end,text:h,silence:!1,active:!0,_id:j})}l=l.next}if(c){var g=Bn();s.push({start:o,end:i,active:!1,silence:!0,_id:g})}var O={captions:s,config:r};console.log(O),n(O)},Wn=a(11),Vn=a.n(Wn),zn=a(33),Yn=a.n(zn),Xn=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(e){return new Promise((function(t,a){D.post("/images",e).then((function(e){t(e)})).catch((function(e){a(e)}))}))}),[]),b=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),n(!0),e.prev=2,e.next=5,u(t);case 5:a=e.sent,l.current&&s(a.data),console.log(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error Uploading Asset",e.t0),l.current&&s("error");case 14:return e.prev=14,l.current&&n(!1),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[2,10,14,18]])})));return function(t){return e.apply(this,arguments)}}(),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isUploadingAsset:a,uploadAsset:b,uploadResponse:i}},Gn=function(e){var t=e.assets,a=e.setAssets,n=Object(c.useContext)(te).editorDispatch,r=Xn(),o=r.isUploadingAsset,i=r.uploadAsset,s=r.uploadResponse,l=Object(c.useRef)(null);Object(c.useEffect)((function(){s&&"error"!==s&&a((function(e){return[].concat(Object(le.a)(e),[s.image])}))}),[s,a]);var u=function(e){var t="customImage",a=e.currentTarget.src,r=a.split(".");"svg"===r[r.length-1]&&(t="svg"),n({type:"setImageToAdd",data:{type:t,src:a}})},d=t?t.filter((function(e,t){return(t+1)%2!==0})):null,b=t?t.filter((function(e,t){return(t+1)%2===0})):null,p=t?Object(m.jsxs)("div",{className:Yn.a.Images,children:[Object(m.jsx)("div",{className:Yn.a.Column,children:d.map((function(e,t){return Object(m.jsx)("div",{className:Yn.a.ImageContainer,children:Object(m.jsx)("img",{className:Yn.a.Image,src:e.image_url,alt:"asset",onClick:u})},e._id)}))}),Object(m.jsx)("div",{className:Yn.a.Column,children:b.map((function(e,t){return Object(m.jsx)("div",{className:Yn.a.ImageContainer,children:Object(m.jsx)("img",{className:Yn.a.Image,src:e.image_url,alt:"asset",onClick:u})},e._id)}))})]}):null;return Object(m.jsxs)("div",{className:Yn.a.Dropdown,children:[Object(m.jsxs)("div",{className:Yn.a.UplaodButtonContainer,children:[Object(m.jsx)("button",{onClick:function(){l.current.click()},className:Yn.a.UploadButton,children:"Upload image"}),Object(m.jsx)("input",{accept:"image/png, image/gif, image/jpeg, image/svg+xml",className:Yn.a.FileInput,ref:l,type:"file",onChange:function(){if(l.current.files[0]){var e=l.current.files[0],t=new FormData;t.append("image",e),i(t)}}}),o?Object(m.jsx)(za,{style:{width:"25px",height:"25px",margin:"25px auto",position:"absolute",right:"20px"}}):null]}),t?p:Object(m.jsx)(za,{style:{width:"50px",height:"50px"}})]})},Zn=a(36),qn=a.n(Zn),Kn=a.p+"static/media/square.1a317c4f.svg",Jn=a.p+"static/media/circle.0bedfa10.svg",Qn=a.p+"static/media/triangle.84433629.svg",$n=a.p+"static/media/line.60fd0829.svg",er=function(){var e=Object(c.useContext)(te).editorDispatch;return Object(m.jsxs)("div",{className:qn.a.Dropdown,onClick:function(t){"IMG"===t.target.tagName?e({type:"setShapeToAdd",data:t.target.id}):t.target.classList.contains(qn.a.ShapeContainer)&&e({type:"setShapeToAdd",data:t.target.childNodes[0].id})},children:[Object(m.jsx)("div",{className:qn.a.ShapeContainer,children:Object(m.jsx)("img",{className:qn.a.Shape,src:Kn,alt:"square",id:"square"})}),Object(m.jsx)("div",{className:qn.a.ShapeContainer,children:Object(m.jsx)("img",{className:qn.a.Shape,src:Jn,alt:"circle",id:"circle"})}),Object(m.jsx)("div",{className:qn.a.ShapeContainer,children:Object(m.jsx)("img",{className:qn.a.Shape,src:Qn,alt:"triangle",id:"triangle"})}),Object(m.jsx)("div",{className:qn.a.ShapeContainer,children:Object(m.jsx)("img",{className:qn.a.Shape,src:$n,alt:"line",id:"line"})})]})},tr=["title","titleId"];function ar(){return(ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function nr(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function rr(e,t){var a=e.title,n=e.titleId,r=nr(e,tr);return c.createElement("svg",ar({width:20,height:21,viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,pn||(pn=c.createElement("path",{d:"M1.66667 5.61532C1.66667 4.73126 2.01786 3.88341 2.64298 3.25829C3.2681 2.63317 4.11595 2.28198 5 2.28198H15C15.8841 2.28198 16.7319 2.63317 17.357 3.25829C17.9821 3.88341 18.3333 4.73126 18.3333 5.61532V15.6153C18.3333 16.4994 17.9821 17.3472 17.357 17.9723C16.7319 18.5975 15.8841 18.9486 15 18.9486H5C4.11595 18.9486 3.2681 18.5975 2.64298 17.9723C2.01786 17.3472 1.66667 16.4994 1.66667 15.6153V5.61532Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),jn||(jn=c.createElement("path",{d:"M7 7.4747H9.51563V14.6153H10.4844V7.4747H13V6.61533H7V7.4747Z",fill:"#999999"})))}var or,ir,cr,sr=c.forwardRef(rr),lr=(a.p,["title","titleId"]);function ur(){return(ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function dr(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function br(e,t){var a=e.title,n=e.titleId,r=dr(e,lr);return c.createElement("svg",ur({width:20,height:21,viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,or||(or=c.createElement("path",{d:"M1.66667 5.61532C1.66667 4.73126 2.01786 3.88341 2.64298 3.25829C3.2681 2.63317 4.11595 2.28198 5 2.28198H15C15.8841 2.28198 16.7319 2.63317 17.357 3.25829C17.9821 3.88341 18.3333 4.73126 18.3333 5.61532V15.6153C18.3333 16.4994 17.9821 17.3472 17.357 17.9723C16.7319 18.5975 15.8841 18.9486 15 18.9486H5C4.11595 18.9486 3.2681 18.5975 2.64298 17.9723C2.01786 17.3472 1.66667 16.4994 1.66667 15.6153V5.61532Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),ir||(ir=c.createElement("path",{d:"M7.08333 9.78199C8.23393 9.78199 9.16667 8.84925 9.16667 7.69866C9.16667 6.54807 8.23393 5.61533 7.08333 5.61533C5.93274 5.61533 5 6.54807 5 7.69866C5 8.84925 5.93274 9.78199 7.08333 9.78199Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),cr||(cr=c.createElement("path",{d:"M12.105 11.1328L5 18.9487H15.225C16.0494 18.9487 16.84 18.6212 17.4229 18.0382C18.0058 17.4553 18.3333 16.6647 18.3333 15.8403C18.3333 15.452 18.1875 15.0778 17.925 14.7903L14.5667 11.1278C14.4101 10.9571 14.2198 10.8208 14.0076 10.7278C13.7955 10.6347 13.5664 10.5869 13.3347 10.5874C13.1031 10.5879 12.8741 10.6366 12.6624 10.7305C12.4507 10.8244 12.2608 10.9614 12.105 11.1328V11.1328Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})))}var pr,jr,hr,fr,gr=c.forwardRef(br),Or=(a.p,["title","titleId"]);function mr(){return(mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function vr(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Sr(e,t){var a=e.title,n=e.titleId,r=vr(e,Or);return c.createElement("svg",mr({width:20,height:21,viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,pr||(pr=c.createElement("path",{d:"M7.5 8.94866C7.96024 8.94866 8.33333 8.57557 8.33333 8.11533C7.22222 6.28198 5.5 3.1153 5.5 3.1153L2.5 8.11533C2.5 8.57557 2.8731 8.94866 3.33333 8.94866H7.5Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),jr||(jr=c.createElement("path",{d:"M9 12.6153L3 17.6153",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),hr||(hr=c.createElement("path",{d:"M16.6667 3.11533H12.5C12.0398 3.11533 11.6667 3.48842 11.6667 3.94866V8.11533C11.6667 8.57556 12.0398 8.94866 12.5 8.94866H16.6667C17.1269 8.94866 17.5 8.57556 17.5 8.11533V3.94866C17.5 3.48842 17.1269 3.11533 16.6667 3.11533Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),fr||(fr=c.createElement("circle",{cx:14.5849,cy:15.2003,r:2.915,stroke:"#999999",strokeWidth:.8})))}var xr,Cr,_r,wr,kr=c.forwardRef(Sr),yr=(a.p,["title","titleId"]);function Tr(){return(Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Nr(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Dr(e,t){var a=e.title,n=e.titleId,r=Nr(e,yr);return c.createElement("svg",Tr({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,xr||(xr=c.createElement("path",{d:"M13.3334 4.99984C13.3334 3.15889 11.841 1.6665 10 1.6665C8.15907 1.6665 6.66669 3.15889 6.66669 4.99984V9.1665C6.66669 11.0075 8.15907 12.4998 10 12.4998C11.841 12.4998 13.3334 11.0075 13.3334 9.1665V4.99984Z",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),Cr||(Cr=c.createElement("path",{d:"M15 13.5767C14.375 14.2868 13.6058 14.8554 12.7435 15.2446C11.8813 15.6337 10.946 15.8344 10 15.8333C9.05402 15.8344 8.11869 15.6337 7.25647 15.2446C6.39424 14.8554 5.62496 14.2868 5 13.5767",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),_r||(_r=c.createElement("path",{d:"M10 15.8335V18.3335",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})),wr||(wr=c.createElement("path",{d:"M8.33331 18.3335H11.6666",stroke:"#999999",strokeWidth:.8,strokeLinecap:"round",strokeLinejoin:"round"})))}var Ar,Ir=c.forwardRef(Dr),Rr=(a.p,function(e){var t=e.canvas,a=e.isWords,n=e.assets,r=e.setAssets,o=Object(c.useContext)(te),i=o.editorState,s=o.editorDispatch,l=function(e){if(t&&!i.shouldCropMedia&&!i.isLoadingTemplate){var n="",r=e.currentTarget.id;"addText"===r?n="setShouldAddText":"addImage"===r?n="setIsImageDropdown":"addShape"===r?n="setIsShapeDropdown":"subtitles"===r&&a&&s({type:"setIsSubtitles",data:!i.isSubtitles}),n.length>0&&s({type:n,data:!0}),i.isCropMode&&s({type:"setShouldCropMedia",data:!0})}};return Object(m.jsxs)("div",{className:Vn.a.ControlsContainer,children:[Object(m.jsxs)("div",{className:Vn.a.AddTextContainer,id:"addText",onClick:l,children:[Object(m.jsx)(sr,{className:Vn.a.AddIcon}),Object(m.jsxs)("div",{className:Vn.a.HoverContent,children:[Object(m.jsx)("div",{className:Vn.a.HoverTriangle}),Object(m.jsx)("p",{className:Vn.a.HoverText,children:"Add text"})]})]}),Object(m.jsxs)("div",{className:Vn.a.DesignControl,children:[Object(m.jsxs)("div",{className:Vn.a.AddImageContainer,id:"addImage",onClick:l,children:[Object(m.jsx)(gr,{className:[Vn.a.AddIcon,i.isImageDropdown?Vn.a.ActiveDesignControl:null].join(" ")}),Object(m.jsxs)("div",{className:Vn.a.HoverContent,children:[Object(m.jsx)("div",{className:Vn.a.HoverTriangle}),Object(m.jsx)("p",{className:Vn.a.HoverText,children:"Add image"})]})]}),i.isImageDropdown||i.shouldReplaceImage||i.shouldAddCanvasBgImage?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Za,{}),Object(m.jsx)("div",{className:Vn.a.ImageDropdown,children:Object(m.jsx)(Gn,{assets:n,setAssets:r})})]}):null]}),Object(m.jsxs)("div",{className:Vn.a.DesignControl,children:[Object(m.jsxs)("div",{className:Vn.a.AddShapeContainer,id:"addShape",onClick:l,children:[Object(m.jsx)(kr,{className:[Vn.a.AddIcon,i.isShapeDropdown?Vn.a.ActiveDesignControl:null].join(" ")}),Object(m.jsxs)("div",{className:Vn.a.HoverContent,children:[Object(m.jsx)("div",{className:Vn.a.HoverTriangle}),Object(m.jsx)("p",{className:Vn.a.HoverText,children:"Add shape"})]})]}),i.isShapeDropdown?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Za,{}),Object(m.jsx)("div",{className:Vn.a.ShapeDropdown,children:Object(m.jsx)(er,{})})]}):null]}),Object(m.jsx)("div",{className:Vn.a.DesignControl,children:Object(m.jsxs)("div",{className:Vn.a.AddShapeContainer,id:"subtitles",onClick:l,children:[Object(m.jsx)(Ir,{className:[Vn.a.AddIcon,i.isSubtitles?Vn.a.ActiveDesignControl:null].join(" ")}),Object(m.jsxs)("div",{className:Vn.a.HoverContent,children:[Object(m.jsx)("div",{className:Vn.a.HoverTriangle}),Object(m.jsx)("p",{className:Vn.a.HoverText,children:"Subtitles"})]})]})})]})}),Er=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(){return new Promise((function(e,t){D.get("/images").then((function(t){e(t)})).catch((function(e){t(e)}))}))}),[]),b=Object(c.useCallback)(Object(k.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),n(!0),e.prev=2,e.next=5,u();case 5:t=e.sent,l.current&&s(t.data),console.log(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error Getting Assets",e.t0);case 13:return e.prev=13,l.current&&n(!1),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[2,10,13,17]])}))),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isGettingAssets:a,getAssets:b,assets:i,setAssets:s}},Pr=function(e){var t=e.canvas,a=e.videoRef,n=e.videoCuts,r=e.duration,o=e.subList,i=e.fabricSub,s=(e.setPreviewUrl,e.videoData),l=e.isUpdatingProject,u=e.isDownloading,b=e.downloadVideo,p=e.isDownloadDataUploaded,j=(e.setIsDownloadDataUploaded,e.words),h=e.setUserAssets,f=Object(c.useContext)(te),g=f.editorState,O=f.editorDispatch,v=Er(),S=v.getAssets,x=v.assets,C=v.setAssets,_=Object(c.useState)(!0),w=Object(d.a)(_,2),k=w[0],y=w[1],T=Object(c.useState)(null),N=Object(d.a)(T,2),D=N[0],A=N[1],I=Object(c.useState)(null),R=Object(d.a)(I,2),E=R[0],L=R[1],F=Object(c.useState)(null),M=Object(d.a)(F,2),B=M[0],U=M[1],W=Object(c.useState)(null),V=Object(d.a)(W,2),z=V[0],Y=V[1],X=Object(c.useState)(null),G=Object(d.a)(X,2),Z=G[0],q=G[1],K=Object(c.useState)(null),J=Object(d.a)(K,2),Q=J[0],$=J[1],ee=Object(P.g)(),ne=Object(c.useRef)(!1),re=Object(c.useRef)(!1);Object(c.useEffect)((function(){p&&ee.push("/editor/progress/".concat(s.id))}),[p,ee,s]),Object(c.useEffect)((function(){D&&(b(D),A(null))}),[D,b,ee,s]),Object(c.useEffect)((function(){if(s&&s.canvas){var e=s.canvas.objects.filter((function(e){return"customImage"===e.type})).map((function(e){return e.src}));wa(e,h,ne)}else s&&h([])}),[h,s]),Object(c.useEffect)((function(){k&&(y(!1),S())}),[k,S]);var oe=Object(c.useCallback)((function(e,t,a,n,r,o){var i=Object(le.a)(e),c={id:o,resize:Object(ae.a)({},r),video:Object(ae.a)({},t),elements:i,breaks:Object(le.a)(a),subtitles:Object(ae.a)({},n)};console.log(c);var s=JSON.stringify(c);A(s),L(null),$(null),Y(null),U(null),q(null)}),[]);return Object(c.useEffect)((function(){E&&B&&z&&Z&&Q&&oe(E,B,z,Z,Q,s.id)}),[E,B,oe,z,Z,s,Q]),Object(c.useEffect)((function(){return ne.current=!0,function(){return ne.current=!1}}),[]),Object(m.jsx)(H,{videoData:s,children:Object(m.jsxs)("div",{className:En.a.Navigation,children:[t?Object(m.jsx)(Rr,{canvas:t,isWords:!!j,assets:x,setAssets:C}):null,l?Object(m.jsx)(za,{style:{width:"1.25rem",height:"1.25rem",marginRight:"10px"}}):Object(m.jsx)("div",{style:{width:"1.25rem",height:"1.25rem",marginRight:"10px"}}),t&&!g.isLoadingTemplate?Object(m.jsx)("button",{id:"downloadDesign",className:En.a.DownloadButton,onClick:function(){g.isCropMode?O({type:"setShouldCropMedia",data:!0}):t&&!u&&!l&&j&&(a.current.pause(),function(e,t,a){for(var n=[],r=null,o=0;o<e.length;o++){var i=e[o];0===o&&0!==i.start?n.push({start:0,end:i.start}):0!==i.start&&n.push({start:r,end:i.start}),r=i.end,o===e.length-1&&i.end!==t&&n.push({start:i.end,end:t})}a(n)}(n,r,Y),i&&o?Un(o,i,g.subtitlesState,q):q({captions:[],config:{}}),Mn(t,L,U),$({type:g.canvasState.resize,w:g.canvasState.videoWidth,h:g.canvasState.videoHeight}))},children:u?"Loading...":"Download"}):null,Object(m.jsx)("a",{className:En.a.DownloadLink,ref:re,href:"/",children:"Download"})]})})},Lr={shouldTriggerCanvasUpdate:!0,shouldTriggerWordsUpdate:!1,shouldSaveTemplate:!1,isLoadingTemplate:!1,isModifyingObject:!1,shouldUndo:!1,canvasState:{initialWidth:0,initialHeight:0,videoHeight:0,videoWidth:0,containerWidth:0,containerHeight:0,resize:"original",width:0,height:0,backgroundColor:"rgba(255,255,255,1)",shouldUpdateCanvas:!1,shouldUpdateCanvasSize:!1,shouldCalculateCanvasSize:!1},shapeToAdd:null,imageToAdd:null,currentCoords:null,showToolbar:!1,shapeState:{fill:"rgba(196,196,196,1)",stroke:"rgba(255,255,255,1)",strokeWidth:0,rx:0,ry:0},imageState:{cornerRadius:0,isSvg:!1},videoState:{cornerRadius:0,stroke:"rgba(255,255,255,1)",strokeWidth:0},isSubtitles:!1,isCropMode:!1,cropType:"rect",shouldCropMedia:!1,isImageDropdown:!1,isSubtitlesDropdown:!1,isShapeDropdown:!1,isTemplatesDropdown:!1,isResizeDropdown:!1,isCanvasBgColorDropdown:!1,isDownloadDropdown:!1,shouldAddText:!1,shouldUpdateText:!1,shouldUpdateSubtitles:!1,shouldUpdateShape:!1,shouldUpdateImage:!1,shouldUpdateVideo:!1,shouldReplaceImage:!1,currentObject:{type:"",object:null},textState:{fontFamily:"Inter",fontStyle:"Normal",fontWeight:"Normal",fontSize:30,fill:"rgba(0,0,0,1)",textAlign:"left"},subtitlesState:{fontFamily:"Inter",fontStyle:"Normal",fontWeight:"Normal",fontSize:24,fill:"rgba(0,0,0,1)",backgroundColor:"rgba(255,255,255,1)"}},Fr=function(e,t){switch(t.type){case"setShouldTriggerCanvasUpdate":return Object(ae.a)(Object(ae.a)({},e),{},{shouldTriggerCanvasUpdate:t.data});case"setShouldTriggerWordsUpdate":return Object(ae.a)(Object(ae.a)({},e),{},{shouldTriggerWordsUpdate:t.data});case"setShouldSaveTemplate":return Object(ae.a)(Object(ae.a)({},e),{},{shouldSaveTemplate:t.data});case"setIsLoadingTemplate":return Object(ae.a)(Object(ae.a)({},e),{},{isLoadingTemplate:t.data});case"setIsModifyingObject":return Object(ae.a)(Object(ae.a)({},e),{},{isModifyingObject:t.data});case"setShouldUndo":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUndo:t.data});case"setCanvasState":return Object(ae.a)(Object(ae.a)({},e),{},{canvasState:t.data});case"setIsDownloadDropdown":return Object(ae.a)(Object(ae.a)({},e),{},{isDownloadDropdown:t.data});case"setIsSubtitles":return Object(ae.a)(Object(ae.a)({},e),{},{isSubtitles:t.data,isSubtitlesDropdown:!1});case"setIsCropMode":return Object(ae.a)(Object(ae.a)({},e),{},{isCropMode:t.data});case"setCropType":return Object(ae.a)(Object(ae.a)({},e),{},{isCropMode:!0,cropType:t.data});case"setShouldCropMedia":return Object(ae.a)(Object(ae.a)({},e),{},{shouldCropMedia:t.data});case"setIsImageDropdown":return Object(ae.a)(Object(ae.a)({},e),{},{isImageDropdown:t.data});case"setIsSubtitlesDropdown":return Object(ae.a)(Object(ae.a)({},e),{},{isSubtitlesDropdown:t.data});case"setIsTemplatesDropdown":return Object(ae.a)(Object(ae.a)({},e),{},{isTemplatesDropdown:t.data});case"setIsShapeDropdown":return Object(ae.a)(Object(ae.a)({},e),{},{isShapeDropdown:t.data});case"setIsResizeDropdown":return Object(ae.a)(Object(ae.a)({},e),{},{isResizeDropdown:t.data});case"setIsCanvasBgColorDropdown":return Object(ae.a)(Object(ae.a)({},e),{},{isCanvasBgColorDropdown:t.data});case"setCurrentCoords":return Object(ae.a)(Object(ae.a)({},e),{},{currentCoords:t.data});case"setShowToolbar":return Object(ae.a)(Object(ae.a)({},e),{},{showToolbar:t.data});case"setShowCanvasToolbar":return Object(ae.a)(Object(ae.a)({},e),{},{showCanvasToolbar:t.data});case"setShouldAddText":return Object(ae.a)(Object(ae.a)({},e),{},{shouldAddText:t.data});case"setShouldUpdateText":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateText:t.data});case"setShouldUpdateSubtitles":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateSubtitles:t.data});case"setShouldUpdateShape":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateShape:t.data});case"setShouldUpdateImage":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateImage:t.data});case"setShouldUpdateVideo":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateVideo:t.data});case"setCurrentObject":return Object(ae.a)(Object(ae.a)({},e),{},{currentObject:t.data});case"setShapeToAdd":return Object(ae.a)(Object(ae.a)({},e),{},{shapeToAdd:t.data,isShapeDropdown:!1});case"setImageToAdd":return Object(ae.a)(Object(ae.a)({},e),{},{imageToAdd:t.data,isImageDropdown:!1});case"setShapeState":return Object(ae.a)(Object(ae.a)({},e),{},{shapeState:Object(ae.a)({},t.data)});case"setImageState":return Object(ae.a)(Object(ae.a)({},e),{},{imageState:Object(ae.a)({},t.data)});case"setVideoState":return Object(ae.a)(Object(ae.a)({},e),{},{videoState:Object(ae.a)({},t.data)});case"setTextState":return Object(ae.a)(Object(ae.a)({},e),{},{textState:Object(ae.a)({},t.data)});case"setSubtitlesState":return Object(ae.a)(Object(ae.a)({},e),{},{subtitlesState:Object(ae.a)({},t.data)});case"setShouldReplaceImage":return Object(ae.a)(Object(ae.a)({},e),{},{shouldReplaceImage:t.data});case"setShouldUpdateCanvas":return Object(ae.a)(Object(ae.a)({},e),{},{canvasState:Object(ae.a)(Object(ae.a)({},e.canvasState),{},{shouldUpdateCanvas:t.data})});case"setShouldUpdateCanvasSize":return Object(ae.a)(Object(ae.a)({},e),{},{canvasState:Object(ae.a)(Object(ae.a)({},e.canvasState),{},{shouldUpdateCanvasSize:t.data})});case"setShouldCalculateCanvasSize":return Object(ae.a)(Object(ae.a)({},e),{},{canvasState:Object(ae.a)(Object(ae.a)({},e.canvasState),{},{shouldCalculateCanvasSize:t.data})});case"setCanvasBackgroundColor":return Object(ae.a)(Object(ae.a)({},e),{},{canvasState:Object(ae.a)(Object(ae.a)({},e.canvasState),{},{shouldUpdateCanvas:!0,backgroundColor:t.data})});case"setCanvasSize":return Object(ae.a)(Object(ae.a)({},e),{},{canvasState:Object(ae.a)(Object(ae.a)({},e.canvasState),{},{shouldUpdateCanvasSize:!0,width:t.data.width,height:t.data.height})});case"setVideoSize":return Object(ae.a)(Object(ae.a)({},e),{},{canvasState:Object(ae.a)(Object(ae.a)({},e.canvasState),{},{shouldCalculateCanvasSize:!0,videoWidth:t.data.width,videoHeight:t.data.height,resize:t.data.resize})});case"setContainerSize":return Object(ae.a)(Object(ae.a)({},e),{},{canvasState:Object(ae.a)(Object(ae.a)({},e.canvasState),{},{shouldCalculateCanvasSize:!0,containerWidth:t.data.width,containerHeight:t.data.height})});case"setCanvasInitialSize":return Object(ae.a)(Object(ae.a)({},e),{},{canvasState:Object(ae.a)(Object(ae.a)({},e.canvasState),{},{initialWidth:t.data.initialWidth,initialHeight:t.data.initialHeight})});case"setImageCornerRadius":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateImage:!0,imageState:Object(ae.a)(Object(ae.a)({},e.imageState),{},{cornerRadius:t.data})});case"setVideoCornerRadius":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateVideo:!0,videoState:Object(ae.a)(Object(ae.a)({},e.videoState),{},{strokeWidth:0,cornerRadius:t.data})});case"setVideoStroke":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateVideo:!0,videoState:Object(ae.a)(Object(ae.a)({},e.videoState),{},{stroke:t.data})});case"setVideoStrokeWidth":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateVideo:!0,videoState:Object(ae.a)(Object(ae.a)({},e.videoState),{},{strokeWidth:t.data,cornerRadius:0})});case"setShapeRadius":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateShape:!0,shapeState:Object(ae.a)(Object(ae.a)({},e.shapeState),{},{rx:t.data,ry:t.data})});case"setShapeFill":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateShape:!0,shapeState:Object(ae.a)(Object(ae.a)({},e.shapeState),{},{fill:t.data})});case"setShapeStroke":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateShape:!0,shapeState:Object(ae.a)(Object(ae.a)({},e.shapeState),{},{stroke:t.data})});case"setShapeStrokeWidth":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateShape:!0,shapeState:Object(ae.a)(Object(ae.a)({},e.shapeState),{},{strokeWidth:t.data})});case"setFontFamily":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateText:!0,textState:Object(ae.a)(Object(ae.a)({},e.textState),{},{fontFamily:t.data})});case"setFontStyle":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateText:!0,textState:Object(ae.a)(Object(ae.a)({},e.textState),{},{fontStyle:t.data})});case"setFontWeight":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateText:!0,textState:Object(ae.a)(Object(ae.a)({},e.textState),{},{fontWeight:t.data})});case"setFontSize":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateText:!0,textState:Object(ae.a)(Object(ae.a)({},e.textState),{},{fontSize:t.data})});case"setTextFill":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateText:!0,textState:Object(ae.a)(Object(ae.a)({},e.textState),{},{fill:t.data})});case"setTextAlign":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateText:!0,textState:Object(ae.a)(Object(ae.a)({},e.textState),{},{textAlign:t.data})});case"setSubtitlesbackgroundColor":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateSubtitles:!0,subtitlesState:Object(ae.a)(Object(ae.a)({},e.subtitlesState),{},{backgroundColor:t.data})});case"setSubtitlesFontFamily":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateSubtitles:!0,subtitlesState:Object(ae.a)(Object(ae.a)({},e.subtitlesState),{},{fontFamily:t.data})});case"setSubtitlesFontStyle":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateSubtitles:!0,subtitlesState:Object(ae.a)(Object(ae.a)({},e.subtitlesState),{},{fontStyle:t.data})});case"setSubtitlesFontWeight":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateSubtitles:!0,subtitlesState:Object(ae.a)(Object(ae.a)({},e.subtitlesState),{},{fontWeight:t.data})});case"setSubtitlesFontSize":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateSubtitles:!0,subtitlesState:Object(ae.a)(Object(ae.a)({},e.subtitlesState),{},{fontSize:t.data})});case"setSubtitlesTextFill":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateSubtitles:!0,subtitlesState:Object(ae.a)(Object(ae.a)({},e.subtitlesState),{},{fill:t.data})});case"setSubtitlesTextAlign":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateSubtitles:!0,subtitlesState:Object(ae.a)(Object(ae.a)({},e.subtitlesState),{},{textAlign:t.data})});default:return e}},Mr=function(){var e=Object(c.useReducer)(Fr,Lr),t=Object(d.a)(e,2);return[t[0],t[1]]},Br=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useState)(null),u=Object(d.a)(l,2),b=u[0],p=u[1],j=Object(c.useState)(null),h=Object(d.a)(j,2),f=h[0],g=h[1],O=Object(c.useState)(null),m=Object(d.a)(O,2),v=m[0],S=m[1],x=Object(c.useRef)(null),C=Object(c.useRef)(!1),_=Object(c.useCallback)((function(e){return new Promise((function(t,a){D.get("/videos/".concat(e)).then((function(e){t(e)})).catch((function(e){a(e)}))}))}),[]),y=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t){var a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(null),n(!0),e.prev=2,e.next=5,_(t);case 5:a=e.sent,C.current&&((r=a.data.transcription)&&r.length>0?(x.current=Object(le.a)(r),g({timeLeft:a.data.transcriptionTime,startDate:a.data.transcription_start,isFinished:!0}),p(a.data.frame_rate_video_url?a.data.frame_rate_video_url:a.data.original_video_url)):(g({timeLeft:a.data.transcriptionTime,startDate:a.data.transcription_start,isFinished:!1}),p(a.data.original_video_url)),s((function(e){return e||{id:a.data._id,duration:a.data.duration,url:a.data.original_video_url,finalUrl:a.data.final_video_url||null,canvas:a.data.canvas||null,title:a.data.title,finalText:a.data.final_full_text||null}}))),console.log(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),C.current&&S(e.t0),console.log("Error Getting Video",e.t0);case 14:return e.prev=14,C.current&&n(!1),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[2,10,14,18]])})));return function(t){return e.apply(this,arguments)}}(),[_]);return Object(c.useEffect)((function(){return C.current=!0,function(){return C.current=!1}}),[]),{isGettingVideo:a,getVideo:y,words:x.current,info:i,videoUrl:b,getVideoError:v,transcriptonStatus:f}},Hr=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(e){return new Promise((function(t,a){D.put("/videos",e).then((function(e){t(e)})).catch((function(e){a(e)}))}))}),[]),b=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),n(!0),e.prev=2,e.next=5,u(t);case 5:a=e.sent,l.current&&s(a.data),console.log(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error Updating Project",e.t0),l.current&&s("error");case 14:return e.prev=14,l.current&&n(!1),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[2,10,14,18]])})));return function(t){return e.apply(this,arguments)}}(),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isUpdatingProject:a,updateProject:b,updateResponse:i}},Ur=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(e){return new Promise((function(t,a){D.post("/download-video",e,{headers:{"Content-Type":"application/json"}}).then((function(e){t(e)})).catch((function(e){a(e)}))}))}),[]),b=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,u(t);case 4:a=e.sent,l.current&&"ok"===a.data.status&&s(!0),console.log(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error Downloading Video",e.t0);case 12:return e.prev=12,l.current&&n(!1),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[1,9,12,16]])})));return function(t){return e.apply(this,arguments)}}(),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isDownloading:a,downloadVideo:b,isDownloadDataUploaded:i,setIsDownloadDataUploaded:s}},Wr=function(e,t,a,n,r,o,i){var s=Object(c.useRef)(null),l=Object(c.useRef)(!0),u=Object(c.useCallback)((function(){s.current&&clearTimeout(s.current);var r=setTimeout((function(){if(e.current&&l.current){s.current=null;var r=ka(a);t({id:n.id,canvas:Object(ae.a)({},r)})}}),1e3);s.current=r}),[t,n,a,e]);Object(c.useEffect)((function(){i.shouldTriggerCanvasUpdate&&a&&(r({type:"setShouldTriggerCanvasUpdate",data:!1}),o||u())}),[u,i.shouldTriggerCanvasUpdate,r,o,a]),Object(c.useEffect)((function(){i.isCropMode||i.isLoadingTemplate||i.isModifyingObject?l.current=!1:l.current=!0}),[i.isCropMode,i.isLoadingTemplate,i.isModifyingObject])},Vr=function(e,t,a,n,r,o,i,s){var l=Object(c.useRef)(null),u=Object(c.useRef)(!0),d=Object(c.useCallback)((function(){l.current&&clearTimeout(l.current);var r=setTimeout((function(){e.current&&(l.current=null,t({id:a.id,transcription:Object(le.a)(n)}))}),1e3);l.current=r}),[t,a,n,e]);Object(c.useEffect)((function(){i&&(r({type:"setShouldTriggerWordsUpdate",data:!1}),o||d())}),[d,i,r,o]),Object(c.useEffect)((function(){u.current?u.current=!1:n&&r({type:"setShouldTriggerWordsUpdate",data:!0})}),[s,o,n,r])},zr=function(e,t,a,n,r){var o=Object(c.useRef)(null),i=Object(c.useCallback)((function(){o.current&&clearInterval(o.current);var a=setInterval((function(){n.current&&!e&&t(r.id)}),4e3);o.current=a}),[t,r,n,e]);Object(c.useEffect)((function(){return a&&!a.isFinished?i():a&&a.isFinished&&o.current&&clearInterval(o.current),function(){o.current&&clearInterval(o.current)}}),[a,i])},Yr=function(e,t,a){e.getObjects().filter((function(e){return"video"===e.type})).length>1&&(a((function(e){return e.filter((function(e){return e.id!==t.id}))})),e.remove(t))},Xr=function(e,t,a,n,r,o,i,c,s,l,u,d,b,p){var j=t&&t.getActiveObject(),h=j&&"customTextbox"===j.type&&j.isEditing;if(!("INPUT"===document.activeElement.tagName||h)){var f=e.ctrlKey||e.metaKey;"Delete"===e.code||"Delete"===e.key||"Backspace"===e.code||"Backspace"===e.key?j?function(e,t,a,n){if("subtitle"===a.id)t({type:"setIsSubtitles",data:!1});else if(!a.isEditing){if("video"===a.type)Yr(e,a,n);else if("activeSelection"===a.type)for(var r=0;r<a._objects.length;r++){var o=a._objects[r];"video"===o.type?Yr(e,o,n):"subtitle"===o.id?t({type:"setIsSubtitles",data:!1}):e.remove(o)}else e.remove(a);e.discardActiveObject().requestRenderAll()}}(t,c,j,b):s(!0):!t||"Space"!==e.code&&"Space"!==e.key?t&&("KeyC"===e.code||"c"===e.key)&&f?(e.preventDefault(),n(!0)):t&&("KeyV"===e.code||"v"===e.key)&&f?(e.preventDefault(),a(!0)):t&&("KeyX"===e.code||"x"===e.key)&&f?(e.preventDefault(),r(!0)):t&&("BracketRight"===e.code||"]"===e.key)&&f?(e.preventDefault(),o(!0)):t&&("BracketLeft"===e.code||"["===e.key)&&f?(e.preventDefault(),i(!0)):"ArrowRight"===e.code||"ArrowRight"===e.key?(e.preventDefault(),j?(j.left+=1,t.fire("object:modified",{target:j}),t.fire("object:moved",{target:j})):d(!0)):"ArrowLeft"===e.code||"ArrowLeft"===e.key?(e.preventDefault(),j?(j.left-=1,t.fire("object:modified",{target:j}),t.fire("object:moved",{target:j})):u(!0)):"ArrowUp"!==e.code&&"ArrowUp"!==e.key||!j?"ArrowDown"!==e.code&&"ArrowDown"!==e.key||!j?"KeyZ"!==e.code&&"z"!==e.key||!f||(e.preventDefault(),p(!0)):(e.preventDefault(),j.top+=1,t.fire("object:modified",{target:j}),t.fire("object:moved",{target:j})):(e.preventDefault(),j.top-=1,t.fire("object:modified",{target:j}),t.fire("object:moved",{target:j})):(e.preventDefault(),l(!0))}},Gr=function(e,t,a,n,r,o,i,s,l,u,b,p,j,h){var f=Object(c.useState)(!1),g=Object(d.a)(f,2),O=g[0],m=g[1],v=Object(c.useState)(!1),S=Object(d.a)(v,2),x=S[0],C=S[1],_=Object(c.useState)(!1),w=Object(d.a)(_,2),k=w[0],y=w[1],T=Object(c.useState)(!1),N=Object(d.a)(T,2),D=N[0],A=N[1],I=Object(c.useState)(!1),R=Object(d.a)(I,2),E=R[0],P=R[1],L=Object(c.useState)(!1),F=Object(d.a)(L,2),M=F[0],B=F[1],H=Object(c.useState)(!1),U=Object(d.a)(H,2),W=U[0],V=U[1],z=Object(c.useState)(!1),Y=Object(d.a)(z,2),X=Y[0],G=Y[1],Z=Object(c.useState)(!0),q=Object(d.a)(Z,2),K=q[0],J=q[1],Q=Object(c.useCallback)((function(){if(!l.isLoadingTemplate&&!l.isCropMode)if(e&&O&&t)J(!1),ca(e,t,n,r,a,null,o,h);else if(e&&(x||k)){J(!1);var c=e.getActiveObject();c&&"subtitle"!==c.id&&(a({object:c,coords:{top:c.top,left:c.left}}),k&&"activeSelection"!==c.type&&("video"===c.type&&h((function(e){return e.filter((function(e){return e.id!==c.id}))})),e.remove(c),e.discardActiveObject().requestRenderAll()))}else if(e&&D){J(!1);var d=e.getActiveObject();d&&"subtitle"!==d.id&&(e.bringToFront(d),o&&e.bringToFront(o),i({type:"setShouldTriggerCanvasUpdate",data:!0}))}else if(e&&E){J(!1);var p=e.getActiveObject();p&&"subtitle"!==p.id&&(e.sendToBack(p),i({type:"setShouldTriggerCanvasUpdate",data:!0}))}else e&&X?(J(!1),b?u.current.pause():u.current.play()):M?(J(!1),s(!0)):W&&(J(!1),i({type:"setShouldUndo",data:!0}))}),[e,O,x,D,E,M,X,W,n,a,t,r,o,i,s,l.isLoadingTemplate,l.isCropMode,u,b,k,h]);Object(c.useEffect)((function(){K&&Q()}),[K,Q,O,x,k,D,E,M,X]);var $=Object(c.useCallback)((function(t){Xr(t,e,m,C,y,A,P,i,B,G,p,j,h,V)}),[e,i,p,j,h]),ee=Object(c.useCallback)((function(e){!function(e,t,a,n,r,o,i,c,s,l,u){t(!1),e(!1),a(!1),n(!1),r(!1),o(!1),c(!1),s(!1),l(!1),u(!1),i(!0)}(m,C,y,A,P,B,J,G,p,j,V)}),[p,j]);Object(c.useEffect)((function(){return document.addEventListener("keydown",$),document.addEventListener("keyup",ee),function(){document.removeEventListener("keydown",$),document.removeEventListener("keyup",ee)}}),[$,ee])},Zr=function(e,t,a,n,r,o){q("delete",e,t,a,n),o(null),document.getSelection().removeAllRanges(),r(n)},qr=[],Kr=function(e){return qr.push(e)},Jr=function(e,t,a,n,r,o,i,s,l,u){var d=Object(c.useCallback)((function(e,t){"delete"===e.action?function(e,t,a,n,r,o){for(var i=0;i<e.length;i++){var c=t[e[i]];c.active=!0,null!==c.next&&(c.next=null)}Zr(t,r,o,e[0],a,n)}(e.target,t,r,o,i,s):"restore"===e.action?function(e,t,a,n,r,o){for(var i=0;i<e.length;i++)t[e[i]].active=!1;var c=K(e[0],t);Zr(t,r,o,c,a,n)}(e.target,t,r,o,i,s):"textChange"===e.action&&function(e,t,a,n,r,o,i){var c=t[e.target],s=oe(e.target,t,o);if(s){var l=e.change.value.length>0?e.change.value:null;ne(c._id,l,c.silence,n,s)}c.silence=e.change.silence,c.text=e.change.value,a(null),document.getSelection().removeAllRanges(),i(e.target),r(e.target)}(e,t,o,l,r,u,s)}),[r,o,i,s,l,u]);return Object(c.useEffect)((function(){if(e.shouldUndo){t({type:"setShouldUndo",data:!1});var r=qr.pop();r&&"transcription"===r.type&&n&&(a.current&&a.current.pause(),d(r,n))}}),[n,e.shouldUndo,t,d,a]),{undoHistory:qr,updateUndoHistory:Kr}},Qr=function(e){var t=e.speakers,a=e.setSpeakers,n=e.setVideoData,r=Mr(),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Br(),u=l.isGettingVideo,b=l.getVideo,p=l.words,j=l.info,h=l.videoUrl,f=l.transcriptonStatus,g=l.getVideoError,O=Hr(),v=O.isUpdatingProject,S=O.updateProject,x=Ur(),C=x.isDownloading,_=x.downloadVideo,w=x.isDownloadDataUploaded,k=x.setIsDownloadDataUploaded,y=Object(c.useState)(null),T=Object(d.a)(y,2),N=T[0],D=T[1],A=Object(c.useState)(0),I=Object(d.a)(A,2),R=I[0],E=I[1],L=Object(c.useState)(!1),F=Object(d.a)(L,2),M=F[0],B=F[1],H=Object(c.useState)(null),U=Object(d.a)(H,2),W=U[0],z=U[1],Y=Object(c.useState)(null),X=Object(d.a)(Y,2),G=X[0],Z=X[1],q=Object(c.useState)(!1),K=Object(d.a)(q,2),J=K[0],Q=K[1],$=Object(c.useState)(null),ee=Object(d.a)($,2),ae=ee[0],ne=ee[1],re=Object(c.useState)(null),oe=Object(d.a)(re,2),ie=oe[0],ce=oe[1],se=Object(c.useState)(null),le=Object(d.a)(se,2),ue=le[0],de=le[1],be=Object(c.useState)(null),je=Object(d.a)(be,2),he=je[0],fe=je[1],ge=Object(c.useState)([]),Oe=Object(d.a)(ge,2),me=Oe[0],ve=Oe[1],Se=Object(c.useState)(null),xe=Object(d.a)(Se,2),Ce=xe[0],_e=xe[1],we=Object(c.useState)(null),ke=Object(d.a)(we,2),ye=ke[0],Te=ke[1],Ne=Object(c.useState)(1),De=Object(d.a)(Ne,2),Ae=De[0],Ie=De[1],Re=Object(c.useState)(!1),Ee=Object(d.a)(Re,2),Pe=Ee[0],Le=Ee[1],Fe=Object(c.useState)(!1),Me=Object(d.a)(Fe,2),Be=Me[0],He=Me[1],Ue=Object(c.useState)(!1),We=Object(d.a)(Ue,2),Ve=We[0],ze=We[1],Ye=Object(c.useState)([]),Xe=Object(d.a)(Ye,2),Ge=Xe[0],Ze=Xe[1],qe=Object(c.useCallback)((function(){return Ie((function(e){return e+1}))}),[]),Ke=Object(P.g)(),Je=Object(P.i)(),Qe=Object(c.useRef)(null),$e=Object(c.useRef)(!1),et=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me,a="0";if(null!==e){var n=p[e];a=n.end,Qe.current.currentTime=+n.start,z(+n.start)}for(var r=0,o=0;o<t.length;o++){var i=t[o];+a>+i.end&&r++}Z(r)}),[z,Z,me,Qe,p]),tt=Jr(i,s,Qe,p,E,D,ve,et,Q,he).updateUndoHistory;return Wr($e,S,ae,j,s,C,i),Vr($e,S,j,p,s,C,i.shouldTriggerWordsUpdate,me),zr(u,b,f,$e,Je),Gr(ae,ye,Te,Ae,qe,ie,s,Le,i,Qe,M,ze,He,Ze),Object(c.useEffect)((function(){Je&&Je.id&&b(Je.id)}),[Je,b]),Object(c.useEffect)((function(){g&&Ke.push("/home")}),[g,Ke]),Object(c.useEffect)((function(){return $e.current=!0,function(){return $e.current=!1}}),[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(te.Provider,{value:{editorState:i,editorDispatch:s},children:j?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Pr,{canvas:ae,videoRef:Qe,videoCuts:me,duration:j?j.duration:null,words:p,subList:he,fabricSub:ie,videoData:j,isUpdatingProject:v,isDownloading:C,downloadVideo:_,isDownloadDataUploaded:w,setIsDownloadDataUploaded:k,setUserAssets:_e}),Object(m.jsxs)("main",{className:V.a.Main,children:[Object(m.jsx)(pe,{className:V.a.VideoEditor,words:p,currentWordIndex:R,setCurrentWordIndex:E,videoRef:Qe,setCuts:ve,currentSelection:N,setCurrentSelection:D,currentSub:ue,setCurrentSub:de,fabricSub:ie,setShouldRerenderSub:Q,status:f,shouldCut:Pe,setShouldCut:Le,isNextWord:Be,setIsNextWord:He,isPrevWord:Ve,setIsPrevWord:ze,dispatch:s,updateUndoHistory:tt,setPlayerTime:et}),Object(m.jsx)(Nn,{videoRef:Qe,canvas:ae,setCanvas:ne,isPlaying:M,words:p,currentTime:W,videoCuts:me,setNextCutIndex:Z,setCurrentWordIndex:E,nextCutIndex:G,currentWordIndex:R,subList:he,setSubList:fe,fabricSub:ie,setFabricSub:ce,currentSub:ue,setCurrentSub:de,shouldRerenderSub:J,setShouldRerenderSub:Q,speakers:t,setSpeakers:a,info:j,videoUrl:h,setVideoData:n,transcriptonStatus:f,userAssets:Ce,setUserAssets:_e,clipboard:ye,setClipboard:Te,objectIdCount:Ae,setObjectIdCount:Ie,updatetObjectId:qe,speakerVideos:Ge,setSpeakerVideos:Ze}),Object(m.jsx)(In,{videoRef:Qe,setIsPlaying:B,currentSelection:N,setCurrentSelection:D,setCurrentTime:z,videoCuts:me,words:p,setNextCutIndex:Z,setCurrentWordIndex:E,setCurrentSub:de,subList:he,info:j,videoUrl:h})]})]}):Object(m.jsx)(za,{style:{width:"100px",height:"100px"}})})})},$r=a(174),eo=["component","where","allowed","redirect"],to=function(e){var t=e.component,a=(e.where,e.allowed),n=e.redirect,r=Object($r.a)(e,eo);return Object(m.jsx)(P.b,Object(ae.a)(Object(ae.a)({},r),{},{children:a?Object(m.jsx)(t,Object(ae.a)({},r)):Object(m.jsx)(P.a,{to:n})}))},ao=a(20),no=a.n(ao),ro=a.p+"static/media/addSpeaker.45816d68.svg",oo=a.p+"static/media/removeSpeaker.2614b0b2.svg",io=a(168),co=a.n(io),so=function(e,t,a){var n=Object(c.useState)(!0),r=Object(d.a)(n,2),o=r[0],i=r[1];Object(c.useEffect)((function(){if(o&&e.initialWidth>0){var n=function(e,t){var a=new Oe.fabric.Canvas(t,{width:e.initialWidth,height:e.initialHeight,backgroundColor:"rgba(255,255,255,1)",preserveObjectStacking:!0,fireRightClick:!0,stopContextMenu:!0,selection:!1,uniScaleKey:null,altActionKey:null}),n=Math.min(e.width/e.initialWidth,e.height/e.initialHeight);return a.setZoom(n),a.setDimensions({width:e.width,height:e.height}),a}(e,a);t(n),i(!1)}}),[t,e,o,a])},lo=function(e,t,a,n){var r=Object(c.useState)(!0),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!0),u=Object(c.useRef)(null);Object(c.useEffect)((function(){return function(){return l.current=!1}}),[]);var b=Object(c.useCallback)((function(){Oe.fabric.util.requestAnimFrame((function e(){t.requestRenderAll(),u.current=Oe.fabric.util.requestAnimFrame(e)}))}),[t]),p=Object(c.useCallback)((function(e){return new Oe.fabric.Video(e,{top:0,left:0})}),[]);Object(c.useEffect)((function(){return function(){u.current&&Oe.fabric.util.cancelAnimFrame(u.current)}}),[]),Object(c.useEffect)((function(){if(i&&e&&t){s(!1),e.currentTime=a>0?a:.001;var r=p(e);t.add(r),r.evented=!1,r.selectable=!1,n(r),b()}}),[e,t,i,a,b,n,p])},uo=function(e,t,a){Object(c.useEffect)((function(){e.shouldUpdateCanvas&&function(e,t,a){t.backgroundColor=e.backgroundColor,t.requestRenderAll(),a({type:"setShouldUpdateCanvas",data:!1}),a({type:"setShouldTriggerCanvasUpdate",data:!0})}(e,a,t),e.shouldUpdateCanvasSize&&function(e,t,a){t.discardActiveObject();var n=Math.min(e.width/e.initialWidth,e.height/e.initialHeight);t.setZoom(n),t.setDimensions({width:e.width,height:e.height}),t.requestRenderAll(),a({type:"setShouldUpdateCanvasSize",data:!1}),a({type:"setShouldTriggerCanvasUpdate",data:!0})}(e,a,t)}),[e,t,a])},bo=function(e,t,a,n,r,o){var i=null;if(0===e.length)i={width:o.width,height:o.height,scaleX:o.scaleX/2,scaleY:o.scaleY/2};else{var c=e[e.length-1];i={width:c.width,height:c.height,scaleX:c.scaleX,scaleY:c.scaleY}}var s=ba(i,t);r(),a.add(s).setActiveObject(s),a.requestRenderAll(),n((function(e){return[].concat(Object(le.a)(e),[s])})),Oa(o,s)},po=Object(c.createContext)(null),jo=function(e,t,a,n,r,o,i,s){var l=Object(c.useContext)(po),u=l.speakersState,b=l.speakersDispatch,p=Object(c.useState)(!0),j=Object(d.a)(p,2),h=j[0],f=j[1];Object(c.useEffect)((function(){t&&e&&h&&(f(!1),1===i.length&&i[0].w===t.width&&i[0].h===t.height?bo([],1,e,n,o,t):i.length>0?(!function(e,t,a,n,r){for(var o=[],i=0;i<r.length;i++){var c=r[i],s={width:n.width,height:n.height,scaleX:c.w/n.width,scaleY:c.h/n.height},l=ba(s,i+1);l.top=c.y,l.left=c.x,a(),e.add(l).setActiveObject(l),e.requestRenderAll(),o.push(l),Oa(n,l)}t(o)}(e,n,o,t,i),s([])):b({type:"setShouldAddSpeaker",data:!0}))}),[e,n,o,h,t,i,b,s]),Object(c.useEffect)((function(){t&&u.shouldAddSpeaker&&(b({type:"setShouldAddSpeaker",data:!1}),bo(a,r,e,n,o,t))}),[a,u,b,e,t,n,r,o]),Object(c.useEffect)((function(){if(t&&u.shouldRemoveSpeaker){b({type:"setShouldRemoveSpeaker",data:!1});var a=e.getActiveObject();a&&(e.remove(a),n((function(e){return e.filter((function(e){return e.id!==a.id}))})),e.requestRenderAll())}}),[u,b,e,t,n])},ho=function(e){var t=e.canvas,a=e.setCanvas,n=e.canvasState,r=e.canvasDispatch,o=e.videoRef,i=e.setBoxArr,s=e.duration,l=e.boxArr,u=e.speakers,b=e.setSpeakers,p=Object(c.useState)(null),j=Object(d.a)(p,2),h=j[0],f=j[1],g=Object(c.useState)(1),O=Object(d.a)(g,2),v=O[0],S=O[1],x=Object(c.useCallback)((function(){return S((function(e){return e+1}))}),[]);return Ze(!1,n,t),uo(n,r,t),so(n,a,"speakerCanvas"),lo(o.current,t,s/10,f),jo(t,h,l,i,v,x,u,b),Object(m.jsx)("div",{className:co.a.Canvas,children:Object(m.jsx)("canvas",{id:"speakerCanvas"})})},fo={initialWidth:0,initialHeight:0,width:0,height:0,shouldUpdateCanvas:!1,shouldUpdateCanvasSize:!1,shouldAddSpeaker:!1,shouldRemoveSpeaker:!1},go=function(e,t){switch(t.type){case"setCanvasSize":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateCanvasSize:!0,width:t.data.width,height:t.data.height});case"setCanvasInitialSize":return Object(ae.a)(Object(ae.a)({},e),{},{initialWidth:t.data.initialWidth,initialHeight:t.data.initialHeight,width:t.data.width,height:t.data.height});case"setShouldUpdateCanvas":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateCanvas:t.data});case"setShouldUpdateCanvasSize":return Object(ae.a)(Object(ae.a)({},e),{},{shouldUpdateCanvasSize:t.data});case"setShouldAddSpeaker":return Object(ae.a)(Object(ae.a)({},e),{},{shouldAddSpeaker:t.data});case"setShouldRemoveSpeaker":return Object(ae.a)(Object(ae.a)({},e),{},{shouldRemoveSpeaker:t.data});default:return e}},Oo=function(){var e=Object(c.useReducer)(go,fo),t=Object(d.a)(e,2);return[t[0],t[1]]},mo=function(e,t,a){var n=Object(c.useState)(!0),r=Object(d.a)(n,2),o=r[0],i=r[1],s=Object(c.useState)(null),l=Object(d.a)(s,2),u=l[0],b=l[1],p=Object(c.useCallback)((function(){a.current&&function(e,t,a){t({width:window.innerWidth-e.current.offsetLeft-a,height:e.current.offsetHeight})}(a,b,200)}),[a,b,200]);Object(c.useEffect)((function(){p()}),[p]),Object(c.useEffect)((function(){return window.addEventListener("resize",p),function(){return window.removeEventListener("resize",p)}}),[p]),Object(c.useEffect)((function(){if(e&&u){var a=function(e,t){var a=e.width,n=t.height*a/t.width,r=e.height-300;return n>r&&(a=(n=r)*t.width/t.height),{width:a,height:n}}(u,e),n=a.width,r=a.height,c=n>100;o&&c?(i(!1),t({type:"setCanvasInitialSize",data:{initialWidth:e.width,initialHeight:e.height,width:n,height:r}})):c&&t({type:"setCanvasSize",data:{width:n,height:r}})}}),[o,u,e,t])},vo=function(e){var t=e.videoData,a=e.setSpeakers,n=e.speakers,r=Oo(),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(P.g)(),u=Object(c.useState)(null),b=Object(d.a)(u,2),p=b[0],j=b[1],h=Object(c.useRef)(null),f=Object(c.useRef)(null),g=Object(c.useState)(null),O=Object(d.a)(g,2),v=O[0],S=O[1],x=Object(c.useState)([]),C=Object(d.a)(x,2),_=C[0],w=C[1];mo(v,s,h);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H,{videoData:t}),Object(m.jsx)(po.Provider,{value:{speakersState:i,speakersDispatch:s},children:Object(m.jsxs)("div",{className:no.a.SelectSpeakers,ref:h,children:[Object(m.jsx)("h1",{className:no.a.Heading,children:"Select area with speakers"}),Object(m.jsx)("p",{className:no.a.Subheading,children:"You can crop your video by selecting people on it. Once it done you can edit each speaker independetly."}),Object(m.jsx)("div",{className:no.a.CanvasContainer,children:Object(m.jsx)(ho,{canvas:p,setCanvas:j,canvasState:i,canvasDispatch:s,videoRef:f,boxArr:_,setBoxArr:w,duration:t?t.duration:null,speakers:n,setSpeakers:a})}),Object(m.jsx)("video",{src:t?t.url:null,width:v?v.width:0,height:v?v.height:0,id:"video",preload:"auto",className:no.a.Video,ref:f,onLoadedMetadata:function(){return function(e,t){t({width:e.current.videoWidth,height:e.current.videoHeight})}(f,S)}}),p?Object(m.jsxs)("div",{className:no.a.Controls,children:[Object(m.jsxs)("p",{className:no.a.SelectedText,children:[Object(m.jsx)("span",{className:no.a.SelectedNumber,children:_.length})," speaker".concat(1!==_.length?"s":""," selected")]}),Object(m.jsxs)("div",{className:no.a.SpeakerButtons,children:[Object(m.jsxs)("div",{className:no.a.AddSpeakerButton,children:[Object(m.jsx)("button",{className:no.a.AddSpeakers,onClick:function(){s({type:"setShouldAddSpeaker",data:!0})},children:Object(m.jsx)("img",{src:ro,alt:"add"})}),Object(m.jsx)("p",{className:no.a.AddSpeakersText,children:"Add more"})]}),Object(m.jsxs)("div",{className:no.a.RemoveSpeakerButton,children:[Object(m.jsx)("button",{className:no.a.RemoveSpeakers,onClick:function(){s({type:"setShouldRemoveSpeaker",data:!0})},children:Object(m.jsx)("img",{src:oo,alt:"add"})}),Object(m.jsx)("p",{className:no.a.RemoveSpeakersText,children:"Remove"})]})]}),Object(m.jsxs)("div",{className:no.a.NextSteps,children:[Object(m.jsx)("button",{className:no.a.Confirm,onClick:function(){if(_.length>0){for(var e=[],n=0;n<_.length;n++){var r=_[n],o=r.width*r.scaleX,i=r.height*r.scaleY,c=r.lineCoords.tl.x/p.getZoom(),s=r.lineCoords.tr.y/p.getZoom();e.push({x:c,y:s,w:o,h:i})}a(e)}else a([{x:0,y:0,w:v.width,h:v.height}]);l.replace("/editor/".concat(t.id))},children:"Confirm"}),Object(m.jsx)("button",{className:no.a.Skip,onClick:function(){a([{x:0,y:0,w:v.width,h:v.height}]),l.replace("/editor/".concat(t.id))},children:"Do this later"})]})]}):null]})})]})},So=a(169),xo=a.n(So),Co=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(e){return new Promise((function(t,a){D.get("/download-video-progress/".concat(e)).then((function(e){t(e)})).catch((function(e){a(e)}))}))}),[]),b=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t){var a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,u(t);case 4:a=e.sent,l.current&&(r=a.data.progress,s(null!==r&&r)),console.log(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error Getting Download Progress",e.t0);case 12:return e.prev=12,l.current&&n(!1),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[1,9,12,16]])})));return function(t){return e.apply(this,arguments)}}(),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isGettingProgress:a,getDownloadProgress:b,downloadProgress:i}},_o=function(e,t,a,n,r){var o=Object(c.useRef)(null),i=Object(c.useCallback)((function(){o.current&&clearInterval(o.current);var a=setInterval((function(){r.current&&!e&&t(n.id)}),1500);o.current=a}),[t,n,r,e]);Object(c.useEffect)((function(){n&&n.id&&t(n.id)}),[n,t]),Object(c.useEffect)((function(){return null!==a&&100!==a?i():o.current&&clearInterval(o.current),function(){o.current&&clearInterval(o.current)}}),[i,a])},wo=function(){var e=Co(),t=e.isGettingProgress,a=e.getDownloadProgress,n=e.downloadProgress,r=Object(P.g)(),o=Object(P.i)(),i=Object(c.useRef)(null);return _o(t,a,n,o,i),Object(c.useEffect)((function(){!1===n&&r.replace("/home")}),[n,r]),Object(c.useEffect)((function(){100===+n&&setTimeout((function(){i.current&&r.replace("/preview/".concat(o.id))}),1e3)}),[n,r,o]),Object(c.useEffect)((function(){return i.current=!0,function(){return i.current=!1}}),[]),Object(m.jsx)(m.Fragment,{children:null===n||!1===n?Object(m.jsx)(za,{style:{width:"100px",height:"100px"}}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H,{}),Object(m.jsx)("div",{className:xo.a.Download,children:Object(m.jsx)(C,{progress:n,heading:"Generating your video"})})]})})},ko=function(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useState)([]),u=Object(d.a)(l,2),b=u[0],j=u[1],h=Object(P.j)(),f=Object(c.useRef)(null);return Object(m.jsx)("div",{className:p.a.Editor,children:Object(m.jsxs)(P.d,{children:[Object(m.jsx)(to,{path:"".concat(h.path,"/new"),redirect:"".concat(h.path,"/speakers"),where:"in the Editor new route",allowed:!i,component:U,viedoForUpload:a,setVideoForUpload:n,setVideoData:s,wordsRef:f}),Object(m.jsx)(to,{path:"".concat(h.path,"/progress/:id"),redirect:"/home",where:"in the Editor download progress route",allowed:!0,component:wo}),Object(m.jsx)(to,{path:"".concat(h.path,"/speakers"),redirect:"/home",where:"in the Editor speakers route",allowed:!!i,component:vo,videoData:i,setSpeakers:j,speakers:b}),Object(m.jsx)(to,{path:"".concat(h.path,"/:id"),redirect:"/home",where:"in the Editor project id route",allowed:!0,component:Qr,speakers:b,setSpeakers:j,setVideoData:s}),Object(m.jsx)(P.a,{to:"".concat(h.path,"/new")})]})})},yo=a(116),To=a.n(yo),No=a(47),Do=a.n(No),Ao=a.p+"static/media/google.321ceef8.svg",Io=a(170),Ro=a.n(Io),Eo=function(e){var t=e.children,a=e.onClick;return Object(m.jsx)("button",{onClick:a,className:Ro.a.Button,children:t})},Po=a(66),Lo=a.n(Po),Fo=function(){return Object(m.jsxs)("div",{className:Lo.a.Or,children:[Object(m.jsx)("div",{className:Lo.a.Line}),Object(m.jsx)("span",{className:Lo.a.Text,children:"or"}),Object(m.jsx)("div",{className:Lo.a.Line})]})},Mo=a(67),Bo=a.n(Mo),Ho=function(e){var t=e.placeholder,a=e.type,n=e.invalid,r=e.setValue,o=e.value,i=e.name,c=e.errorMessage;return Object(m.jsxs)("div",{className:Bo.a.InputContainer,children:[Object(m.jsx)("input",{className:[Bo.a.Input,n?Bo.a.Invalid:null].join(" "),placeholder:t,type:a,value:o,name:i,onBlur:function(){var e=""===o.trim();n&&!e&&r((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{invalid:!1})}))},onFocus:function(){n&&r((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{value:""})}))},onChange:function(e){return r((function(t){return Object(ae.a)(Object(ae.a)({},t),{},{value:e.target.value})}))}}),n?Object(m.jsx)("div",{className:Bo.a.ErrorMessage,children:c}):null]})},Uo=a(68),Wo=a.n(Uo),Vo=a.p+"static/media/mail.8a5f661c.svg",zo=function(){return Object(m.jsxs)("div",{className:Wo.a.CheckMail,children:[Object(m.jsx)("img",{src:Vo,alt:"mail",className:Wo.a.Mail}),Object(m.jsx)("h2",{className:Wo.a.Heading,children:"Check your inbox"}),Object(m.jsx)("p",{className:Wo.a.Subheading,children:"We sent you an activation link. Please be sure to check your spam folder too."})]})},Yo=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},Xo=function(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(e){return new Promise((function(t,a){D.post("/send-magic-link",e,{headers:{"Content-Type":"application/json"}}).then((function(e){t(e)})).catch((function(e){a(e)}))}))}),[]),b=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(null),s(null),e.prev=2,e.next=5,u(t);case 5:a=e.sent,console.log(a),l.current&&n(a.data),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),s(e.t0),console.log("Error Authenticating with Magic Link",e.t0);case 14:return e.prev=14,e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));return function(t){return e.apply(this,arguments)}}(),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{magicLink:b,magickRes:a,magickError:i}},Go=function(e){var t=e.authUrl,a=e.isLoading,n=e.setIsLoading,r=e.checkTokenValidity,o=Xo(),i=o.magicLink,s=o.magickRes,l=o.magickError,u=Object(c.useState)(!1),b=Object(d.a)(u,2),p=b[0],j=b[1],h=Object(c.useState)({value:"",invalid:!1,type:"email",placeholder:"Email address",validation:!0,name:"email",errorMessage:"Please enter your email"}),f=Object(d.a)(h,2),g=f[0],O=f[1];Object(c.useEffect)((function(){var e=localStorage.getItem("token");e?r(e):n(!1)}),[r,n]),Object(c.useEffect)((function(){s&&j(!0)}),[s]),Object(c.useEffect)((function(){l&&n(!1)}),[l,n]);var v=Object(m.jsxs)("div",{className:Do.a.SignIn,children:[Object(m.jsx)("h2",{className:Do.a.Heading,children:"Welcome to Twiso!"}),Object(m.jsxs)("p",{className:Do.a.Subheading,children:["Don't have an account?"," ",Object(m.jsx)(L.b,{to:"".concat(t,"/sign-up"),className:Do.a.SignUpLink,children:"Sign up for free"})]}),Object(m.jsxs)("div",{className:Do.a.FormContent,children:[Object(m.jsx)("a",{className:Do.a.GoogleLink,href:"".concat("https://holovan.eu.ngrok.io","/api/v1/auth/google"),children:Object(m.jsxs)(Eo,{children:[Object(m.jsx)("img",{src:Ao,alt:"google",className:Do.a.GoogleLogo}),"Continue with Google"]})}),Object(m.jsx)(Fo,{}),Object(m.jsxs)("form",{className:Do.a.Form,onSubmit:function(e){if(e.preventDefault(),Yo(g.value)){n(!0);var t=JSON.stringify({email:g.value});i(t)}else O((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{invalid:!0})}))},children:[Object(m.jsx)(Ho,Object(ae.a)(Object(ae.a)({},g),{},{setValue:O})),Object(m.jsx)(Eo,{children:"Sign in"})]})]})]});return a&&(v=Object(m.jsx)(za,{style:{width:"100px",height:"100px"}})),p?Object(m.jsx)(zo,{}):v},Zo=a(48),qo=a.n(Zo),Ko=a(57),Jo=a.n(Ko),Qo=a.p+"static/media/downArrow.aee303a3.svg",$o=a(69),ei=a.n($o),ti=a.p+"static/media/checkMark.eb440aa3.svg",ai=function(e){var t=e.options,a=e.value,n=e.setValue,r=e.setIsDropdown,o=Object(c.useCallback)((function(){return r(!1)}),[r]);return Object(c.useEffect)((function(){return document.addEventListener("click",o),function(){return document.removeEventListener("click",o)}}),[o]),Object(m.jsx)("ul",{className:ei.a.Dropdown,children:t.map((function(e){var t=a&&a.id===e.id;return Object(m.jsxs)("li",{id:e.id,className:[ei.a.Option,t?ei.a.Current:null].join(" "),onClick:function(){return n((function(t){return Object(ae.a)(Object(ae.a)({},t),{},{value:e})}))},children:[Object(m.jsx)("span",{className:ei.a.CheckMark,children:t?Object(m.jsx)("img",{src:ti,alt:"check mark"}):null}),e.type]},e.id)}))})},ni=function(e){var t=e.options,a=e.invalid,n=e.value,r=e.setValue,o=e.errorMessage,i=Object(c.useState)(null),s=Object(d.a)(i,2),l=s[0],u=s[1];return Object(m.jsxs)("div",{className:Jo.a.SelectContainer,children:[Object(m.jsxs)("div",{className:[Jo.a.Select,a?Jo.a.Invalid:null].join(" "),onClick:function(){a&&r((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{invalid:!1})})),u(!0)},children:[Object(m.jsx)("p",{className:[Jo.a.Selected,"placeholder"!==n.id?Jo.a.Valid:null].join(" "),children:n.type}),Object(m.jsx)("img",{src:Qo,alt:"arrow"}),l?Object(m.jsx)(ai,{options:t,value:n,setValue:r,setIsDropdown:u}):null]}),a?Object(m.jsx)("div",{className:Jo.a.ErrorMessage,children:o}):null]})},ri=function(e){var t=e.authUrl,a=e.isLoading,n=e.setIsLoading,r=e.checkTokenValidity,o=Object(c.useState)(!1),i=Object(d.a)(o,2),s=i[0],l=i[1],u=Xo(),b=u.magicLink,p=u.magickRes,j=u.magickError,h=Object(c.useState)({value:"",invalid:!1,type:"text",name:"name",placeholder:"First name",errorMessage:"Please enter your name"}),f=Object(d.a)(h,2),g=f[0],O=f[1],v=Object(c.useState)({value:"",invalid:!1,type:"email",name:"email",placeholder:"Email address",errorMessage:"Please enter your email"}),S=Object(d.a)(v,2),x=S[0],C=S[1],_=Object(c.useState)({value:{type:"What kind of work do you do?",id:"placeholder"},options:[{type:"What kind of work do you do?",id:"placeholder"},{type:"Marketing",id:"marketing"},{type:"Design",id:"design"},{type:"Influencer",id:"influencer"},{type:"Public Speaker",id:"publicSpeaker"},{type:"Student",id:"student"},{type:"Other",id:"other"}],invalid:!1,errorMessage:"Please fill out this field"}),w=Object(d.a)(_,2),k=w[0],y=w[1];Object(c.useEffect)((function(){var e=localStorage.getItem("token");e?r(e):n(!1)}),[r,n]),Object(c.useEffect)((function(){p&&l(!0)}),[p]),Object(c.useEffect)((function(){j&&n(!1)}),[j,n]);var T=Object(m.jsxs)("div",{className:qo.a.SignUp,children:[Object(m.jsx)("h2",{className:qo.a.Heading,children:"Create Account"}),Object(m.jsxs)("p",{className:qo.a.Subheading,children:["Already have an account?"," ",Object(m.jsx)(L.b,{to:"".concat(t,"/sign-in"),className:qo.a.SignInLink,children:"Sign in"})]}),Object(m.jsxs)("div",{className:qo.a.FormContent,children:[Object(m.jsx)("a",{className:qo.a.GoogleLink,href:"".concat("https://holovan.eu.ngrok.io","/api/v1/auth/google"),children:Object(m.jsxs)(Eo,{children:[Object(m.jsx)("img",{src:Ao,alt:"google",className:qo.a.GoogleLogo}),"Sign Up with Google"]})}),Object(m.jsx)(Fo,{}),Object(m.jsxs)("form",{className:qo.a.Form,children:[Object(m.jsx)(Ho,Object(ae.a)(Object(ae.a)({},g),{},{setValue:O})),Object(m.jsx)(Ho,Object(ae.a)(Object(ae.a)({},x),{},{setValue:C})),Object(m.jsx)(ni,Object(ae.a)(Object(ae.a)({},k),{},{setValue:y})),Object(m.jsx)(Eo,{onClick:function(e){e.preventDefault();var t=Yo(x.value),a=""!==g.value.trim(),r="placeholder"!==k.value.id;if(t||C((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{invalid:!0})})),a||O((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{invalid:!0})})),r||y((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{invalid:!0})})),t&&a&&r){n(!0);var o=JSON.stringify({email:x.value,firstName:g.value,workType:k.value.type});b(o)}},children:"Create Account"})]})]})]});return a&&(T=Object(m.jsx)(za,{style:{width:"100px",height:"100px"}})),s?Object(m.jsx)(zo,{}):T},oi=a(171),ii=a.n(oi),ci=function(e){var t=e.setToken,a=Object(P.j)(),n=Object(P.h)(),r=Object(P.g)(),o=Object(c.useState)(!0),i=Object(d.a)(o,2),s=i[0],l=i[1],u=Object(c.useCallback)((function(){return new URLSearchParams(n.search).get("token")}),[n]);return Object(c.useEffect)((function(){if(s){l(!1);var e=u();e?(localStorage.setItem("token",e),t(e)):r.push("".concat(a.path,"/sign-in"))}}),[u,t,r,a,s]),Object(m.jsx)("div",{className:ii.a.Token,children:Object(m.jsx)(za,{style:{width:"100px",height:"100px"}})})},si=function(e){D.defaults.headers.common.Authorization="Bearer ".concat(e)},li=function(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(){return new Promise((function(e,t){D.get("/refresh-token").then((function(t){e(t)})).catch((function(e){t(e)}))}))}),[]),b=Object(c.useCallback)(Object(k.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(null),s(null),e.prev=2,e.next=5,u();case 5:t=e.sent,console.log(t),l.current&&n(t.data.accessToken),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),s(e.t0),console.log("Error Refreshing Token",e.t0);case 14:return e.prev=14,e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])}))),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{refreshToken:b,newToken:a,refreshError:i}},ui=function(){var e=Object(c.useContext)(B).userDispatch,t=li(),a=t.refreshToken,n=t.newToken,r=t.refreshError,o=Object(c.useState)(null),i=Object(d.a)(o,2),s=i[0],l=i[1],u=Object(c.useState)(!0),b=Object(d.a)(u,2),p=b[0],j=b[1],h=Object(P.j)(),f=Object(P.g)(),g=Object(c.useCallback)((function(e){j(!0),si(e),a()}),[a]);return Object(c.useEffect)((function(){n?(localStorage.setItem("token",n),si(n),e({type:"setIsAuthenticated",data:!0})):r&&(localStorage.removeItem("token"),j(!1),f.replace("/sign-in"))}),[n,r,e,f,h]),Object(c.useEffect)((function(){s&&g(s)}),[s,g]),Object(m.jsx)("div",{className:To.a.Auth,children:Object(m.jsx)("div",{className:To.a.Account,children:Object(m.jsxs)(P.d,{children:[Object(m.jsx)(P.b,{exact:!0,path:"".concat(h.path),children:Object(m.jsx)(ci,{setToken:l})}),Object(m.jsx)(P.b,{exact:!0,path:"".concat(h.path,"/sign-in"),children:Object(m.jsx)(Go,{authUrl:h.path,setIsLoading:j,isLoading:p,checkTokenValidity:g,token:s})}),Object(m.jsx)(P.b,{exact:!0,path:"".concat(h.path,"/sign-up"),children:Object(m.jsx)(ri,{authUrl:h.path,setIsLoading:j,isLoading:p,checkTokenValidity:g,token:s})}),Object(m.jsx)(P.a,{to:"".concat(h.path,"/sign-in")})]})})})},di=a(117),bi=a.n(di),pi=a(34),ji=a.n(pi),hi=a(40),fi=a.n(hi),gi=a.p+"static/media/dot.4b8006c3.svg",Oi=function(){var e=Object(c.useContext)(B),t=e.userState,a=e.userDispatch,n=Object(c.useState)(!1),r=Object(d.a)(n,2),o=r[0],i=r[1],s=function(){var e=t.name.length>0,a=e?t.name:t.email;return e?a[0].toUpperCase()+a.slice(1):a},l=Object(c.useCallback)((function(e){for(var t=0;t<e.path.length;t++){var a=e.path[t].id;if("userDropdown"===a||"signout"===a)return}i(!1)}),[]);return Object(c.useEffect)((function(){return o&&document.addEventListener("click",l),function(){return document.removeEventListener("click",l)}}),[o,l]),Object(m.jsxs)("div",{className:fi.a.User,children:[t.email.length>0?Object(m.jsxs)("div",{className:fi.a.UserName,children:[Object(m.jsx)("div",{className:fi.a.Initials,children:Object(m.jsx)("span",{className:fi.a.Letter,children:s()[0]})}),Object(m.jsx)("div",{className:fi.a.Name,children:s()})]}):null,Object(m.jsx)("div",{className:fi.a.DropdownContainer,onClick:function(){i((function(e){return!e}))},id:"userDropdown",children:Object(m.jsxs)("div",{className:fi.a.Dots,children:[Object(m.jsx)("img",{src:gi,alt:"dot"}),Object(m.jsx)("img",{src:gi,alt:"dot"}),Object(m.jsx)("img",{src:gi,alt:"dot"})]})}),o?Object(m.jsx)("ul",{className:fi.a.Dropdown,children:Object(m.jsx)("li",{className:fi.a.SignOut,onClick:function(){localStorage.removeItem("token"),a({type:"setIsAuthenticated",data:!1})},id:"signout",children:"Sign out"})}):null]})},mi=["title","titleId"];function vi(){return(vi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Si(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function xi(e,t){var a=e.title,n=e.titleId,r=Si(e,mi);return c.createElement("svg",vi({width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,Ar||(Ar=c.createElement("path",{d:"M4.66667 6.16667H0.666667C0.576143 6.16667 0.5 6.09052 0.5 6V0.666667C0.5 0.576142 0.576142 0.5 0.666667 0.5H4.66667C4.75719 0.5 4.83333 0.576142 4.83333 0.666667V6C4.83333 6.09052 4.75719 6.16667 4.66667 6.16667ZM4.66667 11.5H0.666667C0.576142 11.5 0.5 11.4239 0.5 11.3333V8.66667C0.5 8.57614 0.576143 8.5 0.666667 8.5H4.66667C4.75719 8.5 4.83333 8.57614 4.83333 8.66667V11.3333C4.83333 11.4239 4.75719 11.5 4.66667 11.5ZM11.3333 11.5H7.33333C7.24281 11.5 7.16667 11.4239 7.16667 11.3333V6C7.16667 5.90948 7.24281 5.83333 7.33333 5.83333H11.3333C11.4239 5.83333 11.5 5.90948 11.5 6V11.3333C11.5 11.4239 11.4239 11.5 11.3333 11.5ZM7.16667 3.33333V0.666667C7.16667 0.576142 7.24281 0.5 7.33333 0.5H11.3333C11.4239 0.5 11.5 0.576142 11.5 0.666667V3.33333C11.5 3.42386 11.4239 3.5 11.3333 3.5H7.33333C7.24281 3.5 7.16667 3.42386 7.16667 3.33333Z",fill:"current",stroke:"current"})))}var Ci,_i=c.forwardRef(xi),wi=(a.p,["title","titleId"]);function ki(){return(ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function yi(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ti(e,t){var a=e.title,n=e.titleId,r=yi(e,wi);return c.createElement("svg",ki({width:14,height:13,viewBox:"0 0 14 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,Ci||(Ci=c.createElement("path",{d:"M2.16671 10.333C2.16671 9.50252 2.83618 8.83305 3.66671 8.83305C4.49723 8.83305 5.16671 9.50252 5.16671 10.333C5.16671 11.5302 4.19723 12.4997 3.00004 12.4997C2.3961 12.4997 1.76702 12.2742 1.26728 11.8964C1.75815 11.6073 2.16671 11.0861 2.16671 10.333ZM11.5598 1.5466L12.4532 2.43993C12.5179 2.50467 12.5179 2.60809 12.4532 2.67283L6.83337 8.29261L5.70715 7.16638L11.3269 1.5466C11.3917 1.48186 11.4951 1.48186 11.5598 1.5466Z",stroke:"current"})))}var Ni,Di=c.forwardRef(Ti),Ai=(a.p,["title","titleId"]);function Ii(){return(Ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ri(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ei(e,t){var a=e.title,n=e.titleId,r=Ri(e,Ai);return c.createElement("svg",Ii({width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,Ni||(Ni=c.createElement("path",{d:"M13.1935 2.9268L6.52681 9.59347C6.26681 9.85347 5.84681 9.85347 5.58681 9.59347L3.70015 7.7068C3.44015 7.4468 3.44015 7.0268 3.70015 6.7668C3.96015 6.5068 4.38015 6.5068 4.64015 6.7668L6.05348 8.18014L12.2468 1.9868C12.5068 1.7268 12.9268 1.7268 13.1868 1.9868C13.4535 2.2468 13.4535 2.6668 13.1935 2.9268ZM9.51348 0.826802C8.38682 0.366802 7.10681 0.206802 5.77348 0.446802C3.06015 0.933469 0.893481 3.12014 0.433481 5.83347C-0.326519 10.3335 3.42015 14.1868 7.89348 13.6068C10.5335 13.2668 12.7468 11.3001 13.4401 8.73347C13.7068 7.75347 13.7335 6.8068 13.5801 5.92014C13.4935 5.3868 12.8335 5.18013 12.4468 5.56013C12.2935 5.71347 12.2268 5.94014 12.2668 6.15347C12.4135 7.04013 12.3468 7.9868 11.9201 8.99347C11.1468 10.8001 9.46681 12.1268 7.51348 12.3068C4.11348 12.6201 1.29348 9.74013 1.71348 6.32013C2.00015 3.96013 3.90015 2.04014 6.25348 1.71347C7.40681 1.55347 8.50015 1.77347 9.43348 2.25347C9.69348 2.3868 10.0068 2.34013 10.2135 2.13347C10.5335 1.81347 10.4535 1.27347 10.0535 1.0668C9.87348 0.986802 9.69348 0.900135 9.51348 0.826802Z",fill:"current"})))}var Pi,Li=c.forwardRef(Ei),Fi=(a.p,function(){var e=Object(P.j)(),t=Object(P.h)();return Object(m.jsxs)("div",{className:ji.a.SideDrawer,children:[Object(m.jsx)(Oi,{}),Object(m.jsxs)("div",{className:ji.a.Links,children:[Object(m.jsxs)(L.c,{to:"".concat(e.path,"/templates"),className:ji.a.Link,activeClassName:ji.a.Active,replace:!0,children:[Object(m.jsx)(_i,{fill:t.pathname.includes("templates")?"#6F7BD0":"#999999"}),Object(m.jsx)("span",{className:ji.a.LinkText,children:"Templates"})]}),Object(m.jsxs)(L.c,{to:"".concat(e.path,"/projects"),className:ji.a.Link,activeClassName:ji.a.Active,replace:!0,children:[Object(m.jsx)(Di,{fill:t.pathname.includes("projects")?"#6F7BD0":"#999999"}),Object(m.jsx)("span",{className:ji.a.LinkText,children:"My projects"})]}),Object(m.jsxs)(L.c,{to:"".concat(e.path,"/settings"),className:ji.a.Link,activeClassName:ji.a.Active,replace:!0,children:[Object(m.jsx)(Li,{fill:t.pathname.includes("settings")?"#6F7BD0":"#999999"}),Object(m.jsx)("span",{className:ji.a.LinkText,children:"Settings"})]})]})]})}),Mi=a(87),Bi=a.n(Mi),Hi=function(){return Object(m.jsx)("header",{className:Bi.a.Navbar,children:Object(m.jsxs)(L.b,{className:Bi.a.NewButton,to:"/editor/new",children:[Object(m.jsx)("span",{className:Bi.a.Plus,children:"+"}),"New Project"]})})},Ui=a(41),Wi=a.n(Ui),Vi=a(24),zi=a.n(Vi),Yi=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(e){return new Promise((function(t,a){D.delete("/videos/".concat(e)).then((function(e){t(e)})).catch((function(e){a(e)}))}))}),[]),b=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),n(!0),e.prev=2,e.next=5,u(t);case 5:a=e.sent,l.current&&s("success"),console.log(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),l.current&&(s("error"),n(!1)),console.log("Error Deleting Video",e.t0);case 14:return e.prev=14,e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));return function(t){return e.apply(this,arguments)}}(),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isDeletingVideo:a,deleteVideoResponse:i,deleteVideo:b}},Xi=a.p+"static/media/whiteDot.c72e7237.svg",Gi=function(e){var t=e.video,a=e.setShouldFetch,n=Object(c.useState)(t.title||""),r=Object(d.a)(n,2),o=r[0],i=r[1],s=Object(c.useState)(!1),l=Object(d.a)(s,2),u=l[0],b=l[1],p=Hr(),j=p.isUpdatingProject,h=p.updateProject,f=p.updateResponse,g=Yi(),O=g.isDeletingVideo,v=g.deleteVideoResponse,S=g.deleteVideo,x=Object(c.useRef)(null);Object(c.useEffect)((function(){x.current&&(x.current.disabled=!0)}),[]);var C=Object(c.useCallback)((function(e){for(var t=0;t<e.path.length;t++)if(e.path[t].classList&&"projectDropdown"===e.path[t].classList[0])return;b(!1)}),[]);return Object(c.useEffect)((function(){return u&&document.addEventListener("click",C),function(){return document.removeEventListener("click",C)}}),[u,C]),Object(c.useEffect)((function(){f&&"string"!==typeof f?t.title=f.title:"error"===f&&i(t.title)}),[f,t]),Object(c.useEffect)((function(){"success"===v&&a(!0)}),[v,a]),Object(m.jsxs)("div",{className:zi.a.Project,children:[Object(m.jsx)(L.b,{to:"/".concat(t.final_video_url?"preview":"editor","/").concat(t._id),className:zi.a.Video,style:{backgroundImage:"url(".concat(t.screenshot_url,")")}}),Object(m.jsx)("div",{className:zi.a.InfoContainer,children:Object(m.jsxs)("div",{className:zi.a.Info,children:[Object(m.jsxs)("div",{className:zi.a.DateAndName,children:[j?Object(m.jsx)(za,{style:{width:"20px",height:"20px",margin:"auto 0"}}):Object(m.jsx)("input",{className:zi.a.Name,type:"text",value:o,onBlur:function(e){x.current.disabled=!0;var a=e.target.value.trim();a.length>0&&a!==t.title?h({id:t._id,title:a}):i(t.title)},onChange:function(e){return i(e.target.value)},ref:x,disabled:!0}),Object(m.jsx)("p",{className:zi.a.Date,children:function(e){var t=new Date(e),a=t.getDate(),n=t.getMonth()+1,r=t.getFullYear();return"".concat(a>9?a:"0"+a,".").concat(n>9?n:"0"+n,".").concat(r)}(t.created_at)})]}),O?Object(m.jsx)(za,{style:{width:"25.6px",height:"25.6px",marginRight:"5px"}}):Object(m.jsxs)("div",{className:zi.a.OptionsContainer,children:[Object(m.jsx)("div",{className:zi.a.Options,onClick:function(){return b((function(e){return!e}))},children:Object(m.jsxs)("div",{className:zi.a.Dots,children:[Object(m.jsx)("img",{src:Xi,alt:"dot"}),Object(m.jsx)("img",{src:Xi,alt:"dot"}),Object(m.jsx)("img",{src:Xi,alt:"dot"})]})}),u?Object(m.jsxs)("ul",{className:["projectDropdown",zi.a.Dropdown].join(" "),children:[Object(m.jsx)("li",{className:zi.a.DropdownOption,onClick:function(){!0===window.confirm("Are you sure you want to delete this project?")&&S(t._id)},children:"Delete"}),Object(m.jsx)("li",{className:zi.a.DropdownOption,onClick:function(){b(!1),x.current.disabled=!1,x.current.focus()},children:"Rename"})]}):null]})]})})]})},Zi=function(e){var t=e.videos,a=e.setShouldFetch;return Object(m.jsxs)("div",{className:Wi.a.Projects,children:[Object(m.jsx)("h2",{className:Wi.a.Heading,children:"My projects"}),Object(m.jsx)("p",{className:Wi.a.Subheading,children:"All your video and audio files in one place."}),Object(m.jsxs)("div",{className:Wi.a.ProjectsList,children:[Object(m.jsxs)("div",{className:Wi.a.AddProject,children:[Object(m.jsx)(L.b,{className:Wi.a.AddProjectInner,to:"/editor/new",children:Object(m.jsx)("div",{className:Wi.a.AddProjectText,children:Object(m.jsx)("span",{children:"+ Add new"})})}),Object(m.jsx)("div",{className:Wi.a.AddProjectInfo})]}),t?t.map((function(e){return Object(m.jsx)("div",{className:Wi.a.ProjectContainer,children:Object(m.jsx)(Gi,{video:e,setShouldFetch:a})},e._id)})):Object(m.jsx)(za,{style:{width:"60px",height:"60px"}})]})]})},qi=a(49),Ki=a.n(qi),Ji=a(70),Qi=a.n(Ji),$i=a(71),ec=a.n($i),tc=function(e){var t=e.template,a=e.clickHandler;return Object(m.jsx)("div",{className:ec.a.Template,children:Object(m.jsx)("div",{className:ec.a.TemplateInner,children:Object(m.jsx)("div",{className:ec.a.TemplateImgContainer,children:Object(m.jsx)("img",{src:t.image_url,className:ec.a.TemplateImg,alt:"template",onClick:function(){return a(t)}})})})})},ac=function(e){var t=e.current,a=e.templates,n=e.dispatch,r=Object(P.g)(),o=function(e){n({type:"setSelectedTemplate",data:Object(ae.a)({},e)}),r.push("/editor/new")};return Object(m.jsxs)("div",{className:Qi.a.TemplateList,children:[Object(m.jsx)("h2",{className:Qi.a.Heading,children:t}),Object(m.jsx)("p",{className:Qi.a.Subheading,children:"Make your vlog, webinar or intervew video look professional"}),Object(m.jsx)("div",{className:Qi.a.List,children:a.commonTemplate.filter((function(e){return e.resize===t})).map((function(e){return Object(m.jsx)(tc,{template:e,clickHandler:o},e._id)}))})]})},nc=function(e){var t=e.getTemplates,a=e.templates,n=Object(c.useContext)(B).userDispatch,r=Object(c.useState)("landscape"),o=Object(d.a)(r,2),i=o[0],s=o[1];return Object(c.useEffect)((function(){a||t()}),[a,t]),Object(m.jsxs)("div",{className:Ki.a.Templates,children:[Object(m.jsxs)("ul",{className:Ki.a.TemplateTypes,children:[Object(m.jsx)("li",{className:[Ki.a.TemplateType,"landscape"===i?Ki.a.Current:null].join(" "),onClick:function(){return s("landscape")},children:"Landscape"}),Object(m.jsx)("li",{className:[Ki.a.TemplateType,"square"===i?Ki.a.Current:null].join(" "),onClick:function(){return s("square")},children:"Square"}),Object(m.jsx)("li",{className:[Ki.a.TemplateType,"vertical"===i?Ki.a.Current:null].join(" "),onClick:function(){return s("vertical")},children:"Vertcal"})]}),a?Object(m.jsx)(ac,{templates:a,dispatch:n,current:i}):Object(m.jsx)(za,{style:{width:"80px",height:"80px",marginTop:"50px"}})]})},rc=a(30),oc=a.n(rc),ic=a(72),cc=a.n(ic),sc=function(e){var t=e.placeholder,a=e.type,n=e.invalid,r=e.setValue,o=e.value,i=e.name,c=e.errorMessage;return Object(m.jsxs)("div",{className:cc.a.InputContainer,children:[Object(m.jsx)("input",{className:[cc.a.Input,n?cc.a.Invalid:null].join(" "),placeholder:t,type:a,value:o,name:i,onBlur:function(){var e=""===o.trim();n&&!e&&r((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{invalid:!1})}))},onFocus:function(){n&&r((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{value:""})}))},onChange:function(e){return r((function(t){return Object(ae.a)(Object(ae.a)({},t),{},{value:e.target.value})}))}}),n?Object(m.jsx)("div",{className:cc.a.ErrorMessage,children:c}):null]})},lc=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(e,t){return new Promise((function(a,n){D.put("/user/".concat(t),e).then((function(e){a(e)})).catch((function(e){n(e)}))}))}),[]),b=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t,a){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),n(!0),e.prev=2,e.next=5,u(t,a);case 5:r=e.sent,l.current&&s(r.data),console.log(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error Updating User Information",e.t0);case 13:return e.prev=13,l.current&&n(!1),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[2,10,13,17]])})));return function(t,a){return e.apply(this,arguments)}}(),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isUpdatingUserInfo:a,updateUserInfo:b,updatedUserInfo:i}},uc=function(e){var t=e.setShouldFetch,a=Object(c.useContext)(B).userState,n=lc(),r=n.isUpdatingUserInfo,o=n.updateUserInfo,i=n.updatedUserInfo,s=Object(c.useState)({value:"",invalid:!1,type:"text",name:"name",placeholder:"Name",errorMessage:"Please enter your name"}),l=Object(d.a)(s,2),u=l[0],b=l[1],p=Object(c.useState)({value:"",invalid:!1,type:"email",name:"email",placeholder:"Email address",errorMessage:"Please enter your email"}),j=Object(d.a)(p,2),h=j[0],f=j[1];Object(c.useEffect)((function(){a.email.length>0&&(b((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{value:a.name})})),f((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{value:a.email})})))}),[a]),Object(c.useEffect)((function(){i&&(localStorage.setItem("token",i.token),si(i.token),t(!0))}),[i,t]);return Object(m.jsxs)("div",{className:oc.a.Settings,children:[Object(m.jsx)("h1",{className:oc.a.Heading,children:"Settings"}),Object(m.jsxs)("form",{className:oc.a.Form,onSubmit:function(e){e.preventDefault();var t=Yo(h.value),n=""!==u.value.trim();""!==a.name||n||(n=!0),(h.value.trim()!==a.email||u.value.trim()!==a.name)&&n&&t&&a.id?o({firstName:u.value,email:h.value},a.id):(t||f((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{invalid:!0})})),n||b((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{invalid:!0})})))},children:[Object(m.jsx)("label",{className:oc.a.Label,htmlFor:"name",children:"Name"}),Object(m.jsx)(sc,Object(ae.a)(Object(ae.a)({},u),{},{setValue:b})),Object(m.jsx)("label",{className:oc.a.Label,htmlFor:"email",children:"Email"}),Object(m.jsx)(sc,Object(ae.a)(Object(ae.a)({},h),{},{setValue:f})),Object(m.jsxs)("div",{className:oc.a.ButtonSpinnerContainer,children:[Object(m.jsx)("button",{className:oc.a.UpdateButton,disabled:r,children:"Update"}),r?Object(m.jsx)(za,{style:{width:"20px",height:"20px"}}):null]})]}),Object(m.jsxs)("div",{className:oc.a.Billing,children:[Object(m.jsx)("h1",{className:oc.a.SubHeading,children:"Billing"}),Object(m.jsx)("p",{className:oc.a.Plan,children:"Current plan: Free"}),Object(m.jsx)("p",{className:oc.a.Renewal,children:"Renewal period: Forever"}),Object(m.jsx)("button",{className:oc.a.CancelButton,onClick:function(){},children:"Upgrade to Starter"})]})]})},dc=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(){return new Promise((function(e,t){D.get("/videos").then((function(t){e(t)})).catch((function(e){t(e)}))}))}),[]),b=Object(c.useCallback)(Object(k.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,u();case 4:t=e.sent,l.current&&s(t.data),console.log(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error Getting Videos",e.t0);case 12:return e.prev=12,l.current&&n(!1),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[1,9,12,16]])}))),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isGettingVideos:a,getVideos:b,videos:i}},bc=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useRef)(!1),u=Object(c.useCallback)((function(){return new Promise((function(e,t){D.get("/user/current").then((function(t){e(t)})).catch((function(e){t(e)}))}))}),[]),b=Object(c.useCallback)(Object(k.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(null),n(!0),e.prev=2,e.next=5,u();case 5:t=e.sent,l.current&&s(t.data),console.log(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error Getting User Information",e.t0);case 13:return e.prev=13,l.current&&n(!1),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[2,10,13,17]])}))),[u]);return Object(c.useEffect)((function(){return l.current=!0,function(){return l.current=!1}}),[]),{isGettingUserInfo:a,getUserInfo:b,userInfo:i}},pc=function(){var e=Object(c.useContext)(B).userDispatch,t=Object(P.j)(),a=dc(),n=a.getVideos,r=a.videos,o=bc(),i=o.getUserInfo,s=o.userInfo,l=fn(),u=l.getTemplates,b=l.templates,p=Object(c.useState)(!0),j=Object(d.a)(p,2),h=j[0],f=j[1],g=Object(c.useState)(!0),O=Object(d.a)(g,2),v=O[0],S=O[1];return Object(c.useEffect)((function(){e({type:"setSelectedTemplate",data:null})}),[e]),Object(c.useEffect)((function(){h&&(f(!1),n())}),[n,h]),Object(c.useEffect)((function(){v&&(S(!1),i())}),[v,i]),Object(c.useEffect)((function(){if(s){var t=s.email,a="",n=s._id;s.firstName?a=s.firstName:s.googleInfo&&s.googleInfo.given_name?a=s.googleInfo.given_name:s.googleInfo&&s.googleInfo.name&&(a=s.googleInfo.name),e({type:"setUserInfo",data:{email:t,name:a,id:n}})}}),[s,e]),Object(m.jsxs)("div",{className:bi.a.Homepage,children:[Object(m.jsx)(Fi,{}),Object(m.jsxs)("div",{className:bi.a.Main,children:[Object(m.jsx)(Hi,{}),Object(m.jsxs)(P.d,{children:[Object(m.jsx)(P.b,{path:"".concat(t.path,"/templates"),children:Object(m.jsx)(nc,{getTemplates:u,templates:b})}),Object(m.jsx)(P.b,{exact:!0,path:"".concat(t.path,"/projects"),children:Object(m.jsx)(Zi,{videos:r,setShouldFetch:f})}),Object(m.jsx)(P.b,{exact:!0,path:"".concat(t.path,"/settings"),children:Object(m.jsx)(uc,{setShouldFetch:S})}),Object(m.jsx)(P.a,{to:"".concat(t.path,"/projects")})]})]})]})},jc={isAuthenticated:!1,name:"",email:"",id:null,selectedTemplate:null},hc=function(e,t){switch(t.type){case"setIsAuthenticated":return Object(ae.a)(Object(ae.a)({},e),{},{isAuthenticated:t.data});case"setUserInfo":return Object(ae.a)(Object(ae.a)({},e),{},{name:t.data.name,email:t.data.email,id:t.data.id});case"setSelectedTemplate":return Object(ae.a)(Object(ae.a)({},e),{},{selectedTemplate:t.data});default:return e}},fc=function(){var e=Object(c.useReducer)(hc,jc),t=Object(d.a)(e,2);return[t[0],t[1]]},gc=function(e){Object(c.useEffect)((function(){var t=setInterval((function(){e()}),18e6);return function(){return clearInterval(t)}}),[e])},Oc=a(25),mc=a.n(Oc),vc=a.p+"static/media/exportArrow.a5f3dc35.svg",Sc=a.p+"static/media/copyLink.5981ccb5.svg",xc=a(118),Cc=a.n(xc),_c=a(50),wc=a.n(_c),kc=a.p+"static/media/play.bf489b35.svg",yc=a.p+"static/media/pause.a3096265.svg",Tc=a.p+"static/media/fullScreen.08af1b32.svg",Nc=function(e){var t;document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():(t=e).requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},Dc=a(119),Ac=a.n(Dc),Ic=a(172),Rc=a.n(Ic),Ec=function(e,t,a,n){n.current.style.backgroundSize=100*(e-t)/(a-t)+"% 100%"},Pc=function(e){var t=e.min,a=e.max,n=e.step,r=e.value,o=e.setValue,i=e.isPlaying,s=e.video,l=Object(c.useRef)(null),u=Object(c.useState)(!1),b=Object(d.a)(u,2),p=b[0],j=b[1];Object(c.useEffect)((function(){Ec(r,t,a,l)}),[r,t,a]);return Object(m.jsx)("input",{type:"range",ref:l,className:Rc.a.Slider,min:t,max:a,step:n,value:r,onChange:function(e){o(e.target.value),s.currentTime=e.target.value},onMouseDown:function(e){i?(j(!0),s.pause()):j(!1)},onMouseUp:function(e){p&&s.play()}})},Lc=function(e){var t=e.duration,a=e.time,n=e.setTime,r=e.isPlaying,o=e.video,i=Object(c.useState)(!1),s=Object(d.a)(i,2),l=s[0],u=s[1],b=Object(c.useRef)(null),p=Object(c.useState)("00:00"),j=Object(d.a)(p,2),h=j[0],f=j[1],g=Object(c.useCallback)((function(e){var t="",a=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);a>0?(t+=a<10?"0"+a+":":a+":",u(!0)):u(!1),n<10&&(t+="0"),t+=n+":",r<10&&(t+="0"),f(t+=r)}),[]);return Object(c.useEffect)((function(){b.current.style.width=l?"4rem":"3rem"}),[l]),Object(c.useEffect)((function(){g(a)}),[a,g]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{ref:b,className:Ac.a.Time,children:h}),Object(m.jsx)("div",{className:Ac.a.Timeline,children:Object(m.jsx)(Pc,{min:"0",max:t,step:"0.01",value:a,setValue:n,isPlaying:r,video:o})})]})},Fc=a(73),Mc=a.n(Fc),Bc=a.p+"static/media/volume.d174078d.svg",Hc=a(173),Uc=a.n(Hc),Wc=function(e){var t=e.min,a=e.max,n=e.step,r=e.value,o=e.setValue,i=Object(c.useRef)(null);return Object(c.useEffect)((function(){Ec(r,t,a,i)}),[r,t,a]),Object(m.jsx)("input",{type:"range",ref:i,className:Uc.a.Slider,min:t,max:a,step:n,value:r,onChange:function(e){return o(e.target.value)}})},Vc=function(e){var t=e.video,a=e.volume,n=e.setVolume,r=Object(c.useRef)("1");Object(c.useEffect)((function(){0!==+a&&(r.current=a),t.volume=a}),[t,a]);return Object(m.jsxs)("button",{className:Mc.a.Volume,children:[Object(m.jsxs)("div",{className:Mc.a.VolumeButton,onClick:function(){0===+a&&+r.current>.1?n(r.current):0===+a?(r.current="1",n("1")):(r.current=a,n("0"))},children:[Object(m.jsx)("img",{src:Bc,alt:"volume"}),0===+a?Object(m.jsx)("div",{className:Mc.a.VolumeOff}):null]}),Object(m.jsx)("div",{className:Mc.a.VolumeBar,children:Object(m.jsx)(Wc,{min:"0",max:"1",step:"0.1",value:a,setValue:n})})]})},zc=function(e,t,a){var n=Object(c.useState)(0),r=Object(d.a)(n,2),o=r[0],i=r[1],s=Object(c.useRef)(!1),l=Object(c.useRef)(null),u=function(e){"controls"===e.target.id&&i((function(e){return e+1}))};Object(c.useEffect)((function(){1===o?l.current=setTimeout((function(){s.current&&(i(0),e())}),300):o>1&&(l.current&&(clearTimeout(l.current),l.current=null),i(0),t())}),[o,e,t]),Object(c.useEffect)((function(){var e=a.current;return e.addEventListener("click",u),function(){return e.removeEventListener("click",u)}}),[a]),Object(c.useEffect)((function(){return s.current=!0,function(){return s.current=!1}}),[])},Yc=function(e,t,a,n,r,o,i){var s=Object(c.useState)(!1),l=Object(d.a)(s,2),u=l[0],b=l[1],p=Object(c.useRef)(!1),j=Object(c.useRef)(null),h=Object(c.useRef)(null),f=Object(c.useCallback)((function(e,t,a){e.current&&(clearTimeout(e.current),e.current=null),e.current=setTimeout((function(){p.current&&(t.current.classList.remove(a),e.current=null)}),3e3)}),[]),g=Object(c.useCallback)((function(){t.current.classList.add(r),e&&!u?f(j,t,r):e&&u&&j.current&&(clearTimeout(j.current),j.current=null)}),[e,u,t,f,r]),O=Object(c.useCallback)((function(){return b(!0)}),[]),m=Object(c.useCallback)((function(){return b(!1)}),[]);Object(c.useEffect)((function(){t.current.classList.add(r)}),[t,r]),Object(c.useEffect)((function(){e?(t.current.classList.remove(n),u||f(j,t,r)):(t.current.classList.add(n),t.current.classList.add(r))}),[e,t,n,f,r,u]),Object(c.useEffect)((function(){e&&o&&!u?(i(!1),t.current.classList.add(n),f(h,t,n)):i(!1)}),[t,r,o,i,n,f,e,u]),Object(c.useEffect)((function(){var e=t.current,n=a.current;return e.addEventListener("mousemove",g),n.addEventListener("mouseenter",O),n.addEventListener("mouseleave",m),function(){e.removeEventListener("mousemove",g),n.removeEventListener("mouseenter",O),n.removeEventListener("mouseleave",m)}}),[t,a,g,O,m]),Object(c.useEffect)((function(){return p.current=!0,function(){return p.current=!1}}),[])},Xc=function(e,t,a,n){var r=Object(c.useCallback)((function(r){"INPUT"===document.activeElement.tagName&&r.preventDefault();var o="Space"===r.code||"Space"===r.key;o?(r.preventDefault(),t()):"ArrowLeft"!==r.code&&"ArrowLeft"!==r.key||r.shiftKey?"ArrowRight"!==r.code&&"ArrowRight"!==r.key||r.shiftKey?"ArrowUp"!==r.code&&"ArrowUp"!==r.key||r.shiftKey?"ArrowDown"!==r.code&&"ArrowDown"!==r.key||r.shiftKey||(r.preventDefault(),a((function(e){return+e>0?Math.round(100*(+e-.1))/100+"":e}))):(r.preventDefault(),a((function(e){return+e<1?Math.round(100*(+e+.1))/100+"":e}))):e.currentTime=e.currentTime+5:e.currentTime=e.currentTime-5,o||n(!0)}),[e,t,a,n]);Object(c.useEffect)((function(){return window.addEventListener("keydown",r),function(){return window.removeEventListener("keydown",r)}}),[r])},Gc=function(e){var t=e.video,a=e.container,n=e.duration,r=e.time,o=e.setTime,i=e.isPlaying,s=Object(c.useState)("1"),l=Object(d.a)(s,2),u=l[0],b=l[1],p=Object(c.useState)(!1),j=Object(d.a)(p,2),h=j[0],f=j[1],g=Object(c.useRef)(null),O=Object(c.useRef)(null),v=Object(c.useCallback)((function(){i?t.pause():t.play()}),[i,t]),S=Object(c.useCallback)((function(){Nc(a)}),[a]),x=Object(c.useCallback)((function(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||!t?t&&t.classList.add(wc.a.FullScreenSize):t.classList.remove(wc.a.FullScreenSize)}),[t]);return Object(c.useEffect)((function(){return document.addEventListener("fullscreenchange",x),document.addEventListener("webkitfullscreenchange",x),document.addEventListener("mozfullscreenchange",x),document.addEventListener("MSFullscreenChange",x),function(){document.removeEventListener("fullscreenchange",x),document.removeEventListener("webkitfullscreenchange",x),document.removeEventListener("mozfullscreenchange",x),document.removeEventListener("MSFullscreenChange",x)}}),[x]),Xc(t,v,b,f),zc(v,S,g),Yc(i,g,O,wc.a.Visible,wc.a.Hover,h,f),Object(m.jsx)("div",{id:"controls",className:wc.a.Controls,ref:g,children:Object(m.jsxs)("div",{className:wc.a.ControlsPanel,ref:O,children:[Object(m.jsx)("button",{className:wc.a.PlayPause,onClick:v,children:i?Object(m.jsx)("img",{src:yc,alt:"pause"}):Object(m.jsx)("img",{src:kc,alt:"play"})}),Object(m.jsx)(Lc,{duration:n,time:r,setTime:o,isPlaying:i,video:t}),Object(m.jsx)(Vc,{video:t,volume:u,setVolume:b}),Object(m.jsx)("button",{className:wc.a.FullScreen,onClick:S,children:Object(m.jsx)("img",{src:Tc,alt:"full screen"})})]})})},Zc=function(e){var t=e.url,a=Object(c.useState)(0),n=Object(d.a)(a,2),r=n[0],o=n[1],i=Object(c.useRef)(null),s=Object(c.useRef)(null),l=Object(c.useState)(0),u=Object(d.a)(l,2),b=u[0],p=u[1],j=Object(c.useState)(!1),h=Object(d.a)(j,2),f=h[0],g=h[1];return Object(m.jsxs)("div",{className:Cc.a.VideoContainer,ref:s,children:[Object(m.jsx)("video",{className:Cc.a.Video,src:t,preload:"auto",ref:i,onLoadedMetadata:function(){return o(i.current.duration)},onTimeUpdate:function(){return p(i.current.currentTime)},onPlay:function(){return g(!0)},onPause:function(){return g(!1)}}),r?Object(m.jsx)(Gc,{video:i.current,container:s.current,duration:r,time:b,setTime:p,isPlaying:f}):null]})},qc=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(c.useState)(null),u=Object(d.a)(l,2),b=u[0],p=u[1],j=Object(c.useRef)(!1),h=Object(c.useCallback)((function(e){return new Promise((function(t,a){D.get("/public/videos/".concat(e)).then((function(e){t(e)})).catch((function(e){a(e)}))}))}),[]),f=Object(c.useCallback)(function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(null),n(!0),e.prev=2,e.next=5,h(t);case 5:a=e.sent,j.current&&s({finalUrl:a.data.final_video_url||null,title:a.data.title}),console.log(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),j.current&&p(e.t0),console.log("Error Getting Public Video",e.t0);case 14:return e.prev=14,j.current&&n(!1),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[2,10,14,18]])})));return function(t){return e.apply(this,arguments)}}(),[h]);return Object(c.useEffect)((function(){return j.current=!0,function(){return j.current=!1}}),[]),{isGettingPublicVideo:a,getPublicVideo:f,publicInfo:i,getPublicVideoError:b}},Kc=function(e){var t=Object(c.useState)(null),a=Object(d.a)(t,2),n=a[0],r=a[1],o=Object(c.useState)(!1),i=Object(d.a)(o,2),s=i[0],l=i[1],u=Object(c.useState)(!0),b=Object(d.a)(u,2),p=b[0],j=b[1],h=Object(c.useState)(null),f=Object(d.a)(h,2),g=f[0],O=f[1],m=Object(c.useRef)(!1),v=Object(c.useCallback)((function(){return new Promise((function(e,t){D.get("/refresh-token").then((function(t){e(t)})).catch((function(e){t(e)}))}))}),[]),S=Object(c.useCallback)(Object(k.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(null),O(null),e.prev=2,e.next=5,v();case 5:t=e.sent,console.log(t),m.current&&r(t.data.accessToken),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),O(e.t0),console.log("Error Refreshing Token",e.t0);case 14:return e.prev=14,e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])}))),[v]),x=Object(c.useCallback)((function(e){j(!0),si(e),S()}),[S]);return Object(c.useEffect)((function(){n?(localStorage.setItem("token",n),si(n),l(!0),e({type:"setIsAuthenticated",data:!0})):g&&localStorage.removeItem("token"),j(!1)}),[n,g,e]),Object(c.useEffect)((function(){var e=localStorage.getItem("token");e?x(e):(j(!1),l(!1))}),[x]),Object(c.useEffect)((function(){return m.current=!0,function(){return m.current=!1}}),[]),{isChecking:p,isAuth:s}},Jc=function(){var e=Object(c.useContext)(B).userDispatch,t=Kc(e),a=t.isChecking,n=t.isAuth,r=Br(),o=r.getVideo,i=r.info,s=r.getVideoError,l=qc(),u=l.getPublicVideo,b=l.publicInfo,p=l.getPublicVideoError,j=Object(c.useState)(null),h=Object(d.a)(j,2),f=h[0],g=h[1],O=Object(c.useState)(null),v=Object(d.a)(O,2),S=v[0],x=v[1],C=Object(c.useRef)(null),_=Object(P.i)(),w=Object(P.g)();Object(c.useEffect)((function(){i&&i.finalText?(g(Object(ae.a)({},i)),x(i.finalText)):b&&b.finalUrl&&g(Object(ae.a)({},b))}),[i,b]),Object(c.useEffect)((function(){(s||i&&!i.finalUrl)&&(_&&_.id&&u(_.id))}),[s,i,w,_,u]),Object(c.useEffect)((function(){(p||b&&!b.finalUrl)&&w.push("/home")}),[b,w,p]),Object(c.useEffect)((function(){var e=_&&_.id;a||n||!e?!a&&n&&e&&o(_.id):u(_.id)}),[a,n,_,u,o]);return Object(m.jsx)("div",{className:mc.a.Preview,children:f&&f.finalUrl?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H,{videoData:f,isPreview:!0,getVideoError:s,isAuth:n}),Object(m.jsx)("main",{className:mc.a.Main,children:Object(m.jsxs)("div",{className:mc.a.MainContent,children:[Object(m.jsxs)("div",{className:mc.a.CustomPlayer,children:[Object(m.jsx)(Zc,{url:f.finalUrl}),Object(m.jsx)("a",{ref:C,style:{display:"none"},href:"".concat("https://holovan.eu.ngrok.io","/api/v1/public/videos/download/").concat(_.id),children:"Download Video"})]}),Object(m.jsxs)("div",{className:mc.a.VideoFooter,children:[Object(m.jsx)("p",{className:mc.a.Title,children:f.title}),Object(m.jsxs)("div",{className:mc.a.DownloadAndLink,children:[Object(m.jsx)("button",{className:mc.a.Download,onClick:function(){C.current.click()},children:"Download"}),Object(m.jsxs)("button",{className:mc.a.CopyLink,onClick:function(){navigator.clipboard.writeText(window.location.href)},children:[Object(m.jsx)("img",{src:Sc,alt:"copy"}),Object(m.jsx)("span",{children:"Copy public link"})]})]})]}),S?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:mc.a.HeadlineAndExport,children:[Object(m.jsx)("p",{className:mc.a.Headline,children:"Give your articale a headline!"}),Object(m.jsxs)("button",{className:mc.a.ExportButton,onClick:function(){return function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}(S,f.title)},children:[Object(m.jsx)("span",{children:"Export text"}),Object(m.jsx)("img",{src:vc,alt:"arrow"})]})]}),Object(m.jsx)("p",{className:mc.a.Text,children:S})]}):null]})})]}):Object(m.jsx)(za,{style:{width:"100px",height:"100px"}})})};Oe.fabric.Video=Oe.fabric.util.createClass(Oe.fabric.Image,{type:"video",cropRect:null,id:null,cornerRadius:0,originalWidth:0,originalHeight:0,crossOrigin:"Anonymous",initialize:function(e,t){t=t||{},this.callSuper("initialize",e,Object.assign({},{lockRotation:!0,objectCaching:!0,strokeUniform:!0,crossOrigin:"Anonymous",cacheProperties:["time"]},t))},toObject:function(e){return Oe.fabric.util.object.extend(this.callSuper("toObject"),{type:this.get("type"),cropRect:this.get("cropRect"),id:this.get("id"),cornerRadius:this.get("cornerRadius"),originalWidth:this.get("originalWidth"),originalHeight:this.get("originalHeight"),crossOrigin:this.get("crossOrigin")})},_draw:function(e,t,a,n){var r=this.cropRect,o={x:-this.width/2,y:-this.height/2,w:this.width,h:this.height};r?t.drawImage(e,r.x,r.y,r.w,r.h,o.x,o.y,o.w,o.h):t.drawImage(e,o.x,o.y,o.w,o.h)},_render:function(e){this._draw(this.getElement(),e),this._stroke(e),this._renderPaintInOrder(e)}}),Oe.fabric.Video.prototype.setControlsVisibility({tl:!0,tr:!0,bl:!0,br:!0,mtr:!1}),Oe.fabric.Video.fromObject=function(e,t){return Oe.fabric.Object._fromObject("Video",e,t,"type","cropRect","id","originalWidth","originalHeight")},Oe.fabric.SpeakerCropBox=Oe.fabric.util.createClass(Oe.fabric.Rect),Oe.fabric.SpeakerCropBox.prototype.setControlsVisibility({mtr:!1}),Oe.fabric.RectCropBox=Oe.fabric.util.createClass(Oe.fabric.Rect),Oe.fabric.RectCropBox.prototype.setControlsVisibility({mtr:!1}),Oe.fabric.RectCropBox.prototype.render=(Pi=Oe.fabric.RectCropBox.prototype.render,function(e){Pi.apply(this,arguments),this._renderControls(e),this.canvas._activeObject||(this.canvas._activeObject=this)}),Oe.fabric.CircleCropBox=Oe.fabric.util.createClass(Oe.fabric.Circle),Oe.fabric.CircleCropBox.prototype.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,mtr:!1}),Oe.fabric.CircleCropBox.prototype.render=function(e){return function(t){e.apply(this,arguments),this._renderControls(t),this.canvas._activeObject||(this.canvas._activeObject=this)}}(Oe.fabric.CircleCropBox.prototype.render),Oe.fabric.CustomTextbox=Oe.fabric.util.createClass(Oe.fabric.Textbox,{type:"customTextbox",cursorWidth:.5,toObject:function(e){return Oe.fabric.util.object.extend(this.callSuper("toObject"),{type:this.get("type"),cursorWidth:this.get("cursorWidth")})}}),Oe.fabric.CustomTextbox.fromObject=function(e,t){return Oe.fabric.Object._fromObject("CustomTextbox",e,t,"customTextbox")},Oe.fabric.Subtitle=Oe.fabric.util.createClass(Oe.fabric.Textbox,{type:"subtitle",id:"subtitle",paddingX:0,paddingY:0,_getNonTransformedDimensions:function(){return new Oe.fabric.Point(this.width+this.paddingX,this.height+this.paddingY)},_calculateCurrentDimensions:function(){return Oe.fabric.util.transformPoint(this._getTransformedDimensions(),this.getViewportTransform(),!0)},toObject:function(e){return Oe.fabric.util.object.extend(this.callSuper("toObject"),{type:this.get("type"),id:this.get("id"),paddingX:this.get("paddingX"),paddingY:this.get("paddingY"),editable:this.get("editable"),breakWords:this.get("breakWords")})}}),Oe.fabric.Subtitle.fromObject=function(e,t){return Oe.fabric.Object._fromObject("Subtitle",e,t,"subtitle")},Oe.fabric.Subtitle.prototype._wrapLine=function(e,t,a,n){var r=0,o=this.splitByGrapheme,i=[],c=[],s=o?Oe.fabric.util.string.graphemeSplit(e):e.split(this._wordJoiners),l="",u=0,d=o?"":" ",b=0,p=0,j=0,h=!0,f=o?0:this._getWidthOfCharSpacing();a-=n=n||0,0===s.length&&s.push([]);for(var g=0;g<s.length;g++){if(l=o?s[g]:Oe.fabric.util.string.graphemeSplit(s[g]),b=this._measureWord(l,t,u),u+=l.length,this.breakWords&&b>=a){h||(c.push(d),h=!0);for(var O=0;O<l.length;O++){var m=l[O],v=this.getMeasuringContext().measureText(m).width*this.fontSize/this.CACHE_FONT_SIZE;r+v>a?(i.push(c),(c=[]).push(m),r=v):(c.push(m),r+=v)}l=[]}else r+=p+b-f;r>=a&&!h?(i.push(c),c=[],r=b,h=!0):r+=f,h||o||c.push(d),c=c.concat(l),p=o?0:this._measureWord([d],t,u),u++,h=!1,b>j&&!this.breakWords&&(j=b)}return g&&i.push(c),j+n>this.dynamicMinWidth&&(this.dynamicMinWidth=j-f+n),i},Oe.fabric.CustomImage=Oe.fabric.util.createClass(Oe.fabric.Image,{type:"customImage",cropRect:null,id:null,cornerRadius:0,originalWidth:0,originalHeight:0,crossOrigin:"Anonymous",isSvg:!1,initialize:function(e,t){t=t||{},this.callSuper("initialize",e,Object.assign({},{objectCaching:!0,crossOrigin:"Anonymous"},t))},toObject:function(e){return Oe.fabric.util.object.extend(this.callSuper("toObject"),{type:this.get("type"),cropRect:this.get("cropRect"),id:this.get("id"),cornerRadius:this.get("cornerRadius"),originalWidth:this.get("originalWidth"),originalHeight:this.get("originalHeight"),crossOrigin:this.get("crossOrigin"),isSvg:this.get("isSvg")})},_draw:function(e,t,a,n){var r=this.cropRect,o={x:-this.width/2,y:-this.height/2,w:this.width,h:this.height};r?t.drawImage(e,r.x,r.y,r.w,r.h,o.x,o.y,o.w,o.h):t.drawImage(e,o.x,o.y,o.w,o.h)},_render:function(e){this._draw(this.getElement(),e)}}),Oe.fabric.CustomImage.fromURL=function(e,t,a){Oe.fabric.util.loadImage(e,(function(e,n){t&&t(new Oe.fabric.CustomImage(e,a),n)}),null,a&&a.crossOrigin)},Oe.fabric.CustomImage.fromObject=function(e,t){var a=Oe.fabric.util.object.clone(e);Oe.fabric.util.loadImage(a.src,(function(e,n){n?t&&t(null,!0):Oe.fabric.CustomImage.prototype._initFilters.call(a,a.filters,(function(n){a.filters=n||[],Oe.fabric.CustomImage.prototype._initFilters.call(a,[a.resizeFilter],(function(n){a.resizeFilter=n[0],Oe.fabric.util.enlivenObjects([a.clipPath],(function(n){a.clipPath=n[0];var r=new Oe.fabric.CustomImage(e,a);t(r,!1)}))}))}))}),null,a.crossOrigin)};var Qc=a.p+"static/media/ctrlScale.3fdf1e45.svg",$c=a.p+"static/media/ctrlStretch.366a4843.svg",es=a.p+"static/media/ctrlRotate.aba272aa.svg",ts=Oe.fabric.controlsUtils.wrapWithFixedAnchor,as=Oe.fabric.controlsUtils.wrapWithFireEvent,ns=Oe.fabric.controlsUtils.getLocalPoint;Oe.fabric.Canvas.prototype._finalizeCurrentTransform=function(e){var t,a=this._currentTransform,n=a.target,r={e:e,target:n,transform:a,action:a.action};n._scaling&&(n._scaling=!1),n.setCoords(),(a.actionPerformed||this.stateful&&n.hasStateChanged())&&(a.actionPerformed&&(t=this._addEventOptions(r,a),this._fire(t,r)),this._fire("modified",r),n.scaleCrop=null)};var rs=Math.sign||function(e){return(e>0)-(e<0)||+e},os=function(e,t,a,n,r){e.cropRect||(e.cropRect={h:e.height,w:0,x:0,y:0}),e.width=t,e.cropRect.w=t,n&&(e.cropRect.x=e.originalWidth-a),r&&(e.scaleCrop=Object(ae.a)(Object(ae.a)({},e.cropRect),{},{s:e.scaleX}))},is=function(e,t){var a=t.x<0,n=Math.abs(t.x/e.scaleX),r=e.cropRect,o=0,i=n+(o=a?r?e.originalWidth-(r.x+r.w):0:r?r.x:0);if(!e.scaleCrop&&e.originalWidth>i)os(e,n,i,a,!1);else{if(!e.scaleCrop){var c=e.originalWidth-o;os(e,c,i=c+o,a,!0)}!function(e,t,a,n){var r=e.cropRect,o=e.height*e.scaleX,i=r?r.h:e.originalHeight,c=e.scaleX*(t/e.width),s=o/c,l=e.cropRect.y+(i-s)/2;s>e.scaleCrop.h&&(c=e.scaleCrop.s,s=e.scaleCrop.h,l=e.scaleCrop.y,e.scaleCrop=null),r||(e.cropRect={w:e.width,h:0,x:0,y:0}),e.scaleX=c,e.scaleY=c,e.height=s,e.cropRect.h=s,e.cropRect.y=l,e.scaleCrop||os(e,t,a,n,!1)}(e,n,i,a)}},cs=function(e,t,a,n,r){e.cropRect||(e.cropRect={w:e.width,h:0,x:0,y:0}),e.height=t,e.cropRect.h=t,n&&(e.cropRect.y=e.originalHeight-a),r&&(e.scaleCrop=Object(ae.a)(Object(ae.a)({},e.cropRect),{},{s:e.scaleX}))},ss=function(e,t){var a=t.y<0,n=Math.abs(t.y/e.scaleX),r=e.cropRect,o=0,i=n+(o=a?r?e.originalHeight-(r.y+r.h):0:r?r.y:0);if(!e.scaleCrop&&e.originalHeight>i)cs(e,n,i,a,!1);else{if(!e.scaleCrop){var c=e.originalHeight-o;cs(e,c,i=c+o,a,!0)}!function(e,t,a,n){var r=e.cropRect,o=e.width*e.scaleX,i=r?r.w:e.originalWidth,c=e.scaleX*(t/e.height),s=o/c,l=e.cropRect.x+(i-s)/2;s>e.scaleCrop.w&&(c=e.scaleCrop.s,s=e.scaleCrop.w,l=e.scaleCrop.x,e.scaleCrop=null),r||(e.cropRect={h:e.height,w:0,x:0,y:0}),e.scaleX=c,e.scaleY=c,e.width=s,e.cropRect.w=s,e.cropRect.x=l,e.scaleCrop||cs(e,t,a,n,!1)}(e,n,i,a)}},ls=function(e,t,a,n,r){r=r||{};var o=t.target,i=r.by,c=ns(t,t.originX,t.originY,a,n),s="y"!==i?rs(c.x):1,l="x"!==i?rs(c.y):1;if(t.signX||(t.signX=s),t.signY||(t.signY=l),o.excludeFromExport||o.lockScalingFlip&&(t.signX!==s||t.signY!==l))return!1;var u=o.cropRect?o.cropRect.w:null,d=o.cropRect?o.cropRect.h:null,b=o.scaleX;i&&"x"===i?is(o,c):i&&"y"===i&&ss(o,c);var p=b!==o.scaleX,j=null!==o.cropRect&&(u!==o.cropRect.w||d!==o.cropRect.h),h=p||j;return h&&o.clipPath&&(o.clipPath=null),h},us=as("scaling",ts((function(e,t,a,n){return ls(0,t,a,n,{by:"x"})}))),ds=as("scaling",ts((function(e,t,a,n){return ls(0,t,a,n,{by:"y"})})));Oe.fabric.Object.prototype.transparentCorners=!1,Oe.fabric.Object.prototype.cornerColor="white",Oe.fabric.Object.prototype.borderColor="#6F7BD0",Oe.fabric.Object.prototype.cornerStrokeColor="#6F7BD0",Oe.fabric.Object.prototype.cornerStyle="circle",Oe.fabric.Object.prototype.objectCaching=!1,Oe.fabric.Object.prototype.lockScalingFlip=!0,Oe.fabric.Line.prototype.borderColor="transparent",Oe.fabric.Circle.prototype.noScaleCache=!1,Oe.fabric.Rect.prototype.noScaleCache=!1,Oe.fabric.Triangle.prototype.noScaleCache=!1,Oe.fabric.Line.prototype.noScaleCache=!1,Oe.fabric.ActiveSelection.prototype.borderDashArray=[12,12],Oe.fabric.Canvas.prototype._groupSelectedObjects=function(){},Oe.fabric.Canvas.prototype._drawSelection=function(){};var bs=new Image;bs.src=$c;var ps=new Image;ps.src=Qc;var js=new Image;js.src=es;var hs=Oe.fabric.controlsUtils,fs=hs.scaleSkewCursorStyleHandler,gs=hs.scaleCursorStyleHandler,Os=hs.scalingEqually,ms=hs.scalingYOrSkewingX,vs=hs.scalingXOrSkewingY,Ss=hs.scaleOrSkewActionName,xs=Oe.fabric.Object.prototype.controls,Cs=function(e){return function(t,a,n,r,o){var i=this.cornerSize;t.save(),t.translate(a,n),t.rotate(Oe.fabric.util.degreesToRadians(o.angle)),t.drawImage(e,-i/2,-i/2,i,i),t.restore()}},_s=function(e){return function(t,a,n,r,o){var i=this.cornerSize;t.save(),t.translate(a,n),t.rotate(Oe.fabric.util.degreesToRadians(o.angle)),t.drawImage(e,-i/3.2,-i/2,i/1.6,i),t.restore()}},ws=function(e){return function(t,a,n,r,o){var i=this.cornerSize;t.save(),t.translate(a,n),t.rotate(Oe.fabric.util.degreesToRadians(o.angle+90)),t.drawImage(e,-i/3.2,-i/2,i/1.6,i),t.restore()}};if(xs.ml=new Oe.fabric.Control({x:-.5,y:0,cursorStyleHandler:fs,actionHandler:vs,getActionName:Ss,cornerSize:42,offsetY:3,render:_s(bs)}),xs.mr=new Oe.fabric.Control({x:.5,y:0,cursorStyleHandler:fs,actionHandler:vs,getActionName:Ss,cornerSize:42,offsetY:3,offsetX:0,render:_s(bs)}),xs.mt=new Oe.fabric.Control({x:0,y:-.5,cursorStyleHandler:fs,actionHandler:ms,getActionName:Ss,cornerSize:42,offsetX:-3,offsetY:0,render:ws(bs)}),xs.mb=new Oe.fabric.Control({x:0,y:.5,cursorStyleHandler:fs,actionHandler:ms,getActionName:Ss,cornerSize:42,offsetX:-3,offsetY:0,render:ws(bs)}),xs.tl=new Oe.fabric.Control({x:-.5,y:-.5,cursorStyleHandler:gs,actionHandler:Os,cornerSize:32,offsetY:3,offsetX:0,render:Cs(ps)}),xs.tr=new Oe.fabric.Control({x:.5,y:-.5,cursorStyleHandler:gs,actionHandler:Os,cornerSize:32,offsetY:3,offsetX:0,render:Cs(ps)}),xs.bl=new Oe.fabric.Control({x:-.5,y:.5,cursorStyleHandler:gs,actionHandler:Os,cornerSize:32,offsetY:3,offsetX:0,render:Cs(ps)}),xs.br=new Oe.fabric.Control({x:.5,y:.5,cursorStyleHandler:gs,actionHandler:Os,cornerSize:32,offsetY:3,offsetX:0,render:Cs(ps)}),xs.mtr=new Oe.fabric.Control({x:0,y:.5,cornerSize:50,offsetY:30,actionHandler:hs.rotationWithSnapping,cursorStyleHandler:hs.rotationStyleHandler,withConnection:!1,actionName:"rotate",render:Cs(js)}),Oe.fabric.Textbox){var ks=Oe.fabric.Textbox.prototype.controls={};ks.mtr=xs.mtr,ks.mr=new Oe.fabric.Control({x:.5,y:0,actionHandler:hs.changeWidth,cursorStyleHandler:fs,actionName:"resizing",cornerSize:42,offsetY:3,render:_s(bs)}),ks.ml=new Oe.fabric.Control({x:-.5,y:0,actionHandler:hs.changeWidth,cursorStyleHandler:fs,actionName:"resizing",cornerSize:42,offsetY:3,render:_s(bs)}),Oe.fabric.Textbox.prototype.setControlsVisibility({ml:!0,mr:!0,mtr:!1})}var ys=Oe.fabric.Line.prototype.controls={};ys.mtr=xs.mtr,ys.ml=new Oe.fabric.Control({x:-.5,y:0,cursorStyleHandler:fs,actionHandler:vs,getActionName:Ss,cornerSize:30,offsetY:3,offsetX:0,render:Cs(ps)}),ys.mr=new Oe.fabric.Control({x:.5,y:0,cursorStyleHandler:fs,actionHandler:vs,getActionName:Ss,cornerSize:30,offsetY:3,offsetX:0,render:Cs(ps)}),Oe.fabric.Rect.prototype.setControlsVisibility({tl:!0,mt:!0,tr:!0,ml:!0,mr:!0,bl:!0,mb:!0,br:!0,mtr:!0}),Oe.fabric.Circle.prototype.setControlsVisibility({tl:!0,mt:!0,tr:!0,ml:!0,mr:!0,bl:!0,mb:!0,br:!0,mtr:!0}),Oe.fabric.Triangle.prototype.setControlsVisibility({tl:!0,mt:!0,tr:!0,ml:!0,mr:!0,bl:!0,mb:!0,br:!0,mtr:!0}),Oe.fabric.Line.prototype.setControlsVisibility({ml:!0,mr:!0,mtr:!0});var Ts=Oe.fabric.Image.prototype.controls={};Ts.mtr=xs.mtr,Ts.tr=xs.tr,Ts.br=xs.br,Ts.tl=xs.tl,Ts.bl=xs.bl,Oe.fabric.Image.prototype.setControlsVisibility({tl:!0,tr:!0,bl:!0,br:!0,mtr:!0}),Oe.fabric.ActiveSelection.prototype.controls={},Ts.ml=new Oe.fabric.Control({x:-.5,y:0,cursorStyleHandler:fs,actionHandler:us,getActionName:Ss,cornerSize:42,offsetY:3,render:_s(bs)}),Ts.mr=new Oe.fabric.Control({x:.5,y:0,cursorStyleHandler:fs,actionHandler:us,getActionName:Ss,cornerSize:42,offsetY:3,offsetX:1,render:_s(bs)}),Ts.mt=new Oe.fabric.Control({x:0,y:-.5,cursorStyleHandler:fs,actionHandler:ds,getActionName:Ss,cornerSize:42,offsetX:-3,offsetY:-1,render:ws(bs)}),Ts.mb=new Oe.fabric.Control({x:0,y:.5,cursorStyleHandler:fs,actionHandler:ds,getActionName:Ss,cornerSize:42,offsetX:-3,offsetY:1,render:ws(bs)});var Ns=function(){var e=fc(),t=Object(d.a)(e,2),a=t[0],n=t[1],r=li(),o=r.refreshToken,i=r.newToken,s=r.refreshError;return gc(o),Object(c.useEffect)((function(){i?(localStorage.setItem("token",i),si(i)):s&&(localStorage.removeItem("token"),n({type:"setIsAuthenticated",data:!1}))}),[i,s,n]),Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(B.Provider,{value:{userState:a,userDispatch:n},children:Object(m.jsx)(L.a,{basename:"/",children:Object(m.jsxs)(P.d,{children:[Object(m.jsx)(to,{path:"/auth",redirect:"/home",where:"in the App auth route",allowed:!a.isAuthenticated,component:ui}),Object(m.jsx)(to,{path:"/home",redirect:"/auth",where:"in the App home route",allowed:a.isAuthenticated,component:pc}),Object(m.jsx)(to,{path:"/editor",redirect:"/auth",where:"in the App editor route",allowed:a.isAuthenticated,component:ko}),Object(m.jsx)(to,{path:"/preview/:id",redirect:"/auth",where:"in the App preview route",allowed:!0,component:Jc}),Object(m.jsx)(P.b,{path:"/",children:Object(m.jsx)(P.a,{to:"/home"})})]})})})})},Ds=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,321)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),o(e),i(e)}))};u.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(Ns,{})}),document.getElementById("root")),Ds()},32:function(e,t,a){e.exports={WordContainer:"Words_WordContainer__2MxYw",Word:"Words_Word__3b2m1",DeletedText:"Words_DeletedText__1n8km",Deleted:"Words_Deleted__3CMYk",WordInput:"Words_WordInput__3lLIb",Pause:"Words_Pause__33kzp",CurrentWord:"Words_CurrentWord__3w6qS",Highlight:"Words_Highlight__cba72",DeletedImgContainer:"Words_DeletedImgContainer__2Mj9-",DeletedImg:"Words_DeletedImg__2JxpA",InSelection:"Words_InSelection__33LHP"}},33:function(e,t,a){e.exports={Dropdown:"ImageDropdown_Dropdown__2eYxV",UplaodButtonContainer:"ImageDropdown_UplaodButtonContainer__1lY8g",UploadButton:"ImageDropdown_UploadButton__1lQXO",FileInput:"ImageDropdown_FileInput__2Rzkx",Images:"ImageDropdown_Images__LZdgK",Column:"ImageDropdown_Column__27Nmx",ImageContainer:"ImageDropdown_ImageContainer__1YX4Q",Image:"ImageDropdown_Image__2oCLN"}},34:function(e,t,a){e.exports={SideDrawer:"SideDrawer_SideDrawer__1Hp4L",Links:"SideDrawer_Links__3agJG",Link:"SideDrawer_Link__26bLH",LinkText:"SideDrawer_LinkText__37vsx",Active:"SideDrawer_Active__3v6LT"}},36:function(e,t,a){e.exports={Dropdown:"ShapeDropdown_Dropdown__3aeLl",ShapeContainer:"ShapeDropdown_ShapeContainer__21oDr",LineShapeContainer:"ShapeDropdown_LineShapeContainer__1eEMT",Shape:"ShapeDropdown_Shape__3ZdgP"}},39:function(e,t,a){e.exports={FontSizeDropdown:"FontSizeDropdown_FontSizeDropdown__3vQgK",FontSizeOption:"FontSizeDropdown_FontSizeOption__5LIdC"}},40:function(e,t,a){e.exports={User:"User_User__1OH6i",UserName:"User_UserName__34wjX",Initials:"User_Initials__2M7AZ",Letter:"User_Letter__12cie",Name:"User_Name__xOAh7",DropdownContainer:"User_DropdownContainer__2Bwpp",Dots:"User_Dots__1mxvn",Dropdown:"User_Dropdown__3Dj8L",SignOut:"User_SignOut__1kQ7Q"}},41:function(e,t,a){e.exports={Projects:"Projects_Projects__Ml6Tj",Heading:"Projects_Heading__1sNm8",Subheading:"Projects_Subheading__jSsjo",ProjectsList:"Projects_ProjectsList__3ZhTK",AddProject:"Projects_AddProject__3o80h",ProjectContainer:"Projects_ProjectContainer__dr8O4",AddProjectInner:"Projects_AddProjectInner__1q9TS",AddProjectText:"Projects_AddProjectText__2pD9X",AddProjectInfo:"Projects_AddProjectInfo__1GsOm"}},43:function(e,t,a){e.exports={Transcription:"Transcription_Transcription__13teg",TextControls:"Transcription_TextControls__1U4fb",OptionContainer:"Transcription_OptionContainer__21dCM",SearchContainer:"Transcription_SearchContainer__3q-zR",SearchInput:"Transcription_SearchInput__3ojca",Text:"Transcription_Text__3pvrU"}},44:function(e,t,a){e.exports={FontsDropdown:"FontsDropdown_FontsDropdown__2cMmK",SearchContainer:"FontsDropdown_SearchContainer__2xV2U",SearchSvg:"FontsDropdown_SearchSvg__2fL_Y",SearchInput:"FontsDropdown_SearchInput__1YJKM",FontOptionsContainer:"FontsDropdown_FontOptionsContainer__3NL_l",FontOption:"FontsDropdown_FontOption__YA26x",UploadFontContainer:"FontsDropdown_UploadFontContainer__BN5oN",UploadFontButton:"FontsDropdown_UploadFontButton__2fdT4",UploadFontFile:"FontsDropdown_UploadFontFile__17exH"}},45:function(e,t,a){e.exports={ImageToolbar:"ImageToolbar_ImageToolbar__1bSOG",BorderDiv:"ImageToolbar_BorderDiv__2L57I",ReaplaceContainer:"ImageToolbar_ReaplaceContainer__Bvs6n",RadiusContainer:"ImageToolbar_RadiusContainer__1809i",CropContainer:"ImageToolbar_CropContainer__3a9ik",DoneContainer:"ImageToolbar_DoneContainer__1sU7m",RadiusInput:"ImageToolbar_RadiusInput__3neeS",StrokeWidthArrowContainer:"ImageToolbar_StrokeWidthArrowContainer__2ZaEx",BorderStyle:"ImageToolbar_BorderStyle__2Np8t"}},46:function(e,t,a){e.exports={Menu:"ContextMenu_Menu__3Crct",Option:"ContextMenu_Option__2sY3r",Border:"ContextMenu_Border__2fUH-",Overlay:"ContextMenu_Overlay__1PFYP"}},47:function(e,t,a){e.exports={SignIn:"SignIn_SignIn__2rDwX",Heading:"SignIn_Heading__3_D8_",Subheading:"SignIn_Subheading__25WFn",SignUpLink:"SignIn_SignUpLink__19pi6",FormContent:"SignIn_FormContent__2RCot",Form:"SignIn_Form__Qj1Re",GoogleLogo:"SignIn_GoogleLogo__2dqJk",GoogleLink:"SignIn_GoogleLink__1TqQV"}},48:function(e,t,a){e.exports={SignUp:"SignUp_SignUp__FrU6o",Heading:"SignUp_Heading__3VK7d",Subheading:"SignUp_Subheading__3Fzc1",SignInLink:"SignUp_SignInLink__2n2-H",FormContent:"SignUp_FormContent__2PhXm",Form:"SignUp_Form__2HSyr",GoogleLogo:"SignUp_GoogleLogo__veA94",GoogleLink:"SignUp_GoogleLink__300gn"}},49:function(e,t,a){e.exports={Templates:"Templates_Templates__18kjm",TemplateTypes:"Templates_TemplateTypes__1zVI4",TemplateType:"Templates_TemplateType__16FOn",Current:"Templates_Current__LIKEA"}},50:function(e,t,a){e.exports={Controls:"Controls_Controls__mbKVi",Visible:"Controls_Visible__2XX72",Hover:"Controls_Hover__3aOvs",ControlsPanel:"Controls_ControlsPanel__1Y7Ve",PlayPause:"Controls_PlayPause__1XJpi",FullScreen:"Controls_FullScreen__3oqLE",FullScreenSize:"Controls_FullScreenSize__68-bJ"}},55:function(e,t,a){e.exports={Progress:"Progress_Progress__2E6Dv",Percentage:"Progress_Percentage__jnSdL",Heading:"Progress_Heading__10Jj_",ProgressBar:"Progress_ProgressBar__cCNmS",ProgressBarInner:"Progress_ProgressBarInner__FR8v1",Subheading:"Progress_Subheading__2ySJW"}},56:function(e,t,a){e.exports={Dropdown:"ResizeDropdown_Dropdown__22BDd",SizeOptions:"ResizeDropdown_SizeOptions__1ScvK",SizeOption:"ResizeDropdown_SizeOption__2TmtL",SizeOptionText:"ResizeDropdown_SizeOptionText__1RHTF",SizeOptionBox:"ResizeDropdown_SizeOptionBox__T_EnZ",Current:"ResizeDropdown_Current__3enTK"}},57:function(e,t,a){e.exports={SelectContainer:"Select_SelectContainer__1RMVl",Select:"Select_Select__1aFjD",Selected:"Select_Selected__w1Ai2",Valid:"Select_Valid__2h_nP",Invalid:"Select_Invalid__2e9oA",ErrorMessage:"Select_ErrorMessage__1bWOP"}},59:function(e,t,a){e.exports={TranscriptionProgress:"TranscriptionProgress_TranscriptionProgress__3bzyV",Heading:"TranscriptionProgress_Heading__RtL03",Percentage:"TranscriptionProgress_Percentage__2n-2I",Box:"TranscriptionProgress_Box__2KSuP",Line:"TranscriptionProgress_Line__1WZ3f",placeholderShimmer:"TranscriptionProgress_placeholderShimmer__18VTb"}},60:function(e,t,a){e.exports={FontsDropdown:"TextDropdowns_FontsDropdown__lZ_Yz",FontSizeDropdown:"TextDropdowns_FontSizeDropdown__zNPWy",SketchPickerContainer:"TextDropdowns_SketchPickerContainer__1ap0H",TextAlignDropdown:"TextDropdowns_TextAlignDropdown___lslt"}},64:function(e,t,a){e.exports={Player:"Player_Player__29WZA",PlayerContent:"Player_PlayerContent__GS7Av",PlayerControls:"Player_PlayerControls__1cImT",PlayButton:"Player_PlayButton__1jzX7"}},66:function(e,t,a){e.exports={Or:"Or_Or__3D8lV",Line:"Or_Line__3NIcd",Text:"Or_Text__3K4vP"}},67:function(e,t,a){e.exports={InputContainer:"Input_InputContainer__FRPf0",Input:"Input_Input__2JU04",Invalid:"Input_Invalid__2bXHj",ErrorMessage:"Input_ErrorMessage__NGuQM"}},68:function(e,t,a){e.exports={CheckMail:"CheckMail_CheckMail__2juXE",Heading:"CheckMail_Heading__2JEwf",Subheading:"CheckMail_Subheading__3AHm5",EditorLink:"CheckMail_EditorLink__IbMoD"}},69:function(e,t,a){e.exports={Dropdown:"Dropdown_Dropdown__3ndzl",Option:"Dropdown_Option__2rSF0",Current:"Dropdown_Current__1ur6I",CheckMark:"Dropdown_CheckMark__-dXeR"}},70:function(e,t,a){e.exports={TemplateList:"TemplateList_TemplateList__1Gw1A",Heading:"TemplateList_Heading__2N4Be",Subheading:"TemplateList_Subheading__1C0Z8",List:"TemplateList_List__2XxAT"}},71:function(e,t,a){e.exports={Template:"Template_Template__1xQdM",TemplateInner:"Template_TemplateInner__hAH8x",TemplateImgContainer:"Template_TemplateImgContainer__QFgie",TemplateImg:"Template_TemplateImg__2gbr7"}},72:function(e,t,a){e.exports={InputContainer:"Input_InputContainer__2V1Cm",Input:"Input_Input__2vywp",Invalid:"Input_Invalid__36YI2",ErrorMessage:"Input_ErrorMessage__1HkEE"}},73:function(e,t,a){e.exports={Volume:"Volume_Volume__VAO_J",VolumeButton:"Volume_VolumeButton__MQ56Q",VolumeOff:"Volume_VolumeOff__1ZLBn",VolumeBar:"Volume_VolumeBar__2Lv3T"}},85:function(e,t,a){e.exports={FillDropdownContainer:"ShapeDropdowns_FillDropdownContainer__XKdBu",StrokeDropdownContainer:"ShapeDropdowns_StrokeDropdownContainer__2g9Q8",StrokeWidthDropdownContainer:"ShapeDropdowns_StrokeWidthDropdownContainer__3J5zz"}},86:function(e,t,a){e.exports={Navigation:"Navigation_Navigation__1vpyv",DownloadButton:"Navigation_DownloadButton__2FuTK",DownloadDropdown:"Navigation_DownloadDropdown__2IsbQ",DownloadLink:"Navigation_DownloadLink__3PFN5",UploadVideo:"Navigation_UploadVideo__3uZ5a",DownloadVideoContainer:"Navigation_DownloadVideoContainer__3mjYd",DownloadVideo:"Navigation_DownloadVideo__1Kc0Z",Close:"Navigation_Close__12UHs"}},87:function(e,t,a){e.exports={Navbar:"Navbar_Navbar__3oWEF",NewButton:"Navbar_NewButton__38UcV",Plus:"Navbar_Plus__3mZZD"}}},[[319,1,2]]]);
//# sourceMappingURL=main.d3bf4cb1.chunk.js.map